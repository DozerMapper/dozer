<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE project_export SYSTEM "http://sourceforge.net/export/sf_project_export_0.1.dtd">
<project_export>

<artifacts>

<artifact>
	<field name="artifact_id">3582459</field>
	<field user_id="3646682" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Support for getter/setter mapping</field>
	<field name="open_date">1351780574</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">It would be  great if I can specfy for two classes that I want to use getters and setters for mapping.

Simply, when mapping A to B instead of B.field = A.field use B.setField( A.getField() ) or B.setBooleanField( A.getBooleanField() )</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1351863039</field>
		<field name="user_name"></field>
		<field name="body">I read the description today and probably it's not clear that field names are different in classes A anb B, but getter and setter names are same.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3564349</field>
	<field user_id="3964186" name="submitted_by">yacel123</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">9</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">decide if to map specific field before </field>
	<field name="open_date">1346661544</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hi'
I have a case that map between entity (JPA) to DTO object,
I want to decide if to do a mapping to a specific field.
I want to check the LAZY option:
In case we defined the field as LAZY - do not map this field.
I guess that the place to insert code that retrieve boolean is 
under MappingProcessor -&#62; mapField -&#62; line ~253
after:
 if (fieldMapping instanceof ExcludeFieldMap) {
      return;
    }

inserting something like:

if (customFieldMapper.skipMapField(srcObj, destObj, srcFieldValue, fieldMapping.getClassMap(), fieldMapping)) {
      return;
    }


CustomFieldMapper:
===============
add the method: boolean skipMapField(Object source, Object destination, Object sourceFieldValue, ClassMap classMap, FieldMap fieldMapping);




and add this method into the </field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">891574</field>
		<field name="entrydate">1346662327</field>
		<field name="mod_by">yacel123</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1346661732</field>
		<field name="mod_by">yacel123</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1346661732</field>
		<field name="mod_by">yacel123</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1346661611</field>
		<field name="mod_by">yacel123</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3536570</field>
	<field user_id="1757269" name="submitted_by">sslavic</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Upgrade commons-lang to commons-lang3</field>
	<field name="open_date">1340194886</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Attached is patch dozer-commons-lang3.patch which upgrades commons-lang dependency to commons-lang3:3.1

Btw, somewhat related ticket can be found at:
https://sourceforge.net/tracker/?func=detail&#38;aid=3410793&#38;group_id=133517&#38;atid=727371</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">446627: dozer-commons-lang3.patch</field>
		<field name="entrydate">1340194892</field>
		<field name="mod_by">sslavic</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3533434</field>
	<field user_id="3710586" name="submitted_by">gelephantastic</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Better JAXB Enum Mapping</field>
	<field name="open_date">1339163910</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I have JAXB generated classes from XML schemas. When using an enumerated restriction, not all values are valid Java identifiers so XJC maps these to different names. The input schemas are from an external source and can't change, and unfortunately the same restrictions are copied into different types/elements instead of being reused.

When I give XJC hints to turn both of these restrictions to enums, Dozer works perfectly because it looks for enums of the same name on different types. This allows for seamless, schema-correct mapping - thank you for that!

However, if either one of the fields is a String instead of an enum, Dozer uses the name of the enum. I request that Dozer grow some smarts with JAXB enums and introspect the source enum. If the class has XmlEnum and the enum has a subsequent XmlEnumValue, that Dozer use that data for the target String instead of the name of the enum.</field>
</artifact>
<artifact>
	<field name="artifact_id">3532849</field>
	<field user_id="3873219" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">EventListner Api </field>
	<field name="open_date">1339083567</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We have a requirement to implement global security rules while mapping. We need to skip mapping certain fields based on runtime security constraints.

if we can do something similar to the following, it will greatly simply our implementation.

public void preWritingDestinationValue(DozerEvent event) {
...our code
event.skip();
}</field>
</artifact>
<artifact>
	<field name="artifact_id">3498308</field>
	<field user_id="1457598" name="submitted_by">calvinxiu</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">copy public field by default?</field>
	<field name="open_date">1331102328</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">[Avatar]
2012-03-06 20:26:28 PST
In ModelMapper, it can config to copy the public field by default, is there any method to do this in Dozer. It seem that dozer need to config fileld by field. In Play 2.0, we suggest to write domain object and DTO without getter/setter. </field>
</artifact>
<artifact>
	<field name="artifact_id">3477985</field>
	<field user_id="3707211" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Update pom dependencies</field>
	<field name="open_date">1327372549</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">With a clean maven repo, the current 5.3.2 source code will not compile due to a missing juel 2.2.1 dependency. In this ticket, the pom.xml and the osigi pom.xml will be updated to use the latest dependencies available and apply the necessary exclusions. For example, since slf4j is being used, commons-logging should be disabled.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1327373079</field>
		<field name="user_name"></field>
		<field name="body">Dependencies updated in Git commit ID fa65929f9419e8d771c145230f691b29e3c8e440.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3463827</field>
	<field user_id="3671325" name="submitted_by">lastmike</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">SLF4J 1.6</field>
	<field name="open_date">1324551755</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v.5.3.0</field>
	<field name="details">Hibernate 3.6 uses SLF4J 1.6. 
Dozer 5.3 uses  SLF4J 1.5.

Is-it possible to add support for SLF4J 1.6 in dozer?

Thank you.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1327373208</field>
		<field name="user_name"></field>
		<field name="body">I updated SLF4J to 1.6.4 and many other dependencies were updated as part of ticket 3477985.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3421668</field>
	<field user_id="1159558" name="submitted_by">sliverc</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">update collection mapping with defined primary key</field>
	<field name="open_date">1318328382</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">Currently, non cumulative collection mapping always uses equals (resp. contains or indexOf) to figure out if two objects are equal and therefore should be mapped/updated.

This works as expected. However this is limited to the case that equals and hashCode can be implemented. In some cases, there are classes where we are not able to override equals and hashCode (some business object coming from other services such as SOAP web services, ...).
Other issues occur when equals is for instance implemented as a full fledge equals (all values are compared) but such equals won't be useful in dozer.

Therefore I would suggest following idea:
On a class basis, a primary key could be defined. When such a primary key is defined, dozer will use this defined primary key to figure out whether a object is available in a collection which needs to be updated.
When there is no primary key equals we be used as it is implemented now.

Here is a sample xml snippet how this could look like:
&#60;mapping&#62;
    &#60;class-a&#62;org.someclass.TestClass&#60;/class-a&#62;
    &#60;class-a-pk-key&#62;artnr&#60;/class-a-pk-key&#62;
    &#60;class-a-pk-key&#62;extartnr&#60;/class-a-pk-key&#62;
    &#60;class-b&#62;org.someclass.TestOtherClass&#60;/class-b&#62;
    ...
&#60;/mapping&#62;

As we need such a feature on a regular basis in our company, we would invest some time to implement this. My question however is, if you think, this would fit into the concept of dozer and whether such a addition would be welcome?</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1318585752</field>
		<field name="user_name">sliverc</field>
		<field name="body">I've attached a patch which implements such a feature.

This is not a final version (even though it is working code we already use in our use cases). It is rather a base which can be used for discussions. If you think this is the way to go, I'm willing to also adjust the documentation or further adjusting the code as well.

Just let me know what you think.

About the patch:
I've created the patch with git against trunk. However it can be applied with: patch -i add-pk-key-handling.patch -p1</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">426035: add-pk-key-handling.patch</field>
		<field name="entrydate">1318585535</field>
		<field name="mod_by">sliverc</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3411582</field>
	<field user_id="2650340" name="submitted_by">arnolf</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">EL at runtime (SpEl)</field>
	<field name="open_date">1316459493</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">Hi,

first I would like to thank you for the work you\'ve done ! Great idea and great job !

I worked on a project where we needed a lots of custom converters and it was really a pain.

So we made a generic custom converter with parameter to execute script as we need. So I\'m asking you, why don\'t integrate an expression langage at runtime such as Spring EL ?

Spring EL is running very fast and has some interesting features. For example we could write :

		&#60;field&#62;
			&#60;a&#62;#{@userServiceImpl.hello(#src?.name)}&#60;/a&#62;
			&#60;b&#62;role&#60;/b&#62;
		&#60;/field&#62;

where @userServiceImpl is the spring bean ; #src is the source object - #\'{} to indicate that a script expression, and of course the mapping field should be unidectionnal.

Spring EL as some nice feature such as calling method on bean services, null-safe operator, collection projection etc...

By introducing Spring EL, it could be interesting to also add context variables, for example :

		&#60;field&#62;
			&#60;a&#62;#{@userServiceImpl.hello(#src?.name, #context)}&#60;/a&#62;
			&#60;b&#62;role&#60;/b&#62;
		&#60;/field&#62;

and mapper.map(src.class, dest, context)

Of course we could write also :

		&#60;field&#62;
			&#60;a&#62;zone&#60;/a&#62;
			&#60;b&#62;#{@userServiceImpl.hello(#src?.name, #context)}&#60;/b&#62;
		&#60;/field&#62;

Regards.

</field>
</artifact>
<artifact>
	<field name="artifact_id">3410793</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Remove Dependency to commons-lang</field>
	<field name="open_date">1316251537</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Dependency to commons-lang can be potentially removed. This will solve Weblogic compatibility issues.</field>
</artifact>
<artifact>
	<field name="artifact_id">3371150</field>
	<field user_id="3469184" name="submitted_by">topcoder123</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Different mapping types(directions) in one mapping process</field>
	<field name="open_date">1311070033</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">First of all, I'd like to thank you for this WoW project as it fixed a lot of mapping problems we've faced previously.
As a mark of appreciation, I'd like to suggest a feature that may increase your Dozers' usability which is giving the ability to write bi-directional mapping but with 
different paths in a single file, without having either different 'mapping-element' or 'custom-converter' (@see the below example

&#60;mapping type=&#34;one-way&#34;&#62;
	&#60;class-a&#62;com.example.Person&#60;/class-a&#62;
	&#60;class-b&#62;com.example.PersonPrime&#60;/class-b&#62;

	&#60;field type=&#34;one-way&#34; from=&#34;a&#34; &#62; &#60;!-- Map from 'name1' to 'namePrime' --&#62;
		&#60;a&#62;name1&#60;/a&#62;
		&#60;b&#62;namePrime&#60;/b&#62;
	&#60;/field&#62;
	&#60;field type=&#34;one-way&#34; from=&#34;b&#34;&#62; &#60;!-- Map from 'namePrime' to 'name2' --&#62;
		&#60;a&#62;name2&#60;/a&#62;
		&#60;b&#62;namePrime&#60;/b&#62;
	&#60;/field&#62;
&#60;/mapping&#62;

so we can avoid the headache of having two differnt mappings or a custom converter when having a minor change in the mapping path.

Sorry for disturbance, and keep it up :)

Dozer++;</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1312450291</field>
		<field name="mod_by">topcoder123</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1312450291</field>
		<field name="mod_by">topcoder123</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3378581</field>
	<field user_id="1638723" name="submitted_by">tomvanrossom</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">custom converter for collection elements</field>
	<field name="open_date">1311685826</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Dozer supports &#34;custom converters&#34; for mapping fields from 1 type to another type.
Dozer supports mapping elements from a collection to another collection

But dozer does not support the combination of these two.

 I would like to map the elements within a collection with a custom converter. If I specify the custom-convert on field level, it uses this to convert the whole collection, not the elements within this collection.</field>
</artifact>
<artifact>
	<field name="artifact_id">3374120</field>
	<field user_id="2900814" name="submitted_by">zaidfattuhi</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Adding the ability to add multiple configurations</field>
	<field name="open_date">1311273749</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">I have fine-grained modules in a project, and there are custom converters inside those modules.

I am trying to accompany each module with its dozer configuration, so that the final build will include all those modules with a reference to their xml files at runtime, but I can't do that at the moment  because Dozer currently doesn't allow more than one global configuration.

My suggestion is allow Dozer xml to contain multiple configurations, so that each xml flle can define its own custom converters, this makes it more flexible.

Thanks</field>
</artifact>
<artifact>
	<field name="artifact_id">3372406</field>
	<field user_id="3478288" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping costants</field>
	<field name="open_date">1311170251</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">You can't map a field with a constant value, I'd like to do as follows:

config file:

&#60;mappings ...&#62;

	&#60;mapping type=&#34;one-way&#34;&#62;

		&#60;class-a&#62;ClassA&#60;/class-a&#62;
		&#60;class-b&#62;ClassB&#60;/class-b&#62;

		&#60;field&#62;
			&#60;a&#62;field&#60;/a&#62;
			&#60;b&#62;${value}&#60;/b&#62;
		&#60;/field&#62;
                
		...
  
	&#60;/mapping&#62;

	...

&#60;/mappings&#62;

where ${value} is a placeholder

and the code:

List&#60;String&#62; mappingFiles = new ArrayList&#60;String&#62;();
mappingFiles.add(&#34;dozerMapping.xml&#34;);

Map&#60;String,Object&#62; parameters = new HashMap&#60;String,Object&#62;();
parameters.put(&#34;value&#34;, &#34;COSTANT&#34;);
			
Mapper map = new DozerBeanMapper(mappingFiles, parameters);

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1311170531</field>
		<field name="user_name"></field>
		<field name="body">I wanted to congratulate you for the excellent work done with Dozer</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">478636</field>
		<field name="entrydate">1311170531</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3308343</field>
	<field user_id="1748305" name="submitted_by">jdavid82</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Ignore Custom Converters</field>
	<field name="open_date">1306491205</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.3.1</field>
	<field name="details">The idea is to use CustomConverters only for complex mapping and use Dozer introspection abilities for simple mappings.
To do that, I had to modify MappingProcessor to allow the possibility to ignore customConverters for a single element and re-activate it for is fileds mapping. And in my customConverters, i make a first simple dozerMapping by re-call my dozerBeanMapper with ignorecustomConverters true, and then map complexe properties before return.
I just had a single boolean in MappingProcessor.map methods signature and check it before finding customConverters. Has in the MappingProcessor.mapField method I didn't pass the information, the field is than allow to use customConverters again.</field>
</artifact>
<artifact>
	<field name="artifact_id">3296169</field>
	<field user_id="3368978" name="submitted_by">severgin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Support bean containing map to map conversion</field>
	<field name="open_date">1304335584</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Need to transform bean containing map to map. Map keys from bean should become keys in the result map.</field>
</artifact>
<artifact>
	<field name="artifact_id">3281126</field>
	<field user_id="3318986" name="submitted_by">avillafranca</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">make &#60;class-a&#62;&#60;class-b&#62; optional</field>
	<field name="open_date">1302291938</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Due to some unfortunate circumstances out of my control I ended up having several copies of the same set of classes spread over different packages.

Subsequently they have the same properties but the only difference is just the package declaration (which is irrelevant for Dozer&#226;&#8364;&#8482;s reflection based mapping mechanism).

So I need to map a set of &#34;reflection&#34; similar classes {A1, A2, A3, ...}  to a set of  &#34;reflection&#34; similar classes {B1, B2, B3, ...} . 
As it is now for each A-B pair I have to define a mapping element : 
&#60;mapping&#62;&#60;class-a&#62;A1&#60;/class-a&#62;&#60;class-b&#62;B1&#60;/class-b&#62;&#60;field&#62;&#60;a&#62;aaa&#60;/a&#62;&#60;b&#62;bbb&#60;/b&#62;&#60;/field&#62; &#60;!-- more fields --&#62; &#60;/mapping&#62;

I would like to be able to define just one mapping element which I can re-use for each A-B pair.

I would like to do something like
 &#60;mapping map-id=&#34;a-b&#34;&#62; &#60;field&#62;&#60;a&#62;aaa&#60;/a&#62;&#60;b&#62;bbb&#60;/b&#62;&#60;/field&#62; &#60;!-- more fields --&#62; &#60;/mapping&#62;

And them on my java code just as usual:

mapper.map(com.a1.A, com.b1.B, &#34;a-b&#34;);
mapper.map(com.a2.A, com.b1.B, &#34;a-b&#34;);
mapper.map(com.a3.A, com.b1.B, &#34;a-b&#34;);

</field>
</artifact>
<artifact>
	<field name="artifact_id">3205297</field>
	<field user_id="2818263" name="submitted_by">olivergierke</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Allow mapping to fields directly to be the default option</field>
	<field name="open_date">1299753826</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Currently it's not possible to configure Dozer to map use direct field access by default (without explicitly configuring the classes to map). I've seen there's a ticket fixed already that allows to enable field access for entire classes but I'd like to see a general flag the enables this behavior by default. I've spend quite some time trying to get that working with the current callbacks and configuration options but I didn't really find a way to achieve this. If there's one, I'd be happy to know :).</field>
</artifact>
<artifact>
	<field name="artifact_id">3183682</field>
	<field user_id="3244844" name="submitted_by">hrennau2</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Integrating support for XSLT / XQuery</field>
	<field name="open_date">1297858833</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When a transformation includes structural changes like aggregation - thus cannot wholly be expressed as item-to-item mapping - XSLT or XQuery may sometimes accomplish very elegantly what would be cumbersome otherwise.

A simple and efficient pattern for transforming A into B can in such cases be, schematically:

Document aXml = a.toXML();
Document bXml = execXSLT(stylesheet, aXml);
B b = new B().fromXML(bXML);

Here is my request, part A: 
To support this special case of custom converter explicitly: introduce a &#34;stylesheet&#34; attribute, which is an alternative to the &#34;custom-converter&#34; attribute. And Dozer does the rest. Like:
   &#60;field custom-stylesheets=&#34;a2b.xslt   b2a.xslt&#34; /&#62;

Prerequisite: source and target would have to implement a &#34;toXML&#34; and a &#34;fromXML&#34; method (take names just as proposals). So my request, part B:
To introduce a Dozer interface consisting of toXML and fromXML; and/or to introduce attribute names for specifying custom-toXML and custom-fromXML methods:

   &#60;field custom-stylesheet=&#34;foo.xslt bar.xslt&#34;&#62;
      &#60;a toXML=&#34;dumpXML&#34; fromXML=&#34;loadXML&#34;&#62;foo&#60;/a/&#62;
      &#60;b toXML=&#34;writeXML&#34; fromXML=&#34;readXML&#34;&#62;bar&#60;/b&#62;
   &#60;/field&#62;

Thanks.
-  Hans-Juergen
</field>
</artifact>
<artifact>
	<field name="artifact_id">3163051</field>
	<field user_id="3205041" name="submitted_by">dzarley</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">enhancement: map-empty-collections schema attribute</field>
	<field name="open_date">1295567120</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Interface Improvements (example)</field>
	<field name="artifact_group_id">Dozer v5.3.1</field>
	<field name="details">Submitting an enhancement for possible inclusion into a future release.  map-empty-collections, similar to map-empty-strings, can be set to false, defaults to true</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">399347: dozer.ZIP</field>
		<field name="entrydate">1295567120</field>
		<field name="mod_by">dzarley</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3132964</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Combine deep and getter method</field>
	<field name="open_date">1291897426</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Combining deep mapping and mapping through getter method.

Example: mappng XMLGregorianCalendar field to a Date field in a dto.
Currently this isn't possible through configuration. Through fields it should be configured as follow:
		&#60;field&#62;
			&#60;a&#62;fromDateAndTime.toGregorianCalendar.time&#60;/a&#62;
			&#60;b&#62;startDate&#60;/b&#62;
		&#60;/field&#62;

However, the method toGregorianCalendar is a method and not a field so it will never work. Neither can you specify a getter as attribute as this currently isn't supported for deep mapping.
If you google you will notice that more people have problems with it in the last year, probably because Jaxb and jax-ws are getting more popular every day.

</field>
</artifact>
<artifact>
	<field name="artifact_id">3086536</field>
	<field user_id="1235926" name="submitted_by">henryju</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Support direct enum conversion</field>
	<field name="open_date">1286961833</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I have defined custom converters for some of my enums and it works fine when converting a bean that has these enums as attribute (Enum1 &#60;-&#62; Enum2).

But sometimes I want to convert a variable of type Enum1 to Enum2, so I tried: 

Enum2 myEnumOfType2 = mapper.map(myEnumOfType1, Enum2.class);

But it fails with NoSuchMethodException Enum2.&#60;init&#62;

It would be a good improvement to support direct enum conversion.</field>
</artifact>
<artifact>
	<field name="artifact_id">3084678</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Split DozerBeanMapper and its Factory</field>
	<field name="open_date">1286713166</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">There is too much functionality sitting in DBM. Should extract a separate Factory class, which would create DBM instances. This will help to freeze all settings once instance is created.</field>
</artifact>
<artifact>
	<field name="artifact_id">3038827</field>
	<field user_id="3010197" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Generate mapping code from dozer config</field>
	<field name="open_date">1280845717</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">Since dozer is ~1000 times slower then mapping by hand and still 10 times slower then doing it by reflection or spring BeanUtils we simply can not use it.
What about generating fast mapping code from the dozer mapping xml file?
Here is a link on the performance http://www.christianschenk.org/blog/java-bean-mapper-performance-tests/
We dicovered the same timings.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1281622429</field>
		<field name="user_name">buzdin</field>
		<field name="body">this was discussed previously and we are going towards that throw long and painful refactoring. But the light in the tunnel is still far away due to some design decisions taken early in the project.

Nice performance comparison! Could not comment on that in blog since it requires registration. Would be great to see more detailed analysis results.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3013705</field>
	<field user_id="739226" name="submitted_by">cibes</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Improvement of List-to-List-mapping</field>
	<field name="open_date">1276086803</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">Imagine you have two Objects: &#34;EarthStuff&#34; and &#34;MarsStuff&#34;.

EarthStuff holds a non-generic List containing Objects of a class called &#34;EarthChar&#34;. And there's a sub-class of EarthChar called &#34;EarthNumberChar&#34; - Objects of the class can also be contained in the List.

The analogical is true for MarsStuff (holds a List of &#34;MarsChar&#34;, which can also be &#34;MarsNumberChar&#34;).

In the mapping-configuration the EarthNumberChar is mapped to MarsNumberChar und EarthStuff is mapped to MarsStuff:

&#60;code&#62;

...
  &#60;mapping&#62;
    &#60;class-a&#62;dozerTest3.EarthNumberChar&#60;/class-a&#62;
    &#60;class-b&#62;dozerTest3.MarsNumberChar&#60;/class-b&#62;
    &#60;field&#62;
      &#60;a&#62;numberProperty&#60;/a&#62;
      &#60;b&#62;numberProperty&#60;/b&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;

  &#60;mapping&#62;
    &#60;class-a&#62;dozerTest3.EarthStuff&#60;/class-a&#62;
    &#60;class-b&#62;dozerTest3.MarsStuff&#60;/class-b&#62;
    &#60;field relationship-type=&#34;non-cumulative&#34;&#62;
      &#60;a&#62;earthChars&#60;/a&#62;
      &#60;b&#62;marsChars&#60;/b&#62;
      &#60;!-- 
      &#60;b-hint&#62;dozerTest3.MarsChar&#60;/b-hint&#62;
       --&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;

...

&#60;/code&#62;

Mapping EarthNumberChar to MarsNumberChar works like a charme, while mapping the List is a real problem:

&#60;code&#62;

        // Simple Test
        EarthNumberChar earthNumberChar1 = new EarthNumberChar();
        earthNumberChar1.setNumberProperty(&#34;1&#34;);

        MarsNumberChar marsNumberChar1 = new MarsNumberChar();

        tempMapper.map(earthNumberChar1, marsNumberChar1);
        System.out.println(marsNumberChar1);
        System.out.println(&#34;MarsNumberChar: &#34; + marsNumberChar1.getNumberProperty());

        // Map List
        EarthNumberChar earthNumberChar2 = new EarthNumberChar();
        earthNumberChar2.setNumberProperty(&#34;2&#34;);

        List earthChars = new ArrayList();
        earthChars.add(earthNumberChar2);

        EarthStuff earthStuff = new EarthStuff();
        earthStuff.setEarthChars(earthChars);

        MarsStuff marsStuff = new MarsStuff();

        tempMapper.map(earthStuff, marsStuff);

        System.out.println(&#34;Content of MarsStuff-&#62;marsChars:&#34;);
        for (Object currentObject : marsStuff.getMarsChars()) {

            System.out.println(currentObject);
        }

&#60;/code&#62;

Depending on the circumstance if you set a hint in the mapping-config, you will get different Objects in the resulting List - both undesirable:

Output without hint:

dozerTest3.MarsNumberChar@1a7ddcf
MarsNumberChar: 1
Content of MarsStuff-&#62;marsChars:
dozerTest3.EarthNumberChar@676437

Output with hint:

dozerTest3.MarsNumberChar@1d36dfe
MarsNumberChar: 1
Content of MarsStuff-&#62;marsChars:
dozerTest3.MarsChar@2bd3a


Without a hint I get a EarthNumberChar, which I cannot make use of on Mars :-(
With a hint I get a MarsChar, which matches better, but I cannot get my number-specific properties from this Object :-(

This behavior certainly matches the documentaion...

    * List to List
          o Dest Hint req'd: NO
          o Dest Hint allowed: YES
          o If no dest hint specified: Dest list will contain the same data types in the source
          o If hint is speficied: Dest list will contain objects that match dest hint(s) type

...but since Dozer &#34;knows&#34; the correct mapping-object for EarthNumberChar (it is defined in the mapping-configuration) - why doesn't it make use of this knowledge?

An improvement for the List-to-List-mapping would be this behavior:

- Dozer finds an Object of the Class EarthNumberChar in the List to map.
- Hey! There's a mapping-configuration for this Class!
- Use configured Object (MarsNumberChar) within the new List.

Attached you find an archive including the a testcase with the classes mentioned above.

Please let me know if I overlooked something in Dozer which can accomplish what I need.
Some in our team think this would be a general topic and must be possible to solve in Dozer.

The whole thing is kind of urgent, so a quick response would be highly appreciated. Even if the answer is that it is not possible with Dozer's on-board tools.

As a contingency plan I developed a MapperAware DozerConverter which checks the source-class, finds out the target-class for this and does a item-by-item mapping. Certainly this is not very elegant, because I got a lot of &#34;plantes&#34; to map...

Thanks a lot in advance!
Stephan
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1276939434</field>
		<field name="user_name">cibes</field>
		<field name="body">Hi Dmitry,

thanks a lot - this seems to do the job :-)

Didn't know that it is allowed to put multiple classes into the hint-tag. There seems to be no information about this on the Dozer-Webpage. Maybe you could add this one!??


With testing this I found a bug with the &#34;no-hint-behavior&#34;. If I do this:

&#60;code&#62;
        List earthChars = new ArrayList();
        earthChars.add(earthNumberChar2);
        earthChars.add(earthChar2);
&#60;/code&#62;

I get:

Content of MarsStuff-&#62;marsChars:
dozerTest3.EarthNumberChar@676437
dozerTest3.EarthNumberChar@992bae

If I change to:

&#60;code&#62;
        List earthChars = new ArrayList();
        earthChars.add(earthChar2);
        earthChars.add(earthNumberChar2);
&#60;/code&#62;

I get:

Content of MarsStuff-&#62;marsChars:
dozerTest3.EarthChar@1e4853f
dozerTest3.EarthChar@1e808ca


Seems like Dozer only checks the type of the first element of the source-list. This doesn't match with this statement from the Dozer-Webpage:

&#34;If no dest hint specified: Dest list will contain the same data types in the source&#34;.

Should I open a bug or will this be enough?

Best regards
Stephan
</field>
</message>

<message>
		<field name="adddate">1276810960</field>
		<field name="user_name">buzdin</field>
		<field name="body">Did not have time to analyze the test case you submitted in full detail, but a quick question - did you try multiple hints feature? You can say that hint-a is EarthChar,EarthNumberChar and hint-b is MarsChar,MarsNumberChar. Then if two explicit mappings are present Dozer should be able to resolve which mapping to use. I am pretty sure that it works for separate classes in a single collection, but not so sure about classes in one hierarchy. Let me know if this helps.

Dmitry</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">376655: dozerTest3.jar</field>
		<field name="entrydate">1276086804</field>
		<field name="mod_by">cibes</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3009358</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Map-null for collection mapping</field>
	<field name="open_date">1275288244</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Is it possible to filter elements in mapping collections? Basically, we need to skip null elements from the destination collection. The conversion rule of elements is set through custom converter.

The documented switch map-null=&#34;false&#34; seems to be working on the fields only, not within elements of collection.</field>
</artifact>
<artifact>
	<field name="artifact_id">2395035</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Array type recognision</field>
	<field name="open_date">1228560367</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Instead of [Ljava.lang.String recognize a more human readable java.lang.String[] type name.
These two types should be equivalent. After parsing all Strings must be transformed to a single form not to break Caches and other logic based on type name.</field>
</artifact>
<artifact>
	<field name="artifact_id">2422999</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Review API JavaDocs</field>
	<field name="open_date">1229130035</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Documentation</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Review public API JavaDocs and improve.</field>
</artifact>
<artifact>
	<field name="artifact_id">1882851</field>
	<field user_id="747370" name="submitted_by">acstewart</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">customConverterWithId not invoked.</field>
	<field name="open_date">1201716055</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">I'm seeing some issues with defining customConverterWithId on a field. 

I've wired up dozer in spring as follows:
&#60;bean id=&#34;dozerMapping&#34; class=&#34;net.sf.dozer.util.mapping.DozerBeanMapper&#34; scope=&#34;singleton&#34;&#62;
        &#60;property name=&#34;mappingFiles&#34;&#62;
            &#60;list&#62;
                &#60;value&#62;mappings.xml&#60;/value&#62;
            &#60;/list&#62;
        &#60;/property&#62;
        &#60;property name=&#34;customConvertersWithId&#34;&#62;
            &#60;map&#62;
                &#60;entry key=&#34;syntaxConverter&#34;&#62;
                    &#60;ref bean=&#34;syntaxConverterBean&#34;/&#62;
                &#60;/entry&#62;
            &#60;/map&#62;
        &#60;/property&#62;
    &#60;/bean&#62;
I then created a bean called syntaxConverterBean:

    &#60;bean id=&#34;syntaxConverterBean&#34; class=&#34;com.example.converter.RegexPatternConverter&#34; scope=&#34;singleton&#34;&#62;
        &#60;property name=&#34;tokens&#34;&#62;
            &#60;list&#62;
                &#60;value&#62;s/foo/bar/g&#60;/value&#62;
            &#60;/list&#62;
        &#60;/property&#62;
    &#60;/bean&#62;

And in my mappings.xml:
&#60;mappings&#62;
    &#60;mapping map-id=&#34;post-to-message&#34; map-empty-string=&#34;false&#34; map-null=&#34;false&#34; stop-on-errors=&#34;true&#34;&#62;
        &#60;class-a&#62;com.example.entity.ForumPost&#60;/class-a&#62;
        &#60;class-b&#62;com.example.webservices.ForumMessage&#60;/class-b&#62;
        &#60;field custom-converter-id=&#34;syntaxConverter&#34;&#62;
            &#60;a&#62;body&#60;/a&#62;
            &#60;b&#62;body&#60;/b&#62;
        &#60;/field&#62;
    &#60;/mapping&#62;
&#60;/mappings&#62;

I note that when Dozer initially creates the fieldmap, the customconverterwithID exists, however, after addDefaultFieldMappings is invoked on ClassMapBuilder, the custom converter mysteriously disappears.  I'm guessing this is a bug related to the new feature as described on this one http://sourceforge.net/tracker/index.php?func=detail&#38;aid=1770440&#38;group_id=133517&#38;atid=727371
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230695335</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230695335</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2493843</field>
	<field user_id="1081841" name="submitted_by">torajirou</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Automatic destination class detection</field>
	<field name="open_date">1231420652</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">It would be nice if Dozer could infer the destination class automatically.

A new method would be available :

Object map(Object source);

If no decision can be made based on the configuration, an explicit exception should be thrown.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1233306640</field>
		<field name="user_name">edbras</field>
		<field name="body">How does Dozer has to determine the destination class ?
Basically you would like to feed Dozer with the possible detination classes.
But then I don't think that's the job of Dozer.
Simple write your wrapper to do that, like I explain in the comment on Feature request 2537358&#38;:
https://sourceforge.net/tracker2/?func=detail&#38;aid=2537358&#38;group_id=133517&#38;atid=727371 

Have a look,
Ed</field>
</message>

<message>
		<field name="adddate">1231508298</field>
		<field name="user_name">buzdin</field>
		<field name="body">That is a good requirement. We will try to implement that.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2528507</field>
	<field user_id="2371259" name="submitted_by">damkon</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">A different way of providing mapping files</field>
	<field name="open_date">1232629482</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Currently DozerBeanMapper accepts a list of paths to mapping files and there is no other way of providing them. That may cause problems when you have them supplied in other form (e.g. as Spring Resource) - that forces you to create temporary files.
The other problem is while using several instances of DozerBeanMapper, all using the same set of mapping files. In that case files are read several times.
It would be nice to be able to provide them as InputStreams.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262544020</field>
		<field name="user_name">buzdin</field>
		<field name="body">Currently it is possible to inject Spring resources and custom converter instances using provided Spring integration Factory Bean.

InputStream and reading mapping files once for all instances are still open requests.</field>
</message>

<message>
		<field name="adddate">1233305850</field>
		<field name="user_name">edbras</field>
		<field name="body">The same counts for the Custom Converter.
it would be nice to inject them instead of that Dozer created it automatically always.
In my case I want to put extra stuff in my custom converter as it has to run in the Spring container. At this moment that's only possible through some tricks.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1939220</field>
	<field user_id="1759155" name="submitted_by">grzegorzoledzki</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Global class hierarchy mapping, not only for fields</field>
	<field name="open_date">1207817321</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Today one can specify a class hierarchy mapping per fields:

&#60;mapping&#62;
&#60;class-a&#62;package.A&#60;/class-a&#62;
&#60;class-b&#62;package.APrime&#60;/class-b&#62;
&#60;field&#62;
&#60;a&#62;x&#60;/a&#62;
&#60;b&#62;x&#60;/b&#62;
&#60;a-hint&#62;package.X1,package.X2,package.X3&#60;/a-hint&#62;
&#60;b-hint&#62;package.X1Prime,package.X2Prime,package.X3Prime&#60;/b-hint&#62;
&#60;/field&#62;
&#60;/mapping&#62;

(given that X1,X2 and X3 are subclasses of abstract class X and X1Prime,X2Prime and X3Prime are subclasses of abstract class XPrime)

It would be great if one can specify this on class basis like this:

&#60;mapping&#62;
 &#60;class-a&#62;package.X&#60;/class-a&#62;
 &#60;class-b&#62;package.XPrime&#60;/class-b&#62;
 &#60;a-hint&#62;package.X1,package.X2,package.X3&#60;/a-hint&#62;
 &#60;b-hint&#62;package.X1Prime,package.X2Prime,package.X3Prime&#60;/b-hint&#62;
&#60;/mapping&#62;

And no need for a-hint/b-hint providing in each field of type X/XPrime. The mapping for A/APrime could be the default one in this case.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1272452025</field>
		<field name="user_name">jgongo</field>
		<field name="body">If you think global hierarchy mapping isn't a good idea maybe you could think at least of including the concept of global hints or reusable hints.

I have a fairly complex graph of objects and currently I have included my hints in 4 or 5 different places... including a new class in my model means I must modify all those hints. If I miss just one of them the whole mapping fails. If at least I could have the hint declared in a single place and then reuse it...

Something like this:

&#60;global-hint name=&#34;myHint&#34;&#62;
  &#60;a-hint...&#62;&#60;/a-hint&#62;  
  &#60;b-hint...&#62;&#60;/b-hint&#62;
&#60;/global-hint&#62;

&#60;mapping&#62;
  &#60;class-a...&#62;
  &#60;class-b...&#62;
  &#60;field...&#62;
    &#60;a&#62;...&#60;/a&#62;
    &#60;b&#62;...&#60;/b&#62;
    &#60;global-hint ref=&#34;myHint&#34; /&#62;
  &#60;/field&#62;
&#60;/mapping&#62;</field>
</message>

<message>
		<field name="adddate">1207817494</field>
		<field name="user_name">grzegorzoledzki</field>
		<field name="body">Logged In: YES 
user_id=1759155
Originator: YES

Another gain would be to support abstract class as a destination class.
Imagine an example using the same classes as above (A, X, X1, X2, X3 and the primes).

One could write:
X x = new X1(...);
mapper.map(x, XPrime.class);

Now you have to write:
mapper.map(x, X1Prime.class);
</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1618815</field>
	<field user_id="1407753" name="submitted_by">puzzycat</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Creating dynamic mapping classes using ASM or CGLIB</field>
	<field name="open_date">1166540547</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Dear Dozer Team,
Why don't you start using BCEL, ASM or CGLIB (not sure if ASM and CGLIB can create a class from scratch) to create the mapper classes dynamically at runtime and cache it so that there is only one time overhead? Once such a solution is provided i am sure that there wont be any more discussions related to performance in your groups. Not sure how i can help you (I am also learning ASM), but i am sure that the above idea will give you some food for thought.

I am not a great fan of byte code manipulation at runtime. But i felt that dozer seems to be an ideal candidate. Hope that one day you will implement this in your project and grab some more big projects into your kitty.

Regards,
Rajeev</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175226433</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I am going to move this to the backlog.  Thanks for taking the time to suggest this and it is an interesting idea.  I just don't think we will be able to move to this type of model anytime soon, but it is worth investigating at some point</field>
</message>

<message>
		<field name="adddate">1166653863</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

We have definitely thought of that in the past. Our bandwidth is pretty low right now...if you want to take this on we would be more than happy to help.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">3</field>
		<field name="entrydate">1186460290</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1186460290</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175226433</field>
		<field name="entrydate">1186460290</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175226433</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175226433</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1702863</field>
	<field user_id="1772460" name="submitted_by">pupsmaster</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Different strategics for class transformations</field>
	<field name="open_date">1176895795</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Assume, that I have class A and class B. Now I can create some strategics to transform one to another, using map-id. But if I have field type A1 in class A and field type B1 in class B. Due transformation I want to convert A to B when A.A1 will transform to B.B1, but I whant to use different strategics for them to.

class A{
 public A1 field;
 ...another fields...
}

class B{
 public B1 field;
 ...another fields...
}

&#60;!-- and A to B mappings --&#62;
&#60;mapping map-id=&#34;AtoB-1&#34;&#62;
  ...rules...
&#60;/mapping&#62;

&#60;mapping map-id=&#34;AtoB-2&#34;&#62;
  ...another rules...
&#60;/mapping&#62;

&#60;!-- and A1 to B1 mappings --&#62;
&#60;mapping map-id=&#34;A1toB1-1&#34;&#62;
  ...rules...
&#60;/mapping&#62;

&#60;mapping map-id=&#34;A1toB1-2&#34;&#62;
  ...another rules...
&#60;/mapping&#62;

Now if I want to convert A to B I can select between AtoB-1 and AtoB-2 strategics, but I couldn't manage process A1 to B1 converting . I don't know wich strategy will select mapping processor A1toB1-1 or A1toB1-2. So It'll be wery useful thing, when processor will ask the user if it has more than one strategics for one class pair.</field>
</artifact>
<artifact>
	<field name="artifact_id">2802554</field>
	<field user_id="1613003" name="submitted_by">jagent_team</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Unit tests</field>
	<field name="open_date">1244390523</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">Hi,

As told before on the Support forum, I send you a class helping to test mappings done with Dozer.
The DozerMappingTestCase is a class that inherit from the JUnit's TestCase class.
It provides some test methods as the check that all the attributes of an object are mapped or the check
that all the attributes of a target object are filled after a mapping.

The purpose of the class is to find out errors/forgettings that can happen with big mappings.

It would be great to have classes like this one packaged with Dozer in a future version.
Feel free to contact me for any questions/comments.

Regards,

Olivier</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">330064: DozerMappingTestCase.java</field>
		<field name="entrydate">1244390524</field>
		<field name="mod_by">jagent_team</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1731158</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Custom Object List to String[] explicit mapping</field>
	<field name="open_date">1181019386</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Submitted originally by Wahid Bashirazad.  Unit test reproducing the issue can be found in KnownFailures.

  &#60;mapping&#62;
    &#60;class-a&#62;net.sf.dozer.util.mapping.vo.MessageHeaderVO&#60;/class-a&#62;
    &#60;class-b&#62;net.sf.dozer.util.mapping.vo.MessageHeaderDTO&#60;/class-b&#62;
    &#60;field&#62;
      &#60;a&#62;msgIds&#60;/a&#62;
      &#60;b&#62;idList.msgIdsArray&#60;/b&#62;
      &#60;a-hint&#62;com.mycom.MessageIdVO&#60;/a-hint&#62;
      &#60;b-hint&#62;java.lang.String&#60;/b-hint&#62;
    /field&#62;
  &#60;/mapping&#62;
  &#60;mapping&#62;
    &#60;class-a&#62;net.sf.dozer.util.mapping.vo.MessageIdVO&#60;/class-a&#62;
    &#60;class-b&#62;java.lang.String&#60;/class-b&#62;
    &#60;field&#62;
      &#60;a&#62;id&#60;/a&#62;
      &#60;b&#62;this&#60;/b&#62;
    &#60;/field&#62;
  &#60;/mapping&#62; 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1183953991</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Consolidated bug #1688972.

Original post......

Hi,
this bug report is related to the following Help Forums entry:
http://sourceforge.net/forum/forum.php?thread_id=1696264&#38;forum_id=452530

In the attachment you can find my test resources. There are 4 test cases in
the JUnit class &#34;MappingTest&#34;.
Only the 2nd test method &#34;testMappingReverse()&#34; is running successfuly. The
test cases consider both POJO to POJO and XMLBean to POJO mappings.

Thanks, 
Wahid Bashirazad 
File Added: mappingtest.zip</field>
</message>

<message>
		<field name="adddate">1181019426</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Need to be able to specify an explicit mapping between custom data object and String</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">236203: mappingtest.zip</field>
		<field name="entrydate">1183953991</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1480657</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Directly Mapping List&#60;--&#62;Array</field>
	<field name="open_date">1146601160</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">How do I configure a direct mapping (without containing
object) of List&#60;A&#62; to B[] or vice-versa?  
 
List&#60;A&#62; listOfA = ... 
B[] arrayOfB = dozer.map(listOfA, B[].class); 
 
My problem is that there is no field involved here (how
single instances of A and B are mapped is another
topic), so how do I configure mapping rules? </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1228468617</field>
		<field name="user_name">helloworld2005</field>
		<field name="body">we need it.</field>
</message>

<message>
		<field name="adddate">1186110642</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

We need to take a closer look at implementing this.  It has been requested several times</field>
</message>

<message>
		<field name="adddate">1163380271</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

This ticket has been open for a long time and I dont see this functionality being implemented in the near 
future.  We can reopen this feature is a patch is submitted or this feature is added to the long term roadmap</field>
</message>

<message>
		<field name="adddate">1147464189</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

I was thinking about this recently as well.  Maybe you don't
configure mapping rules for this.

When you call map(Object, Class) and the class is an array
type, you create the dest array using getComponentType and
source object size and pass to map(Object, Object).

In map(Object, Object), as long as the dest array can hold
all elements from the List, just attempt to map component
objects.  

Maybe to handle cases of e.g. mapping to Object[], there
could be a collection-mapping that includes only hints, and
an optional (mandatory?) mapId.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">3</field>
		<field name="entrydate">1186110642</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1236069</field>
		<field name="entrydate">1186110642</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1163380271</field>
		<field name="entrydate">1186110642</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163380725</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163380271</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163380271</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1771586</field>
	<field user_id="1038818" name="submitted_by">rschlege</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Support Annotations as alternative for XML configuration</field>
	<field name="open_date">1186749806</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Would be nice to have support for annotations instead of having to specify all the configuration in xml files.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1231117964</field>
		<field name="user_name">mhtierney</field>
		<field name="body">I am working on a prototype/proof of concept for supporting annotations as an alternative to xml</field>
</message>

<message>
		<field name="adddate">1199900018</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Any willingness to take a first pass at this? :)</field>
</message>

<message>
		<field name="adddate">1199886168</field>
		<field name="user_name">romanschlegel</field>
		<field name="body">Logged In: YES 
user_id=1977289
Originator: NO

... or rather
@MappedTo(class=com.company.ClassA.class, field=&#34;fieldX&#34;)
public String getFieldY() {
  return fieldY;
}</field>
</message>

<message>
		<field name="adddate">1199885994</field>
		<field name="user_name">romanschlegel</field>
		<field name="body">Logged In: YES 
user_id=1977289
Originator: NO

Sorry, missed the followup. Was thinking of something like in Hibernate:

@MappedTo(class=com.company.ClassA.class, field=&#34;fieldX&#34;)
public void getFieldY() {
}

Global configurations would still be needed in an xml file.

Thanks
Roman</field>
</message>

<message>
		<field name="adddate">1186783320</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Can you provide examples of this? What would we do with global configuration parameters? Do you see a problem with coupling your beans to dozer?

Thanks for looking

franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1231117762</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1186783320</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1806714</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">update initialized array from index 0</field>
	<field name="open_date">1191387399</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">See patch submitted by yonizd.....

http://sourceforge.net/tracker/index.php?func=detail&#38;aid=1797776&#38;group_id=133517&#38;atid=727370
</field>
</artifact>
<artifact>
	<field name="artifact_id">1820600</field>
	<field user_id="443999" name="submitted_by">gemini929</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Adding hint support to one way field-exclude elements</field>
	<field name="open_date">1193398942</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">I would like to be able to specify hints in a field-exclude element so that when mapping from a -&#62; b, I can map collections.  Without this functionality, I am unable to use this field-exclude one-way feature.

If I can do this: 
&#60;field&#62; 
&#60;a&#62;tireDtos&#60;/a&#62; 
&#60;b&#62;tires&#60;/b&#62;  
&#60;a-hint&#62;myPackage.TireDto&#60;/a-hint&#62;  
&#60;b-hint&#62;myPackage.Tire&#60;/b-hint&#62;  
&#60;/field&#62;  
 
I would like to be able to do this:
&#60;field-exclude type=&#34;one-way&#34;&#62; 
&#60;a&#62;tireDtos&#60;/a&#62; 
&#60;b&#62;tires&#60;/b&#62;  
&#60;a-hint&#62;myPackage.TireDto&#60;/a-hint&#62;  
&#60;b-hint&#62;myPackage.Tire&#60;/b-hint&#62;  
&#60;/field-exclude&#62;</field>
</artifact>
<artifact>
	<field name="artifact_id">1867713</field>
	<field user_id="1977289" name="submitted_by">romanschlegel</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Array Mapping with Object field based Index</field>
	<field name="open_date">1199889634</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Sometimes we don't know the index of a certain object we want to map. But if one of the fields of the wanted object is known, one could configure it like this:

&#60;mapping&#62;
  &#60;class-a&#62;net.sf.dozer.util.mapping.vo.deep.SrcDeepObj&#60;/class-a&#62;
  &#60;class-b&#62;com.company.ClassB&#60;/class-b&#62;
  &#60;field&#62;
    &#60;a&#62;hintList[fieldX=foo].fieldY&#60;/a&#62;
    &#60;b&#62;fieldZ&#60;/b&#62;
   &#60;a-hint&#62;net.sf.dozer.util.mapping.vo.TheFirstSubClass&#60;/a-hint&#62;
  &#60;/field&#62;
&#60;/mapping&#62;


For example if we have a List of &#34;CarTypes&#34; with a unique &#34;typeNumber&#34;, we might want to map the list
carTypes[0]: CarType.typeNumber=100
carTypes[1]: CarType.typeNumber=150
carTypes[2]: CarType.typeNumber=180

to an object from class &#34;SportsCar&#34;, which would for example correspond to the &#34;CarType&#34; with typeNumber=150.

Regards
Roman</field>
</artifact>
<artifact>
	<field name="artifact_id">1867693</field>
	<field user_id="1977289" name="submitted_by">romanschlegel</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Improve Enum Mapping</field>
	<field name="open_date">1199887314</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Would be nice if we could also configure which enum shall be mapped to which one. Maybe something like:
&#60;mapping&#62;
&#60;class-a&#62;com.company.Class1&#60;/class-a&#62;
&#60;class-b&#62;com.company.Class2&#60;/class-b&#62;
&#60;field valueMapping=&#34;enumMappingSpecs.xml&#34;&#62;
  &#60;a&#62;enumFieldX&#60;/a&#62;
  &#60;b&#62;enumFieldY&#60;/b&#62;
&#60;/field&#62;
&#60;/mapping&#62;

and in &#34;enumMappingSpecs.xml&#34; for example

&#60;enum-mapping&#62;
&#60;enum-a&#62;com.company.Enum1&#60;/enum-a&#62;
&#60;enum-b&#62;com.company.Enum2&#60;/enum-b&#62;
&#60;value&#62;
  &#60;a&#62;VALUE_X&#60;/a&#62;
  &#60;b&#62;VALUE_Y&#60;/b&#62;
&#60;/value&#62;
&#60;/enum-mapping&#62;





Even better would be if we could also map
object1.enum1.X
object1.enum2.Y

to
object2.enum.Z

But I guess we'll need to implement a custom mapper to achieve that. Unless anyone can see an option to make this configurable...?

Regards
Roman</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1199890460</field>
		<field name="user_name">romanschlegel</field>
		<field name="body">Logged In: YES 
user_id=1977289
Originator: YES

An example for the second, more complicated case would be:
We might have an issue tracker like this, and each issue has two enums:
cost.HIGH/MEDIUM/LOW
and 
impact.SEVERE/MEDIUM/LOW

and we want to map it to

priority.HIGH/MEDIUM/LOW

so the mapping might be
cost.HIGH + impact.SEVERE -&#62; priority.HIGH
cost.MEDIUM + impact.SEVERE -&#62; priority.HIGH
cost.LOW + impact.SEVERE -&#62; priority.HIGH
cost.HIGH + impact.MEDIUM -&#62; priority.LOW
cost.MEDIUM + impact.MEDIUM -&#62; priority.MEDIUM
cost.LOW + impact.MEDIUM -&#62; priority.HIGH
cost.HIGH + impact.LOW -&#62; priority.LOW
cost.MEDIUM + impact.LOW -&#62; priority.LOW
cost.LOW + impact.LOW -&#62; priority.LOW

Regards
Roman</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1882539</field>
	<field user_id="731522" name="submitted_by">maxxyme</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Support kind of &#34;include&#34; mapping file tags</field>
	<field name="open_date">1201691529</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hello,

Like other frameworks/libraries, it would be nice to have an &#34;include&#34; tags to allow automatic includes of other configuration/mapping files.
This would allow everyone to split easily his mappings into separate XML files (and thus reduce their weight &#38; maintainability - split e.g. business/bean/UI different mappings).


Having something like:

&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;!DOCTYPE mappings PUBLIC &#34;-//DOZER//DTD MAPPINGS//EN&#34;
   &#34;http://dozer.sourceforge.net/dtd/dozerbeanmapping.dtd&#34;&#62;
&#60;mappings&#62;

  &#60;include file=&#34;dozer-global-configuration.xml&#34; /&#62;
  &#60;include file=&#34;mappings/MyMappingsPart1.xml&#34; /&#62;
  &#60;include file=&#34;mappings/MyMappingsPart2.xml&#34; /&#62;

&#60;/mappings&#62;


Note: Struts (at least in v2.x) does exactly the same (having the &#60;include file=&#34;...&#34; /&#62; tags), except the root element (here &#34;&#60;mappings&#34;) is simply called by the library's name, i.e. &#34;&#60;struts&#62;&#34;.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1210601601</field>
		<field name="user_name">mdiskin</field>
		<field name="body">Logged In: YES 
user_id=2082444
Originator: NO

Not to detract from your request which is valid, here's how I did something similar with the current implementation and Spring.

- &#60;bean id=&#34;agencyMapper&#34; class=&#34;net.sf.dozer.util.mapping.DozerBeanMapper&#34; scope=&#34;singleton&#34;&#62;
- &#60;property name=&#34;mappingFiles&#34;&#62;
- &#60;list&#62;
  &#60;value&#62;com/arccorp/module/agent/AgentModuleDozer.xml&#60;/value&#62; 
  &#60;/list&#62;
  &#60;/property&#62;
  &#60;/bean&#62;
- &#60;bean id=&#34;agentService&#34; class=&#34;com.arccorp.agentcomponent.service.AgentServiceImpl&#34;&#62;

In the AgentServiceImpl class added a construstor 

	private AgentDao AgentDao;
	private MapperIF agencyMapper;
    @Autowired
    public AgentServiceImpl(AgentDao AgentDao,MapperIF agencyMapper) {
        this.AgentDao = AgentDao;
        this.agencyMapper =agencyMapper;
    }

    then I can use agencyMapper.map in the code.

  &#60;/bean&#62;

</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1956125</field>
	<field user_id="14486" name="submitted_by">eddiesam</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Map or JavaBean to list of name/value pairs</field>
	<field name="open_date">1209733727</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I'd like to map bidirectionally between a Map or a JavaBean and a list (or array) of key/value beans. I've attached a rough unit test that I hope demonstrates what I mean.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">276588: JavaBeanToListMapperTest.java</field>
		<field name="entrydate">1209733728</field>
		<field name="mod_by">eddiesam</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1988762</field>
	<field user_id="2046528" name="submitted_by">insacelad</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer java generator</field>
	<field name="open_date">1213005960</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi!

We have developed a plugin for Dozer (independent from Markus' plugin) that helps to create Java classes for javabeans to javabeans transformations. The purpose is to generate Java classes that will handle the transformations, instead of using the DozerBeanmapper. It is useful to transformate a of big amount of objects, when the Java introspection of BeanUtils (used with Dozer) is a bit too slow.

The user choose the source and target classes (but in fact the generated file can handle bi-directional mapping), the configuration XML files, and finally the public methods (optional). Then the generated class provides map methods to transform the objects.

The plugin is still under development (there is a lot more to do) so this is a basic version. If it works well and people are interested in using it, maybe we can try to mix it with markus' plugin, which seems to be really helpful.

At the moment, the plugin features are:
- &#34;New...&#34; wizard to create the transformation classes. (Menu New -&#62; Others -&#62; Dozer -&#62; Dozer transformation class)
- &#34;Dozer&#34; menu that appears when the user right-click on the generated java file
- &#34;Set up&#34; and &#34;Generate&#34; menu item, to modify the generated java class

The generated java classes can map:
- primitive attributes
- converters
- recursive mapping
- complex types
- collections

At the moment the XML files are not used for the generation. The next step will be to use these files to customize the transformation.

The plugin works on Eclipse 3.3.1. The generated files need:
- BeanUtils 1.8 (when converters are used)

We really appreciate the Dozer framework, that is really powerful and really useful. We hope this tool can be useful for you (it is really useful for us :p) and can add functionnality to Dozer. We have attached the plugin jar (to add in the folder &#34;plugins&#34; of Eclipse), the sources are included in the jar, and files are in the package net.sf.dozer.javagenerator.

Thanks,

Julien Roux/Pierre-Henri Sassard</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1215557812</field>
		<field name="user_name">insacelad</field>
		<field name="body">Logged In: YES 
user_id=2046528
Originator: YES

Yes why not it should be better on sourceforge.

We've just finish our internship and will be on holidays for one month. We'll continue to work on that plugin after.

Thanks.</field>
</message>

<message>
		<field name="adddate">1215442476</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Do you want to release this on the sourceforge site as an official release?</field>
</message>

<message>
		<field name="adddate">1215184411</field>
		<field name="user_name">insacelad</field>
		<field name="body">Logged In: YES 
user_id=2046528
Originator: YES

Hi!

We have uploaded a new version of our plugin. This one handle XML mapping files. It can be downloaded at this address:
http://www.etud.insa-toulouse.fr/~jroux/Dozer/net.sf.dozer.javagenerator_1.0.1.jar

There is a &#34;help&#34; folder in the jar, containing explanations on how to use the plugin and on what are the functionalities.

Implemented features:

	Automatic binding (without use of an XML configuration file): 
	   - Primitive fields mapping 
	   - Complex types mapping 
	   - Primitive types conversion (particular case of Date conversion: it is impossible to convert a String to a Date. It is necessary to create a custom converter to handle that. However, a long (or Long) can be converted to a Date). 
	   - Collections and arrays mapping (including collections containing other collections or Maps): see the different cases of collection mapping. 
	   - Map mapping (including Maps containing other Maps or collections) only to another Map 
	   - Enum mapping  

	 XML Customization: 
	   - Custom get() set() methods (except some cases... see &#34;Unimplemented features&#34; below) 
	   - Copy by reference mapping 
	   - CustomConverters (without id) 
	   - Excluding fields 
	   - One-way mapping 
	   - Map null values, map empty string (not for converters and custom converters) 
	   - Index mapping 
	   - Deep mapping 
	   - Collection mapping: hints, non-cumulative mode and remove-orphans 
	   - Inheritance mapping 
	   - Custom create method: full name of a class whose constructor will be used 


Unimplemented features:

	- Mapping a field with no get() or set() methods 
	- Iterate methods mapping 
	- set() methods using a different type argument 
	- String to Date mapping (create a customConverter to handle this) 
	- CustomConvertersWithId 
	- In deep and index mapping, objects are not created in the hierarchy, so some nullPointEcexption can occur. 
	- Context base mapping 
	- XMLBeans 
	- Some cases of Map mapping: String to Map and Map to complex type 
	- Statistics 

Pierre-Henri/Julien</field>
</message>

<message>
		<field name="adddate">1213006050</field>
		<field name="user_name">insacelad</field>
		<field name="body">Logged In: YES 
user_id=2046528
Originator: YES

It was not possible to upload the file (too big), so here is the address where it can be downloaded:
https://www.etud.insa-toulouse.fr/~jroux/Dozer/net.sf.dozer.javagenerator_0.1.3.jar</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2803170</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">JSON Support</field>
	<field name="open_date">1244495495</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Add JSON format support mapping. At least experimental version.</field>
</artifact>
<artifact>
	<field name="artifact_id">2180018</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Split Unit and Functional Tests</field>
	<field name="open_date">1224430514</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Unit and Functional tests should be separated not only by means of different packages, but by folders.
Test Coverage reports should be generated separately for each test type.</field>
</artifact>
<artifact>
	<field name="artifact_id">2207502</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping fields with same name without wildcard</field>
	<field name="open_date">1225291947</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">Right now if one maps beans without wildcard technique he is forced to define both field names even if they match:

        &#60;field&#62;
            &#60;a&#62;firstName&#60;/a&#62;
            &#60;b&#62;firstName&#60;/b&#62;
        &#60;/field&#62;

The proposed improvement is to introduce additional element for such situation

        &#60;field name=&#34;firstName&#34;/&#62;

With this approach mapping file size can be dramatically reduced in cases where it is possible to make property names identical. This approach is better than automated analysis of properties, because it is less error-prone. Framework will throw an exception if either of beans lacks the required property.</field>
</artifact>
<artifact>
	<field name="artifact_id">2927317</field>
	<field user_id="2761819" name="submitted_by">jblinick</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Extend CustomConverter Interface to include heirarchy</field>
	<field name="open_date">1262835163</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Interface Improvements (example)</field>
	<field name="artifact_group_id">None</field>
	<field name="details">It would be very beneficial to include the context of the mapping to the CustomConverter.  Currently, the converter doesn't know anything about the two fields being converted:   Object convert(Object existingDestinationFieldValue, Object sourceFieldValue, Class&#60;?&#62; destinationClass, Class&#60;?&#62; sourceClass);

If we could also pass Object sourceParent, Object destinationParent, or better yet, a Stack of parents for both source and destinations, then the converter could implement logic based on the context of the mapping.

A quick look at the code and it looks like this is non trivial, as this information is not passed to the immediate methods before the customConverter is called, but I was wondering if anyone else sees the benefit in this.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262893647</field>
		<field name="user_name">buzdin</field>
		<field name="body">yes, there is a benefit in such thing. And I think it was already requested earlier. Not going to be done in this release however.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2458143</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Improve Caching</field>
	<field name="open_date">1229941573</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Caching is done with help of simple HashMap. Consider evaluating existing in memory caches for the best performance.
Cache Providers should be pluggable (as in Hibernate) and Dozer should work fine with HashMaps as well.
Providers should be configurable.</field>
</artifact>
<artifact>
	<field name="artifact_id">2338426</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Implement SDO-like property handling strategy</field>
	<field name="open_date">1227527195</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">Implement SDO based property get/set strategy.

Extensibility of such strategy should be assessed as well to allow pluggable custom implementations.

See this thread for details.
https://sourceforge.net/forum/forum.php?thread_id=2438232&#38;forum_id=452529</field>
	<field name="artifact_history">
<history>
		<field name="field_name">summary</field>
		<field name="old_value">SDO based strategy</field>
		<field name="entrydate">1227527297</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2338457</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Integrate with Spring via Schema</field>
	<field name="open_date">1227527565</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Integrate with Spring with help of modular XML schema as described here http://static.springframework.org/spring/docs/2.5.x/reference/extensible-xml.html
Stand-alone approach will be supported as well.</field>
</artifact>
<artifact>
	<field name="artifact_id">2381642</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">6</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Review Documentation</field>
	<field name="open_date">1228295105</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Documentation</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">Documentation should be reviewed, extended and restructured;
Should write a new tutorial and mention Dozer use case with GWT somewhere.
This is a general documentation refresh. Any other improvements are welcome.</field>
</artifact>
<artifact>
	<field name="artifact_id">1897102</field>
	<field user_id="731522" name="submitted_by">maxxyme</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Key mapping e.g. convert Map&#60;K, V&#62; to Map&#60;K1, V1&#62;</field>
	<field name="open_date">1203442680</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Hello,

It would be really greatful to add support of complete mapping for Maps.

e.g. instead of just mapping from Map&#60;K, V&#62; to Map&#60;K, V&#62; (same key/value types)
corresponding to the following config:
&#60;mapping&#62;
  &#60;class-a&#62;net.sf.dozer.util.mapping.vo.map.MapToMap&#60;/class-a&#62;
  &#60;class-b&#62;net.sf.dozer.util.mapping.vo.map.MapToMapPrime&#60;/class-b&#62;

  &#60;field&#62;
    &#60;a&#62;standardMapWithHint&#60;/a&#62;
    &#60;b&#62;standardMapWithHint&#60;/b&#62; 
  &#60;/field&#62;    
&#60;/mapping&#62;


... as well as mapping from Map&#60;K, V&#62; to Map&#60;K, V1&#62; (just the value type changes)
corresponding to the following config:
&#60;mapping&#62;
  &#60;class-a&#62;net.sf.dozer.util.mapping.vo.map.MapToMap&#60;/class-a&#62;
  &#60;class-b&#62;net.sf.dozer.util.mapping.vo.map.MapToMapPrime&#60;/class-b&#62;

  &#60;field&#62;
    &#60;a&#62;standardMapWithHint&#60;/a&#62;
    &#60;b&#62;standardMapWithHint&#60;/b&#62;
    &#60;a-hint&#62;net.sf.dozer.util.mapping.vo.TestObject&#60;/a-hint&#62;
    &#60;b-hint&#62;net.sf.dozer.util.mapping.vo.TestObjectPrime&#60;/b-hint&#62; 
  &#60;/field&#62;    
&#60;/mapping&#62;


it would be great to have something like the following!!!
( &#60;a-key-hint&#62; &#38; &#60;b-key-hint&#62; are new tags of course...)
&#60;mapping&#62;
  &#60;class-a&#62;net.sf.dozer.util.mapping.vo.map.MapToMap&#60;/class-a&#62;
  &#60;class-b&#62;net.sf.dozer.util.mapping.vo.map.MapToMapPrime&#60;/class-b&#62;

  &#60;field&#62;
    &#60;a&#62;standardMapWithHint&#60;/a&#62;
    &#60;b&#62;standardMapWithHint&#60;/b&#62;
    &#60;a-key-hint&#62;net.sf.dozer.util.mapping.vo.TestKey&#60;/a-hint&#62;
    &#60;b-key-hint&#62;net.sf.dozer.util.mapping.vo.TestKeyPrime&#60;/b-hint&#62; 
    &#60;a-hint&#62;net.sf.dozer.util.mapping.vo.TestObject&#60;/a-hint&#62;
    &#60;b-hint&#62;net.sf.dozer.util.mapping.vo.TestObjectPrime&#60;/b-hint&#62; 
  &#60;/field&#62;    
&#60;/mapping&#62;


Cheers,
Maxx</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1330097406</field>
		<field name="user_name">meiao</field>
		<field name="body">Actually, I'm trying to do something slightly different.
Sorry for wrongly posting here.</field>
</message>

<message>
		<field name="adddate">1330097228</field>
		<field name="user_name">meiao</field>
		<field name="body">I was trying to do the same but using the API instead.
I believe I'll have to work around using a custom converter.

public void test() {
    BeanMappingBuilder mappingBuilder = new BeanMappingBuilder() {

            @Override
            protected void configure() {
                FieldDefinition def1 = new FieldDefinition(&#34;map&#34;);
                def1.mapKey(&#34;value&#34;);

                FieldDefinition def2 = new FieldDefinition(&#34;map&#34;);
                def2.mapKey(&#34;newValue&#34;);

                this.mapping(BeanA.class, BeanB.class).fields(def1, def2);

            }
        };

        DozerBeanMapper mapper = new DozerBeanMapper();
        mapper.addMapping(mappingBuilder);

        BeanA a = new BeanA();
        a.getMap().put(&#34;value&#34;, &#34;value&#34;);
        a.getMap().put(&#34;value2&#34;, &#34;value2&#34;);

        BeanB b = mapper.map(a, BeanB.class);
        // here, b.getMap().equals(a.getMap()) is true
    }

public class BeanA {
    private Map&#60;String, String&#62; map;
    // respectives setter and getter
}

BeanB is a copy of BeanA, except for class name.</field>
</message>

<message>
		<field name="adddate">1239848852</field>
		<field name="user_name">martinstraus</field>
		<field name="body">Any plans of including this feature?</field>
</message>

<message>
		<field name="adddate">1232025996</field>
		<field name="user_name">buzdin</field>
		<field name="body">Another request for this feature has been received. Setting higher priority.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1232025996</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1232025996</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1232025996</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2542444</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Validate on start-up</field>
	<field name="open_date">1233129201</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Perform maximum validation possible on start-up instead of runtime. All explicit improperly named fields should be detected.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240993383</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240993383</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2542447</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">IntelliJ Plugin</field>
	<field name="open_date">1233129242</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Think of providing IntelliJ plugin, could be similar to the Eclipse one.</field>
</artifact>
<artifact>
	<field name="artifact_id">2546963</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">The remove-orphans attribute as global configuration</field>
	<field name="open_date">1233269822</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">At the moment the attribute remove-orphans can only be configured per field mapping.
It would be nice to add this to the global configuration just like relation-type.

-- Ed</field>
</artifact>
<artifact>
	<field name="artifact_id">2583069</field>
	<field user_id="2378311" name="submitted_by">amichalec</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Introduce accessor exception handler</field>
	<field name="open_date">1234221527</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v.4.4.1</field>
	<field name="details">I face problem when java beans of legacy system follow behavioral scheme where accessor may throw exception when attribute is not set (exception instead of null value) e.g.:
  if (!obj.hasFoo()) {
    obj.getFoo(); //will throw AttributeNotSetException
  }
In this case custom mappers does not help since exception occurs in reflective call before job is delegated to mapper. The only way today is to use stop-on-errors=&#34;false&#34; in mapping; shortcoming is that any other mapping problems can slip thru in this mapping mode. Solution would be to introduce optional exception handler that would customize data read/write process. Example:

&#60;mapping&#62;
  &#60;class-a&#62;org.foo.Bar&#60;/class-a&#62;
  &#60;class-b&#62;org.baz.Blah&#60;/class-b&#62;    
  &#60;field exception-handler=&#34;org.baz.ExHandler&#34;&#62;
    &#60;a&#62;barProp.subProp&#60;/a&#62;
    &#60;b&#62;blahProp&#60;/b&#62;
  &#60;/field&#62;
&#60;/mapping&#62;   

Note that handler must be able to understand context of occuring exception when traversing nested expresions (with dots); initial contract would be:

interface AccessorExceptionHandler {
  Object handleGetter(Method accessor, Throwable thr) throws Throwable; 
  void handleSetter(Method accessor, Throwable thr, Object accessorParam) throws Throwable;
}

where: 
accessor - method called (allow to extract class it belongs to etc)
thr - thrown exception on accessor
returned object - when handling getter we may want to re-interpret problem and return some value, null for instance.
accessorParam - value passed to setter that would lead to problem
throws Throwable - to re-throw if we do not want to handle problem but fail-fast.


cheers,
andy. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234306544</field>
		<field name="user_name">amichalec</field>
		<field name="body">I've applied temporary workaround using AOP (aspectj): accessor call through reflection is intercepted and surrounded by custom try-catch, like example below:

public aspect AccessorExceptionHandlerAspect {
  pointcut callAccessor(): 
    call(Object net.sf.dozer..ReflectionUtils.invoke(..)) &#38;&#38;
    within(net.sf.dozer..GetterSetterPropertyDescriptor);

  Object around(): callAccessor() {
    try {
      return proceed();
    } catch (MappingException e) {
      // introspect chained exceptions here and react e.g. returning null
      return null;
    }
  }
}

cheers,andy.</field>
</message>

<message>
		<field name="adddate">1234221662</field>
		<field name="user_name">amichalec</field>
		<field name="body">By custom mapper I ment &#34;custom converter&#34;
cheers,andy.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2681741</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Support Multiple Source Field Mapping</field>
	<field name="open_date">1236756484</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">Dozer should support multiple source field mapping. Just need to figure out what is the best way to do that.
As described here https://sourceforge.net/forum/message.php?msg_id=6738005</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1249383989</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1249383989</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2714549</field>
	<field user_id="2453993" name="submitted_by">jananiv</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">ArrayList to ArrayList copy</field>
	<field name="open_date">1238076360</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">For copying custom objects from one ArrayList to other ArrayList custom object,curretly we need to have same field names in both the source and destination objects. Ic can better if we can have have with different field names for both the objects.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1249383978</field>
		<field name="user_name">buzdin</field>
		<field name="body">Don't really get this feature request.
Are you using Xml configuration or talking about implicit mapping without Xml?

Dmitry</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2546552</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">6</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Enhancement of the Custom converter</field>
	<field name="open_date">1233261464</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Please enchance the customer convert with:
- Conditional usage indication.
Add an accept method that indicates if the converter is applicable, such
that runtime conditions can be used to indicate his usage instead of only
configuration indication through for example a field tag. So if the accept
method returns false, dozer should just pretend if the customer doesn't
exists and perform a normal mapping without the converter. (kind of listener mechanism)

- Specify the dozer mapper or mapper processor as argument to the custom
converter such that it can be used to perform recursive mapping of nested
properties/objects.

Regards,
Ed Bras</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262645236</field>
		<field name="user_name">buzdin</field>
		<field name="body">Spring injection of custom converter is possible in current release btw</field>
</message>

<message>
		<field name="adddate">1262645196</field>
		<field name="user_name">buzdin</field>
		<field name="body">it is possible to get mapper object by implementing MapperAware interface by your custom converter. Change is done in trunk and will be released with 5.2</field>
</message>

<message>
		<field name="adddate">1245869993</field>
		<field name="user_name">buzdin</field>
		<field name="body">Investigation in progress...</field>
</message>

<message>
		<field name="adddate">1233311619</field>
		<field name="user_name">edbras</field>
		<field name="body">I'ts also desirable to iject the custom converter instead Dozer creating it, such that we can decoarate it with our own properties. In this way we can create it for example as Spring bean.

The same counts for the other &#34;helper&#34; objects that you can use with Dozer like the factory and listeners.

-- Ed</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245869993</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1245869993</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245869993</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2548449</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">General performance improvement requests ?</field>
	<field name="open_date">1233306928</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Interface Improvements (example)</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We would should have a kind of performance improvement tracker where developers can post there performance improvement requests.
Why a separated tracker ? -&#62; simple because they are very important for dozer.
I am sure that many developers notice them, but never mention them back to the Dozer developers as there not good place to drop them.

Below you find some of mine. I hope others will drop them below as well till we got a better solution.

-- Ed
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1246102169</field>
		<field name="user_name">buzdin</field>
		<field name="body">Instead of separate tracker I have added &#34;Performance Issue&#34;  ticket type in bugs section. Please use it if you feel that your test case is much slower than similar simpler Dozer mappings.

As of petstore I think it is a nice idea. I would do a GWT -&#62; Dozer -&#62; Spring -&#62; Hibernate project. It could contain integration tests you have talked about. Should consider that after 5.1 release.

As of performance testing complex mapping should exist, but the test itself will not check that each and every field is mapped correctly. It would serve different purposes. If we notice a bug the idea is to have fine-grained test to reproduce this behavior without additional &#34;white noise&#34; in the same test.</field>
</message>

<message>
		<field name="adddate">1234950087</field>
		<field name="user_name">edbras</field>
		<field name="body">Hi,

I can provide you with the perf tests. But I think it should take place in a more structured way.
Don't forget, that you will get about a hunderd test classes, that you also have to process such that they work in the dozer project.
What you would get: a collection of domain objects will all kind of interfaces and super classes. A bunch of dto objects with mostly super classes and some interfaces. A mapping file that's about 500 hunderd lines and growing fast at the moment. Test classes with detail asserts for every field. The test run in loops, map to new and existing objects, etc... It all concerns testNg tests btw. It will costs you a bit of time to process all this such that it complies the dozer way of testing/framework...

Anyway: like a mentioned in another forum post or feature request (can't remember), I think there should be a kind of petstore application that uses dozer. The petstore is just another (nightly) integration test but contains all complex functionality that dozer offers, that can be used a example for others (safes you all the enoying forum questions) and contains all kind of perf tests.  

I think some of the dozer tests already come a long way, but don't comply to all the petstore requirements. 
So I am not sure what is the best way to go: change current tests such that you get a kind of petstore test, or use mine tests as starting point?... I donno knowww..

Let me know what you decide.

-- Ed</field>
</message>

<message>
		<field name="adddate">1234927025</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Ed,

I think the more perf tests the better, so if you could provide the test case you mentioned that would be great.  We could add it to our existing perf test suite.

Let me give some thought to adding a separate tracker for perf related requests.  For now, do you think it would be ok to add to the existing feature request tracker and flag them as perf related as you see best?

Performance improvement is a never ending battle and we should always look for ways to improve.  Fortunately we dont get too many perf related issues, but I know there will always be areas to improve further.  I think your suggestions below are good examples and we should implement and run our perf regression tests to see the improvement for those use cases.  Thanks</field>
</message>

<message>
		<field name="adddate">1234926999</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Ed,

I think the more perf tests the better, so if you could provide the test case you mentioned that would be great.  We could add it to our existing perf test suite.

Let me give some thought to adding a separate tracker for perf related requests.  For now, do you think it would be ok to add to the existing feature request tracker and flag them as perf related as you see best?

Performance improvement is a never ending battle and we should always look for ways to improve.  Fortunately we dont get too many perf related issues, but I know there will always be areas to improve further.  I think your suggestions below are good examples and we should implement and run our perf regression tests to see the improvement for those use cases.  Thanks</field>
</message>

<message>
		<field name="adddate">1234926984</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Ed,

I think the more perf tests the better, so if you could provide the test case you mentioned that would be great.  We could add it to our existing perf test suite.

Let me give some thought to adding a separate tracker for perf related requests.  For now, do you think it would be ok to add to the existing feature request tracker and flag them as perf related as you see best?

Performance improvement is a never ending battle and we should always look for ways to improve.  Fortunately we dont get too many perf related issues, but I know there will always be areas to improve further.  I think your suggestions below are good examples and we should implement and run our perf regression tests to see the improvement for those use cases.  Thanks</field>
</message>

<message>
		<field name="adddate">1233914913</field>
		<field name="user_name">edbras</field>
		<field name="body">I think a more complex enterprise alike test case should be added. A kind of petstore test case. 
Dozer contains now many small test cases and many of them are nice but too simple and not very  representative like the proxy test case that I mentioned in a bug report.

I think that many of the bugs comes just because of that, because complex situations are never tested.

I am thinking about a complex domain model with interfaces and super classes that contains a mapping of about 500 lines of configuration that covers most of the configuration options.
A real integration test.

I, or others, could easy provide you with some code so it's not a lot of work to implement.

-- Ed</field>
</message>

<message>
		<field name="adddate">1233757940</field>
		<field name="user_name">edbras</field>
		<field name="body">The custom bean factory signature is:
	public Object createBean(final Object srcObj, final Class srcObjClass, final String targetObjId) throws RuntimeException {

I don't realy understand why the targetClass isn't specified in this signature as I noticed that it's know before calling this method.
Now I have to always create this target class from the specified targetObjId. It's not a very expensive operation, but it might be worth having a look at it.</field>
</message>

<message>
		<field name="adddate">1233307368</field>
		<field name="user_name">edbras</field>
		<field name="body">I noticed in the method MappingProcessor.mapOrRecurseObject that always a DateFormatContainer is created, even when I am mapping a simple int :(
I don't think this should happen for a simple int mapping..

The code snippet involved:
-----
   if (MappingUtils.isPrimitiveOrWrapper(srcFieldClass) || MappingUtils.isPrimitiveOrWrapper(destFieldType)) {
      // Primitive or Wrapper conversion
      if (fieldMap.getDestHintContainer() != null) {
        destFieldType = fieldMap.getDestHintContainer().getHint();
      }
      DateFormatContainer dfContainer = new DateFormatContainer(fieldMap.getDateFormat());

---

The date formatter is used to determine the Converter, but I think you can easily set the dContainer to null in case of non-date conversion as it's not  used (further on in the code) when the field value isn't a date-kind of object.</field>
</message>

<message>
		<field name="adddate">1233307046</field>
		<field name="user_name">edbras</field>
		<field name="body">I think the method private static Object getExistingValue(FieldMap fieldMap, Object destObj, Class destFieldType) in the MappingProcessor can perform much better by first checking if it concerns a collection though the destination value class type instead of first retrieving the destination value through reflection and then determine through the object instance if it concerns a collection and then simple throwing the result away. It safes you the reflection action in case it concerns a Collection. Please have a look at this? (is a thiny change I think) </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1246102169</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2813209</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Create Petstore application</field>
	<field name="open_date">1246102331</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">None</field>
	<field name="details">To demonstrate complex Dozer use-cases and provide integration testing platform for modern frameworks Petstore application should be created.
It will be based on GWT-&#62;Dozer-&#62;Spring-&#62;Hibernate stack and will serve as a reference implementation. Other frameworks could also be considered afterwards.
The important aspect is to check how all proxies, interceptors, bytecode weavings, serialization works together with Dozer and provide a reasonably real-world playground for continous integration and performance testing.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1246354738</field>
		<field name="user_name">vadeg</field>
		<field name="body">I'm using Dozer in huge web application (Spring + Hibernate + etc.) with RCP client, based on Swing. It's cool, but there is only one thing: you need to implement transfer object one per request and map it to your domain model very carefully, because Dozer has some bugs with mapping hashmaps and don't support some dynamic structures, like Dynabeans, f.e.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2814461</field>
	<field user_id="2418250" name="submitted_by">vadeg</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Commons DynaBean support</field>
	<field name="open_date">1246354469</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">It will be very useful to add DynaBean support for mappings. 

Things to do:

- if srcObject is inherited/or itself DynaBean, then build property descriptor usring scrObj.getDynaClass() or using Dynaclass.getDynaProperties(). ClassMapBuilder.addDefaultFieldMappings need to be modified.

- map only properties, that exist on src Dynabean and only to existing DynaBean properties (if destObj is dynabean too).

- maybe, add ability to not write custom get/set methods attributes in xml. Intead, add new DozerPropertyDescriptor, which knows, how to get and set DynaBean properties.


</field>
</artifact>
<artifact>
	<field name="artifact_id">2814969</field>
	<field user_id="2549437" name="submitted_by">jonathanmastin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Warn the user when fields are ignored during mapping</field>
	<field name="open_date">1246421165</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Hi!  Thanks for this great product.  It's a pleasure to work with.

I suggest for peace of mind, that configuration for a &#34;I'm unit testing&#34; mode also be added, so that when performing a mapping, any fields that got ignored (because there wasn't a matching field with same name on the dest object) are highlighted very clearly.  For example, logging a WARN level message that says &#34;this field didn't get mapped!&#34; or even throwing a runtime exception.  

I'll continue to write unit tests that check for this - but it would be nice to have this feature as well.

Thanks again for you product,
Jonathan</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1306394948</field>
		<field name="user_name">visik7</field>
		<field name="body">any update or partial patch for this ?</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1867680</field>
	<field user_id="1977289" name="submitted_by">romanschlegel</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Support Mapping Conditions</field>
	<field name="open_date">1199885517</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">This feature would probably be very easy to implement, but in some cases help a lot:
&#60;mapping&#62; 
  &#60;class-a&#62;my.A&#60;/class-a&#62;
  &#60;class-b&#62;my.B&#60;/class-b&#62;   
    &#60;field&#62;
      &#60;a condition=&#34;isValid&#34;&#62;fieldOfClassA&#60;/a&#62;
      &#60;b&#62;fieldOfClassB&#60;/b&#62;
    &#60;/field&#62;
&#60;/mapping&#62;  

The behaviour should be that &#34;fieldOfClassA&#34; shall only be mapped to &#34;fieldOfClassB&#34; in case &#34;isValid&#34; returns &#34;true&#34;.

In our project the method getFieldOfClassA() throws an exception if it contains an invalid value. This is to ensure that no one can read it before it has been set properly. But it makes unfortunately Dozer unusable for us since we would have to implement custom mappers for each class, which is not an option at the moment.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1202725812</field>
		<field name="user_name">maxxyme</field>
		<field name="body">Logged In: YES 
user_id=731522
Originator: NO

Would be a good idea too... but unfortunately for you, the developers seem to not read requests like this.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1249383871</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">3</field>
		<field name="entrydate">1249383871</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1249383871</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1199886027</field>
		<field name="mod_by">romanschlegel</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2999904</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Configurable Auto Mapping Strategy</field>
	<field name="open_date">1273574601</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Instead of relying only on naming convention mapping it should be possible to define linkage strategy. For example map case insensitive names or exclude annotated properties.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273574681</field>
		<field name="user_name">buzdin</field>
		<field name="body">It should be able to build custom mapping in this way</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2848928</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Spring Bean Ids should be passed to Dozer</field>
	<field name="open_date">1251878909</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">When defining custom converters in Spring Bean Ids are not transfered to Dozer context, therefore it is impossible to reference those by custom-converter-id attribute. It should be possible to reuse Ids from Spring in Dozer mapping (only if bean is provided with id of course).</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1255452562</field>
		<field name="user_name">procher</field>
		<field name="body">It is possible, if you:
1) set your converter in the property customConvertersWithId of the DozerBeanMapper 
2) use it in the &#60;field&#62; tags of your mappin files: &#60;field custom-converter-id=&#34;yourBeanId&#34;&#62;...

What fails is the possibility to declare the ids in the global configuration! 
&#60;configuration &#62;
  &#60;custom-converters&#62; 

    &#60;converter id=&#34;idOfMyConverterInSpringConfig&#34; &#62;
      &#60;class-a&#62;org.dozer.vo.TestCustomConverterObject&#60;/class-a&#62;
      &#60;class-b&#62;another.type.to.Associate&#60;/class-b&#62;
    &#60;/converter&#62;
     
  &#60;/custom-converters&#62;     
&#60;/configuration&#62;</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2849882</field>
	<field user_id="402991" name="submitted_by">micw</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Support or constants in mappings</field>
	<field name="open_date">1251979087</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Example: my application maps entities for delivery via webservice. The source has always an ID and one property that can be used as &#34;displayName&#34;. The target object consists of id,type and displayName (where type is the type of the originating object). With the current implementation I need to get a getType() function in each of my source objects. It would be good if i simply could create somthing like that:

	&#60;mapping&#62;
		&#60;class-a&#62;MyBusinessObject&#60;/class-a&#62;
		&#60;class-b&#62;ResultListDto&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;title&#60;/a&#62;
			&#60;b&#62;displayName&#60;/b&#62;
		&#60;/field&#62;
		&#60;field&#62;
			&#60;a&#62;&#34;Type:MyBusinessObject&#34;&#60;/a&#62;
			&#60;b&#62;typ&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1302783395</field>
		<field name="user_name">athaphian</field>
		<field name="body">I would also like this functionality to support primitive literals. So I could just fill a field in bean b for instance with a literal string or int or something.

We also use dozer to map to/from webservice calls and in the request we need to set some value always to the same string.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2919058</field>
	<field user_id="2744287" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Converting JAXBElement objects to Plain Old Java Types</field>
	<field name="open_date">1261446335</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">Currently, Dozer does not support conversion from JAXBElement&#60;Type&#62; to java.*.type.  It does not seem to recognize that these are different classes, and actually assigns the JAXBElement-wrapped value to the plain old java type object at runtime.  This causes problems at runtime (generally, the converter also appears to be having trouble with parametrized types).

It would be great if parametrized (as they all have to be) JAXBElement objects could be automatically converted to their unwrapped value types. In other words, when given:
CLASS SOURCE:
JAXBElement&#60;String&#62; testString = new JAXBElement(new QName(), &#34;JAXB Element String Value&#34;, String.class);
CLASS DESTINATION:
String testString = &#34;&#34;;

In this case, calling mapper.map(source, Destination.class) should automatically call getValue() on the Source class's JAXBElement attribute, and set the Destination.testString value to that string.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1350410673</field>
		<field name="user_name">lkbatizy</field>
		<field name="body">Still no movement here? </field>
</message>

<message>
		<field name="adddate">1306245627</field>
		<field name="user_name"></field>
		<field name="body">When are you planning to add this feature (or offer theses custom converters)?

Currently Dozer is nearly unusable for devs who are forced to work with jaxb...</field>
</message>

<message>
		<field name="adddate">1262549084</field>
		<field name="user_name">buzdin</field>
		<field name="body">Right now I see a solution as simple as custom converter enabled globally in configuration block. We could provide that in the Dozer distribution for developers to enable.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2934901</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Support of default xml name</field>
	<field name="open_date">1263899761</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Currently default mappings.xml name is supported only in DozerSingletoneWrapper, which is a bit out of date.
The task is to propagate default naming convention through default DozerBeanMapper startup process.</field>
</artifact>
<artifact>
	<field name="artifact_id">2940972</field>
	<field user_id="1592658" name="submitted_by">scr85</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Improvement of collections mapping</field>
	<field name="open_date">1264597671</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">At the moment if you have a collection as a bean property it doesn't get mapped by Dozer if no corresponding setter exists. Example:

public class Bean {
	private List&#60;?&#62; list;
	
	public List&#60;?&#62; getList() {
		return list;
	}
}

The collection only get mapped by GetterSetterPropertyDescriptor.writeDeepDestinationValue(...) method when a setter is available. Although it could try to receive the collection via getter, then invoke clear and addAll(foreign collection) on the received collection. Proposal:
      Object readedValue = value;

      //Check to see if collection needs to be resized
      if (MappingUtils.isSupportedCollection(value.getClass())) {
        int currentSize = CollectionUtils.getLengthOfCollection(value);
        if (currentSize &#60; hierarchyElement.getIndex() + 1) {
          Class&#60;?&#62; targetClass = null;
          if(CollectionUtils.isArray(pd.getPropertyType())) {
        	  targetClass = pd.getPropertyType().getComponentType();
          } else if (CollectionUtils.isCollection(pd.getPropertyType())) {
        	  targetClass = ReflectionUtils.determineGenericsType(pd);
          }       	
        	
          value = MappingUtils.prepareIndexedCollection(pd.getPropertyType(), value, DestBeanCreator.create(targetClass), hierarchyElement.getIndex());
          
          if(pd.getWriteMethod() == null &#38;&#38; value != null &#38;&#38;
        		  CollectionUtils.isCollection(value.getClass()) &#38;&#38;
        		  CollectionUtils.isCollection(pd.getPropertyType())) {
        	  Collection orginalCollection = (Collection) readedValue;
        	  Collection newCollection = (Collection) value;
        	  orginalCollection.clear();
        	  orginalCollection.addAll(newCollection);
          } else {
        	  ReflectionUtils.invoke(pd.getWriteMethod(), parentObj, new Object[] { value });
          }
        }
      }
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1265043759</field>
		<field name="user_name">buzdin</field>
		<field name="body">This is something we should implement in next release to support JAXB collections.
I will take your code as a reference implementation and look how it fits.
Thanks!</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1265043759</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2943920</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">BundleActivator</field>
	<field name="open_date">1265043831</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">None</field>
	<field name="details">To integrate with OSGi honestly we should implement BundleActivator to start-up and tear-down dozer instance.
List of Export Packages should also be reviewed. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273555263</field>
		<field name="user_name">vadeg</field>
		<field name="body">I've worked with OSGi and can make BundleActivator for dozer.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2978567</field>
	<field user_id="2861067" name="submitted_by">shelmling</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Generic constructor mapping</field>
	<field name="open_date">1269866580</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Dear Dozer Team,

currently, objects of classes without a no-arg constructor have to be created using custom BeanFactory implementations.
I'd suggest to have an alternative, generic way via configuration.

Example:

&#60;mapping&#62;
  &#60;class-a&#62;test.Source&#60;/class-a&#62;
  &#60;class-b&#62;test.Target&#60;/class-b&#62;  
  &#60;field&#62;
    &#60;a&#62;foo&#60;/a&#62;
    &#60;b construcor-arg-index=&#34;0&#34; constructor-arg-type=&#34;java.lang.Long&#34;&#62;bar&#60;/b&#62;
  &#60;/field&#62;
  &#60;field&#62;
    &#60;a&#62;property1&#60;/a&#62;
    &#60;b construcor-arg-index=&#34;1&#34; constructor-arg-type=&#34;java.lang.String&#34;&#62;propertyA&#60;/b&#62;
  &#60;/field&#62;
&#60;/mapping&#62;

In this example I'd assume that the class test.Target has a constructor with the signature Target(Long, String). Futhermore I'd expect Dozer would call this constructor with the property values from test.Source#getFoo() and test.Source#getProperty1().

How do you feel about this?</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1337278934</field>
		<field name="user_name"></field>
		<field name="body">Thanks shelmling for your request, i've been crying for something like this.

Once you have the arg-index the data type can be inferred from the class (metadata).
Not having to spec it would hep to avoid user errors. 

&#60;b construcor-arg-index=&#34;0&#34; &#62;bar&#60;/b&#62;
</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2986976</field>
	<field user_id="2874606" name="submitted_by">ivotte</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Map null to null in Mapper.map()</field>
	<field name="open_date">1271227095</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">
Mapper.map(Object src, Class targetClass) should return null, when &#34;src&#34; is null. Right now, an exception is thrown. 
The existing behaviour often requires to check the null case, which could be avoided:

Article article = articleDAO.findById(id);
if( article != null ) {
    ArticleTO articleTO = beanMapper.map(article, ArticleTO.class);
}
return article;

</field>
</artifact>
<artifact>
	<field name="artifact_id">2985927</field>
	<field user_id="288335" name="submitted_by">gonzalad</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Collection without setters not working in 5.2.0</field>
	<field name="open_date">1271079594</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hello,

I've just upgraded Dozer from 5.1 to 5.2.0 and was testing the fix for Support for collection without setters - ID: 2812002
https://sourceforge.net/tracker/?func=detail&#38;aid=2812002&#38;group_id=133517&#38;atid=727371

It doesn't appear to work.

Here is the test case : dozer-2812002-01.zip - maven project.

Just run DozerConverterTest
I'm using the following test cases 
- DozerConverterTest : the JUnit test class
- converter-test-dozer-bean-mappings.xml : the mapping file
- SampleGroupePersonnes, SamplePersonne, SampleGroupePersonnesType, SamplePersonneType the test value objects

SampleGroupePersonnesType value object declares a getter collection without the setter.

When running DozerConverterTest's JUnit, I have this output :
java.lang.AssertionError: personnesType.personnes size should be 2 expected:&#60;0&#62; but was:&#60;2&#62;
	at org.junit.Assert.fail(Assert.java:91)
	at org.junit.Assert.failNotEquals(Assert.java:645)
	at org.junit.Assert.assertEquals(Assert.java:126)
	at org.junit.Assert.assertEquals(Assert.java:470)
	at com.natixis.sphinx.core.converter.DozerConverterTest.testCollectionConverter(Unknown Source)

Here is the converter-test-dozer-bean-mappings.xml extract :
&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;mappings xmlns=&#34;http://dozer.sourceforge.net&#34;
          xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
          xsi:schemaLocation=&#34;http://dozer.sourceforge.net
          http://dozer.sourceforge.net/schema/beanmapping.xsd&#34;&#62;
  
  	&#60;mapping&#62;
  		&#60;class-a&#62;
  			com.natixis.sphinx.core.converter.SampleAdresse
  		&#60;/class-a&#62;
  		&#60;class-b&#62;
  			com.natixis.sphinx.core.converter.SamplePersonne
  		&#60;/class-b&#62;
  		&#60;field&#62;
  			&#60;a&#62;country&#60;/a&#62;
  			&#60;b&#62;pays&#60;/b&#62;
  		&#60;/field&#62;
  		&#60;field&#62;
 			&#60;a&#62;zipCode&#60;/a&#62;
 			&#60;b&#62;codePostal&#60;/b&#62;
 		&#60;/field&#62;
  	&#60;/mapping&#62;
  &#60;/mappings&#62;
  
Should I reopen https://sourceforge.net/tracker/?func=detail&#38;aid=2812002&#38;group_id=133517&#38;atid=727371 issue or am I missing something ?

Thanks</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">370297: dozer-2812002-01.zip</field>
		<field name="entrydate">1271079595</field>
		<field name="mod_by">gonzalad</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2981120</field>
	<field user_id="2866272" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Generic Converter</field>
	<field name="open_date">1270214671</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">Hi there,

I found that when extending DozerConverter&#60;A,B&#62;, I was not able to use it.. and seems that the dozer's Converter try to instanciate a Converter using 2 paramters, even if the parameter have been declared inside the Class Tempate.

And one More bug, the Autoboxing is not well managed.

So the solution is embed, hope it will be include in the next version ! 

:-) 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273697731</field>
		<field name="user_name">buzdin</field>
		<field name="body">Could you provide an example of when it is not possible to use DozerConverter? The idea was that you pass prototype objects into constructor determining exact types. You can theoretically not have any Generic Types declared in your constructor because compiler does not enforce that.</field>
</message>

<message>
		<field name="adddate">1273694787</field>
		<field name="user_name">buzdin</field>
		<field name="body">Autoboxing fixed. Generics pending</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273669599</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">369203: DozerConverter.java</field>
		<field name="entrydate">1270214672</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3420968</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping Metadata Introspection</field>
	<field name="open_date">1318188964</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">Create a way for Dozer to expose registered mappings in read-only fashion.
See DozerBeanMapper.getMappingMetadata().</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1318189001</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318189001</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318189001</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3314926</field>
	<field user_id="3426011" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">OSGI support</field>
	<field name="open_date">1307750294</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hi, I saw that OSGI support was added in 5.2.1. It has been removed in the releases after that. Is there any reason for it? I can use the maven-bundle-plugin to OSGi it, but it would help if the OSGI'ed version of library is made available (Our release engg does not like modifying open source jars).

Thank you.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1307969964</field>
		<field name="user_name">buzdin</field>
		<field name="body">OSGI release is moved to the separate jar.
http://repo1.maven.org/maven2/net/sf/dozer/dozer-osgi/</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1307969964</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1307969964</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1799447</field>
	<field user_id="1777661" name="submitted_by">mthielen</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">GUI for creating mapping XML</field>
	<field name="open_date">1190356267</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi again,

I'm thinking about writing some SWT/Eclipse Plugin-Gui for creating the Mappings. Did you already thought about this? If not i will try to code something myself. I will post my results here.

Markus</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1303992444</field>
		<field name="user_name">buzdin</field>
		<field name="body">closed</field>
</message>

<message>
		<field name="adddate">1228774021</field>
		<field name="user_name">mthielen</field>
		<field name="body">Hi Paolo,
finally i took your proposal and added it into the new 0.6.3 version of the plugin which contains several other fixes. It also works with Ganymede and SpringIde 2.2.1.

Thanks for your information and sorry for the long delay.
Markus</field>
</message>

<message>
		<field name="adddate">1212355178</field>
		<field name="user_name">sonicaaaa</field>
		<field name="body">Logged In: YES 
user_id=1311553
Originator: NO

hi. i want to report that i've been able to make the plugin work. at present i have a project in which validation works properly and another one wich is saying that no property is readable(even if i'm sure they are correct). i'm still investigating to understand the cause of different behaviours.

i think i've understand my question about custom converters(guess they are already loaded in the main Mapper obj)


and debugging the script i've also found useful to add this check in class Validator


					if(textNode == null){
						Integer[] location = (Integer[])node.getUserData(&#34;location&#34;);
						String className = DozerPluginUtils.getMappingClassName(abNode);
						String nodeName = abNode.getNodeName();						
						
						validationReport.addError(&#34;Unsetted property value in node &#34;+nodeName +  &#34; for class &#34; + className, location[0], location[1], validationReport.getFileURI());
						
					}
					//...is fieldname correct
					else if (textNode.getNodeType() == Node.TEXT_NODE) {



to identify unsetted values.


thanks again for your job


bye

paolo</field>
</message>

<message>
		<field name="adddate">1212320127</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

Hi,
since Franz gave me project access to dozer, i will continue releasing new versions of the plugin in the download-area.

Thanks for testing,
Markus</field>
</message>

<message>
		<field name="adddate">1211900841</field>
		<field name="user_name">sonicaaaa</field>
		<field name="body">Logged In: YES 
user_id=1311553
Originator: NO

hi. thanks again for you work.

i have to report a couple of bug:

-custom-converter-id links doesn't work. and actually, how did you make it work? is it reading the alias-class binding from the spring main configuration file?
-validation seems not to be working. i added the Validation Builder to project and each time i save the config file ia can see the progress bar work and it seems to procecess files but i doesn't recgnoize wrong properties or wrong classes.
-could you add linking to classes in &#60;a-hint&#62; nodes'


thanks again

bye

paolo</field>
</message>

<message>
		<field name="adddate">1211808179</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

File Added: screenshots.zip</field>
</message>

<message>
		<field name="adddate">1211808059</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

File Added: net.sf.dozer.eclipse.plugin_0.6.0-src.jar</field>
</message>

<message>
		<field name="adddate">1211808031</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

Hi, thanks for the warm words :)
I updated the plugin again (0.6.0) and attached a screenshots.zip file that contains some screenshots of the functionalities.

You now can also create a mapping file via the &#34;new-wizard&#34; in eclipse. Every element in a mapping file is now hyperlinked (class-a, class-b, custom-converter, custom-converter-id, a, b, map-get-method, get-method, map-set-method, set-method). Every element uses auto-complete. Your Interface-bug is also resolved. 

For activating the validation of mapping files, you must add the wst-validation builder to your project. To do this you have to select the checkbox &#34;Add Validation Builder to project&#34; within the project properties (shown in activate-validation.jpg). It validates wrong class-a/class-b/customer-converter class names, wrong custom-converter(-id) classes (due missing interface), properties that cant be read/write from/to.

Hope i didnt forget anything.

Enjoy,
Markus
File Added: net.sf.dozer.eclipse.plugin_0.6.0.jar</field>
</message>

<message>
		<field name="adddate">1211621644</field>
		<field name="user_name">sonicaaaa</field>
		<field name="body">Logged In: YES 
user_id=1311553
Originator: NO

hi. i'm happy to help testing this very productive plugin.

i have to say that i haven't seen difference between version 5.2 and 5.5 i cannot see if values in my xml are correct(field or class name). and actually i don't even know what should i expect to see if the correctness check would work. could you provide a screenshot?

then a want to report a minor bug.

autocomplete doesn't suggest interfaces.

if i have to specify an interface and i write the whole package name that points to a package containing only interfaces, the wizard doesnt suggest anything

ex:

com.my.interfaces.

CTRL + SPACE

doesn't suggest anything.



thanks for you job!

i'm always available for further testings

thanks again

paolo</field>
</message>

<message>
		<field name="adddate">1211195237</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

File Added: net.sf.dozer.eclipse.plugin_0.5.5-src.jar</field>
</message>

<message>
		<field name="adddate">1211195213</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

sonicaaaa,

Thanks for testing the plugin. I just released v0.5.5 which shows wrong classnames, properties, get/setter and so on.
Please have a look.

Thanks,
Markus
File Added: net.sf.dozer.eclipse.plugin_0.5.5.jar</field>
</message>

<message>
		<field name="adddate">1210867291</field>
		<field name="user_name">sonicaaaa</field>
		<field name="body">Logged In: YES 
user_id=1311553
Originator: NO

sorry, i've just realized that i was using a wrong fully qualified name.

based on this experience, is there a way to point out wrong fully qualified name in &#60;class-a&#62; tag?


thanks

paolo</field>
</message>

<message>
		<field name="adddate">1210867064</field>
		<field name="user_name">sonicaaaa</field>
		<field name="body">Logged In: YES 
user_id=1311553
Originator: NO

[quote]
Unfortunately the plugin didnt work for the most obvious case (selecting
properties within &#60;a&#62;/&#60;b&#62;-tags from the specified &#60;class-a&#62;/&#60;class-b&#62;
classes.

Now solved. Please continue giving me feedback.
Markus
[/quote]

Hi. i wanna report that i'm unable to selecting
properties from within &#60;a&#62;/&#60;b&#62;. all that i see is a suggestion of &#34;this&#34;. that's all.

could you help?

thanks

paolo</field>
</message>

<message>
		<field name="adddate">1207580424</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

File Added: net.sf.dozer.eclipse.plugin_0.5.2-src.jar</field>
</message>

<message>
		<field name="adddate">1207580301</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

Unfortunately the plugin didnt work for the most obvious case (selecting properties within &#60;a&#62;/&#60;b&#62;-tags from the specified &#60;class-a&#62;/&#60;class-b&#62; classes.

Now solved. Please continue giving me feedback.
Markus

File Added: net.sf.dozer.eclipse.plugin_0.5.2.jar</field>
</message>

<message>
		<field name="adddate">1207385682</field>
		<field name="user_name">sonicaaaa</field>
		<field name="body">Logged In: YES 
user_id=1311553
Originator: NO

hello. i just wanna report that i have just tried your plugin and it seems to work fine.

thanks

paolo</field>
</message>

<message>
		<field name="adddate">1207385596</field>
		<field name="user_name">sonicaaaa</field>
		<field name="body">Logged In: YES 
user_id=1311553
Originator: NO

hello. i just wanna report that i have just tried your plugin and it seems to work fine.

thanks

paolo</field>
</message>

<message>
		<field name="adddate">1206823721</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

A Performance update attached.</field>
</message>

<message>
		<field name="adddate">1206823691</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

File Added: net.sf.dozer.eclipse.plugin_0.5.1-src.jar</field>
</message>

<message>
		<field name="adddate">1206823672</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

File Added: net.sf.dozer.eclipse.plugin_0.5.1.jar</field>
</message>

<message>
		<field name="adddate">1206617091</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

That would be quite cool!
Did u already check the plugin yourself?

Markus</field>
</message>

<message>
		<field name="adddate">1206602092</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

The best I can do is put it as a release...no idea how many people will try it out :)

I put this on the site as a release...</field>
</message>

<message>
		<field name="adddate">1206443860</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

File Added: net.sf.dozer.eclipse.plugin_0.5.0.jar</field>
</message>

<message>
		<field name="adddate">1206443842</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

Hi Franz,
since i cant stop developing plugins, i wrote the next version which contains:
- ContentAssist f&#195;&#188;r A/B-Class, custom-converter/custom-converter-id, get/set-methods, map-get/set-methods
- Problems for custom-converter/custom-converter-id (class/bean does not implement interface CustomConverter)

So i think i have everything together except for the click-gui :)
I really need some testing as the plugin growed a little on size!

Can u publish the plugin somewhere so i get some feedback?
Markus

File Added: net.sf.dozer.eclipse.plugin_0.5.0-src.jar</field>
</message>

<message>
		<field name="adddate">1206080719</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

That is awesome Markus. I will give it a shot and add it to our svn repository. I hope others can benefit as well!

Thanks for your time!

Franz</field>
</message>

<message>
		<field name="adddate">1206047773</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

Hi guys,
Finally i had some time to getting into eclipse plugins. The result is a (very) small plugin for dozer-mapping-files that contains the basic functionality.
It depends on SpringIDE (http://springide.org), a plugin for writing spring configurations. As I use Spring with Dozer together it was the best way to use some functions from SpringIDE for the dozer-plugin. Dozer supports spring with the custom-converter-id attribute so the plugin does, too.
The plugin itself got the namespace net.sf.dozer.eclipse.plugin hope this is ok for now.
I attached the plugin that also contains the sources but is also fully working if copied to /plugins-dir of eclipse.

Features are:
- Hyperlinksupport (CTRL+click/F3) on class-a/class-b, custom-converter, custom-converter-id (finds Spring Bean), get/set-method and map-get/set-method (jumps to method)

Features planned are:
- Problems (custom-converter doesnt implement corrent Interface)
- Content Assist for all attributes
- Some GUI to click anything together (well, if i have a *lot* of time)

As i said the plugin has some dependencies as there are:
- Eclipse/JDT 3.3
- SpringIDE
- WST (also SpringIDE depends on that)

I have tested the plugin (and really use it for my projects) with the following config:
- Eclipse 3.3.2 on W32
- SpringIDE 2.0.4
It might work on lower versions, too.

Hope this helps. You might add it to your svn if you like it. I will try to continue developing on it, just ask me for new features or for some help if you want to develop on yourself.

Thanks again for your great Dozer framework!
Markus
File Added: net.sf.dozer.eclipse.plugin_0.1.0.jar</field>
</message>

<message>
		<field name="adddate">1190392489</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

We have had a couple of people attempt...no real progress :(.

We would love to see what you come up with and help with testing :)

Thanks for contributing.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1303992444</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1303992444</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1303992444</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">279081: screenshots.zip</field>
		<field name="entrydate">1211808179</field>
		<field name="mod_by">mthielen</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">279080: net.sf.dozer.eclipse.plugin_0.6.0-src.jar</field>
		<field name="entrydate">1211808059</field>
		<field name="mod_by">mthielen</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">279079: net.sf.dozer.eclipse.plugin_0.6.0.jar</field>
		<field name="entrydate">1211808031</field>
		<field name="mod_by">mthielen</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">278306: net.sf.dozer.eclipse.plugin_0.5.5-src.jar</field>
		<field name="entrydate">1211195237</field>
		<field name="mod_by">mthielen</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">278305: net.sf.dozer.eclipse.plugin_0.5.5.jar</field>
		<field name="entrydate">1211195213</field>
		<field name="mod_by">mthielen</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">273598: net.sf.dozer.eclipse.plugin_0.5.2-src.jar</field>
		<field name="entrydate">1207580424</field>
		<field name="mod_by">mthielen</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">273595: net.sf.dozer.eclipse.plugin_0.5.2.jar</field>
		<field name="entrydate">1207580301</field>
		<field name="mod_by">mthielen</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">272415: net.sf.dozer.eclipse.plugin_0.5.1-src.jar</field>
		<field name="entrydate">1206823691</field>
		<field name="mod_by">mthielen</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">272414: net.sf.dozer.eclipse.plugin_0.5.1.jar</field>
		<field name="entrydate">1206823672</field>
		<field name="mod_by">mthielen</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">271740: net.sf.dozer.eclipse.plugin_0.5.0.jar</field>
		<field name="entrydate">1206443860</field>
		<field name="mod_by">mthielen</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">271739: net.sf.dozer.eclipse.plugin_0.5.0-src.jar</field>
		<field name="entrydate">1206443842</field>
		<field name="mod_by">mthielen</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1206080720</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">271246: net.sf.dozer.eclipse.plugin_0.1.0.jar</field>
		<field name="entrydate">1206047773</field>
		<field name="mod_by">mthielen</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3017589</field>
	<field user_id="2759895" name="submitted_by">masterofchi</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Get a handle on mappedFields property from CustomConverter.</field>
	<field name="open_date">1276780995</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">We have a scenario as follows:
&#60;code&#62;
class Party {
    private PartyName defaultName;
    private Set&#60;PartyName&#62; allNames;
    ...
}

class PartyName {
    private String firstName;
    private String lastName;
    ...
{
&#60;/code&#62;
We need to use CustomConverters to convert both the &#60;code&#62;defaultName&#60;/code&#62; and &#60;code&#62;allNames&#60;/code&#62; fields. The instance of the &#60;code&#62;defaultName&#60;/code&#62; object will exist in the &#60;code&#62;allName&#60;/code&#62; as well. The CustomConverters do some additional logic but also 
utilize the MapperAware Interface to map the fields. We need to be able to set the instances of &#60;PartyName&#62; on to the mappedFields in the MappingProcessor so that when either of the CustomConverters get executed they can first attempt to see if the object was already mapped 
previously and use that value before mapping it again. This introduces a problem for us as we end up with multiple instances due to the requirements 
we have for needing CustomConverters for these fields.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1294921123</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed. MapperAware converter will track the same converted objects and reuse the results if necessary.</field>
</message>

<message>
		<field name="adddate">1294159617</field>
		<field name="user_name">fuzails</field>
		<field name="body">See  ID: 3151273 https://sourceforge.net/tracker/index.php?func=detail&#38;aid=3151273&#38;group_id=133517&#38;atid=727368#</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1294921123</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1294921123</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1049136</field>
		<field name="entrydate">1294921123</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1294921123</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2848458</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">BigDecimal and Double mapping</field>
	<field name="open_date">1251813964</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">BigDecimal &#60;-&#62; Double transformation should be handled without custom Xml mappings.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1293881317</field>
		<field name="user_name">buzdin</field>
		<field name="body">BigDecimal &#60;-&#62; Double works without custom mappings</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1293881317</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293881317</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1293881317</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">929384</field>
		<field name="entrydate">1293881317</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293881317</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2476388</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Investigate new beanutils 1.8 converters</field>
	<field name="open_date">1230608755</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Investigate new beanutils 1.8 converters</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1293880690</field>
		<field name="user_name">buzdin</field>
		<field name="body">upgraded to 1.8.3. All bean utils converters are either reused or adapted in dozer.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1293880690</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293880690</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1293880690</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">891576</field>
		<field name="entrydate">1293880690</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293880690</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3022810</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">6</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Apache Camel Integration Improvement</field>
	<field name="open_date">1277816889</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.3.1</field>
	<field name="details">Currently Apache Camel provides basic support of using Dozer as TypeConversion framework via plugin.
The missing pieces are the following:
* ability to run Dozer mapping without Xml;
* usage of native Dozer osgi bundle instead of pre-generated one;
* dozer configurations and inversion of control should be in sync with Camel concept;

More details are here http://camel.465427.n5.nabble.com/Dozer-Integration-td498278.html#a498278
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1289846650</field>
		<field name="user_name">buzdin</field>
		<field name="body">SPI interface for resource loading in OSGi environments implemented.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129213</field>
		<field name="entrydate">1289847129</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1289846650</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1289846650</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1289846650</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2346187</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">6</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Provide alternate Java API for mappings</field>
	<field name="open_date">1227648188</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v.5.3.0</field>
	<field name="details">Provide alternate Java API for mappings.
Benefits:
  Refactoring support
  No need to go to file system
  No XML

XML configurations will be still supported.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1286714356</field>
		<field name="user_name">buzdin</field>
		<field name="body">Finally, first version is available!</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1286714357</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1286714357</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1286714357</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">891575</field>
		<field name="entrydate">1286714357</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1286714357</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3065767</field>
	<field user_id="2782883" name="submitted_by">wujeksrujek</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Improve generics usage</field>
	<field name="open_date">1284451139</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Interface Improvements (example)</field>
	<field name="artifact_group_id">Dozer v.5.3.0</field>
	<field name="details">DozerBeanMapper.setEventListeners(List&#60;DozerEventListener&#62;) takes only a list of DozerEventListeners, due to the way generics work. So, for example, this is not possible:
dozer.setEventListeners(Arrays.asList(new MyListener()));
as it returns a List&#60;MyListener&#62;.

The method signatures could be improved to read something like:
DozerBeanMapper.setEventListeners(List&#60;? extends DozerEventListener&#62;) </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1284667543</field>
		<field name="user_name">buzdin</field>
		<field name="body">done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1284667543</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1284667543</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1284667543</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1284667543</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1284667543</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2931921</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Warn on duplicate mappings</field>
	<field name="open_date">1263460583</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v.5.3.0</field>
	<field name="details">Currently Dozer silently overwrites mappings on duplicate src-&#62;dest pairs.
This situation should be signaled to developer. Behavior could be configurable to throw exception, print warning messages or even merge two mappings.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1281621896</field>
		<field name="user_name">buzdin</field>
		<field name="body">In the current version only duplicate mappings in the same Xml file resulted in exception. Now this it tracked across all possible sources.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1281621897</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1281621897</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1281621897</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">929384</field>
		<field name="entrydate">1281621897</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1281621897</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3038812</field>
	<field user_id="3010197" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Generate mapping code from dozer config</field>
	<field name="open_date">1280843939</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">Since dozer is ~1000 times slower then mapping by hand and still 10 times slower then doing it by reflection or spring BeanUtils we simply can not use it.
What about generating fast mapping code from the dozer mapping xml file?
Here is a link on the performance http://www.christianschenk.org/blog/java-bean-mapper-performance-tests/
We dicovered the same timings.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1281621842</field>
		<field name="user_name">buzdin</field>
		<field name="body">this is a duplicate</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1281621843</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1281621843</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1281621843</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2986747</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Integrate with SLF4J</field>
	<field name="open_date">1271192110</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v.5.3.0</field>
	<field name="details">Replace commons-logging with SLF4J API</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1278682445</field>
		<field name="user_name">buzdin</field>
		<field name="body">SLF4J is replacing commons-logging</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1278682445</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1278682445</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1278682445</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1278682445</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1278682445</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1945091</field>
	<field user_id="2065836" name="submitted_by">mping</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Let user specifiy maximum depth mapping</field>
	<field name="open_date">1208449757</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Independent of the clone algorithm of dozer (depth first or breadth first), the user should be able to specifiy the depth of the map. 

This can be handy in a scenario where the user is converting between Hibernate objects and regular DTOs, and the Hibernate objects are a complex graph. By using regular recursive or iterative map, if the object graph is complex and has many levels, the map operation will cause many db calls.

An integer param could be added to the map() operation to specify the depth of mapping.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1274906598</field>
		<field name="user_name">buzdin</field>
		<field name="body">this will not be implemented as db calls should be controlled by different mappings using mapId and field exclusions. New versions of dozer will have annotation based mappings, which will ease this task as well.</field>
</message>

<message>
		<field name="adddate">1229535394</field>
		<field name="user_name">joshbb</field>
		<field name="body">I Second this request</field>
</message>

<message>
		<field name="adddate">1229535354</field>
		<field name="user_name">joshbb</field>
		<field name="body">I Second this request</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1274906598</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1274906598</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1274906598</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3006592</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Allow createMethod on any class</field>
	<field name="open_date">1274730200</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">Currently createMethod is supported for target class only. Now it should be able to put fully qualified name of a class together with static factory method name.
Example 

createMethod=&#34;com.acme.app.Factory.createFoo&#34; </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1274903570</field>
		<field name="user_name">buzdin</field>
		<field name="body">implemented</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1274903571</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1274903571</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1274903571</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2433640</field>
	<field user_id="1759155" name="submitted_by">grzegorzoledzki</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Spring-enabled CustomConverters</field>
	<field name="open_date">1229440291</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">It would be great if one could inject {@link CustomConverter}s with Spring, i.e. have them defined as Spring beans and expect dozer to pick them up.

Currently there's CustomConverterDescription interface, so maybe another implementation of this would help?
SpringBeanCustomConverterDescription?
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1230065547</field>
		<field name="user_name">grzegorzoledzki</field>
		<field name="body">Hmm... I must've had a bad day. I don't understand the request now even myself. I will re-open the task if my memory gets back.
Sorry for the problem.</field>
</message>

<message>
		<field name="adddate">1229941450</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi,

But you can inject them now as well. Here is the example of converters, which are Spring managed beans.

    &#60;bean id=&#34;dozerBeanMapper&#34; class=&#34;net.sf.dozer.util.mapping.DozerBeanMapper&#34;&#62;
        &#60;property name=&#34;mappingFiles&#34;&#62;
            &#60;list&#62;
                &#60;value&#62;dozer-bean-mappings.xml&#60;/value&#62;
            &#60;/list&#62;
        &#60;/property&#62;
        &#60;property name=&#34;customConverters&#34;&#62;
            &#60;list&#62;
                &#60;ref bean=&#34;referenceDataConverter&#34;/&#62;
            &#60;/list&#62;
        &#60;/property&#62;
    &#60;/bean&#62;

Let me know if I did not get your request right.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230065547</field>
		<field name="mod_by">grzegorzoledzki</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230065547</field>
		<field name="mod_by">grzegorzoledzki</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2398049</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Reorganize test mapping and config files in src tree</field>
	<field name="open_date">1228599550</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">1.  Move all test xml mapping files from src/main/mappings to src/test/resources
2.  Remove src/main/mappings dir
3.  Move files in src/main/config to src/test/resources
4.  Remove src/main/config dir
5.  Create misc/docs, misc/jdk15_tests, misc/jmx-testengine dir's and move appropriate files into them
5.  Remove src/lib and src/docs dir's</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1229492978</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1228603101</field>
		<field name="entrydate">1229492978</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1228603101</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228603101</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1228603101</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2338450</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Migrate to Java 5.0</field>
	<field name="open_date">1227527452</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Dozer v5.0 should be migrated to Java 5.0. It will be a new major version, with possible breaking changes.
Redesign of public API with use of Generics.
Version 4.x will be maintained further separately  for projects using 1.4 and 1.3 Java versions.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230608043</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230608043</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230608043</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1806362</field>
	<field user_id="567278" name="submitted_by">lyc1</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Handle Javassist proxies</field>
	<field name="open_date">1191335484</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Here is a patch to support Jassist proxy generator in Dozer.

Eg, Javassist is used by Hibernate.

In summary :

 - Handling of Javassist id in MapperConstants and MappingUtils classes

 - Add new unit tests to handle Javassist proxied beans (functional_tests.proxied =&#62; functional_tests.cglib and functional_tests.javassist)

~10 tests don't work because of the use of a reflexive EqualsBuilder which dicovers internal implementation of Javassist proxies.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1230864707</field>
		<field name="user_name">mhtierney</field>
		<field name="body">I believe this was resolved in the 4.3 release.

https://sourceforge.net/tracker/index.php?func=detail&#38;aid=2020543&#38;group_id=133517&#38;atid=727370</field>
</message>

<message>
		<field name="adddate">1201688223</field>
		<field name="user_name">lyc1</field>
		<field name="body">Logged In: YES 
user_id=567278
Originator: YES

Here is a new patch to handle this feature, updated to reflect Dozer modifications.

In test cases, EqualsBuilder problem is solved but some tests still fail because of bad serialization handling in Javassist proxies when beans are cloned for testing purpose (SerializationUtils#clone(...)).

But this doesn't affect Dozer features with Javassist proxies.
File Added: dozer-javassist-rev618.patch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230864707</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230864707</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230864707</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">264287: dozer-javassist-rev618.patch</field>
		<field name="entrydate">1201688223</field>
		<field name="mod_by">lyc1</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1191335608</field>
		<field name="mod_by">lyc1</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">248061: dozer-javassist.patch</field>
		<field name="entrydate">1191335484</field>
		<field name="mod_by">lyc1</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2485327</field>
	<field user_id="1452308" name="submitted_by">sarbogast</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Integration with Grails custom classloader</field>
	<field name="open_date">1231070704</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v.4.4.1</field>
	<field name="details">When I try to map Grails domain entities onto custom DTO's with Dozer 4.4, I get a ClassNotFoundException for domain entities. Yet they are in WEB-INF/classes along with Dozer configuration file. There is a classloading issue.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1231598808</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed, included in 4.4.1 release</field>
</message>

<message>
		<field name="adddate">1231117583</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Thanks for the ticket.  If it's easy enough, could you do a test and try using Dozer 4.2.1 and just see if that works......there were some classloader changes made in 4.3 and I am curious if this is could be fallout from that?

Also, can you paste in the stacktrace for reference. Thanks

</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1231598808</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1231598808</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1231598808</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1231598808</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1734228</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">repackage ClassMap.java</field>
	<field name="open_date">1181427973</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Create a classmap package to hold class mapping level objects</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1181512933</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1181512933</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1181512933</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1181512933</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1459057</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Support for write only (set) or read only (get) objects</field>
	<field name="open_date">1143433300</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Support for write only (set) or read only (get) objects</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1144820645</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1144791009</field>
		<field name="entrydate">1144820645</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1144791009</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1144791009</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1144451437</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1651498</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Move dozer build to Maven 2.0</field>
	<field name="open_date">1170542792</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">It is time.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1170784756</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1170784756</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1170784756</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1694734</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Improve efficiency of invoking jdk1.5 classes</field>
	<field name="open_date">1175743969</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">The 3.2 release switched the small amount of jdk1.5 specific code(introduced in 3.1) to use reflection so that Dozer would be backwards compatible with older jdks.

Use single instances of the Method objects created via reflection for perf reasons.  This would improve Dozer's performance running under 1.5 approximately 10%</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1176074215</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175983622</field>
		<field name="entrydate">1176074215</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175983622</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175983622</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175828080</field>
		<field name="entrydate">1175983543</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">data_type</field>
		<field name="old_value">727371</field>
		<field name="entrydate">1175983543</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175983543</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175828080</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175828080</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1696636</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">1</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add class level javadoc for classes missing it</field>
	<field name="open_date">1176074304</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Add class level javadoc for classes missing it</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178248558</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775479</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178248558</field>
		<field name="entrydate">1179775479</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178248558</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1178248558</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178248558</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1572996</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add JAXB Factory</field>
	<field name="open_date">1160279489</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details"> </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1163379591</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Implemented</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163379591</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163379591</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1161028901</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1160279497</field>
		<field name="entrydate">1161028901</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1160279497</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1160279497</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1734665</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Major refactor of map backed property feature</field>
	<field name="open_date">1181512995</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Needs cleanup to support some of the more advanced features and for maintenance reasons.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1183918700</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Finished.  IMPORTANT:  Anyone previously using map backed property mappings will need to regression test their system with the new release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1183918700</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1183918700</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1183918700</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">refactor map-get/set-method logic</field>
		<field name="entrydate">1181623429</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">refactor map-get-method/set logic</field>
		<field name="entrydate">1181513026</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1736864</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove *PRIME* feature from the docs.</field>
	<field name="open_date">1181787250</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">This was removed from the code base at some point</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1184471215</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

This hasnt been supported for a long time.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1184471215</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1184471215</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1184471215</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1183918965</field>
		<field name="entrydate">1184468096</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184468096</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1184468096</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1183918965</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1183918965</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1685083</field>
	<field user_id="1748642" name="submitted_by">max_br</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Transparent Java 5 enums support</field>
	<field name="open_date">1174475018</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Transparent Java 5 enums support.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1174576444</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Fixed and checked in.</field>
</message>

<message>
		<field name="adddate">1174499700</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Ok...let me see if I can get this in for the next release.</field>
</message>

<message>
		<field name="adddate">1174495869</field>
		<field name="user_name">max_br</field>
		<field name="body">Logged In: YES 
user_id=1748642
Originator: YES

I think you can find everything in this thread:
http://sourceforge.net/forum/message.php?msg_id=4132809

There are the issue description and a workaround from Alan Stewart.</field>
</message>

<message>
		<field name="adddate">1174485428</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Can you elaborate with a test case and sample mapping?

Thanks,

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1174882863</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1174576444</field>
		<field name="entrydate">1174882863</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1174576444</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1174576444</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1174499700</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1750157</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add map-id to field mapping debug output</field>
	<field name="open_date">1183958616</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">http://sourceforge.net/forum/forum.php?thread_id=1755074&#38;forum_id=452530</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1184040784</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1184040784</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1184040784</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1184040784</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1184040784</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1750158</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Allow global configuration of relationship-type</field>
	<field name="open_date">1183959036</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">http://sourceforge.net/forum/forum.php?thread_id=1738349&#38;forum_id=452530</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1187759473</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

relationship-type can now be specfied at the field mapping, class mapping, and global configuration level</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1187759473</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1187759473</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1187759473</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1187228975</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1712886</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add PMD and Findbugs reports</field>
	<field name="open_date">1178294135</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Add PMD and Findbugs reports</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178295588</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

Done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775479</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178295588</field>
		<field name="entrydate">1179775479</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178295588</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178295588</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1713604</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Change util classes to static</field>
	<field name="open_date">1178407128</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">No need to instantiate these in the code.  Will save on object creation.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178408568</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

CollectionUtils, ReflectionUtils, ClassMapBuilder, ClassMapFinder, LogMsgFactory, MappingUtils</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775479</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178408568</field>
		<field name="entrydate">1179775479</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178408568</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178408568</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1234220</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="1232046" name="assigned_to">bgsesr</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Support for Primative arrays</field>
	<field name="open_date">1120749449</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Need to support primative arrays. if a bean named test 
has an attribute of foo[] and that class has an attribute 
name of type String then the mapping file should support

&#60;field-deep&#62;
&#60;A&#62;foo.name&#60;/A&#62; 
&#60;B&#62;name&#60;/B&#62;
&#60;/field-deep&#62;

the result being a foo is resized and a new instance of 
foo gets created and the name attribute populated with 
the name value from class referenced by tag &#34;B&#34;</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1122602406</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 14 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1120761332</field>
		<field name="user_name">bgsesr</field>
		<field name="body">Logged In: YES 
user_id=1232046

I am not sure I follow your description, want to upload your
bean source and your mapping file to show the problem. 
Also, we currently do support mapping of primitive arrays,
even as deep properties.  I think you are requesting
something else, but I need a better description.

Thanks</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1122602406</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1121354579</field>
		<field name="entrydate">1122602406</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1121354579</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1121354579</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1120761870</field>
		<field name="mod_by">bgsesr</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1257076</field>
	<field user_id="94910" name="submitted_by">milder60</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Objects with read OR write methods throw NullPointer Ex</field>
	<field name="open_date">1123794439</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Simply put if a bean has a read method but no write
method (or visa versa) then it will throw a
NullPointerException -- see MappingUtils.getWriteMethod
~ line 453.

In the below code sample I changed

 if (pd == null) {
to
if (pd == null || pd.getWriteMethod() == null ) {

This will throw an exception if a PropertyDescriptor is
returned properly, yet the writeMethod property is null.

So I guess the question is... is both a setter and
getter required for Dozer to function properly?  



public static Method getWriteMethod(Class objectClass,
String fieldName) {
      PropertyDescriptor pd =
getPropertyDescriptor(objectClass, fieldName);
      if (pd == null ) {
        throw new MappingException(&#34;Unable to determine
read write method for field: &#34;+ fieldName + &#34; class: &#34;
+ objectClass);
      }

//IFBEAN HAS GET BUT NO SET METHOD
//THIS WILL RETURN NULL AND CAUSE
//NULLPOINTER EXCEPTION IN CALLER
      return pd.getWriteMethod();
    }


This will cause NullPointer in
FieldMap.writeDestinationValue(Object destObj, Object
destFieldValue) line 77

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1125022917</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 14 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1123797556</field>
		<field name="user_name">bgsesr</field>
		<field name="body">Logged In: YES 
user_id=1232046

getters and setters are both required because mapping are
generally considered 2-way mappings.  We could do away with
the write method requirment if we allowed the indication of
a one-way mapping.</field>
</message>

<message>
		<field name="adddate">1123794521</field>
		<field name="user_name">milder60</field>
		<field name="body">Logged In: YES 
user_id=94910

Oops.  I added a portion of an email I sent, so possible
doesn't read very clearly.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1125022917</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1123797722</field>
		<field name="entrydate">1125022917</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1123797722</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1123797722</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">data_type</field>
		<field name="old_value">727371</field>
		<field name="entrydate">1123797721</field>
		<field name="mod_by">bgsesr</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1334842</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">always use parent field mappings when given</field>
	<field name="open_date">1129980905</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I have a case where the field names in the parent beans
are the same yet I need to set this to be a one-way
mapping.  By simply not entering mapping details for
the reverse mapping on the parent the child attempts to
map using a default field mapping.  A new non-mapping
fieldMap on the parent is required to successfully
override the child's map.

In addition I suggest that super class mappings be
resolved once per map creation so that default field
mappings are only added when no custom mapping exists.
 Most likely a new pass between initial map creation
and default mapping.  This would remove some of the
complexity at mapping time as parent maps would only
need to be determined when no current map existed and
then only the &#34;closest&#34; parent mapping would be
required (two &#34;closest&#34; parent mappings, ie. from
sourceParent to destination and source to
destinationParent, would seem to be only theoretically
possible and hence not an issue).

thanks
Rohan
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1131477623</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I am closing and will open another RFE for removing super
class complexity.</field>
</message>

<message>
		<field name="adddate">1130304023</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

After thinking on this some more...once the second
requirement is completed it will implicitly fix the first
requirement :)

Thanks.

Franz</field>
</message>

<message>
		<field name="adddate">1130279814</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Ok...I will see what I can do. This might have to be moved
out till the next release. Honestly, I believe the
inheritance stuff is the hardest part of mapping...

We are still on schedule for Friday for 1.5.6.

Thanks.

Franz</field>
</message>

<message>
		<field name="adddate">1130278094</field>
		<field name="user_name">dr_dee</field>
		<field name="body">Logged In: YES 
user_id=774102

As I understand the current code a child's mapping will be
ignored if a parent's mapping can be found.  I want to
inherit the one-way mapping so there must be something, eg.
a do-nothing field mapping class, rather than simply leaving
it out of the parent's map.

Please don't let the suggested refactoring in the second
part hold up the release of 1.5.6 - the bean factories and
so forth are much more useful  :-)

thanks
Rohan</field>
</message>

<message>
		<field name="adddate">1130267554</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

On the first requirement, how do we know to create a mapping
(bi-directional at the child level) when it is defined as
one-way?

I think I understand the second requirement which makes a
lot of sense. I will try to incorporate this for the 1.5.6
release.

This stuff really hurts my head. :)

Franz</field>
</message>

<message>
		<field name="adddate">1130123258</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Rohan -

Let me dive into this and see what is happening.

Thanks for your request and taking the time to detail it so
thoroughly.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1131477623</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1131477623</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1130123257</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1268586</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add support for multiple sources single target</field>
	<field name="open_date">1124899762</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Please think about the support for multiple sources and 
single target. Currently Dozer supports single object 
source and creating new class as the target.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1129356146</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I would just map the same object multiple times...since we
can map by reference.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1129356146</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1129356146</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1129356146</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1381245</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1232046" name="assigned_to">bgsesr</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add more comments to v20branch</field>
	<field name="open_date">1134626966</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Have at it Ben. Maybe I will understand what's going on
afterwards :)

Add more comments to v20branch</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1138923351</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1138923351</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1351607</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Reduce super class mapping complexity</field>
	<field name="open_date">1131477662</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">In addition I suggest that super class mappings be
resolved once per map creation so that default field
mappings are only added when no custom mapping exists.
Most likely a new pass between initial map creation
and default mapping. This would remove some of the
complexity at mapping time as parent maps would only
need to be determined when no current map existed and
then only the &#34;closest&#34; parent mapping would be
required (two &#34;closest&#34; parent mappings, ie. from
sourceParent to destination and source to
destinationParent, would seem to be only theoretically
possible and hence not an issue).</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1138923351</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1138923351</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1134626909</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1397086</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Context based mapping</field>
	<field name="open_date">1136397018</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">1.  
Say I have a form with 10 fields. On one jsp I use 4
and on another I use all 10. Now when I would be
converting from my domain to form then for first case I
would like to convert only the required four fields
else all the 10 fields. 
 
Now with dozer for current the only solution seems to
me is a custom convertor. But with multiple senarios
like these it would become difficult. So if you can
provide a context based mapping then that would be
helpful. it can be similar to validator mapping for
ValidatorActionForm say 
I would add a name attribute to the mapping 
&#60;mapping name=&#34;firstCase&#34; &#62; 
... 
say I would turn wild card off. And map only 4 fields 
&#60;/mapping&#62; 
 
&#60;mapping name=&#34;secondCase&#34; &#62; 
... 
Here it would be a default mapping 
&#60;/mapping&#62; 
 
And there would be a overloaded function
map(source,destination,&#34;firstCase&#34;); 
 
If you would require a more detailed usecase I ca
provide one.  </field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1137468395</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1137020933</field>
		<field name="entrydate">1137468395</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137020933</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137020933</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1381246</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Increase Performance by 4X on v20branch</field>
	<field name="open_date">1134627066</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">You can probably collapse the 'reduce super type
complexity feature' into this. Anywhere we do
reflection we should only have to do it once per bean
mapper instance. Many other things we can take out.
Matt you are the man.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1136398852</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Just a couple notes...

All timing in the spreadsheet are in milliseconds.

The timings in the spreadsheet are a good measurement of 
relative performance gains in v2.  But you should expect 
even better performance on a production like environment.  
I ran the before and after tests on my grandmas computer so 
the computer horsepower wasn't the greatest:)  I reran the 
same tests on my computer at home and saw better v2.0 
timings.  Here are those results and I will also update the 
spreadsheet

Test Scenario  #Iterations   Total Time(ms)  Avg Time(ms)

1              10000         11000           1.1  
2              25000         3400            .136
3              25000         3500            .14
4              10000         5400            .54
5              10000         2600            .26</field>
</message>

<message>
		<field name="adddate">1136352084</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Summary of changes from Matt. I have also attached his
spreadsheet with all of the statistics.

--------------------------

It was a piece of cake.  I switched out ehcache with a real
simple custom cache impl.  Performance is still good.  I
need to put the finishes touches on it and then I will check
the changes in.  Should be 2night or tomorrow.
 

    -------------- Original message --------------
    From: mhtierney@comcast.net
    I think having our own cache implementation would be
pretty easy.  It wouldn't be nearly as robust or flexible as
a full blown caching framework but it would elimate the
ehcache dependency.  We probably don't need all the bells
and whistles for Dozer anyways.  It would be just a matter
of switching out the implementation of the
DozerCacheManager.  I think the API of the CacheManagerIF
would stay the same for the most part.  We could just have
the DozerCacheManager backed by a Map or something.   I
don't know how a custom cache would perform vs. ehcache but
it will be easy to find out.  I wouldn't expect a big
difference but I havent dug into the ehcache src code so I
am not familiar with their underlying implementation.
     
    In jakarta commons Collections there is a FastHashMap
that might work good for the backing store of the custom
cache.  The jakarta commons PropertyUtils caches property
descriptors and it currently uses the FastHashMap to
implement it's caching.  I will research other options as well.
     
    I will try to switch out ehcache and compare
performance.  I dont think storing the data on the actual
FieldMap instances is the way to go.
     
    It was just easiest to use ehcache to get things rolling
and to test out the improvements to see if they even helped.
 I didn't want to have to reinvent the wheel of implementing
a custom cache without even knowing whether it was going to
help or what shape it would take.  I figured ehcache has any
performance, synchronization, etc issues already worked out
and I didn't want to have to deal with those types of issues
when testing out whether we need some level of caching.
     
     
     

        -------------- Original message --------------
        From: Franz Garsombke &#60;fgarsombke@yahoo.com&#62;
        That is great Matt. I will attach the spreadsheet to
the feature request and all of these notes when you are done.

        As far as ehcache...I just realized that we will
need to have that as a dependency. After removing the castor
dependency...I'm hesitant to add any more. Is there any way
to have a HashMap or something similiar that gets the
caching done for us? Can this information be stored on the
instantiated FieldMaps themselves? So my question is how
hard would it be to have our own cache implementation...

        Looking at your notes you are definitely hitting
things I spotted as &#34;expensive&#34;. Great job.

        Thanks Matt.

        Franz

        mhtierney@comcast.net wrote:

            I made some more changes after profiling an
inheritance use case.  I also profiled a deep field mapping
scenario.  I will rerun all of the scenarios to get the
updated timings and send out the updated spreadsheet.
             
            Here are the additional performance related mods:
             
            -  Modified Hint.getHints() to only determine
hints one time.  And modified getHint so that it doesn't
call getHints() within an Iterator.  This small change made
a big improvement because getHints() was called for every
loop and it was getting computed each time.  It improved the
overall inheritance test scenario by 30% - 40%
             
            - In the mapping processor, removed extra calls
to CustomConverterContainer.getConverterByDestType()
             
            -  Moved some logic out of the Iterate loop in
the processSuperTypeMapping method
             
            -  In mapOrRecurseObject(), removed extra calls
to mappingUtils.isSupportedMap()
             
            -  In DozerCacheManager use instance variable
for ehcache singleton instance instead of calling
CacheManager.getInstance() all the time
             
            -  Use StringBuffers for String concats
             
            -  Looked at all the iterate methods and moved
anything out of them that I could.
             

                -------------- Original message --------------
                From: mhtierney@comcast.net
                I checked in some performance related
changes to the 2.0 branch.  I got some pretty good gains
with these changes.  I attached a spreadsheet with before
and after results.  I will try to profile some additional
scenarios.  When you have time can someone review my changes
and make sure everything looks ok thus far?  Also, does
anyone have any other ideas for some scenarios to profile? 
I want to profile one of the inheritance scenarios.  Just
let me know if you see any issues or noticed something I
missed or overlooked.  The build looks good and all is
running green.  Oh yeah, we should probably give some
thought to how we want to present performance test results
on the dozer home page. 
                 
                Here is a summary of the mods I made and
checked in(in no particular order):
                 
                - Removed uneccesary calls to
FieldMap.getSrcFieldValue().  We were making at least 2
calls for every field when we only need to make 1.
                 
                - Added simple caching framework that uses
Ehcache 1.1.  Added dozer cache manager class and IF.  The
cache manager is set up so that you can cache at the VM
level or at an object instance level.
                 
                - Added caching to
CustomConverterContainer.getConverterByDestinationType(). 
The caching is at the DozerBeanMapper instance level.  I saw
big gains just by doing this simple thing
                 
                - Added caching to
MappingProcessor.checkForSuperMappings().  The caching is at
the DozerBeanMapper instance level.  Also broke this method
up into 2 different methods.  1 that checks and the other
that processes super mappings if they exist
                 
                - Just a note that these are the only two
places I added caching.  Both of these caches are per
DozerBeanMapper instance.  There is no VM wide caching as of
right now.
                 
                - Changes around the getDateFormat() method.
 I saw this was getting called for every field regardless of
whether it even needed to.  The constructor for
SimpleDateFormat looks expensive.  So I just modified the
logic only to create a DateFormat object when needed.
                 
                - Changed the MappingUtils class to non
static.  I didnt create an IF for this but we can if we want. 
                 
                - Created MapperTestBase that creates a
default static mapper instance. 

</field>
</message>

<message>
		<field name="adddate">1135921942</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

1st phase of performance improvements have been 
implemented.  Performance has been improved 3x - 4x in the 
v20branch.  But this should be an ongoing feature request 
as we can always find additional performance improving 
changes to make.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1137468395</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1137020933</field>
		<field name="entrydate">1137468395</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137020933</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137020933</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">162061: DozerPerfImprovementsPhase1Final.xls</field>
		<field name="entrydate">1136352085</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1135921942</field>
		<field name="entrydate">1136352084</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1136352084</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1135921942</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1135921942</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Increase Performance by 4X</field>
		<field name="entrydate">1134627082</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1393798</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Support Boolean Mappings</field>
	<field name="open_date">1135967241</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I want to map true/false yes/no 0/1 to a Boolean or
boolean object.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1137130916</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

We support this already.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137130916</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137130916</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1468926</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping JAXB and XmlBean to JavaBeans Objects</field>
	<field name="open_date">1144800109</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">mapping JAXB and XmlBean to JavaBeans Objects</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1146277254</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 14 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1144957986</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I have checked into v20Branch the ability to map XMLBeans to
POJOs.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146277254</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1145047781</field>
		<field name="entrydate">1146277254</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1145047781</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1145047781</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1144957986</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1470425</field>
	<field user_id="120761" name="submitted_by">orangeherbert</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">DozerBeanMapper extensibility</field>
	<field name="open_date">1145029873</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Making DozerBeanMapper.getMappingProcessor() protected
would allow users to make customizations without having
to completely reimplement MapperIF.

Thanks,
Matt</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1156118801</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I believe this is done.  getMappingProcessor() is 
protected in the 21XBranch.  This branch will be used for 
the next release.  In general, improving extensibility is 
not finished and will be ongoing</field>
</message>

<message>
		<field name="adddate">1146234041</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

oops, accidentally resubmitted that request.</field>
</message>

<message>
		<field name="adddate">1146233983</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

Any chance of this going in for 2.1.1?  It's not in the
branch you did today, btw.</field>
</message>

<message>
		<field name="adddate">1146179995</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Thanks for reminding me. That will definitely be in along
with the event interface stuff.</field>
</message>

<message>
		<field name="adddate">1146173459</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

Any chance of this going in for 2.1.1?  It's not in the
branch you did today, btw.</field>
</message>

<message>
		<field name="adddate">1145030103</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Done. This is on v20Branch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1156118801</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1156118801</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1156118801</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146233983</field>
		<field name="entrydate">1146234041</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146234041</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146233983</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146233983</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1145030962</field>
		<field name="entrydate">1146173460</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146173459</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1145030962</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1145030962</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1145030103</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1770440</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Using multiple instances of CustomConverter</field>
	<field name="open_date">1186606274</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi, 
 
We've been using Dozer with Spring quite intensively now for a while and it does 95% of what we need. Thanks guys. Keep up the good work! 
 
We'd like to be able to use multiple instances of the same CustomConverter implementation - each with different injected configurations, rather than write a specific CustomConverter implementation for each conversion. However, the Dozer mapping XML format doesn't allow us to indicate which instance of a particular class we want to invoke to do the conversion. 
 
Would it be possible to add an alternate (or perhaps additional) attribute for the custom converter to the field definition so instead of the case below (that doesn't work when different conversions are required): 
 
&#60;field custom-converter=&#34;some.company.ConfigurableConverter&#34;&#62; 
&#60;a&#62;someField&#60;/a&#62; 
&#60;b&#62;someOtherField&#60;/b&#62; 
&#60;/field&#62; 
 
&#60;field custom-converter=&#34;some.company.ConfigurableConverter&#34;&#62; 
&#60;a&#62;someField2&#60;/a&#62; 
&#60;b&#62;someOtherField2&#60;/b&#62; 
&#60;/field&#62; 
 
where some.company.ConfigurableConverter implements CustomConverter. You could specify: 
 
&#60;field custom-converter-id=&#34;convertSomeFieldToSomeOtherField&#34;&#62; 
&#60;a&#62;someField&#60;/a&#62; 
&#60;b&#62;someOtherField&#60;/b&#62; 
&#60;/field&#62; 
 
&#60;field custom-converter-id=&#34;convertSomeField2ToSomeOtherField2&#34;&#62; 
&#60;a&#62;someField&#60;/a&#62; 
&#60;b&#62;someOtherField&#60;/b&#62; 
&#60;/field&#62; 
 
Where convertSomeFieldToSomeOtherField and convertSomeField2ToSomeOtherField2 both relate to instances of some.company.ConfigurableConverter 
 
I don't expect that Dozer would magically consult Spring for these ID's. Instead, The custom-converter-id's could be mapped to the appropriate CustomConverter instances and injected into the dozer instance as shown for the property mappedCustomConverters (a bad name I know) below: 
 
&#60;bean id=&#34;myDozerBeanMapper&#34; 
class=&#34;net.sf.dozer.util.mapping.DozerBeanMapper&#34; dependency-check=&#34;simple&#34;&#62; 
&#60;property name=&#34;mappingFiles&#34;&#62; 
&#60;list&#62; 
&#60;value&#62;someFile.xml&#60;/value&#62; 
&#60;/list&#62; 
&#60;/property&#62; 
&#60;property name=&#34;customConverters&#34;&#62; 
&#60;list&#62; 
&#60;ref bean=&#34;configurableConverter&#34;/&#62; 
&#60;/list&#62; 
&#60;/property&#62; 
 
&#60;property name=&#34;mappedCustomConverters&#34;&#62; 
&#60;map&#62; 
&#60;entry key=&#34;convertSomeFieldToSomeOtherField&#34; ref=&#34;configurableConverterBeanInstance1&#34;/&#62; 
&#60;entry key=&#34;convertSomeField2ToSomeOtherField2&#34; ref=&#34;configurableConverterBeanInstance2&#34;/&#62; 
&#60;/map&#62; 
&#60;/property&#62; 
 
&#60;property name=&#34;eventListeners&#34;&#62; 
&#60;list&#62; 
&#60;ref bean=&#34;dozerEventListener&#34;/&#62; 
&#60;/list&#62; 
&#60;/property&#62; 
&#60;/bean&#62; 
 
An alternative to the Map injection would be an additional interface that a custom converter could implement to return the id 
 
eg. (Yet another bad name I know) 
 
public interface CustomConverterWithId { 
String getConverterId(); 
} 
 
 
Dozer could then look through the List of injected CustomConverter's for an instance that advertised a matching id. 
 
What do you guys think? 
 
Cheers, 
 
Stuntmunkee. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1190600402</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1186695052</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

docs done.</field>
</message>

<message>
		<field name="adddate">1186693737</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

This is done and committed on the current_release branch. I still need to do the documentation.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1190612920</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1190600402</field>
		<field name="entrydate">1190612920</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1190612920</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1186695052</field>
		<field name="entrydate">1190600402</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190600402</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1186695052</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1186695052</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1373219</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">If no destination for List, Set, Map inst. source class</field>
	<field name="open_date">1133751344</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">In the case of List, Set, and Map we currently have
default implementations if the destination object is
not already instantiated. Just use the source object
class type to instantiate a new destination object.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1133971714</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This has been changed where appropriate.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1134108356</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133971714</field>
		<field name="entrydate">1134108356</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133971714</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133971714</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1764916</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer vs. XmlBeans generated primitive types</field>
	<field name="open_date">1185916364</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi, 
 
We use Dozer with XML Beans for converting XML documents (in a format of which we do not control the schema) to the DTO's required by our system. 
 
This, for the most part, has worked out very well. We came across an issue (and it is an XmlBean'ism) with certain base xs:types. 
 
Types such as xs:int and xs:boolean are generated by XML Beans as java primitives. See http://xmlbeans.apache.org/docs/2.0.0/guide/conXMLBeansSupportBuiltInSchemaTypes.html for some more info. 
 
This means that when we map from the XML Beans, Dozer cannot tell the difference between the case that the value happens to be the default for the primitive (eg 0 for an int) or the element is not actually present. 
 
XML Beans does generate an isSetXxxx method for every field. 
 
Would it be possible to have Dozer check this method where it is provided and return null rather than the int value? 
 
I've included some sample code and testcases below that seems to do the trick. 
 
Cheers, 
 
Stuntmunkee. 
 
Updated net.sf.dozer.util.mapping.propertydescriptor.PropertyDescriptorFactory..... 
 
Note the use of XmlBeanPropertyDescriptor </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1189909205</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1185940720</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

This is fixed on current_release branch and will be released with 4.1.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1189916039</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1189916039</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1189909205</field>
		<field name="entrydate">1189916039</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1189909205</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1185940720</field>
		<field name="entrydate">1189909205</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1185940720</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1185940720</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1325412</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">allow object factories</field>
	<field name="open_date">1129181664</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">specify bean factories (however you prefer) by class
and choose the most specific based on inheritance hierarchy

bonus points for getting the factory injected via
Spring  :)

Rohan
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1129672854</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This will be in the next release:

http://sourceforge.net/forum/forum.php?thread_id=1370087&#38;forum_id=452529</field>
</message>

<message>
		<field name="adddate">1129356309</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This sounds like a nice feature. 

How do you envision this in the bean mapping file?

How do you see Spring being used as injection for this?

Please elaborate.

Thanks.

Franz

</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1130740083</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1130740083</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1129356309</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1367803</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Ability to Initialize DozerBeanMapper</field>
	<field name="open_date">1133132778</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Would be nice to be able to init() the DozerBeanMapper
so that at application start-up all the mapping files
have been parsed and initialized.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1133133342</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is fixed and in CVS branch v15. I added an init()
method to the DozerBeanMapper.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1133362398</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133133342</field>
		<field name="entrydate">1133362398</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133133342</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133133342</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1762642</field>
	<field user_id="1855413" name="submitted_by">jin_</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">DozerEvent - sourceObject always null.</field>
	<field name="open_date">1185624858</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">When using the DozerEvent, I noticed that the sourceObject is always null. Looking at MappingProcessor class, which fires various DozerEvents, the source object appears to be explicitly set to null, can we allow the source object to be set on the DozerEvent ?




</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1189822803</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1185916231</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Fixed in current_release branch. Should go out in 4.1 release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1189830759</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1189822803</field>
		<field name="entrydate">1189830759</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1189830759</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1189822803</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1185916231</field>
		<field name="entrydate">1189822803</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1185916231</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1185916231</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1185916231</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1756584</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Run existing tests in both unproxied and cglib proxied mode</field>
	<field name="open_date">1184814481</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Run the existing unit tests in unproxied mode as well as proxied mode just to make sure proxied obj's behave as expected.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1187566421</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1187580930</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1187580930</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1187566421</field>
		<field name="entrydate">1187580930</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1187566421</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1187566421</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1187479572</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1369801</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove dependency on Castor</field>
	<field name="open_date">1133334418</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Use a DOM parser rather than couple w/ Castor. Also
remove multiple files in a context for the static mapper.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1133334799</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is done in CVS under v15 branch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1133362397</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133334799</field>
		<field name="entrydate">1133362397</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133334799</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133334798</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1277096</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">No way to reference self (this) in field mapping</field>
	<field name="open_date">1125467385</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Using field-deep mapping, it is possible to map against 
nested elements N levels deep, but there is no way to 
map where N == 0 (self, or this).

Example:

I have the following Class defs:

Class Account {
	String name;
	Address address;
}

Class Address {
	String street;
	String suburb;
	int postcode;
}

Class SimpleAccount {
	String name;
	String streetName;
	String suburb;
	int postcode;
}

And the following mapping entries in my dozer xml file:

&#60;mapping wildcard=&#34;false&#34;&#62;
  &#60;classA&#62;SimpleAccount&#60;/classA&#62;
  &#60;classB&#62;Account&#60;/classB&#62;
  &#60;field&#62;
    &#60;A&#62;name&#60;/A&#62;
    &#60;B&#62;name&#60;/B&#62;
  &#60;/field&#62;
&#60;/mapping&#62;

&#60;mapping wildcard=&#34;false&#34;&#62;
  &#60;classA&#62;SimpleAccount&#60;/classA&#62;
  &#60;classB&#62;Address&#60;/classB&#62;
  &#60;field&#62;
    &#60;A&#62;streetName&#60;/A&#62;
    &#60;B&#62;street&#60;/B&#62;
  &#60;/field&#62;
  &#60;field&#62;
    &#60;A&#62;suburb&#60;/A&#62;
    &#60;B&#62;suburb&#60;/B&#62;
  &#60;/field&#62;
  &#60;field&#62;
    &#60;A&#62;postcode&#60;/A&#62;
    &#60;B&#62;postcode&#60;/B&#62;
  &#60;/field&#62;
&#60;/mapping&#62;


Now to map SimpleAccount instance to an Account 
with an Address I must do something like:

Account account = new Account();
Mapper.map(simpleAccount, account);

Address address = new Address();
Mapper.map(simpleAccount, address);

account.setAddress(address);


It would be nice if there was some way to specify a 
mapping in SimpleAccount to Account mapping 
SimpleAccount to the address property, so that we only 
had to call

Mapper.map(simpleAccount, account);

I was able to do a quick fix for my own purposes in 
version 1.4.6 by adding the following field mapping:
  &#60;!-- new field --&#62;
  &#60;field&#62;
    &#60;A&#62;&#60;/A&#62;
    &#60;B&#62;address&#60;/B&#62;
  &#60;/field&#62;

And the following changes to FieldMap.java

  public Object getSrcFieldValue(Object srcObj) {
    try {

      //@author: nathanm
      //see if source references itself ('this' keyword type 
ref).  Dozer can't do this by default, so added
      //check to handle case
      if (isSourceSelfReferencing()) {
    	  return srcObj;
      }
      
      return getSourceFieldReadMethod(srcObj.getClass
()).invoke(srcObj, null);
    } catch (Exception e) {
      throw new MappingException(e);
    }
  }

  /**
   * Return true if is self referencing.  Is considered self 
referencing where no other sources are specified,
   * i.e., no source properties or #CDATA in the xml def.
   * @param parentSourceClass
   * @return
   * @author nmcdonald
   */
  public boolean isSourceSelfReferencing() {
	  boolean isSelfRef = 
(sourceFieldReadMethod == null)
	  			&#38;&#38; 
(sourceField.getName() == null)
				&#38;&#38; 
(sourceField.getTheGetMethod() == null)
				&#38;&#38; 
(sourceField.getTheSetMethod() == null);
		return isSelfRef;
  }

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1131390120</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Implemented for 1.5.7 - we currently only support this as a
one-way mapping.</field>
</message>

<message>
		<field name="adddate">1131148583</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This will be ready in the 1.5.7 release.</field>
</message>

<message>
		<field name="adddate">1130909917</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I don't believe this was fixed for 1.5.6. We should be able
to add it to 1.5.7. I will let you know when a patch is
available.

Thanks.

Franz</field>
</message>

<message>
		<field name="adddate">1130903907</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

If I understand this request correctly, I believe this issues was 
fixed with the latest 1.5.6 release.</field>
</message>

<message>
		<field name="adddate">1129356360</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Good idea. I will try to get this in the next release.

Thanks.

Franz</field>
</message>

<message>
		<field name="adddate">1127416864</field>
		<field name="user_name">bgsesr</field>
		<field name="body">Logged In: YES 
user_id=1232046

lets make this a feature request, closing this as a bug</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1131390124</field>
		<field name="entrydate">1132111173</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1132111173</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1131390124</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1131390120</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1130909917</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1130903907</field>
		<field name="entrydate">1130909917</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1130903907</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1130903907</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1129356360</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">data_type</field>
		<field name="old_value">727371</field>
		<field name="entrydate">1127416864</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1127416864</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1125528852</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1345821</field>
	<field user_id="774102" name="submitted_by">dr_dee</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">declare a class as &#34;copyByReference&#34;</field>
	<field name="open_date">1130927823</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">&#60;field copyByReference=&#34;true&#34;&#62; is nice but my mapping
file would be shorter if in the configuration a
particular class could be marked as always copied by
reference.

thanks
Rohan
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1131477197</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Done for 1.5.7.</field>
</message>

<message>
		<field name="adddate">1131332260</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Ok. That makes sense. I will see if I can get it in the
1.5.7 release. This one shouldn't be that hard.

Thanks.

Franz</field>
</message>

<message>
		<field name="adddate">1131313409</field>
		<field name="user_name">dr_dee</field>
		<field name="body">Logged In: YES 
user_id=774102

Yes, as part of the configuration, eg.

&#60;copyByReference&#62;org.foo.BarValue&#60;/copyByReference&#62;

cheers
Rohan</field>
</message>

<message>
		<field name="adddate">1131123881</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

How do you envision this in the mapping file? As part of the
&#60;configuration&#62; ?

Give me an example of how you would like to set this.

Thanks.

Franz</field>
</message>

<message>
		<field name="adddate">1130964513</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Thanks for the RFE Rohan. I will bring this up in our next
features meeting and let you know what we come up with.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1132111172</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1131477197</field>
		<field name="entrydate">1132111172</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1131477197</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1131477197</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1130964512</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1375457</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Upgrade to commons-lang-2.1</field>
	<field name="open_date">1133971655</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">This is done and in the CVS v15 branch.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1134108356</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133971677</field>
		<field name="entrydate">1134108356</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133971677</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133971677</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1513128</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Passing up runtime exceptions but not failing</field>
	<field name="open_date">1151387452</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Would it be possible to allow user runtime exceptions
to be passed up while still having stop-on-errors =
false? I supposed this would mean that only non-dozer
mapping exceptions are not caught. 
 
I nned to be able to catch business exceptions from
domain objects, and some fields can't have setters,a s
they are set in the constructor. 
Thanks </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1157582767</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I have implemented this change per this thread.

http://sourceforge.net/forum/message.php?msg_id=3788549

This is in the v24Branch.

Franz</field>
</message>

<message>
		<field name="adddate">1155428080</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

My initial thoughts are that this could open a pandoras 
box.  The mappingexception thrown from dozer is a runtime 
exception itself.  But i could be wrong or just 
misunderstand the feature request.  But if you attach a 
unit test and associated files that illustrates the use 
case, we can take a deeper look at this and reopen the 
feature request

In general, I wouldnt recommend setting stop-on-
errors=false because it can lead to valid exceptions going 
unnoticed.  Of course, there are exceptions to this rule, 
but I would rather know when a mapping exception occurs so 
that fixed.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1161028910</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1159317495</field>
		<field name="entrydate">1161028910</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1159317495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1159317495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155428080</field>
		<field name="entrydate">1157582767</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">3</field>
		<field name="entrydate">1157582767</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1157582767</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155428080</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155428080</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1480372</field>
	<field user_id="304771" name="submitted_by">goonie</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">allow for declaration of mapping files via filename</field>
	<field name="open_date">1146574222</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">After instantiating a DozerBeanMapper, you have to
provide a list of mapping classpaths (via
setMappingFiles). It is not possible to load mapping
definitions from the file system.

I'd like to have a possibility to provide filenames of
mapping files.

This would allow for the Spring ResourceLoader
mechanism (e.g. classpath*:mypackage/mapping-*.xml).
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1160860635</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

assignment
</field>
</message>

<message>
		<field name="adddate">1159324001</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Please take a look at bug #1563130.  I just fixed this 
using the submitted patch.  I can reopen this feature 
request if the 2.4 fix does not address your issue.  
Thanks for the post.</field>
</message>

<message>
		<field name="adddate">1155446334</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Changing to feature request.

Andreas,
Can you provide a unit test that illustrates the desired 
behavior?  Also, it would be great if you could submit the 
patch code to make this work.</field>
</message>

<message>
		<field name="adddate">1146595708</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Good point. This will be added to the next release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1161028910</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1159324001</field>
		<field name="entrydate">1161028910</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1160860635</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1159324001</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1159324001</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">data_type</field>
		<field name="old_value">727371</field>
		<field name="entrydate">1155446334</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1146595707</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1381248</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove static bean mapper on v20branch.</field>
	<field name="open_date">1134627140</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Down with static! Add a singleton wrapper if they want
a static instance.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1134629858</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is done and checked in CVS on v20branch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1137468395</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1137020933</field>
		<field name="entrydate">1137468395</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137020933</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137020933</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1381249</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Make XML tags more consistent in v20branch</field>
	<field name="open_date">1134627195</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We just need to make our XML tags a little more
consistent for this earth-shattering release.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1135278103</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is done and checked into v20 branch

&#60;A&#62; &#60;/A&#62; now equals &#60;a&#62; &#60;/a&#62;

&#60;B&#62; &#60;/B&#62; now equals &#60;b&#62; &#60;/b&#62;

&#60;sourceTypeHint&#62; &#60;/sourceTypeHint&#62; now equals &#60;a-hint&#62; &#60;/a-hint&#62;

&#60;destinationTypeHint&#62; &#60;/destinationTypeHint&#62; now equals
&#60;b-hint&#62; &#60;/b-hint&#62;</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1137468395</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1137020933</field>
		<field name="entrydate">1137468395</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137020933</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137020933</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1375559</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Ability to have overloading get() set() methods</field>
	<field name="open_date">1133979340</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details"> have a class with 2 set methods 
public void setDate(Date date) {...} 
public void setDate(custom) {...} 
 
Implementation of FieldMap.findAMethod(Class
parentDestClass, String methodName) takes the lat
method with the provided name. Consequently in my case
it takes public void setDate(custom) {...} wich is not
the good one for the mapping. 
 
It would be nice if it was possible to specifiy the
methodName with parameter in the style: 
&#60;B theGetMethod=&#34;getDate&#34;
theSetMethod=&#34;setDate(java.util.Date)&#34;&#62;date&#60;/B&#62; 
It should support old style without param to keep
backaward compatibility and new style with param to be
able to choose used method. 
 </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1133981624</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Checked into v15 branch. Will be released w/ 1.5.8.1</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1134108356</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133981624</field>
		<field name="entrydate">1134108356</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133981624</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133981624</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1370482</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Set to Array, Array to Set, Set to List, List to Set</field>
	<field name="open_date">1133396481</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Add Set mapping functionality.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1133420618</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is finished under v15branch and in CVS. I have attached
the modified file.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1134108356</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133420619</field>
		<field name="entrydate">1134108356</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">158219: MappingProcessor.java</field>
		<field name="entrydate">1133420630</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133420619</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133420617</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1372011</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Ability to copy Map to Map</field>
	<field name="open_date">1133560441</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Why can't we do this? :)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1133586722</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Ok...I guess we already support this. I have been staring at
this code for too long. I will just document it...

  private Object mapMap(Object sourceMapValue, ClassMap
classMap, FieldMap fieldMap, Object destObj)
      throws IllegalAccessException, InstantiationException,
InvocationTargetException {
    Map result = null;

    Object field = doesFieldExist(fieldMap, destObj);
    result = (Map) sourceMapValue.getClass().newInstance();
    if (field == null) {
      // do nothing
    } else {
      result.putAll(((Map) sourceMapValue));
    }

    Map sourceMap = (Map) sourceMapValue;
    Set sourceEntrySet = sourceMap.entrySet();
    Iterator iter = sourceEntrySet.iterator();
    while (iter.hasNext()) {
      Map.Entry sourceEntry = (Map.Entry) iter.next();
      Object sourceEntryValue = sourceEntry.getValue();
      Object destEntryValue =
mapOrRecurseObject(sourceEntryValue,
sourceEntryValue.getClass(), classMap, fieldMap,
          destObj);
      result.put(sourceEntry.getKey(), destEntryValue);
    }
    return result;
  }
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1134108356</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133586722</field>
		<field name="entrydate">1134108356</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133586722</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133586722</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1363358</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">CustomConverters are local to a mapping file</field>
	<field name="open_date">1132628711</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">The custom converters are only local for a mapping
file...not global. If people want to have a common file
for custom converters other class maps will not see
these. Make them global.

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1133021174</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is fixed and in CVS under v15 branch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1133362398</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133021705</field>
		<field name="entrydate">1133362398</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133021705</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133021705</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1132987373</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1363361</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">CustomConverter Injection</field>
	<field name="open_date">1132629004</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We should be able to inject CustomConverters in the
bean mapper. Exactly how we inject bean factories.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1132986522</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is done and checked into CVS under the v15 branch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1133362398</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133021705</field>
		<field name="entrydate">1133362398</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133021705</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133021705</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1132986522</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1347953</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Collapse &#60;field-deep&#62; tag into &#60;field&#62; tag</field>
	<field name="open_date">1131083321</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">There is no reason to have a field-deep tag. We can
easily figure out object.property.property at the field
tag level.

This will also give us the added benefit of inheriting
all of the field tag attributes. (i.e.
relationshipType, one-way, copybyRef, etc.)

This has been done for 1.5.7.

Old way to do deep field mappings:

&#60;field-deep&#62;
  &#60;A&#62;prop1.prop2&#60;/A&#62;
  &#60;B&#62;prop3&#60;/B&#62;
&#60;/field-deep&#62;

New Way...

&#60;field&#62;
  &#60;A&#62;prop1.prop2&#60;/A&#62;
  &#60;B&#62;prop3&#60;/B&#62;
&#60;/field&#62;

Franz</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1132111171</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1131083339</field>
		<field name="entrydate">1132111171</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1131083339</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1131083339</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1475229</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add JMX support and hooks</field>
	<field name="open_date">1145844665</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Add JMX integration to Dozer.  Implement MBeans that 
will be included in the distribution.  Create a stats 
MBean for viewing statistics.  Create an admin MBean 
for managing Dozer properties, etc.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146347613</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146346081</field>
		<field name="entrydate">1146347613</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146346081</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146346081</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Add JMX hooks</field>
		<field name="entrydate">1145845155</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1475232</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add support for configuration via properties file</field>
	<field name="open_date">1145844970</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Implement configuration framework that supports 
configuring certain properties via a properties file.  
i.e) cache max sizes, stats enabled flag, default 
dozer mapping file name</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146347613</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146346080</field>
		<field name="entrydate">1146347613</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146346080</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146346080</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1386770</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Field element should have a create-method attribute</field>
	<field name="open_date">1135141923</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I was trying to avoid creation of factory objects since
i felt that it should part of the frame work. I also
feel that you should give some tag for the creation of
the instance in case some one has a method to call for
the creation instead of the default constructor. Lot of
people use some static methods within the Class to
create the instances as opposed to using the default
constructor.

Good point. Castor has a similar feature on their field
element called 'create-method'. I will create a feature
request and either provide a patch for v15 branch or
add this to the v20 branch slated for a few weeks from
now. This should be relatively simple so maybe I can
have it in a week or so and provide a patch and merge
it into our performance release.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1135275661</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I have also added this at the class level.

examples:

          &#60;mapping&#62;
           
&#60;classA&#62;net.sf.dozer.util.mapping.vo.TestObject&#60;/classA&#62;
           
&#60;classB&#62;net.sf.dozer.util.mapping.vo.TestObjectPrime&#60;/classB&#62;

            &#60;field&#62;
              &#60;A&#62;createMethodType&#60;/A&#62;
              &#60;B
createMethod=&#34;createMethod&#34;&#62;createMethodType&#60;/B&#62;
            &#60;/field&#62;    

          &#60;/mapping&#62;


          &#60;mapping&#62;
            &#60;classA
createMethod=&#34;createMethod&#34;&#62;net.sf.dozer.util.mapping.vo.InsideTestObject&#60;/classA&#62;
           
&#60;classB&#62;net.sf.dozer.util.mapping.vo.InsideTestObjectPrime&#60;/classB&#62;

            &#60;field&#62;
              &#60;A&#62;label&#60;/A&#62;&#60;!-- converting String to String
by name only --&#62;
              &#60;B&#62;labelPrime&#60;/B&#62;
            &#60;/field&#62;

          &#60;/mapping&#62;  

This code has been checked into CVS on the v15 branch and
merged with the v20 branch. In addition to the code you will
also need the latest DTD file under {dozer_home}/xdocs/dtd.

I have attached the patched code.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1137468395</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1137020933</field>
		<field name="entrydate">1137468395</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137020933</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137020933</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">160851: createmethod.zip</field>
		<field name="entrydate">1135275663</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1470452</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Improve and scrub current documentation</field>
	<field name="open_date">1145033045</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Interface Improvements (example)</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">Some sections need cleaned up.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1145034508</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

:)</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146347614</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146346082</field>
		<field name="entrydate">1146347614</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146346082</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146346082</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1145034508</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1413480</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">allow override to exclude mapping of null src field value</field>
	<field name="open_date">1138086057</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Interface Improvements (example)</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">Currently a null src field value will always result in 
the dest field value being null.  Prior to mapping, if 
the dest field is already populated or a default value 
is specified for the dest field, the dest field will 
contain null after mapping if the src field is null.  
In most cases it seems reasonable that this is the 
correct behavior.  But in some cases, it would be 
desreable to Not map the null value to the dest 
field.  

This feature request is to provide a way to explicitly 
exclude a field mapping if the src field value is null.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1138163579</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Code is checked in for basic use case.  Waiting for 
review/feedback </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1138923351</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1138163579</field>
		<field name="entrydate">1138923351</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1138163579</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1138163579</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">allow override to not map null src field value</field>
		<field name="entrydate">1138086086</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1397121</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Create dozer 1.x to 2.x documentation</field>
	<field name="open_date">1136398417</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Create dozer 1.x to 2.x documentation.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1137468394</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1137020932</field>
		<field name="entrydate">1137468394</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137020932</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137020932</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1408737</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">4</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Return null if src object is null</field>
	<field name="open_date">1137558032</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Interface Improvements (example)</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">For top level mapping, return null if source object is 
null when calling the following methods on the 
MapperIF interface.  Currently an exception is 
thrown.  Are there any issues with this approach?

java.lang.Object map(java.lang.Object sourceObj) 
            
java.lang.Object map(java.lang.Object sourceObj, 
java.lang.Class destClass) 
            
java.lang.Object map(java.lang.Object sourceObj, 
java.lang.Class destClass, java.lang.String mapId) 
 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1137646399</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Talked to the team about this one and we decided not to 
make any changes at this time.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137646417</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137646417</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1707014</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Use springs BeanUtils.getPropDescriptors instead of jakarta </field>
	<field name="open_date">1177459037</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details"> </field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177645520</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177459052</field>
		<field name="entrydate">1177645520</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177459052</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177459052</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1543264</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add more comments to the code - Phase 1 of n</field>
	<field name="open_date">1156028741</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hopefully this will reduce the dependency on having 
the decoder ring :) to understand what the code is 
doing in some places.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1156118601</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1156118601</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1156118601</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1445372</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add more log.debug's</field>
	<field name="open_date">1141794237</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Add more debug logging.  This will help diagnose any 
mapping problems</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1144791632</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1144791632</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1143433224</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1142487992</field>
		<field name="entrydate">1143433224</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1142487992</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1142487992</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1416905</field>
	<field user_id="1232046" name="submitted_by">bgsesr</field>
	<field user_id="1232046" name="assigned_to">bgsesr</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">check mapping file for duplicate entries</field>
	<field name="open_date">1138395618</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">throw a runtime exception.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1138511969</field>
		<field name="user_name">bgsesr</field>
		<field name="body">Logged In: YES 
user_id=1232046

suggest altering the parseMappings() method to throw an
IllegalArgumentException if duplicate mapping is found.

</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1138511969</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1138511969</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1138395632</field>
		<field name="mod_by">bgsesr</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1417170</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">allow override to exclude mapping of \&#34;\&#34; src field value</field>
	<field name="open_date">1138421319</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Interface Improvements (example)</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">allow override to exclude mapping of empty string src 
field value.  
Currently a &#34;&#34; src field value will always result in 
the dest field value being &#34;&#34;. Prior to mapping, if 
the dest field is already populated or a default value 
is specified for the dest field, the dest field will 
contain &#34;&#34; after mapping if the src field is &#34;&#34;. 
In most cases it seems reasonable that this is the 
correct behavior. But in some cases, it would be 
desreable to Not map the &#34;&#34; value to the dest 
field. This was requested by Scott Lemke.  I see the 
impl being....

&#60;mapping map-empty-string=&#34;false&#34;&#62;
    &#60;class-
a&#62;net.sf.dozer.util.mapping.vo.AnotherTestObject&#60;/class
-a&#62;
    &#60;class-
b&#62;net.sf.dozer.util.mapping.vo.AnotherTestObjectPrime&#60;/
class-b&#62;    
    &#60;field&#62;
      &#60;a&#62;field1&#60;/a&#62;
      &#60;b&#62;someOtherField&#60;/b&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;   



Or....

  &#60;mapping&#62;
    &#60;class-a map-empty-
string=&#34;false&#34;&#62;net.sf.dozer.util.mapping.vo.AnotherTest
Object&#60;/class-a&#62;
    &#60;class-
b&#62;net.sf.dozer.util.mapping.vo.AnotherTestObjectPrime&#60;/
class-b&#62;    
    &#60;field&#62;
      &#60;a&#62;field1&#60;/a&#62;
      &#60;b&#62;someOtherField&#60;/b&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;   

Or.....

  &#60;mapping&#62;
    &#60;class-
a&#62;net.sf.dozer.util.mapping.vo.AnotherTestObject&#60;/class
-a&#62;
    &#60;class-
b&#62;net.sf.dozer.util.mapping.vo.AnotherTestObjectPrime&#60;/
class-b&#62;    
    &#60;field&#62;
      &#60;a map-empty-string=&#34;false&#34;&#62;field1&#60;/a&#62;
      &#60;b&#62;someOtherField&#60;/b&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;   

 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1138523368</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

This feature has been implemented and will be in the next 
release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1138923350</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">allow override to exclude mapping of &#34;&#34; src field value</field>
		<field name="entrydate">1138923350</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1138523368</field>
		<field name="entrydate">1138923350</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1138523368</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1138523368</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1755838</field>
	<field user_id="1360995" name="submitted_by">warmongul</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Removal of orphans in destination collection</field>
	<field name="open_date">1184725185</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When mapping a source collection to destination sometimes it is desireable that the destination collection have elements removed that did not exist within the source.

Consider an Order with line items. When the source order is copied to the destination order you would want to remove line items from the destination order if it was not in the source.

Attached is a patch that implements this feature, it includes updates to the documentation and a test case. To enable the feature for a field the mapping would look like:

&#60;mapping&#62;
   &#60;class-a&#62;company.a.Order&#60;/class-a&#62;
   &#60;class-b&#62;some.other.company.Order&#60;/class-a&#62;

   &#60;field remove-orphans=&#34;true&#34;&#62;
      &#60;a&#62;lineItems&#60;/a&#62;
      &#60;b&#62;lineItems&#60;/b&#62;
   &#60;/field&#62;
&#60;/mapping&#62;

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1184823123</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Thanks for submitting this patch.  My initial thoughts are that this would be a good addition to the feature list.  We will target the next release for adding this.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1187763641</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1187763641</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1187763641</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1187228998</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">237452: dozer-remove-orphans.patch</field>
		<field name="entrydate">1184725188</field>
		<field name="mod_by">warmongul</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1620589</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Clean up indexed logic and custom converter logic</field>
	<field name="open_date">1166753717</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Try to remove the weirdness and unecessary code</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1169609836</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

completed</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1169609859</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1169609859</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1169609859</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1169609836</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1166753740</field>
		<field name="entrydate">1169609836</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1166753740</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1166753740</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1475228</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add Statistics support</field>
	<field name="open_date">1145844544</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Implement statistics framework to be used for 
gathering Dozer runtime mapping statistics</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146347613</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146346081</field>
		<field name="entrydate">1146347613</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146346081</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146346081</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1474440</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">field-exclude does not support type</field>
	<field name="open_date">1145655518</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I want to exclude field mapping only in one direction
and that's why I want to set type=one-way for the
corresponding &#60;field-exclude&#62; element. Currently, this
is not supported. Is there any way to achieve this
anyother way? </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1145655540</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Done and checked into v21Branch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146347614</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1145655540</field>
		<field name="entrydate">1146347614</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1145655540</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1145655540</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1474422</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove Hydrate and Dehydrate mapping code</field>
	<field name="open_date">1145652910</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I really feel this is a can of worms waiting to be
opened. I also do not feel anybody is using it. I feel
it is a use case which I do not want to spend any time
on fixing or enhancing.

</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146347614</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146346081</field>
		<field name="entrydate">1146347614</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146346081</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146346081</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1474413</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove mapping with just source object</field>
	<field name="open_date">1145652436</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I will remove this interface method. Doesn't really
make sense.

  public Object map(Object sourceObj) throws
MappingException;
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146347614</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146346082</field>
		<field name="entrydate">1146347614</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146346082</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146346081</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1373285</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Ability to map field w/out get() set() Methods</field>
	<field name="open_date">1133760567</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Have capability to map a field that is declared public
and does not have get() set() methods.

  &#60;mapping&#62;
   
&#60;classA&#62;net.sf.dozer.util.mapping.vo.TestObject&#60;/classA&#62;
   
&#60;classB&#62;net.sf.dozer.util.mapping.vo.TestObjectPrime&#60;/classB&#62;

    &#60;field&#62;
      &#60;A&#62;fieldAccessible&#60;/A&#62;
      &#60;B isAccessible=&#34;true&#34;&#62;fieldAccessible&#60;/B&#62;
    &#60;/field&#62;    

  &#60;/mapping&#62;
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1133971784</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

v1.5.8.1 will have this in a limited fashion. 

We still need to do this implicitly and have the ability to
configure at the mapping and configuration levels.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146347614</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146346082</field>
		<field name="entrydate">1146347614</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146346082</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146346082</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1471808</field>
	<field user_id="120761" name="submitted_by">orangeherbert</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">1</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">proper null conversion for \\\&#34;proxy mappings\\\&#34;</field>
	<field name="open_date">1145289710</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">There may be instances in which a converter knows how
to convert a null source value to some non-null target
value.  Dozer cannot currently handle this.

Additionally, where you have a class mapping of the
following type:

&#60;mapping&#62;
  &#60;class-a&#62;ClassA&#60;/class-a&#62;
  &#60;class-b&#62;ClassB&#60;/class-b&#62;
  &#60;field&#62;
    &#60;a&#62;this&#60;/b&#62;
    &#60;b&#62;bComponent&#60;/b&#62;
  &#60;/field&#62;
&#60;/mapping&#62;

i.e. where the only field mapping present is a
self-mapping, Dozer should be able to execute this
mapping (if further research does not prove this to be
unfeasible).</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1160860664</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

assignment</field>
</message>

<message>
		<field name="adddate">1159762850</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I believe this may be resolved in 2.4, but I am not for 
sure.  We removed reflection caching that was causing rare 
proxy issues.  All existing unit tests are green after 
removing the caching.  If this is still an issue, it may 
be easier to resolve in the 2.4 code base.</field>
</message>

<message>
		<field name="adddate">1146170114</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

this change introduced performance issues in Dozer and is on
indefinite hold.</field>
</message>

<message>
		<field name="adddate">1145890314</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

Changed summary.  A proxy mapping is one for which wildcard
is false (by inheritance or explicitly) and the only field
mapping is a self-mapping.  Nulls should be permitted and
properly handled in all manifestations of this use case.</field>
</message>

<message>
		<field name="adddate">1145401980</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

dunno if you're watching these, Franz... but this is working
albeit with some ugly passing-around of the source class in
the 2.1 sandbox branch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1159762850</field>
		<field name="entrydate">1161028910</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">proper null conversion for \&#34;proxy mappings\&#34;</field>
		<field name="entrydate">1161028910</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1161028910</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">proper null conversion for &#34;proxy mappings&#34;</field>
		<field name="entrydate">1161028901</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">120761</field>
		<field name="entrydate">1160860664</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1159762850</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1159762850</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1146170114</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">allow null source value to be converted</field>
		<field name="entrydate">1145890314</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1145890314</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1145640334</field>
		<field name="entrydate">1145890314</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1145640334</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1145640334</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1145289726</field>
		<field name="mod_by">orangeherbert</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1456490</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Make \'this\' keyword functionality bi-directional</field>
	<field name="open_date">1143067107</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Make 'this' keyword functionality bi-directional</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1144451405</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I plan on having a major release at the end of this coming
week. I will have this feature in with it :)</field>
</message>

<message>
		<field name="adddate">1144426541</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

Hi.  Any plans for this?  How big of a change would it be? 
Where would you start to implement this?

br,
Matt</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1144820645</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Make 'this' keyword functionality bi-directional</field>
		<field name="entrydate">1144820645</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1144791137</field>
		<field name="entrydate">1144820645</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1144791137</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1144791137</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1144451405</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1478575</field>
	<field user_id="1022472" name="submitted_by">jonkofal</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">:-(</field>
	<field name="open_date">1146247509</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Sadly they're Strings, so I see the dafault String
mapping behavior.

I've looked at JBeanMapper, which is not nearly so
feature-rich but it does allow for custom mappers at
the field level.

I've also hacked at the Dozer code (not sure which
class, left at office) and use the &#60;field-exclude&#62;
empty if (...) clause to make my call to my CodeMap
component.

I'm surprised this feature is not more often requested
- rarely do I see systems that use the same internal
'codes' (field values).

Anyhow, the DozerEvent functionality should suffice. 
When's it scheduled to be released?  Until then I'll be
post-processing the destination objects or bypassing
reflection-based Mappers altogether and hard-coding.

Thanks,
Jon K</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1146248184</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I've never had a sad face feature request. Guess there is a
first time for everything!

I like the idea of a field level custom converter. I will
get that in to the next release.

As far as the event listening stuff...the release will be
done this weekend. Might be expensive for what you are
trying to do. I would suggest doing a few performance tests.

Thanks,

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146248184</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146248184</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1543302</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Improve code readability and testablility - Phase 2 of n </field>
	<field name="open_date">1156038310</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Break up mapping utils into smaller classes/objects</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1156118446</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Created new classes.....
MappingFileReader
Loader
ClassMapBuilder
ClassMapFinder
DestBeanCreator
ReflectionUtils
CollectionUtils
LogMsgFactory
ClassMapKeyFactory</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1156118470</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1156118470</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1156118446</field>
		<field name="entrydate">1156118470</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1156118446</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1156118446</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1543253</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Improve code readability and testablility - Phase 1 of n</field>
	<field name="open_date">1156026836</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Slim down MappingProcessor.  Move reusable/non 
recursive methods of of processor into other class
(s).  Probably just to MappingUtils for the first 
pass.  After move to utils is finished, we can look 
at moving to other more granualar object oriented 
classes.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1156039281</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1156039281</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1156039281</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1539639</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">2</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Clean up PMD errors</field>
	<field name="open_date">1155494266</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">for the ones that make sense.  Also, exclude unit 
test classes from pmd report.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155494276</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155494276</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155494276</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1484397</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Map ID should be more intuitive</field>
	<field name="open_date">1147153541</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We should not have to use the word PRIME when mapping a
map id in the opposite direction.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155524373</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

done, pending review</field>
</message>

<message>
		<field name="adddate">1155520342</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I was able to remove the PRIME stuff and existing unit 
tests are running green.  It was a struggle.  Dozer is a 
recursive Beast!

I need to take a step back and look at everything.  The 
map-id's certainly are hard and complicate things.</field>
</message>

<message>
		<field name="adddate">1155516323</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I have been looking at the map-id code and PRIME and still 
havent been able to get my head around how all the pieces 
fit together.  This may take longer than I had thought 
after looking through the code.  My biggest concern would 
be inadertantly breaking something and not knowing it.</field>
</message>

<message>
		<field name="adddate">1147663554</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

You would hope so...still need to work this one out...</field>
</message>

<message>
		<field name="adddate">1147462590</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

Won't this be a natural side effect of implementing
https://sourceforge.net/tracker/index.php?func=detail&#38;aid=1480798&#38;group_id=133517&#38;atid=727371
?</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155524374</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155524374</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155524373</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1155493108</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1481538</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add unit tests for JMX controller classes</field>
	<field name="open_date">1146708290</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">yo</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155432137</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155432137</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155432137</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1481505</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Move duplicate assembleKey logic to common place</field>
	<field name="open_date">1146703623</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">In MappingProcessor....

  StringBuffer buf = new StringBuffer(150);
  buf.append(parentSourceField);
  buf.append(System.identityHashCode(sourceObj));
  buf.append(sourceClass.getName());
  buf.append(sourceMethodName);
  buf.append(methodName);
  buf.append(fieldMapping.getSourceField().getName());
  buf.append(fieldMapping.getDestField().getName());
  String key = buf.toString();

Matt B. originally made this change in the abandoned 
2.1 branch


</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155429104</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155429105</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155429105</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">120761</field>
		<field name="entrydate">1155429105</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155429105</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1481533</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove xtra mappingprocessor constructor</field>
	<field name="open_date">1146707272</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">consolidate into 1</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1150597399</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1150597401</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146707285</field>
		<field name="entrydate">1150597401</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146707285</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146707284</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1481427</field>
	<field user_id="120761" name="submitted_by">orangeherbert</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">nice if BruteForcePropertyDescriptor didn\'t rewrite == value</field>
	<field name="open_date">1146695025</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Dozer maps to an existing property value object, but
then still tries to write it.  So if I have getters for
a property that is guaranteed always to return a value
I don't need to use setters in these cases.  To
accomplish this I added a block of code to
BruteForcePropertyDescriptor.setPropertyValue(Object,
Object, Hint, ClassMap).  I will attach as a unified
diff patch.  Existing tests pass with no apparent
negative performance impact.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155449403</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I applied the patch to the v21XBranch and the unit tests 
are 100% green, so I will check in.  I also ran the perf 
tests after applying the patch and didn't notice any 
difference.  Thanks for submitting the patch.</field>
</message>

<message>
		<field name="adddate">1149091603</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

back to original patch; the second one did weird things I
didn't like...</field>
</message>

<message>
		<field name="adddate">1149027551</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

first patch would only have handled shallow properties;
reworked slightly to catch deep properties as well.</field>
</message>

<message>
		<field name="adddate">1147663475</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Should I patch this to v21XBranch? The v21XIndexBranch was
for the original index contributor to add some bug fixes. I
will be merging that branch into the v21XBranch. Confused
yet? :)</field>
</message>

<message>
		<field name="adddate">1147463360</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

patch works against 21XIndexBranch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155449403</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">nice if BruteForcePropertyDescriptor didn't rewrite == value</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155449403</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155449403</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">120761</field>
		<field name="entrydate">1155429064</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">179961: </field>
		<field name="entrydate">1149091605</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">180071: brutepatch.txt</field>
		<field name="entrydate">1149091605</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">176760: </field>
		<field name="entrydate">1149027552</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">179961: brutepatch.txt</field>
		<field name="entrydate">1149027551</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1148065041</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">176760: brutepatch.txt</field>
		<field name="entrydate">1146695025</field>
		<field name="mod_by">orangeherbert</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1480804</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove Source and  Destination Fields</field>
	<field name="open_date">1146625946</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We only have the need for Field.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155452459</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

done</field>
</message>

<message>
		<field name="adddate">1147663373</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I can't remember if I branched before this change or not.
easy enough to check.. :)</field>
</message>

<message>
		<field name="adddate">1147463806</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

21XIndexBranch?</field>
</message>

<message>
		<field name="adddate">1146679454</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is done and in v21XBranch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155452459</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155452459</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155452459</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1475235</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add new logging category for startup/init events</field>
	<field name="open_date">1145845572</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I see this working similar to how Log4J's -Dlog.debug 
works.  Events in dozer that would use this....loading 
of properties file, loading of mapping file(s), dozer 
version info.

Currently log.info puts a lot of things to the log</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155444918</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

done.  -Ddozer.debug enables the init messages</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155444922</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155444922</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155444920</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1148015569</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1468873</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Index based mappings</field>
	<field name="open_date">1144791206</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Self explanatory:

	&#60;mapping wildcard=&#34;true&#34;&#62;
	
&#60;class-a&#62;net.sf.dozer.util.mapping.vo.Individuals&#60;/class-a&#62;
	
&#60;class-b&#62;net.sf.dozer.util.mapping.vo.FlatIndividual&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;usernames[0]&#60;/a&#62;
			&#60;b&#62;username1&#60;/b&#62;
		&#60;/field&#62;
		&#60;field&#62;
			&#60;a&#62;usernames[1]&#60;/a&#62;
			&#60;b&#62;username2&#60;/b&#62;
		&#60;/field&#62;
		&#60;field&#62;
			&#60;a&#62;individual.username&#60;/a&#62;
			&#60;b&#62;username2&#60;/b&#62;
		&#60;/field&#62;
		&#60;field&#62;
			&#60;a&#62;secondNames[1]&#60;/a&#62;
			&#60;b&#62;secondName1&#60;/b&#62;
		&#60;/field&#62;
		&#60;field&#62;
			&#60;a&#62;secondNames[2]&#60;/a&#62;
			&#60;b&#62;secondName2&#60;/b&#62;
		&#60;/field&#62;
		&#60;field&#62;
			&#60;a&#62;aliases.otherAliases[0]&#60;/a&#62;
			&#60;b&#62;primaryAlias&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1144820644</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1144791250</field>
		<field name="entrydate">1144820644</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1144791250</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1144791250</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1482743</field>
	<field user_id="120761" name="submitted_by">orangeherbert</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">remove MappingProcessor.determineClassMap(Object)</field>
	<field name="open_date">1146863060</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">This method is no longer used now that map(Object) has
been removed from MapperIF / MappingProcessor.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1150856474</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146898377</field>
		<field name="entrydate">1150856475</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1150856474</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146898377</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146898377</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1146875498</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1470590</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Implement Event Listening Model</field>
	<field name="open_date">1145050247</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">This will help dozer take over the world :)</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146347614</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146346082</field>
		<field name="entrydate">1146347614</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146346082</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146346082</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1145235529</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1481500</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="120761" name="assigned_to">orangeherbert</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Create static map of threadsafe primitive+wrapper converters</field>
	<field name="open_date">1146703264</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Use the static map in 
MappingUtils.getPrimitiveOrWrapperConverter().  This 
will clean up code a bit and should help performance a 
tad</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1150856483</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1147463263</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

The attached patch applies fine against 21XIndexBranch.</field>
</message>

<message>
		<field name="adddate">1146782897</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

The patch looks great.  I will apply it to the code base.  
Thanks for bringing this idea to the table</field>
</message>

<message>
		<field name="adddate">1146777301</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

attached patch contains this change.</field>
</message>

<message>
		<field name="adddate">1146703324</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Matt B originally made this change in the abandoned 2.1 
branch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1156118508</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1156118508</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1150856483</field>
		<field name="entrydate">1156118508</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146898466</field>
		<field name="entrydate">1150856483</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1150856483</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146898466</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146898466</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">176878: converters.patch.txt</field>
		<field name="entrydate">1146777302</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1146703324</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1539455</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">2</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove Src and Dest Hint</field>
	<field name="open_date">1155452650</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Use Hint</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155452668</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155452668</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155452668</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155452668</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1539458</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">1</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove src and dest class</field>
	<field name="open_date">1155453080</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Use DozerClass</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155453091</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155453091</field>
		<field name="entrydate">1157162456</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155453091</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155453091</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2187241</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Fix FindBugs Issues</field>
	<field name="open_date">1224695742</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">All code issues found with FindBugs analyzer should be fixed.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224696622</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1224696501</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1224696501</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1654784</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add support for Custom Field Mapper</field>
	<field name="open_date">1170905531</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Add support for injecting a DozerBeanMapper with a CustomFieldMapperIF.  If a custom field mapper is specified, Dozer will invoke this class when performing field mappings.

CustomFieldMapperIF.........

public interface CustomFieldMapperIF {
  
  public boolean mapField(Object sourceObj, Object destObj, 
    Object sourceFieldValue, ClassMap classMap, FieldMap fieldMapping);
  
}


If false is returned from the call to mapField(), then the field will be subsequently mapped by Dozer as normal.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1170905570</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

The patch has been applied</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1170905570</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1170905570</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1170905570</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1645687</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Misc Performance Improvements</field>
	<field name="open_date">1169855677</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Performance improvements found during profiling of a use case recently submitted by Dave B.

-Reorder type checks in PrimitiveOrWrapperConverter
-Remove redundant checks in MappingUtils.isSupportedCollection
-Reorder checks in MappingProcessor
-Change list iter's to for loops
-Only get cache from manager 1 time per thread
-Only get isStatsEnabled from global settings 1 time per thread</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1169860136</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

fixed and checked in</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1169860136</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1169860136</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1169860136</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1644537</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove dependency on log4j</field>
	<field name="open_date">1169739696</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I was wondering if it would be possible to modify dozer to use commons-logging as logging API instead of log4j directly. 
 
I want to use dozer in my project, but we have made our own internal logging system (which implements commons-logging). At this moment, we cannot use the logging produced by dozer since it doesn't use the commons-logging API. It would be great if this could be changed. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1170542731</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

We now use the commons-logging API. This will be in release 2.5 this week.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1170542731</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1170542731</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1170542731</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1596766</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Recursive object mapping issue</field>
	<field name="open_date">1163563825</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi Franz and Matt, 
I refer to the following thread on the Dozer support site http://sourceforge.net/forum/forum.php?thread_id=1472795&#38;forum_id=452530      .
I was wondering if you had time to modify the Dozer code to stop the infinite loops happening without having to exclude a field in the dozer mapping file. You've probably been asked this before.  I started looking at the private mapField method in MappingProcessor to see if I could store a key of the field being processed in a map with some incrementing counter to stop it from being mapped again, but I'm not sure if this is the correct place in the code to do such a thing.  Hibernate bi-directional relationships are important to us and I'd really appreciate a feature to support this.  
If you both don't have the time, or think its not important or an issue, I'm happy to pursue it further, but would appreciate some hints in where to start (you may remember some months ago we offered some code b to get allowed runtime exceptions to be passed up - you integrated this into 2.4). From the forum entry above, it seems like other people would benefit as well.
Any help would be greatly appreciated. 
Regards 
Alan 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1169609884</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

touch</field>
</message>

<message>
		<field name="adddate">1166658252</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

I applied the patch code and all appears to be working.  Thanks for the code submission</field>
</message>

<message>
		<field name="adddate">1163640827</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Attaching more recent patch</field>
</message>

<message>
		<field name="adddate">1163569736</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Attaching patch from Alan Stewart</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1169609906</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1169609906</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1169609906</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1169609884</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1166658252</field>
		<field name="entrydate">1169609884</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1166658252</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1166658252</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">203036: </field>
		<field name="entrydate">1163645906</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">203036: dozer-2.4-recursion_patch.zip</field>
		<field name="entrydate">1163640827</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">202889: dozer-2.4-patch-alankstewart.zip</field>
		<field name="entrydate">1163569736</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1481357</field>
	<field user_id="120761" name="submitted_by">orangeherbert</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">CustomConverter matching too loose</field>
	<field name="open_date">1146688436</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Here are the current criteria for custom converter
matching:

// we check to see if the destination class is the same
as classA defined in the converter mapping xml.
// we next check if the source class is the same as
classA defined in the converter mapping xml.
// we also to check to see if it is assignable to
either. We then perform these checks in the other
direction for
// classB

//following reformatted here:

(
  (
    classA.getName().equals(dest.getName())
 || classA.getName().equals(src.getName())
 || classA.isAssignableFrom(dest)
 || classA.isAssignableFrom(src)
  )
&#38;&#38;
  (
    classB.getName().equals(dest.getName())
 || classB.getName().equals(dest.getName())
 || classB.isAssignableFrom(dest)
 || classB.isAssignableFrom(src)
  )
)

Problems: since Dozer works without weird classloader
stuff (i.e. it assumes a single classloader) I see no
reason to compare classnames.  That would change the
above to:

(
  (
    classA.isAssignableFrom(dest)
 || classA.isAssignableFrom(src)
  )
&#38;&#38;
  (
    classB.isAssignableFrom(dest)
 || classB.isAssignableFrom(src)
  )
)

Assume you have a converter that can convert between
different implementation types of a single interface:

&#60;converter type=&#34;FooConverter&#34;&#62;
  &#60;class-a&#62;my.IF&#60;/class-a&#62;
  &#60;class-b&#62;my.IF&#60;/class-b&#62;
&#60;/converter&#62;

You have another converter that can convert
implementations of the interface to e.g. String:

&#60;converter type=&#34;BarConverter&#34;&#62;
  &#60;class-a&#62;java.lang.String&#60;/class-a&#62;
  &#60;class-b&#62;my.IF&#60;/class-b&#62;
&#60;/converter&#62;

Your String converter cannot be picked up when looking
for a converter matching (String -&#62; my.IF) because
classA is assignable from dest and classB is assignable
from dest.  The only workaround is to put all such
conversions in one converter.  I suggest the code become:

(
  (
    classA.isAssignableFrom(dest)
 &#38;&#38; classB.isAssignableFrom(src)
  )
||
  (
    classA.isAssignableFrom(src)
 &#38;&#38; classB.isAssignableFrom(dest)
  )
)

I am using this with 21Xbranch code; all tests pass,
performance is fine, and I was able to add a decoy
mapping to dozerBeanMapping.xml that breaks testcases
against current code but works as expected with my
modification.  Can I commit it?</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1169956630</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Applied suggested code changes to 2.5.  Thanks for the code submission</field>
</message>

<message>
		<field name="adddate">1146863913</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

adding changes to dozerbeanmapping.xml and
CustomConverterContainer.java as patches.</field>
</message>

<message>
		<field name="adddate">1146694077</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Can you attach your file and I will just take from there.

Thanks,

franz</field>
</message>

<message>
		<field name="adddate">1146693537</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

Hmm... looks like what you committed was the intermediate
version here.  This removed the name tests but still has the
same basic result as before.  My final version reversed the
&#38;&#38;s and ||s from what you have committed.  I tested it by
creating a ThrowExceptionConverter that did what it said,
then mapping that converter to HintedOnly on both sides. 
Simply having this &#34;decoy mapping&#34; around breaks the
existing test case; switching &#38;&#38; and || cleans it right up.  ;)</field>
</message>

<message>
		<field name="adddate">1146691872</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Thanks Matt, looks nice. I have commited that change to
v21XBranch.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1169956630</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1169956630</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1169956630</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">120761</field>
		<field name="entrydate">1163380342</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">177729: 21XIndexBranchconvertercontainer.patch.txt</field>
		<field name="entrydate">1147463128</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">176757: </field>
		<field name="entrydate">1146863945</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">176979: decoyconvertermapping.patch.txt</field>
		<field name="entrydate">1146863945</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">176759: </field>
		<field name="entrydate">1146863945</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">176977: convertercontainer.patch.txt</field>
		<field name="entrydate">1146863913</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">176759: dozerBeanMapping.xml</field>
		<field name="entrydate">1146694508</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">176758: ThrowExceptionConverter.java</field>
		<field name="entrydate">1146694474</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">176757: CustomConverterContainer.java</field>
		<field name="entrydate">1146694419</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1146691872</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1476780</field>
	<field user_id="1022472" name="submitted_by">jonkofal</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Custom Conversion of Member Value</field>
	<field name="open_date">1146046937</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Interface Improvements (example)</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I have DTOA and DTOB

At the end of my conversion I'd like to see this:

DTOA.land=&#34;Deutschland&#34;

DTOB.country=&#34;Germany&#34;

I've looked at the CustomConverter and it seems to 
only work at the Class-level.

What I'd like is to be able to write and declare a 
Member-level CustomConverter that would allow me to 
make a call to my 'CodeMap' Component to to this 
conversion.

Is this supported and I just can't figure it out, or 
is this a reasonable feature request or is it 
something I sould just forget about (not really an 
option).

Thanks
Jon K</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1170646556</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

moving back to pending</field>
</message>

<message>
		<field name="adddate">1170645603</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1169609950</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

touch</field>
</message>

<message>
		<field name="adddate">1166739217</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

This functionality has been added and will be released with 2.5</field>
</message>

<message>
		<field name="adddate">1146248472</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This will be implemented in the next relese.</field>
</message>

<message>
		<field name="adddate">1146245322</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

As long as &#60;a&#62;land&#60;/a&#62; and &#60;b&#62;country&#60;/b&#62; class types are
defined as a custom converter we should be able to handle
this. Are you not seeing that behavior?

thanks,

franz</field>
</message>

<message>
		<field name="adddate">1146214423</field>
		<field name="user_name">jonkofal</field>
		<field name="body">Logged In: YES 
user_id=1022472

Hi Franz,

Without thinking of Events, what I see as a straightforward 
solution is a Mapping Attribute on the &#60;field&#62; Element that 
defines a Converter to be used to obtain the value of the 
Object.member.

&#60;field custom-converter=&#34;MyFieldConverter&#34;&#62;
   &#60;a&#62;land&#60;/a&#62;
   &#60;b&#62;country&#60;/b&#62;
&#60;/field&#62;

class MyFieldConverter implements FieldConverter {
    public Object convert(Object sourceObject, Object 
destObject, String sourceFieldName, Object 
sourceFieldValue) {
        //do code table lookup here
    }
}

I guess the DozerEvent implementation would be able to 
solve this problem at first look, but I'd be concerned 
about the performance unless the firing of Events is false 
for a field by default.

Until there's a solution in Dozer, I'll either post-process 
the Objects I create to do the code table lookups (easy but 
ugly) or hack at the Dozer Source (hard, pretty, but 
perhaps leading to compatability problems with future 
releases).

Do you know of any Mapping frameworks that support this 
already?

Jon K</field>
</message>

<message>
		<field name="adddate">1146155405</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

We are currently constrained to the Class level mappings. 

Would an event model API help with this?

See this thread:

http://sourceforge.net/forum/message.php?msg_id=3692866

Thanks,

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1170646556</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1170646556</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1170645603</field>
		<field name="entrydate">1170646556</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1166739217</field>
		<field name="entrydate">1170645603</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170645603</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1166739217</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1166739217</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1163380389</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1146248472</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1657611</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Create Quick Reference Page for Mapping XML options</field>
	<field name="open_date">1171239223</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">The different options are scattered amongst the existing doc pages, so a consolidated quick ref page for the options specified in the DTD would be a nice addition</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175387308</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Added documentation to existing DTD</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175649777</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175387308</field>
		<field name="entrydate">1175649777</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175387308</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1175387308</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175387308</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1754179</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Misc code cleanup and refactoring</field>
	<field name="open_date">1184468040</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Make a pass through the code base and do a general code cleanup where possible.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1184468079</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1184468079</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1184468079</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1677946</field>
	<field user_id="1363735" name="submitted_by">subf</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Maven repo</field>
	<field name="open_date">1173544625</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,

Any chance adding 3.0 to maven 2 repository?

Thanks
subf</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1173553784</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

See this thread:

http://sourceforge.net/forum/forum.php?thread_id=1683260&#38;forum_id=452529
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1174882863</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1174576485</field>
		<field name="entrydate">1174882863</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1174576485</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1174576485</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1173553784</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1684934</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Move dozer to subversion</field>
	<field name="open_date">1174458081</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">subversion</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1174882863</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1174576484</field>
		<field name="entrydate">1174882863</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1174576484</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1174576484</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1677376</field>
	<field user_id="1717313" name="submitted_by">goeldner</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Resolve collection hints from generic type information</field>
	<field name="open_date">1173455792</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi, it would be a great feature if dozer could read collection hints from generics. (I know, you need Java 5 for that ;)

Especially I do NOT want to define following XML...

  &#60;mapping&#62;
      &#60;class-a&#62;example.UserGroup&#60;/class-a&#62;
      &#60;class-b&#62;example.UserGroupPrime&#60;/class-b&#62;
      &#60;field&#62;
          &#60;a&#62;users&#60;/a&#62;
          &#60;b&#62;users&#60;/b&#62;
          &#60;a-hint&#62;example.User&#60;/a-hint&#62;
          &#60;b-hint&#62;example.UserPrime&#60;/b-hint&#62;
      &#60;/field&#62;
  &#60;/mapping&#62;

... if dozer could resolve those hints from the beans I have already parameterized, e.g.:

  public class UserGroupPrime {
      public void setUsers(List&#60;UserPrime&#62; aUsers) {
          users = aUsers;
      }
      ...
  }

I think the size of many XML config files would decrease enormously :)

(I attached a simple example test case.)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1174395945</field>
		<field name="user_name">goeldner</field>
		<field name="body">Logged In: YES 
user_id=1717313
Originator: YES

Hey, that sounds good! I will try it.

Many thanks!</field>
</message>

<message>
		<field name="adddate">1174364488</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Your unit tests now pass. This will be in the next release. You can get the latest code out of svn if you want to preview.

Franz</field>
</message>

<message>
		<field name="adddate">1174317614</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Ok...this should help. I couldn't find the right method calls...this looks correct.

Thanks,

Franz</field>
</message>

<message>
		<field name="adddate">1174317608</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Ok...this should help. I couldn't find the right method calls...this looks correct.

Thanks,

Franz</field>
</message>

<message>
		<field name="adddate">1174301604</field>
		<field name="user_name">goeldner</field>
		<field name="body">Logged In: YES 
user_id=1717313
Originator: YES

I don't know if you have seen the attached test case. There I read the generic type information from the setter method at runtime with following code:

  Method setter = UserGroupPrime.class.getMethod(&#34;setUsers&#34;, List.class);
  Type[] parameterTypes = setter.getGenericParameterTypes();
  assertEquals(1, parameterTypes.length);
  ParameterizedType parameterType = (ParameterizedType) parameterTypes[0];
  assertEquals(List.class, parameterType.getRawType());
  assertEquals(UserPrime.class, parameterType.getActualTypeArguments()[0]);
        
I think that is a simple example how it basically works. Hope you get it into next dozer release :)
</field>
</message>

<message>
		<field name="adddate">1174273664</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Not as easy as I first thought...found this Generics comparison. It looks like it is difficult (impossible) to get the Type information at runtime...Anyone have thoughts on this? --

This is from the article I found on generics...

Issue number two, and I think this is probably an even bigger issue, is that because J&#34;&#34;ava's generics implementation relies on erasure of the type parameter, when you get to runtime, you don't actually have a faithful representation of what you had at compile time. When you apply reflection to a generic List in Java, you can't tell what the List is a List of. It's just a List. Because you've lost the type information, any type of dynamic code-generation scenario, or reflection-based scenario, simply doesn't work. If there's one trend that's pretty clear to me, it's that there's more and more of that. And it just doesn't work, because you've lost the type information. Whereas in our implementation, all of that information is available. You can use reflection to get the System.Type for object List&#60;T&#62;. You cannot actually create an instance of it yet, because you don't know what T is. But then you can use reflection to get the System.Type for int. You can then ask reflection to please put these two together and create a List&#60;int&#62;, and you get another System.Type for List&#60;int&#62;. So representationally, anything you can do at compile time you can also do at runtime.

http://www.artima.com/intv/generics2.html
</field>
</message>

<message>
		<field name="adddate">1173486137</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

I will try to get this into the next release. Maybe a week or two out...</field>
</message>

<message>
		<field name="adddate">1173456454</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Very cool idea. Let me discuss this with Matt.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1174576485</field>
		<field name="entrydate">1174882863</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1174882863</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1174576485</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1174576485</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1174364488</field>
		<field name="entrydate">1174395945</field>
		<field name="mod_by">goeldner</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1174395945</field>
		<field name="mod_by">goeldner</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1174364488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1174364488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1173486137</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">219645: dozer-generics-test.zip</field>
		<field name="entrydate">1173455792</field>
		<field name="mod_by">goeldner</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1456486</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">set/get method for last field in deep-chain</field>
	<field name="open_date">1143066982</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi, 
 
A bug has been opened (number 1441312) and recently
deleted on this subject. 
 
The problem can be explained with the following mapping : 
 
... 
&#60;field&#62;  
&#60;A&#62;addresses&#60;/A&#62;  
&#60;B theSetMethod=&#34;addAddress&#34;
type=&#34;iterate&#34;&#62;society.addresses&#60;/B&#62;  
&#60;sourceTypeHint&#62;oa.Address&#60;/sourceTypeHint&#62;  
&#60;destinationTypeHint&#62;otd.AddressOTD&#60;/destinationTypeHint&#62;  
&#60;/field&#62; 
... 
 
In this example, the custom set method is supposed to
be defined for the &#34;addresses&#34; attribute (this is the
way we interpreted it) and no custom methods can be
defined for the society attribute. 
 
As Franz said in the bug 1441312 comments, there is no
way to detect if a custom set or get method has been
defined for the intermediate attributes of the
deep-mapping (only &#34;society&#34; here). So for those, only
standard javabean accessors can be accepted. 
 
Currently, mixed deep-mapping and custom set methods is
not allowed (it does not works). 
 
Is it possible to accept set/get methods on a
deep-mapping field and use these methods only for the
last attribute of the deep-field chain of attributes
(all intermediate attributes must then respect javabean
rules for get/set methods) instead of prevent the mix ?  
 
Such a rule would be sufficient for us. 
 
Thanks, 
 
Richard. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175465227</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

This has been fixed.  It resulted as a side effect of some recent property descriptor cleanup.</field>
</message>

<message>
		<field name="adddate">1146806880</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Send your eclise project along and I will try to get to the
bottom of this. Do I need to know French? :)</field>
</message>

<message>
		<field name="adddate">1146726784</field>
		<field name="user_name">skoessler</field>
		<field name="body">Logged In: YES 
user_id=1326867

Well...I tried with the attached jar and here are my
conclusions :
* it seems to be ok that with one level (like in your example)
* it crashes if there's two levels (in your example, replace
description.customSetGetMethod with
description.description2.customSetGetMethod)
* there's maybe something else to lookout in our framework
... we're not using standard JavaBeans, and I think there's
something wrong with this ...

I can send you a little Java project (under Eclipse) with my
tests if you want.

Thx for all
Bye
Seb</field>
</message>

<message>
		<field name="adddate">1146678925</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

So...I got this working with a custom set method/iterate. I
did not have time to get a custom get method working.

Here is what the mapping looks like:

    &#60;field&#62;
      &#60;a&#62;customSetGetMethod&#60;/a&#62;
      &#60;b set-method=&#34;setCustom&#34;
type=&#34;iterate&#34;&#62;description.customSetGetMethod&#60;/b&#62;
      &#60;b-hint&#62;net.sf.dozer.util.mapping.vo.Van&#60;/b-hint&#62;
    &#60;/field&#62;

I have attached the jar. Let me know how it works.</field>
</message>

<message>
		<field name="adddate">1146640774</field>
		<field name="user_name">skoessler</field>
		<field name="body">Logged In: YES 
user_id=1326867

Hi Franz,

i'm already ok for an unofficial release ;)
Your last fix doesn't work for me, because i'm using a
custom setMethod (called addXXX), which is also iterative !
You can take a look at the example provided by Richard.
Do you want a class diagram ?

See you
</field>
</message>

<message>
		<field name="adddate">1146625137</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Will this fix work. We use the property descriptors in the
deep hiearchy. In this example if you have a setMethod
called setCustom() and a get method called getCustom() you
will be ok. The actual attribute can be named anything. 

&#60;b&#62;description.custom&#60;/b&#62;

Let me know if this will help. If not...it might be pretty
painful to implement since we deal in property descriptors
and not attributes at the deep level.
</field>
</message>

<message>
		<field name="adddate">1146595618</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

For you Seb...anything. How about I add this feature in the
next day or so and I can get you an unofficial release...?

Franz</field>
</message>

<message>
		<field name="adddate">1146575819</field>
		<field name="user_name">skoessler</field>
		<field name="body">Logged In: YES 
user_id=1326867

Hi,

i'm currently testing the 2.2 release of Dozer. There's so
much features : i really can't use them all in one project :)
But in fact, i'm really waiting for the feature above ...
Because of our home-made framework, we're really going to a
dead-end without it ! :'(

Seb, waiting for the next release ;)</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175649777</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175465227</field>
		<field name="entrydate">1175649777</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175465227</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175465227</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1163380398</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">176724: dozer-2.2.jar</field>
		<field name="entrydate">1146678926</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1146595618</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1690327</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Auto register Dozer jmx beans w/ platform mbean server</field>
	<field name="open_date">1175137041</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175374285</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

If running in jdk 1.5, Dozers JMX beans will be auto registered on startup.  This can be surpressed in the dozer properties file</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175649776</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175374285</field>
		<field name="entrydate">1175649776</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175374285</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1175374285</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175374285</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Auto register Dozer jmx beans w/ platform mdb server</field>
		<field name="entrydate">1175137095</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1691021</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Document custom converter support of Arrays</field>
	<field name="open_date">1175225372</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">http://sourceforge.net/forum/forum.php?thread_id=1702743&#38;forum_id=452530</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175227481</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175649776</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175227481</field>
		<field name="entrydate">1175649776</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175227481</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175227481</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1690298</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Private constructor support when creating new instance </field>
	<field name="open_date">1175131912</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">For dest objects without a no arg public constructor, look for private no arg constructor.

Should this happen by default or does it need to be configurable via &#34;is-accessible&#34; ??</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1287509473</field>
		<field name="user_name">sreekarmuddu</field>
		<field name="body">How about adding support for the below cases?
1. Class having only a private overloaded constructor. Class does not have a public or private no-arg constructor?
2. Class has a static inner factory class. Dozer allows to specify a create method in a factory class but there is no way to do this if the factory class is a static inner class.
&#60;b create-method=&#34;com.dozer.test.Factory.create&#34;&#62;field&#60;/b&#62; - WORKING
&#60;class-a create-method=&#34;com.dozer.test.MyBean$Factory.fromValue&#34;&#62; - NOT WORKING</field>
</message>

<message>
		<field name="adddate">1175225552</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

If no public no arg constructor is found, dozer will auto detect a private constructor and just use that one.</field>
</message>

<message>
		<field name="adddate">1175223342</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

I am going to go down the path of automatically looking for a private no arg constructor if a public no arg constructor can be found</field>
</message>

<message>
		<field name="adddate">1175132476</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

What about being able to specify in the Global Configuration block a List of Classes that can instantiated via private constructors?

It seems like a good idea</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175649776</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175225552</field>
		<field name="entrydate">1175649776</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175225552</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175225552</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1175223342</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1695408</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Boolean to number auto conversion</field>
	<field name="open_date">1175829606</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Integer to Boolean does work.  But the jakarta commons Integer doesnt appear to support Boolean src value.  Seems like this could be handled automatically</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1176180375</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Correct typo in previous comment....

Add support for auto conversion of Boolean --&#62; Int, Boolean --&#62; Long

If boolean value = &#34;true&#34;, then the number value will be 1. If boolean
value = &#34;FALSE&#34;, then the number value will be 0.
</field>
</message>

<message>
		<field name="adddate">1175894651</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Add support for auto conversion of Boolean --&#62; Int, Boolean --&#62; Long

If boolean value = &#34;true&#34;, then the number value will be 1. If boolean value = &#34;true&#34;, then the number value will be 0.</field>
</message>

<message>
		<field name="adddate">1175838246</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

fixed</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1176074215</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175984617</field>
		<field name="entrydate">1176074215</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175984617</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175984617</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175983610</field>
		<field name="entrydate">1175984596</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Boolean to number issue</field>
		<field name="entrydate">1175984596</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175984596</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175983610</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175983610</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175983028</field>
		<field name="entrydate">1175983533</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">data_type</field>
		<field name="old_value">727371</field>
		<field name="entrydate">1175983533</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175983533</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175983028</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175983028</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175894651</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175838246</field>
		<field name="entrydate">1175894651</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Boolean to Integer auto converstion fails</field>
		<field name="entrydate">1175894651</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1175838246</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175838246</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175838246</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1695380</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add new Statistics Type - % of Time in Custom Converters</field>
	<field name="open_date">1175823168</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Add stat type that shows the overall time spent in custom converter logic and the % of overall mapping time of custom converters.  This would be time that is out of the control of Dozer</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175827941</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1176074215</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175827941</field>
		<field name="entrydate">1176074215</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175827941</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175827941</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1697294</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">When auto registering mbeans check if mbean is already reg\'d</field>
	<field name="open_date">1176170546</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">In redeployment situations, mbeans may already be registered.  If so, unregister and reregister the dozer mbeans.  

The current code should not cause any system issues if the mbeans are already registered because any exceptions thrown while registering dozer mbeans are not propgated.  So this would just get rid of the ugly warning log when mbeans are already registered.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1176176954</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

done.  if mbean is already registered, unregister it prior to reregistering it</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177645520</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">When auto registering mbeans check if mbean is already reg'd</field>
		<field name="entrydate">1177645520</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1176176954</field>
		<field name="entrydate">1177645520</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1176176954</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1176176954</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">When auto registerign mbeans check if mbean is already reg'd</field>
		<field name="entrydate">1176170574</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1658168</field>
	<field user_id="1717313" name="submitted_by">goeldner</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Recursive object mapping not working with interfaces</field>
	<field name="open_date">1171297128</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">The fix for the recursive mapping issue #1596766 works fine, but not if you do implement against interfaces.

The MappingProcessor compares in line 392 the classes of the already mapped value and destination type for equality. That does never work for interfaces compared with their implementation class.

If you change line 392 of MappingProcessor to the following code, everything works fine:

if (value != null &#38;&#38; destFieldType.isAssignableFrom(value.getClass())) {
...
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1176777689</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Fixed and checked in to the 3.3 code base.  Sorry for missing this one in the last release.  Thanks for taking the time to submit the bug and unit test!</field>
</message>

<message>
		<field name="adddate">1176774361</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Sorry for not getting this in the 3.2.1 release.  I am not sure how we missed it.  I will apply this to the code base tonight and it will be included in the next release.</field>
</message>

<message>
		<field name="adddate">1176726579</field>
		<field name="user_name">goeldner</field>
		<field name="body">Logged In: YES 
user_id=1717313
Originator: YES

Hi, hope you get this patch into one of the next releases ;)

I attached a testcase that demonstrates the problem. (Tested with JDK 1.5 and Dozer 3.2.1)

The line to change as mentioned above is 416 of MappingProcessor in Dozer 3.2.1 release.

Greetings,
Christoph

File Added: dozer-test-recursion-with-interfaces.zip</field>
</message>

<message>
		<field name="adddate">1171334596</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Thanks for the code submission.  I will apply this code and if all of the unit tests run green, we will include it in the next release</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177645521</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1176777689</field>
		<field name="entrydate">1177645521</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1176777689</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1176777689</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">225147: dozer-test-recursion-with-interfaces.zip</field>
		<field name="entrydate">1176726579</field>
		<field name="mod_by">goeldner</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1171334596</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">215605: dozer-3.0-patch-goeldner.zip</field>
		<field name="entrydate">1171297129</field>
		<field name="mod_by">goeldner</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1482749</field>
	<field user_id="120761" name="submitted_by">orangeherbert</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">improve collection handling, esp. non-cumulative mapping</field>
	<field name="open_date">1146863669</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Currently non-cumulative mapping replaces the existing
object with a new one, mapping the existing one to the
new one.  This drives e.g. Hibernate crazy,
necessitating a merge() operation, and will most often
blow away changes the destination object was intended
to receive as part of the mapping operation in the
first place.  The attached patch will correct this
error for set, list, and array handling.  Additionally
it removes the superfluous mapSetToSet() method (the
logic for mapping any collection to a Set is superior,
including non-cumulative support) and adds
non-cumulative support when mapping maps to maps (using
key AND value equality).  Patch created against Dozer
21XBranch.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1177456517</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Applied non-cum portion of the patch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177456517</field>
		<field name="entrydate">1177645521</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177645521</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177456517</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177456517</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">120761</field>
		<field name="entrydate">1163380376</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">176976: </field>
		<field name="entrydate">1149287931</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">180379: noncumulative.patch.txt</field>
		<field name="entrydate">1149287931</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">177731: </field>
		<field name="entrydate">1149287931</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1148065015</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">177731: 21XIndexBranchnoncumulative.patch.txt</field>
		<field name="entrydate">1147463770</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">176976: noncumulative.patch.txt</field>
		<field name="entrydate">1146863670</field>
		<field name="mod_by">orangeherbert</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1712513</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove NotFoundException and DozerRuntimeException</field>
	<field name="open_date">1178256302</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">It adds no value</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178337448</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

done</field>
</message>

<message>
		<field name="adddate">1178336449</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Just use MappingException.  No need for the more complex exception hierarchy.  </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775479</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178337448</field>
		<field name="entrydate">1179775479</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178337448</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178337448</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Remove NotFoundException</field>
		<field name="entrydate">1178336449</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2537358</field>
	<field user_id="2375569" name="submitted_by">andor72</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add support for Spring resources</field>
	<field name="open_date">1232966929</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">It would be nice to add spring resource support to the dozer bean mapper.
In my current project, Dozer is configured with a mapping-file pattern and a simple Spring resource adapter.
This gives you the possibility to find all dozer mapping resources on the classpath, which greatly improves
the testability of your project.

I use the following code to achieve this flexibility (checkout the line  &#60;property name=&#34;locations&#34; value=&#34;classpath*:/dozer*.xml&#34;/&#62;)

spring-assembler.xml

&#60;code&#62;
  &#60;bean class=&#34;net.sf.dozer.util.mapping.DozerBeanMapper&#34;&#62;
    &#60;property name=&#34;mappingFiles&#34;&#62;
      &#60;bean class=&#34;xxx.SpringResourceList&#34;&#62;
        &#60;property name=&#34;locations&#34; value=&#34;classpath*:/dozer*.xml&#34;/&#62;
      &#60;/bean&#62;
    &#60;/property&#62;
  &#60;/bean&#62;
  
&#60;/beans&#62;
&#60;/code&#62;

This is the little adapter, which could go into DozerBeanMapper or a little spring wrapper class


public class SpringResourceList
  extends ArrayList&#60;String&#62; {

  public void setLocations(final org.springframework.core.io.Resource[] resources) throws IOException {
    for (Resource resource : resources) {
      add(resource.getURL().toExternalForm());
    }
  }
}


Best regards,
Andor








 </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262458357</field>
		<field name="user_name">buzdin</field>
		<field name="body">We actually do support Resource configuration in DozerBeanMapperFactoryBean, provided to ease Spring integration. I have added explicit documentation in JavaDoc and updated Functional Tests to use the functionality.</field>
</message>

<message>
		<field name="adddate">1233308966</field>
		<field name="user_name">andor72</field>
		<field name="body">You got it - zhat is exactly what I do.

The point i was talking about is the possibility to configure Dozer with a mapping file pattern like dozer-*.xml.
But you are right the feature is useful only for people who do not know how to handle the spring internas.

Maybe an articel/blog entry could do the same. I use the wrapper for generics, too:

  public &#60;X&#62; X assemble(final Class&#60;X&#62; destClass, final Object src) {
    return destClass.cast(mapper.map(src, destClass));
  }

But thanks for your reply,

Best regards,
Andor





 </field>
</message>

<message>
		<field name="adddate">1233306442</field>
		<field name="user_name">edbras</field>
		<field name="body">I don't think this is really necessary as you should  wrap the dozer mapping anyway such that you can inject different Dto mappers of other companies (Service pattern).
The wrapper can do the above task for you.
So you would get something like this:

	&#60;bean id=&#34;dozerConverter&#34; class=&#34;XXX.intern.impl.DtoConverter&#34;&#62;
		&#60;property name=&#34;mapper&#34;&#62;
			&#60;bean class=&#34;net.sf.dozer.util.mapping.DozerBeanMapper&#34;&#62;
				&#60;property name=&#34;mappingFiles&#34;&#62;
					&#60;list&#62;
						&#60;value&#62;dozer/dozerGwtMapping.xml&#60;/value&#62;
					&#60;/list&#62;
				&#60;/property&#62;
			&#60;/bean&#62;
		&#60;/property&#62;
		&#60;property name=&#34;mappings&#34;&#62;
			&#60;map&#62;
				&#60;entry key=&#34;XXX.domain.Member&#34; value=&#34;XXX.domain.MemberDto&#34; /&#62;
				&#60;entry key=&#34;XX.domain.Taxer$TaxerDefault&#34; value=&#34;XX.domain.TaxerDto&#34; /&#62;
...
... etc...

In the above:
- DtoConverter implements my general Dto converter.
- In my Dto converter I also have the method map(Object obj). Note that the target class isn't specified and isn't needed as the Spring config contains the mapping for every type of object. The implementation simple looksup the target class and passes it on to dozer...

That's it and it's a nice way of hdding the Dozer mapping out of your application which is basically what you want.

Regards,
Ed Bras

</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262458357</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262458357</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1262458357</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">897287</field>
		<field name="entrydate">1249384024</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1249384024</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1749804</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add bidirectional relationship between FieldMap and ClassMap</field>
	<field name="open_date">1183863799</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Internal refactoring</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1183918601</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1183918601</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1183918601</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1752379</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Refactor/Clean Up Dest Bean Creator</field>
	<field name="open_date">1184210536</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">This class needs some attention</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1184216311</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1184216311</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1184216311</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1184216311</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1752329</field>
	<field user_id="1842695" name="submitted_by">raja_3012</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">9</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping deep level field in Indexed structure</field>
	<field name="open_date">1184199712</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi Guys,
Consider something like this...

Souce classes
-------------
class ScenarioDTO {
  private BorrowerDTO borrowerDTO ;
//getter-setters
}

class BorrowerDTO {
  private Employment employment;
//getter-setters
}

class Employment {
  private String selfEmployed;
//getter-setters
}

Target classes
--------------

class DD {
   private BorrowerList borrowerList;
//getter-setters
}
class BorrowerList {
   private Borrower[] borrower;
//getter-setters
}

class Borrower {
   private Employment employment;
//getter-setters
}

class Employment {
  private Boolean isSelfEmployed;
//getter-setters
}


I am making the following entry for this in the bean mapper XML...

&#60;mapping&#62;
 &#60;class-a&#62;com.test.ScenarioDTO&#60;/class-a&#62;
 &#60;class-b&#62;com.input.DD&#60;/class-b&#62;
 &#60;field&#62;
   &#60;a&#62;BorrowerDTO.Employment.selfEmployed&#60;/a&#62;
   &#60;b&#62;BorrowerList.Borrower[0]&#60;/b&#62;
   &#60;b-hint&#62;Employment.isSelfEmployed&#60;/b-hint&#62;
 &#60;/field&#62;
&#60;/mapping&#62;

When i am running the program it is giving me this error: 
net.sf.dozer.util.mapping.MappingException: java.lang.ClassNotFoundException: Employment.isSelfEmployed

I tried a lot but in vain. Can anyone help me on this? I really need it very urgently.

Thanks a lot in advance !!!

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1184458188</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

index mapping within deep mappings has been implemented</field>
</message>

<message>
		<field name="adddate">1184206987</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Hi Raja,

The &#60;hint&#62; is used to specify Class type when needed.  It looks like you are trying to overload it with deep mapping logic and I would expect that to throw the exception you are seeing.  If I understand your use case correctly, is the following mapping what you are trying to perform(if it was supported)?

&#60;a&#62;BorrowerDTO.Employment.selfEmployed&#60;/a&#62;
&#60;b&#62;BorrowerList.Borrower[0].employment.isSelfEmployed&#60;/b&#62;

If so, this is a known limitation and there is a feature request to add indexed mapping within deep mapping.  The feature request is 1473800.

http://sourceforge.net/tracker/index.php?func=detail&#38;aid=1473800&#38;group_id=133517&#38;atid=727371</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1184458188</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1184458188</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">3</field>
		<field name="entrydate">1184458188</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1184215362</field>
		<field name="entrydate">1184458188</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1184215362</field>
		<field name="mod_by">raja_3012</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1184215362</field>
		<field name="mod_by">raja_3012</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1184205619</field>
		<field name="mod_by">raja_3012</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1749805</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Push mapping value hierarchy down to ClassMap and FieldMap</field>
	<field name="open_date">1183864077</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Internal refactoring.  Push this logic down into these objects.  This will prevent manual copying of xml mapping data all over the place. </field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1183918592</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1183918592</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1183918592</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1183864094</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1749802</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Dont expose DozerField and DozerClass objects</field>
	<field name="open_date">1183863724</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Internal refactoring.  Provide accessor methods on ClassMap and FieldMap to access values contained in DozerField and DozerClass.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1183918611</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1183918611</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1183918611</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1734163</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Load classes consistently</field>
	<field name="open_date">1181414699</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Currently there is a mix of Thread.currentThread().getContextClassLoader().loadClass() and Class.forName().

Encapsulate this in MappingUtils(or somewhere else) and change the code to point to the new method</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1181425209</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1181425209</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1181425209</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1734161</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Cleanup of internal exception handling</field>
	<field name="open_date">1181414499</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">- Push down some of the reflection exceptions to get rid of the following code that is all over......

throws NoSuchMethodException, ClassNotFoundException, NoSuchFieldException, IllegalAccessException,
      InvocationTargetException, InstantiationException

- Also, consistently use MappingUtils.throwMappingException()

- Cleanup unecessary exception handlling</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1181425218</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1181425218</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1181425218</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1707034</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add config support for auto trimming of strings</field>
	<field name="open_date">1177463032</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi there,

I am using Dozer in a GWT project to copy the DTO UI classes to business
objects. In this process, I have the need to trim all incoming strings to
remove all whitespace on both sides. Rather than invoking trim() on every
string within the business layer, which is prone ot error, I thought to
modify Dozer to do this for me.

Attached is a patch that examplifies this. I basically tried to add
&#34;map-trim-string&#34; to the global configuration, so that by default I can
have it set. Probably this setting should actually be just &#34;trim-strings&#34;
or something, since it does not evaluate if it should be mapped.

The patch was done against 2.4.

Rgds,

G&#62;
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1184038670</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1184038670</field>
		<field name="entrydate">1184540187</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1184038670</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1184038670</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1183954047</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1473800</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping deep level field in Indexed structure</field>
	<field name="open_date">1145563902</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi Folks, 
Is it possible to map a deep level field inside a
indexed element ? 
Example: 
 
Class PersonalDetails { 
String firstName; 
String lastName; 
Integer salary; 
// getter-setters 
} 
 
// SOURCE CLASS 
Class Family { 
List familyMembers; 
// getter-setter 
// Some business logic that makes sure that the family
members collection is filled with PersonDetails objects. 
public someBusinessLogic(){ 
familyMembers = new ArrayList(); 
PersonalDetails firstMember = new PersonDetails(); 
PersonalDetails secondMember = new PersonDetails(); 
 
familyMembers.add(firstMember); 
familyMembers.add(secondMember);  
} 
} 
 
NOTE: Family class has a COLLECTION of PersonalDetails 
 
// DESTINATION CLASS 
Class HeadOfHouseHold{ 
String name; 
Integer sal; 
// Other fields like address etc, credit score etc 
//getter-setters 
} 
 
For the above classes if I have to copy source class
contents (Family) details into destination class
(HeadOfHouseHold). Family class stores the family
member details in an array list. And I ALWAYS KNOW that
the first entry in the array list is the actual head of
household.  
 
Is it possible to map 
 
&#60;class-a&#62;Family&#60;/class-a&#62; 
&#60;class-b&#62;HeadOfHouseHold&#60;/class-b&#62; 
&#60;field&#62; 
&#60;a&#62;familyMembers[0].firstName&#60;/a&#62; 
&#60;b&#62;name&#60;/b&#62; 
&#60;/field&#62; 
&#60;field&#62; 
&#60;a&#62;familyMembers[0].salary&#60;/a&#62; 
&#60;b&#62;sal&#60;/b&#62; 
&#60;/field&#62; 
 
I know that indexed mapping was added recently, but I
am not sure if indexed mapping and deep level mapping
(particularly when the map is a collection) is supported.  
 
Thanks, 
Sachin </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1184458100</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

This has finally been implemented.  The 4.0 refactoring allowed this feature to be added without too much trouble.  For deep index mapping, hints do not need to be supplied if the collection field(s) use jdk1.5 generics or they are arrays.  Otherwise, you need to specify hint(s) for the nested indexes in the deep mapping</field>
</message>

<message>
		<field name="adddate">1180463053</field>
		<field name="user_name">mattjmorrison</field>
		<field name="body">Logged In: YES 
user_id=1803910
Originator: NO

I also have a need for this feature.  Here is just a little background...I'm compiling an external vendor's XML Schema with XMLBeans and using Dozer to map the XMLBean to our internal POJOs.  The vendor schema's are pretty massive and deep and I would definitely need to be able to mix deep mappings along with indexes.  

Here is my initial thread
https://sourceforge.net/forum/forum.php?thread_id=1744439&#38;forum_id=452530

If there is a fix in the code base, does anyone have an estimate on the next stable release?

Thanks!</field>
</message>

<message>
		<field name="adddate">1176223993</field>
		<field name="user_name">herringbone</field>
		<field name="body">Logged In: YES 
user_id=1440672
Originator: NO

I need this feature pretty badly - I am thinking about contributing it. Could this feature request be re-opened?? Or is there a duplicate somewhere else?</field>
</message>

<message>
		<field name="adddate">1168441100</field>
		<field name="user_name">tgke</field>
		<field name="body">Logged In: YES 
user_id=239724
Originator: NO

IndexMappingTest in the 2.4 release does not contain such a test scenario. I haven't had the time yet to add it myself .. I also tried using the combination of deep level mapping behind an indexed collection, and it does not work.</field>
</message>

<message>
		<field name="adddate">1160860594</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

assigment</field>
</message>

<message>
		<field name="adddate">1159762984</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I believe this is resolved in the 2.4 code base but I 
could be wrong.  Please take a look at the 
IndexMappingTest and check to see if this use case is 
accounted for</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540188</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1184458100</field>
		<field name="entrydate">1184540188</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1184458100</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1184458100</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1184458100</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1236069</field>
		<field name="entrydate">1180475688</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1161028910</field>
		<field name="entrydate">1180460980</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1180460980</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1159762984</field>
		<field name="entrydate">1161028910</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1161028910</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1160860594</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1159762984</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1159762984</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1778316</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Update inheritance mapping doc\'s</field>
	<field name="open_date">1187671855</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Account for changes made in 4.1.  There are some changes in behavior</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Update inheritance mapping doc's</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1187759412</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1187759412</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1187759412</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1187759412</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1757321</field>
	<field user_id="1849512" name="submitted_by">jonasanso</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Path to ResourceLoader to accept any URL</field>
	<field name="open_date">1184915289</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Interface Improvements (example)</field>
	<field name="artifact_group_id">Next Release (example)</field>
	<field name="details">I use Dozer and it's great. Thank you very much.
I have some beanMapping.xml inside jar files and I had to change ResourceLoader to accept any URL formatted String. 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1190341203</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1186423542</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Your points are valid. I changed this in the current_release branch to be:

    // one more time
    if (result == null) {
      try {
        result = new URL(resource);
      } catch (MalformedURLException e) {
        MappingUtils.throwMappingException(e);        
      }
    }

We wrap the checked exception (MalformedURLException) and throw it as a dozer runtime. That is how we handle all checked exceptions.

This will be released in dozer 4.1. </field>
</message>

<message>
		<field name="adddate">1186385627</field>
		<field name="user_name">jonasanso</field>
		<field name="body">Logged In: YES 
user_id=1849512
Originator: YES

From my point of view, my use case take care of the previous patch.

I don't know how to test it but I think it will work.
file: is one of URL protocols as http: ftp: or jar: so I think the  better way to accept any URL formatted String is &#34;new URL(resource)&#34;.


I don't understand exactly why somebody did 
new
File(resource.substring(MapperConstants.FILE_PREFIX.length())).toURL();

instead of doing :
new URL( resource);


the only problem I found it's commented in code:
    //throw new MappingException(e);
    // I don't throw exception because other classes in dozer library don't catch it.
    // For example, loading dozer.properties, that is not mandatory, should catch it.

Finally I would like to say that I would prefer to throw the exception and catch it in appropiated places. But it's your decission how to do it.



</field>
</message>

<message>
		<field name="adddate">1185896927</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

It looks like this has already been patched to take anything prefixed with 'file:'.


    // Patch to load mapping file from outside of classpath.
    if (resource.startsWith(MapperConstants.FILE_PREFIX)) {
      try {
        return new File(resource.substring(MapperConstants.FILE_PREFIX.length())).toURL();
      } catch (MalformedURLException e) {
        MappingUtils.throwMappingException(e);
      }
    }

Will this take care of your use case?

Franz</field>
</message>

<message>
		<field name="adddate">1184939000</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

We will apply this to the next release. 

Thanks for looking.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1190343772</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1190343772</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1190341203</field>
		<field name="entrydate">1190343772</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1186423542</field>
		<field name="entrydate">1190341203</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190341203</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1186423542</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1186423542</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1184939000</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">237783: ResourceLoader.java</field>
		<field name="entrydate">1184915291</field>
		<field name="mod_by">jonasanso</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1798761</field>
	<field user_id="1777661" name="submitted_by">mthielen</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Object as CustomConverter OR CustomConverterNamesAware</field>
	<field name="open_date">1190295379</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi again,

Firstly thanks for version 4 and for the implementation of my feature requests. Everything works fine for me since 4.0. And for your interest: We had about a billion mappings since we used Dozer, so it really is valueable software you guys had written. But...

I have another special case where i had to extend Dozer. Its about the CustomConverter. So far I can use one class as a custom converter per field-mapping. But i want to use an object per field-mapping. Problem is: I implemented a converter-logic into a class but this class can be configured for different logic per field-mapping. Currently only one class with one configuration (set via Spring) can be used for every field-mapping that have custom-converter=&#34;my.class&#34;.

1) Best way would be to change the 
private java.util.List customConverters; 
in DozerBeanMapper to a Map.
Thus, every CC can have a name that could be used in an attribute like custom-converter-name=&#34;...&#34;. Now multiple classes of same type with different configurations could be used per field.

2) Another way would be to provide an Interface CustomConverterNamesAware. CC's that implement this IF could be notified of the fieldname that is to be mapped. Thus, the CC can now decide whether or not to map the field. This is what i have done. I changed the MappingProcessor a little and added the CustomConverterNamesAware interface.

Would be nice to see this feature in the next release :)
I appended the files.

Thanks for the work!
Markus

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1190309129</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Closing since this is covered by FR 1770440.</field>
</message>

<message>
		<field name="adddate">1190309024</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Great. Glad that will help. We will be releasing early next week. 

thanks for looking.

Franz</field>
</message>

<message>
		<field name="adddate">1190308990</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Great. Glad that will help. We will be releasing early next week. 

thanks for looking.

Franz</field>
</message>

<message>
		<field name="adddate">1190308756</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

Awesome!
This is exactly what i meant with my first idea.
Im looking forward to your next release.

Thank you so much!
Markus</field>
</message>

<message>
		<field name="adddate">1190306221</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Look at our latest code in current_release branch. We now support custom-converter-id on the field mapping.

&#60;mapping&#62;
  &#60;class-a&#62;net.sf.dozer.util.mapping.vo.SimpleObj&#60;/class-a&#62;
  &#60;class-b&#62;net.sf.dozer.util.mapping.vo.SimpleObjPrime2&#60;/class-b&#62;    
  &#60;field custom-converter-id=&#34;CustomConverterWithId&#34;&#62;
    &#60;a&#62;field1&#60;/a&#62;
    &#60;b&#62;field1Prime&#60;/b&#62;
  &#60;/field&#62;
&#60;/mapping&#62;   

  &#60;bean id=&#34;net.sf.dozer.util.mapping.MapperIF&#34; class=&#34;net.sf.dozer.util.mapping.DozerBeanMapper&#34; singleton=&#34;true&#34;&#62;
    &#60;property name=&#34;mappingFiles&#34;&#62;
      &#60;list&#62;
        &#60;value&#62;systempropertymapping1.xml&#60;/value&#62;
        &#60;value&#62;dozerBeanMapping.xml&#60;/value&#62;
        &#60;value&#62;injectedCustomConverter.xml&#60;/value&#62;
      &#60;/list&#62;
    &#60;/property&#62;
    &#60;property name=&#34;customConvertersWithId&#34;&#62; 
      &#60;map&#62; 
        &#60;entry key=&#34;CustomConverterWithId&#34; ref=&#34;configurableConverterBeanInstance1&#34;/&#62; 
        &#60;entry key=&#34;CustomConverterWithId2&#34; ref=&#34;configurableConverterBeanInstance2&#34;/&#62; 
      &#60;/map&#62; 
    &#60;/property&#62;   
&#60;/bean&#62;

Does this solve your problem?</field>
</message>

<message>
		<field name="adddate">1190302868</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

I will get this into the next release.</field>
</message>

<message>
		<field name="adddate">1190295440</field>
		<field name="user_name">mthielen</field>
		<field name="body">Logged In: YES 
user_id=1777661
Originator: YES

File Added: MappingProcessor.java</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1190309129</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1190309129</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1190302868</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">246462: MappingProcessor.java</field>
		<field name="entrydate">1190295440</field>
		<field name="mod_by">mthielen</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">246461: CustomConverterNamesAware.java</field>
		<field name="entrydate">1190295380</field>
		<field name="mod_by">mthielen</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1777076</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Repackage functional/e2e tests</field>
	<field name="open_date">1187489595</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Separate the tests which map entire object hierarchies from the true unit tests that are only testing a small piece of functionality at the method level.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1187759424</field>
		<field name="entrydate">1190917488</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1187759424</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1187759424</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1806689</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Require seperate global-configuration file</field>
	<field name="open_date">1191379221</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">Remove support for combined global configuration and mapping files.  The seperate global configuration file would be optional, but it would be specified seperate from the mapping files list.  Should simplify things.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1343153776</field>
		<field name="user_name"></field>
		<field name="body">This might sound a little crazy after you just went ahead and removed the support for combined global configurations - but I have a use case where I would like/ need to define custom-converters in the configuration section.  I am loading multiple mappings files via the classpath and each one needs the ability to define the custom converters as each does not know about the others.  It is a plug-able architecture.  If you dont want to re-implement this - if you could possibly make the CustomMappingsLoader configurable in the DozerBeanMapper.loadCustomMappings method - then I could implement a different strategy that allowed for this.  Unfortunately right the implementation is not very friendly to extension and modification.  Lots of private and final.  If you have a suggestion on how I could have each mapping file define their own global custom converters then I would love to hear it.  Thanks
</field>
</message>

<message>
		<field name="adddate">1230864503</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Code was implemented in 4.4 that throws an exception if more than one global config is specified within a set of mapping files.  This basically takes care of the issues with how it was previously implemented</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230864504</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230864504</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230864504</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230864504</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1961110</field>
	<field user_id="2082444" name="submitted_by">mdiskin</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Support Date mapping to JAXB  XMLGregorianCalendar</field>
	<field name="open_date">1210355251</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Currently does not support the mapping of java.util.Date to javax.xml.datatype.XMLGregorianCalendar

Thanks
Mark</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230695020</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230694998</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230694998</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230692535</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1968841</field>
	<field user_id="932201" name="submitted_by">abufilba</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Update documentation.</field>
	<field name="open_date">1211382728</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Documentation</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">Documentation could do with an update.

Its possible to deal with Polymorphic classes in 1.4 collections - but I only found out through a bug report.

It would be great if the the comma separated hints list was highlighted as it might save people some time.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1228294647</field>
		<field name="user_name">buzdin</field>
		<field name="body">This feature is documented for 4.3 release.</field>
</message>

<message>
		<field name="adddate">1223838542</field>
		<field name="user_name">buzdin</field>
		<field name="body">This would be the general request for update for 4.3 release.

One new feature is copy-by-reference mask. Please add all other known issues with documentation to this thread.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1228294627</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228294627</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228294627</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1228294627</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1223838542</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1223838542</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2797346</field>
	<field user_id="2008455" name="submitted_by">me97esn</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Use CustomConverterBase in DozerBeanMapper:customConverters</field>
	<field name="open_date">1243426442</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">The class DozerBeanMapper has the two properties
customConverters : List&#60;CustomConverter&#62;
customConvertersWithId : Map&#60;String, CustomConverter&#62;
Since these collections contains CustomConverter instead of the base class CustomConverterBase, it is impossible to add a ConfigurableCustomConverter.

It would be better to use the base class so that ConfigurableCustomConverters could be instanciated and modified by spring.
Kind Regards
Emil</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1245784948</field>
		<field name="user_name">buzdin</field>
		<field name="body">switched to base interface.

Thank you for the report.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1245784948</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245784948</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1245784948</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1245784948</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2432382</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Upgrade to JUnit 4</field>
	<field name="open_date">1229397981</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">This will happen with the jdk 1.5 upgrade</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230692250</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230692229</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230692229</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230692229</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2476391</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Change maven group id</field>
	<field name="open_date">1230608893</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">net.sf.dozer --&#62; dozer</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234932183</field>
		<field name="user_name">mhtierney</field>
		<field name="body">net.sf.dozer --&#62;  org.dozer</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234932184</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230692495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230692495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230692495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230692495</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1708511</field>
	<field user_id="1772460" name="submitted_by">pupsmaster</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Mask in &#60;copy-by-reference&#62;</field>
	<field name="open_date">1177655174</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">I have alot of differnt hibernate persistent classes, which are the DB image. So I need not to copy this classes field by field. I can include them in the &#60;copy-by-reference&#62;, but count of the classes, which I want to be copied by reference, is nearly 500. So it'll be the good Feng Shui to use the masks like 
&#60;copy-by-reference&#62;
  com.my.hibernatemodel.*
&#60;/copy-by-reference&#62;</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1223490247</field>
		<field name="user_name">buzdin</field>
		<field name="body">Accepted and implemented.
Only wildcard * is supported, but of course in any amounts. &#34;com.*.model.*&#34; will work.
Will be shipped in next release.</field>
</message>

<message>
		<field name="adddate">1177740054</field>
		<field name="user_name">pupsmaster</field>
		<field name="body">Logged In: YES 
user_id=1772460
Originator: YES

Now I have in my mapping file some similar to
...
&#60;configuration&#62;
  &#60;copy-by-references&#62;
   &#60;copy-by-reference&#62;com.mypackage.hibernate.model.Model1&#60;/copy-by-reference&#62;
   &#60;copy-by-reference&#62;com.mypackage.hibernate.model.Model2&#60;/copy-by-reference&#62;
    ............
   &#60;copy-by-reference&#62;com.mypackage.hibernate.model.ModelN&#60;/copy-by-reference&#62;
  &#60;/copy-by-references&#62;
&#60;/configuration&#62;

It'll be the useful feature when I can to use &#34;*&#34; and &#34;?&#34; wildcards. And upside staff could be changhe with 
&#60;configuration&#62;
  &#60;copy-by-references&#62;
   &#60;copy-by-reference&#62;com.mypackage.hibernate.model.Model?&#60;/copy-by-reference&#62;
  &#60;/copy-by-references&#62;
&#60;/configuration&#62;
or
&#60;configuration&#62;
  &#60;copy-by-references&#62;
   &#60;copy-by-reference&#62;com.mypackage.hibernate.model.Mod*&#60;/copy-by-reference&#62;
  &#60;/copy-by-references&#62;
&#60;/configuration&#62;

ofcourse wildcards must be supported not only end of class name, but this &#34;com.*.model.*&#34; is also available.</field>
</message>

<message>
		<field name="adddate">1177681922</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Interesting...cool idea. I will see how hard/easy this will be to implement.

Can you send a sample mapping of what you would expect it to look like?

Thanks,

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1225360549</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1223490247</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1223490247</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1222782463</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1177740054</field>
		<field name="mod_by">pupsmaster</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1177681922</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2824797</field>
	<field user_id="2455590" name="submitted_by">smittel</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add Dozer 5.0 to maven central</field>
	<field name="open_date">1248181866</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Dozer 5.i is currently only availale at ibiblio.org mirros, hovever, it should be available in maven central (http://repo1.maven.org/maven2)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1248247538</field>
		<field name="user_name">buzdin</field>
		<field name="body">I just checked and it is already there,
http://repo2.maven.org/maven2/net/sf/dozer/dozer/5.0/
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1248247538</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1248247538</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1248247538</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1248247538</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1248247538</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2180015</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add Mock framework</field>
	<field name="open_date">1224430443</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Add Mock framework to the project to improve Unit Testing practice.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1231166433</field>
		<field name="user_name">buzdin</field>
		<field name="body">Mockito framework integrated;</field>
</message>

<message>
		<field name="adddate">1229941252</field>
		<field name="user_name">buzdin</field>
		<field name="body">Mockito framework is the candidate. Only works with Java 1.5</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1231166433</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1231166433</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1231166433</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1229941252</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2207505</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Implement XML Schema</field>
	<field name="open_date">1225292023</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Currently framework uses DTD document for mapping validation. It is advisable to migrate to XML Schema, as this approach is more modern and better supported by tools.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1231254922</field>
		<field name="user_name">buzdin</field>
		<field name="body">Implemented. DTD approach is dropped.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1231254923</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1231254923</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">891575</field>
		<field name="entrydate">1231254923</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1231254923</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1231254923</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2211532</field>
	<field user_id="1320579" name="submitted_by">gkersten</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">common-collections 3.0</field>
	<field name="open_date">1225446832</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">Currently Dozer depends on version 3.1 of commons-collections. In a project we are an environment which already depends in version 3.0 (Websphere Portal 6.0). 

Dozer only depends in two locations on version 3.1, both using a default constructor of ListOrderedSet which is not present in common-collections 3.0. The default constructor can be replaced a call to decoratie a new ArrayList. All junit tests keep running. Dozer can than depend on version 3.0 and be used in the Websphere Portal 6.0 environment. 

Attached is patch for this change.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1227527059</field>
		<field name="user_name">buzdin</field>
		<field name="body">I think this change can be included in the next release. But of course you will have to switch library on your own. The distribution will come with 3.1 as always.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1227645438</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">478636</field>
		<field name="entrydate">1227645438</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227645438</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1227645438</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227527000</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">299648: cc30.patch</field>
		<field name="entrydate">1225446832</field>
		<field name="mod_by">gkersten</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1933167</field>
	<field user_id="2051735" name="submitted_by">assafc49</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Config Param for Custom Converter</field>
	<field name="open_date">1207218224</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">Allow adding a simple String configuration value for Custom Converters.
See example below:

&#60;mapping&#62;
  &#60;class-a&#62;com.SimpleObj&#60;/class-a&#62;
  &#60;class-b&#62;com.SimpleObjPrime2&#60;/class-b&#62;    
  &#60;field custom-converter=&#34;com.MyCustomConverter&#34; configString=&#34;someStringValue&#34;&#62;
    &#60;a&#62;field1&#60;/a&#62;
    &#60;b&#62;field1Prime&#60;/b&#62;
  &#60;/field&#62;
&#60;/mapping&#62; 

This configString should be passed to the Custom Converter API as below:

public Object convert(Object destination, Object source, Class destClass, Class sourceClass, String configString)

Such a feature would tremendously enhance the capabilities of Custom Converters. Moreover, it would prevent us from having to write a separate Custom Converter for &#34;similar&#34; fields of the same type. 

10x

 

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1228211347</field>
		<field name="user_name">buzdin</field>
		<field name="body">This feature is implemented and will be available in Dozer 4.3 release.</field>
</message>

<message>
		<field name="adddate">1222782430</field>
		<field name="user_name">buzdin</field>
		<field name="body">If you are using Spring or any other Inversion of Control container it is possible to instantiate Converters with necessary constructor arguments thus reusing parametrized converters. Custom converters could be provided to DozerBeanMapperFactory.

I would suggest using this approach as a workaround for now.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1228211326</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228211326</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228211326</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228211326</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1228211326</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2502533</field>
	<field user_id="2359468" name="submitted_by">tapelago</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer integration with grails and groovy</field>
	<field name="open_date">1231794437</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v.4.4.1</field>
	<field name="details">Is there any plan for Dozer integration with Grails and Groovy - a feature that would address the folowing issue: http://www.nabble.com/Dozer-cannot-find-entity-class-in-grails-project-td21260707.html#a21260707

Basically groovy bean are not visible from Dozer when parsing the xml mapping file, cuz &#34;Grails uses a custom classloader&#34;.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1233570672</field>
		<field name="user_name">buzdin</field>
		<field name="body">This should be fixed by recent 4.4.1 release. Please check and confirm.</field>
</message>

<message>
		<field name="adddate">1232025836</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi,

We believe that this error is caused by modifications in 4.3. If you will use 4.2 version it should work fine. In the meanwhile this bug is already fixed in SVN, and will be addressed in 4.4.1 version. This version should be released end of next week latest.

Dmitry</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1233570674</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">891575</field>
		<field name="entrydate">1233570674</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1233570674</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2398325</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Repackage Dozer classes</field>
	<field name="open_date">1228603205</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">The .util.mapping portion of dozer package name currently adds no value.  This would be a change candidate for the 5.0 release


net.sf.dozer

instead of.....

net.sf.dozer.util.mapping</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234932133</field>
		<field name="user_name">mhtierney</field>
		<field name="body">repackage to org.dozer ......</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">summary</field>
		<field name="old_value">Remove util.mapping portion of dozer packaging</field>
		<field name="entrydate">1234932134</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234932134</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230608018</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230608018</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2629164</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add Generics to public Mapper interface</field>
	<field name="open_date">1235353698</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">No need to explicitly cast anymore.....

A result = mapper.map(b, A.class)</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1235354309</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1235354309</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1235354309</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2423000</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Upgrade 3rd party jars to latest versions</field>
	<field name="open_date">1229130088</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Migrate to BeanUtils 1.8.0. Consider looking into new converters.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1230608704</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Will open seperate ticket for new converter investigation</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">summary</field>
		<field name="old_value">Migrate to BeanUtils 1.8.0</field>
		<field name="entrydate">1235353730</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1235353730</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230608705</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230608704</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230608704</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2629165</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Rename some public interfaces</field>
	<field name="open_date">1235353842</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">MapperIF --&#62; Mapper
BeanFactoryIF --&#62; BeanFactory
CustomFieldMapperIF --&#62;</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1235353893</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1235353893</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1235353893</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2667908</field>
	<field user_id="2375569" name="submitted_by">andor72</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Added generics support to Dozer 5, bridge method recognition</field>
	<field name="open_date">1236337928</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Hi,
i wrote a little improvement for dozer to resolve Java5 parameterized type information and fixed the resoltuion of Java 5 bridge methods.

Example:
with these changes Dozer5 can handle the following types

public class AbstractDto&#60;T extends Serializable&#62;
  implements Dto&#60;T&#62; {

  private T id;

  public T getId() {
    return id;
  }

  public void setId(final T id) {
    this.id = id;
  }
}

The code as well as the tests are included in the zip file.

Would be glad if someone could add this to the dozer trunk.

Best regards,
Andor Grei&#195;&#376;l</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1240993343</field>
		<field name="user_name">buzdin</field>
		<field name="body">According patch is accepted. Thank you for contribution.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">891576</field>
		<field name="entrydate">1240993343</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1240993343</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1240993343</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1240993343</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240993343</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Addd generics support to Dozer 5, bridge nethod recognition</field>
		<field name="entrydate">1236358564</field>
		<field name="mod_by">andor72</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">316490: dozer5-generics.zip</field>
		<field name="entrydate">1236337928</field>
		<field name="mod_by">andor72</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2831863</field>
	<field user_id="1492461" name="submitted_by">dulanov</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Custom converter with injected mapper</field>
	<field name="open_date">1249372544</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">
There are situations than it's useful to use a mapper instance explicitly in CustomConverter. For example, then we are working with already mapped nested Object in List &#60;&#62; Map conversations. So, additional CustomConverter interface with injected Mapper instance support will be useful, something like:

public interface CustomMapperInjectedConverter extends CustomConverter {
	CustomConverter setBeanMapper(Mapper mapper);
}</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262645151</field>
		<field name="user_name">buzdin</field>
		<field name="body">done in trunk. Use MapperAware interface on your custom converter.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262645151</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262645151</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1262645151</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1249383909</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1249383909</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1249383909</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2569541</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Generics for Custom Converters</field>
	<field name="open_date">1233863372</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Add Java 5 Generics support for Custom converters as there is a necessity to cast things back and forth.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1245869761</field>
		<field name="user_name">buzdin</field>
		<field name="body">Implemented</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1245869761</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">891576</field>
		<field name="entrydate">1245869761</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245869761</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1245869761</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1245869761</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2810817</field>
	<field user_id="1618512" name="submitted_by">al0</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add generics to the custom converter interface</field>
	<field name="open_date">1245752674</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Add generics to the custom converter interface - allow to specify A and B classes as type parameters.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1245869823</field>
		<field name="user_name">buzdin</field>
		<field name="body">This Feature Request is implemented and will be included in version 5.1</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1245869823</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245869823</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245869823</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245869823</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1245869823</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1245869823</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2812002</field>
	<field user_id="7566" name="submitted_by">collin_g</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Support for collection without setters</field>
	<field name="open_date">1245917150</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">Dozer does not map to collection that don't have setters.
The attached test does not work, because there is no setter for the collection in A class.

In fact, a setter is not mandatory for collection, because the getList().add(....) is sufficient.
Supporting this will allow direct support of JAXB2.1 generated beans, because the collections by default don't have setters.

PS: If you uncomment the setter methods, test is working.

Regards,

GC.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262546361</field>
		<field name="user_name">buzdin</field>
		<field name="body">Checked behavior in trunk and it is working properly.
The only drawback is that it prints WARN log message about missing write method each time.
Added unit test and will add additional documentation.</field>
</message>

<message>
		<field name="adddate">1253797452</field>
		<field name="user_name">gonzalad666</field>
		<field name="body">Excellent !!!! How can I upload a patch in this issue tracker ?</field>
</message>

<message>
		<field name="adddate">1253797273</field>
		<field name="user_name">gonzalad666</field>
		<field name="body">This patch should correct this issue.
Includes some unit tests.
</field>
</message>

<message>
		<field name="adddate">1250094950</field>
		<field name="user_name">collin_g</field>
		<field name="body">There were nothing particuliar in the mapping file: Just automatically convert A to B</field>
</message>

<message>
		<field name="adddate">1250094833</field>
		<field name="user_name">collin_g</field>
		<field name="body">Alas, I'm sorry I didn't see your request.
I'm afraid I'm working in a different place now so I don't have the file anymore.</field>
</message>

<message>
		<field name="adddate">1246391419</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi, I think you forgot to upload dozer-test-mappings.xml referenced from test case.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262546362</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">899005</field>
		<field name="entrydate">1262546362</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262546362</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1262546362</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1246391419</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">332307: DozerTests.java</field>
		<field name="entrydate">1245917151</field>
		<field name="mod_by">collin_g</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2624921</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add support for custom proxy resolver</field>
	<field name="open_date">1235242615</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Allow dozer to be injected with a custom proxy resolver.  Default behavior would be used if a custom proxy resolver is not used.  Possible methods in the interface would be...

isProxy(Class&#60;?&#62; clazz)
Class&#60;?&#62; getRealClass(Class&#60;?&#62; clazz)
Class&#60;?&#62; getRealSuperclass(Class&#60;?&#62; clazz)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1248984385</field>
		<field name="user_name">buzdin</field>
		<field name="body">Implemented in trunk with minimal code changes.
It is possible to provide custom implementation of org.dozer.util.DozerProxyResolver in properties file.
Documentation part will be added as a part of 5.1 release.</field>
</message>

<message>
		<field name="adddate">1236244568</field>
		<field name="user_name">edbras</field>
		<field name="body">Yep, you have a good point there. It's not called proxy for nothing so you should access it through the proxy... ..</field>
</message>

<message>
		<field name="adddate">1236244310</field>
		<field name="user_name">edbras</field>
		<field name="body">Ahhhh... now I read your forlast comment ;)... I only saw your last comment about the file added... :(</field>
</message>

<message>
		<field name="adddate">1236242866</field>
		<field name="user_name">edbras</field>
		<field name="body">He Matt,

Did you put it on a branch? as I don't see it on the trunk..

Currious: why did you choose this methods in the proxy resolver that handle the class. Why not the unproxy method like I suggested that keep dozer from any strange proxy objects ?

Be aware that your solution is not without risk. Example: &#34;is-accessible=&#34;true&#34;&#34; can't be used anymore as you must access properties through their read/write methods as those are the ones that are proxied. There a more of these issues. Some of them I listed below, but I can easily think of more. This can lead to strange bugs and ofcourse and questions in the forum.

If you simple unproxy the object you can still use all all functionality of dozer without any problem.

Just my thoughts.



-- Ed</field>
</message>

<message>
		<field name="adddate">1236223562</field>
		<field name="user_name">mhtierney</field>
		<field name="body">File Added: proxyResolverPatch.txt</field>
</message>

<message>
		<field name="adddate">1236223506</field>
		<field name="user_name">mhtierney</field>
		<field name="body">I implemented this no problem in my local dev environment and all regression tests ran green.  Because proxies can be tricky, I decided to wait until 5.1 to release to production if all the testing goes ok.  There were a lot of client migration changes in 5.0, so I didnt want clients go through the work of upgrading and possibly run into a functionality problem because of this change.  The approach would unproxy to determine which classmapping xml to use, but all data mapping logic would operate on the proxy.

It seems that if an object is proxied, dozer should interact with that data object via the proxy, so I didnt go down the path of having unProxy() in the interface.  The following is the proposed custom proxy resolver interface that could be injected into dozer:

public interface ProxyResolver {

  public boolean isProxy(Class&#60;?&#62; objectClass);
  public Class&#60;?&#62; getRealClass(Object object);
  public Class&#60;?&#62; getRealSuperclass(Object object);

}


Attached is the patch code.  There are some unrelated changes in the diff file, but I know which ones are for this.  My plan is to provide Ed with a 5.1 beta jar and have him test to be sure it resolves the issue.

I am not totally convinced this solution is going to resolve the hibernate/polymorphism/proxy issue, but I am hoping for the best and we will find out soon enough.  My concern is what will happen when the polymorphic super class attributes are attempted to be mapped on the proxy.  There may only be so much dozer can do to get around this issue.



</field>
</message>

<message>
		<field name="adddate">1235246600</field>
		<field name="user_name">edbras</field>
		<field name="body">Hi Matt,

I am glat you understand the proxy problem.
I don't seem to react on https://sourceforge.net/tracker2/?func=detail&#38;atid=727368&#38;aid=2560608&#38;group_id=133517 as it's deleted. It says that comments are closed for this bug.

Anyway: it's funny to read how you start with the above code as those where exactly my thoughts when I started to make the current proxy resolver as found in the MapperHelper.
But I chose to use one simple method in the proxy resolver:
Object unProxy(Object object);

Why?
1) You need the wrapped proxied object anyway, so why not extract it straight at the start.
2) It hardly touch any of the other Dozer core code. I started like you propose above, but found out it has quite some code impact, that also results in quite some possible bugs....
Like explained in the above bug: simple unproxy in the entrance map methods and that's it... Dozer simple continue working on the encapsulated object.
3) It's much more future safe. That is, if you make any changes in the future and forget to use the proxy resolver, you easily introduce bugs. Or if you introduce some code that asks for an extra method in the proxy resolver, you need to change the interface of this proxy resolver, which many people won't like of course, such that you might not be able to implement this new feature..

Simple keep proxies outside the Dozer core.. and you never have to worry about proxies...
 
Just my thoughts...

-- Ed

</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">891576</field>
		<field name="entrydate">1248984403</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1248984403</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1248984403</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1248984403</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1236069</field>
		<field name="entrydate">1248984403</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1248984403</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">316239: proxyResolverPatch.txt</field>
		<field name="entrydate">1236223562</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2999898</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Improve Debug Logging</field>
	<field name="open_date">1273574358</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Interface Improvements (example)</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">When mapping for src-dest is not found write full mapping path. Currently only map id is printed out.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273694249</field>
		<field name="user_name">buzdin</field>
		<field name="body">When mapping is not found by map-id all information is printed out (map-id, src and dest classes).</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273694250</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273694250</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273694250</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273694250</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1273694250</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2924910</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Multimodule builds</field>
	<field name="open_date">1262443608</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.2.1</field>
	<field name="details">Add support for multimodule builds for project. Eclipse plugin should be extracted. Other possible modules are integration test suite and osgi bundle.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1265060405</field>
		<field name="user_name">buzdin</field>
		<field name="body">source code repository is split to several modules</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1265060405</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1265060405</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1265060405</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1265060405</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2845549</field>
	<field user_id="198861" name="submitted_by">toelen</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">OSGI manifest</field>
	<field name="open_date">1251377768</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">Hi,

could you please create an OSGI manifest in the next build? This makes it a lot easier to integrate dozer in an osgi environment.

Should be as simple as

&#60;plugin&#62;
	&#60;groupId&#62;org.apache.felix&#60;/groupId&#62;
	&#60;artifactId&#62;maven-bundle-plugin&#60;/artifactId&#62;
	&#60;version&#62;2.0.0&#60;/version&#62;
	&#60;extensions&#62;true&#60;/extensions&#62;
	&#60;configuration&#62;
		&#60;/manifestLocation&#62;
		&#60;instructions&#62;
			&#60;Bundle-SymbolicName&#62;${pom.artifactId}&#60;/Bundle-SymbolicName&#62;
		&#60;/instructions&#62;
	&#60;/configuration&#62;
&#60;/plugin&#62;

and changing the packaging type to 'bundle' in pom.xml

Regards,
Leen</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1265043235</field>
		<field name="user_name">buzdin</field>
		<field name="body">Implemented as a separate Maven module. Artifact dozer-osgi is available for download from SF site for now, and will be published to Maven repository after testing.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1265043235</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1265043235</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1265043235</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1265043235</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1265043235</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2953975</field>
	<field user_id="2812146" name="submitted_by">rajthakur</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Weblogic 10 integration</field>
	<field name="open_date">1266461595</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Hi 
When i am using dozer with Weblogic, i am getting below error. Standalone dozer working fine with me. Once integrated with Weblogic 10, below error is displayed. We are using common-lang 2.4 jar which is with weblogic workshop. Please let me know if i am missing something.

 
Caused by: java.lang.NoSuchMethodError: org.apache.commons.lang.ClassUtils.getClass(Ljava/lang/String;)Ljava/lang/Class;
        at org.dozer.util.DefaultClassLoader.loadClass(DefaultClassLoader.java:31)
        at org.dozer.DozerInitializer.loadBeanType(DozerInitializer.java:106)
        at org.dozer.DozerInitializer.initialize(DozerInitializer.java:95)
        at org.dozer.DozerInitializer.init(DozerInitializer.java:72)
        at org.dozer.DozerBeanMapper.init(DozerBeanMapper.java:116)
        at org.dozer.DozerBeanMapper.&#60;init&#62;(DozerBeanMapper.java:80)
        at org.dozer.DozerBeanMapper.&#60;init&#62;(DozerBeanMapper.java:75)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1266846687</field>
		<field name="user_name">buzdin</field>
		<field name="body">This is some kind of class loading problem, This particular API method in ClassUtils was introduced in version 2.2. You must have apache commons 2.1 somewhere in classpath. This is not related to Dozer in any manner.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1266846687</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">8</field>
		<field name="entrydate">1266846687</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1266846687</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1266846687</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1266461638</field>
		<field name="mod_by">rajthakur</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2381647</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Consider EL Integration</field>
	<field name="open_date">1228295217</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.2.1</field>
	<field name="details">Consider integrating Dozer with any available expression language (EL). It should be preferably compilable to run fast.
Can be used to implement feature requests regarding runtime checks and behavior.
Requires further investigation.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1270626650</field>
		<field name="user_name">buzdin</field>
		<field name="body">javax.el integrated as optional Xml attribute resolver</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1270626650</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">929384</field>
		<field name="entrydate">1270626650</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1270626650</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1270626650</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">891576</field>
		<field name="entrydate">1249384047</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1249384047</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2983057</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove Dependency on Commons Collections</field>
	<field name="open_date">1270626706</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.2.1</field>
	<field name="details">To decrease number of dependencies references to Commons Collections should be removed from project.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1270626718</field>
		<field name="user_name">buzdin</field>
		<field name="body">done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1270626718</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1270626718</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1270626718</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2986748</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Introduce Expression Language</field>
	<field name="open_date">1271192227</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">Dozer v5.2.1</field>
	<field name="details">Start-up time resolving of EL expressions should be supported</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1271192256</field>
		<field name="user_name">buzdin</field>
		<field name="body">closed, documentation update pending</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1271192256</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1271192256</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1271192256</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2997109</field>
	<field user_id="2891825" name="submitted_by">sureshchow</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">mapping complex type to primitive using custom convertors </field>
	<field name="open_date">1273063801</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v5.2.1</field>
	<field name="details">hi,
i am using Dozer 5.2
i got the problem when i try to map complex type to primitive type using my custom convertors in dozer.

this is my source class
public class Source {

List&#60;String&#62; images;

public List&#60;String&#62; getImages() {
return images;
}

public void setImages(List&#60;String&#62; images) {
this.images = images;
}


}

the destination class is
public class Destination {

int numOfImages;

List&#60;String&#62; ref;


public List&#60;String&#62; getRef() {
return ref;
}

public void setRef(List&#60;String&#62; ref) {
this.ref = ref;
}

public int getNumOfImages() {
return numOfImages;
}

public void setNumOfImages(int numOfImages) {
this.numOfImages = numOfImages;
}


}
and the custom convertor class is

import org.dozer.DozerConverter;

public class TestCustomFieldConverter extends
DozerConverter&#60;Collection, Integer&#62; {

public TestCustomFieldConverter() {
super(Collection.class, Integer.class);
}

@Override
public Integer convertTo(Collection source, Integer destination) {
if (source != null) {
return source.size();
} else {
return 0;
}
}

@Override
public Collection convertFrom(Integer source, Collection destination) {
throw new IllegalStateException(&#34;Unknown value!&#34;);
}
}

this will return the integer object.but my desitination class is of type primitive(int)..

in dozer mapping.xml file i am adding like this
&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;mappings xmlns=&#34;http://dozer.sourceforge.net&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
xsi:schemaLocation=&#34;http://dozer.sourceforge.net
http://dozer.sourceforge.net/schema/beanmapping.xsd&#34;&#62;

&#60;mapping&#62;
&#60;class-a&#62;dozerPackage.Source&#60;/class-a&#62;
&#60;class-b&#62;dozerPackage.Destination&#60;/class-b&#62;
&#60;field custom-converter=&#34;dozerPackage.TestCustomFieldConverter&#34;&#62;
&#60;a&#62;images&#60;/a&#62;
&#60;b&#62;numOfImages&#60;/b&#62;
&#60;/field&#62;
&#60;/mapping&#62;
&#60;/mappings&#62;



when i run this test case

DozerBeanMapper dozerMapper = new DozerBeanMapper();
ArrayList mappingFile = new ArrayList();
mappingFile.add(&#34;dozer-mapping.xml&#34;);
dozerMapper.setMappingFiles(mappingFile);
/*ClassOne cl1 = new ClassOne();
cl1.setClassOneAge(10);
cl1.setClassOneName(&#34;hello&#34;);

ClassTwo cl2 = dozerMapper.map(cl1, ClassTwo.class);
System.out.println();*/
ArrayList&#60;String&#62; a =new ArrayList&#60;String&#62;();
a.add(&#34;www&#34;);
a.add(&#34;eee&#34;);
Collection&#60;String&#62; images = a;


Source source =new Source();
source.setImages(images);

Destination cl2 = dozerMapper.map(source, Destination.class);
System.out.println(&#34;size:::::::::::::::::;&#34;+cl2.getNumOfImages());

its giving the error like


Dest field type: int &#60;org.dozer.MappingException: Destination Type (int) is not accepted by this Custom Converter (com.newscale.convertors.NewDozerConverter)!&#62;org.dozer.MappingException: Destination Type (int) is not accepted by this Custom Converter (com.newscale.convertors.NewDozerConverter)!
at org.dozer.DozerConverter.convert(DozerConverter.java:51)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273691166</field>
		<field name="user_name">buzdin</field>
		<field name="body">Seems to be fixed in 5.2.1</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">929384</field>
		<field name="entrydate">1273691167</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273691167</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1273691167</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273691167</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273691167</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1287959</field>
		<field name="entrydate">1273069177</field>
		<field name="mod_by">sureshchow</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273068272</field>
		<field name="mod_by">sureshchow</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1945094</field>
	<field user_id="2065836" name="submitted_by">mping</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Enable more fine-grained events</field>
	<field name="open_date">1208450071</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Dozer should enable dynamic cloning. In order to implement dynamic cloning, the DozerEventListener interface could be augmented to support runtime decision:

* a method boolean shouldMap(DozerEvent evt) should be added; the supporting event argument should contain the necessary values to support mapping decisions. This way one could implement several strategies for mapping, one example would be lazy-load hibernate proxies, or even ditch them in the process of a Hibernate entity &#60;&#62; DTO cloning.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230864582</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230864582</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2924964</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Multimodule builds</field>
	<field name="open_date">1262452917</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Add support for multimodule builds for project. Eclipse plugin should be extracted. Other possible modules are integration test suite and osgi bundle.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262455607</field>
		<field name="user_name">buzdin</field>
		<field name="body">duplicate - created by accident</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262455607</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262455607</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1262455607</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1719755</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Interface --&#62; Interface Mapping</field>
	<field name="open_date">1179284669</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Runtime determination of mapping using interfaces. We do not walk up and down trees looking for interfaces. The interface class type has to currently be passed in.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1183939914</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I don't see this being implemented anytime soon because of the complexities and unknowns involved.  Correct me if I am misunderstanding this one and should be something supported and on the wish list</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1183939914</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1183939914</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1183939914</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1530222</field>
	<field user_id="789441" name="submitted_by">piratis</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">MAVEN2</field>
	<field name="open_date">1154076731</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,
have you considered moving dozer to maven2 and thus
uploading to ibiblio/maven2 main repository? This would
be a plus, especially for transitive dependencies!
Thanks,
Jordi</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1163380474</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I dont see this happening in the near future.</field>
</message>

<message>
		<field name="adddate">1154099910</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Good idea. I will look into that.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1163380725</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163380474</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163380474</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1154099910</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1537782</field>
	<field user_id="1571368" name="submitted_by">apivonka</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">SpringFramework Context tie in</field>
	<field name="open_date">1155173800</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Wondering if this would be possible: 
Giving each mapping with in a Mappings a name which can
be retrieved via a context (Spring).. 
 
This would allow for simpler definition instead of
mutilple definitions. 
Here is the problem, I use spring/Hibernate, at times I
do not want to transform the entire DAO structure, just
a simplified version, with out relationships.  
Right now I am defining a secondary mapping file, I
would love to do this with-in a Spring context and have
each mapping be retrieved via a name. 
 
Just a thought. 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1163380690</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I think your issue may be addressed with current functionality.  Take a look at the Context Mappings 
documentation 

http://dozer.sourceforge.net/documentation/contextmapping.html

If this doesnt meet your needs, we can reopen the ticket.  Thanks for submitting.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163380690</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163380690</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163380690</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1470589</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Ability to \'reuse\' and extend mappings.</field>
	<field name="open_date">1145050199</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">There has been several requests for the ability to
reuse or extend mappings in the mapping file. This will
help keep mapping files size to a minimum.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1163380205</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

This ticket has been open for a long time and I dont see this functionality being implemented in the near 
future.  We can reopen this feature is a patch is submitted or this feature is added to the long term roadmap</field>
</message>

<message>
		<field name="adddate">1146869671</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

oh... it'll be Monday before I submit that patch.</field>
</message>

<message>
		<field name="adddate">1146869343</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

I imagine that in conjunction with

http://sourceforge.net/tracker/index.php?func=detail&#38;aid=1480798&#38;group_id=133517&#38;atid=727371

this would mean that we only inherit from mappings with
compatible &#34;signatures.&#34;  I am about 90% through
implementing this; I'll have to add the check for signature
compatibility and I'd like to write a couple more tests;
then I'll attach a not-as-big-as-you-might-think patch.</field>
</message>

<message>
		<field name="adddate">1146541771</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Nice...I like it.</field>
</message>

<message>
		<field name="adddate">1146523236</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

would this include e.g.

&#60;mapping mapId=&#34;x&#34; wildcard=&#34;false&#34;&#62;
  &#60;class-a&#62;Foo&#60;/class-a&#62;
  &#60;class-b&#62;Bar&#60;/class-b&#62;
  &#60;field&#62;&#60;a&#62;field1&#60;/a&#62;&#60;b&#62;fieldA&#60;/b&#62;&#60;/field&#62;
&#60;/mapping&#62;

&#60;mapping mapId=&#34;y&#34; wildcard=&#34;false&#34;&#62;
  &#60;class-a&#62;Foo&#60;/class-a&#62;
  &#60;class-b&#62;Bar&#60;/class-b&#62;
  &#60;field&#62;&#60;a&#62;field2&#60;/a&#62;&#60;b&#62;fieldB&#60;/b&#62;&#60;/field&#62;
&#60;/mapping&#62;

&#60;mapping mapId=&#34;z&#34; wildcard=&#34;false&#34;&#62;
  &#60;class-a&#62;Foo&#60;/class-a&#62;
  &#60;class-b&#62;Bar&#60;/class-b&#62;
  &#60;field&#62;&#60;a&#62;field3&#60;/a&#62;&#60;b&#62;fieldC&#60;/b&#62;&#60;/field&#62;
&#60;/mapping&#62;

&#60;mapping wildcard=&#34;false&#34;&#62;
  &#60;mapping-ref mapId=&#34;x&#34; /&#62;
  &#60;mapping-ref mapId=&#34;y&#34; /&#62;
  &#60;mapping-ref mapId=&#34;z&#34; /&#62;
&#60;/mapping&#62;

?

This could be very useful.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163380725</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Ability to 'reuse' and extend mappings.</field>
		<field name="entrydate">1163380725</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163380205</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163380205</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1456517</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Interface field inheritance from mappings</field>
	<field name="open_date">1143069420</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">This might be a feature request...but I will classify
it as a bug. We can handle super class mappings but can
not handle defining interface mappings in the mapping
file. The other problem is handling when interfaces
extend each other. This might open a pandora's box...we
shall see.

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1163380144</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I dont see this functionality being implemented in the near future.  We can reopen this feature is a patch is 
submitted or this feature is added to the long term roadmap</field>
</message>

<message>
		<field name="adddate">1155446562</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Changing to feature request.

Sraubal,
If you still would like this functionality, can you attach 
a unit test and any associated files that reproduces this 
issue?  Thanks.
</field>
</message>

<message>
		<field name="adddate">1143912586</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

No insult taken...:) Walking up and down the interfaces
involves a little bit of recursion...I have it scoped out.

I am almost done with integrating OGNL
(http://www.ognl.org/) into dozer which will be a really
nice addition. The code is getting a lot simpler with the
use of OGNL. After that I will add super interface mapping.
The current v20 branch has one level of interface mapping. I
just need to finish walking up and down parent interfaces. I
would say a week or two :)

thanks for looking/.

franz</field>
</message>

<message>
		<field name="adddate">1143819540</field>
		<field name="user_name">sraubal</field>
		<field name="body">Logged In: YES 
user_id=84700

Though handling interfaces will offer a nice challenge, I 
truly hope that you start implementing it because I 
currently work in a project where this is a requirement for 
our mappings.
I played around with the MappingProcessor and MappingUtils 
classes but it is not an easy code to extend (not an insult 
at all - I really like Dozer).
I discovered some places to start with (e.g. 
MappingUtils.getPropertyDescriptors - which does not return 
descriptors for properties defined in &#34;super interfaces&#34;, 
or MappingProcessor.walkDownSubclasses).
But I'm sure that you know better what to do ;-)

Regards, Stefan

PS: when do you thunk are you going to implement this?</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1163380725</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163380144</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163380144</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">data_type</field>
		<field name="old_value">727371</field>
		<field name="entrydate">1155446562</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1704079</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Use springs BeanUtils.getPropDescriptors instead of jakarta </field>
	<field name="open_date">1177044937</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Use springs BeanUtils.getPropertyDescriptors() instead of jakarta commons PropertyUtils.getPropertyDescriptors().

For existing Perf Tests, this results in a 3-6% performance increase when running jdk 1.5

Refer to springs CachedIntrospectionResults documentation for addt'l benefits</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1177383446</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

implemented
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177459015</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177383446</field>
		<field name="entrydate">1177459015</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177383446</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177383446</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1480610</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Create Mailing Lists...remove forums</field>
	<field name="open_date">1146596025</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We feel the mailing lists are a better medium for
information distribution. The next release we will
disable forums access (read-only) and enable mailing lists.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155428912</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Moving from open status since we probably wont be able to 
look at this for awhile.  Just stick with forums for the 
time being.  Maybe we can look at in the future</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1163380099</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155428912</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155428912</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1471513</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Create JMX MBeans and Documentation</field>
	<field name="open_date">1145239332</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">The jmx path looks promising for a couple
possibilities.  Statistics are the 1st area I focused
on just to try it out.  I have created a statistics
framework and hooked it up to the dbm via a proxy. 
Exposing the data via jmx should be trivial.  That is
the next step
 
Almost everything is new files.  Which cvs tag/branch
should I check it in to so that others can take a look
and give feedback?  Currently I am pointed at v2_1 when
doing &#34;update special&#34;.  I don't think I want a
seperate branch for this because it will be easy enough
to remove if we decide not to go forward with it.
 
The cummulative runtime stats I am capturing so far are....
- # mapper instances created
- # successful mappings
- # failed mapping
- total success mapping time
- # mapping exceptions grouped by specific exception types
 
There are others to be added but this is just a
prototype at this point.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1145845063</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Original summary is out of date</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1145845063</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1145845063</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1437244</field>
	<field user_id="1345251" name="submitted_by">chetan_oct</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">BigDecimal Precision</field>
	<field name="open_date">1140678988</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We require a feature in Dozer where we can specify the
precision while converting between BigDecimal -&#62;
String. Say I want to have only upto two decimal places
in String. 
 
This could have been done in custom convertor .... but
then I cannot set it different at different places. Say
in our case while displaying intrest rate we display
upto 5 decimal places where as in case of currency we
show only 2 decimal places. 

ExampleA{
       String amount;
       ...
}

ExampleB{
       BigDecimal amount;
       ...
}

&#60;mapping&#62;
&#60;class-a&#62;ExampleA&#60;/class-a&#62;
&#60;class-b&#62;ExampleB&#60;/class-b&#62;
&#60;field&#62;
      &#60;a&#62;amount&#60;/a&#62;
      &#60;b scale=&#34;2&#34;
rounding-logic=&#34;ROUND_HALF_UP&#34;&#62;amount&#60;/b&#62;
&#60;/field&#62;
&#60;/mapping&#62;

Further these can be added to configuration level also
so that we do not have to specify them explicitly

&#60;configuration&#62;
    &#60;scale&#62;2&#60;/scale&#62;
    &#60;rounding-logic&#62;ROUND_HALF_UP&#60;/rounding-logic&#62;
&#60;/configuration&#62;

By default scale can be taken as full or the default of
the BigDecimal and rounding logic as ROUND_HALF_UP.

Furthersame logic might be extended to float,double etc
. For me BigDecimal is the one I require. In that case
scale can be prefixed with bigdecimal say
bigdecimal-scale etc.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1156136543</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I have done some investigation of this request and I don't 
think we will be able to support.  The problem is that we 
use 
org.apache.commons.beanutils.converters.BigDecimalConverter
to convert to and from BigDecimals.  I didnt see any way 
to specify precision.  Feel free to submit a patch for 
review if you have a solution that fits into the existing 
framework well. </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1156136555</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1156136555</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1148015644</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1480798</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Multiple mappings with same map-id</field>
	<field name="open_date">1146625362</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">In our application we have a business service which
performs the conversion of a Transfer object to a
Domain object and vice-versa. Biz service uses Dozer
for the conversion. Due to some other requirements we
need to pass name of the mapping to Biz service method
so that biz service can use the correct mapping id (we
are using context based mapping). So, for each method
we have one map-id which we pass as an argument to biz
service. Then biz service converts all the input
arguments of the method using this mapping id. 
Now, some of the arguments are either interfaces or
super classes, thus we can not provide mappings for
them. But we want to have one &#34;map-id&#34; for method and
then define multiples mapping for the same map-id so
that at the runtime correct mapping will be picked for
the abstract arguments. 
 
Does it make sense? Please let me know if you need more
information. 
 
On a different note, I think the current implementation
is anyways buggy as it allows multiple map-ids then
always uses the first one. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155650601</field>
		<field name="user_name">shailusharma79</field>
		<field name="body">Logged In: YES 
user_id=1105251

Hi, 

Here is our scenario where we do need duplicate map-ids: 

1. We have parent domain objects (Bonds, Swaps, Munis etc). 
2. We also have child domain objects (Coupons etc). 
3. For the optimistic locking purposes, our child objects do
have a back reference to the parent objects. 
4. For the front end display purposes we do convert these
domain objects in to transfer objects using Dozer. 
5. In this scenario while creating mapping for child domain
objects we HAVE to specify a map-id to make sure that Dozer
does not go into an infinite loop while trying to convert
parent domain object in to transfer object because of cyclic
dependency.
6. Now, as some child objects may have multiple types of
parents, it is required that all those parents have one
mapping with common map-id.

This is the reason why do we need multiple mappings with the
same map id. 

Please let me know if you need more details. 

Here is an example of such mapping: 

&#60;mapping&#62;
	&#60;class-a&#62;
		com.citigroup.cai.g2.transfer.investment.bond.BondTO
	&#60;/class-a&#62;
	&#60;class-b&#62;
		com.citigroup.cai.g2.domain.investment.bond.BondImpl
	&#60;/class-b&#62;
	&#60;field&#62;
		&#60;a&#62;couponStructure&#60;/a&#62;
		&#60;b&#62;couponStructure&#60;/b&#62;
	&#60;/field&#62;
	&#60;!-- rest all field mappings --&#62;
	...
	...
&#60;/mapping&#62;

&#60;!-- This mapping is used by couponStructure.full mappings. 
	Map all the fields except couponStructure to avoid circular
dependency --&#62;
&#60;mapping map-id=&#34;common.instrument.id&#34;&#62;
	&#60;class-a&#62;
		com.citigroup.cai.g2.transfer.investment.bond.BondTO
	&#60;/class-a&#62;
	&#60;class-b&#62;
		com.citigroup.cai.g2.domain.investment.bond.BondImpl
	&#60;/class-b&#62;
	&#60;field-exclude&#62;
		&#60;a&#62;couponStructure&#60;/a&#62;
		&#60;b&#62;couponStructure&#60;/b&#62;
	&#60;/field-exclude&#62;
	&#60;!-- rest all field mappings --&#62;
	...
	...
&#60;/mapping&#62;

&#60;mapping&#62;
	&#60;class-a&#62;com.citigroup.cai.g2.transfer.common.coupon.FloatCpnStructTO&#60;/class-a&#62;
	&#60;class-b&#62;com.citigroup.cai.g2.domain.common.coupon.FloatCpnStructImpl&#60;/class-b&#62;
	&#60;field map-id=&#34;common.instrument.id&#34;&#62;
		&#60;a&#62;instrument&#60;/a&#62;
		&#60;b&#62;instrument&#60;/b&#62;
	&#60;/field&#62;
	&#60;!-- rest all field mappings --&#62;
	...
	...
&#60;/mapping&#62;	</field>
</message>

<message>
		<field name="adddate">1155493861</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Forgot to mention that I opened a bug to add validation 
that will enforce the unique map-id rule.

Bug #1539461 </field>
</message>

<message>
		<field name="adddate">1155493751</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I have done investigation on this one and unfortunately I 
dont think adding support for duplicate map id's is the 
direction we want to go.  Map-id was originally designed 
with the intent that map-ids would always be unique.  Map-
id support was added with support for key/value Map type 
objects.  The main use of map-ids is when you are mapping 
java.util.Map's to Vo's.  Since many java.util.Map's could 
be mapped to the same vo, you need map-id to uniquely 
identify the correct mapping.

When not dealing with Map's, Dozer will automatically find 
the correct mapping using the source and dest class.  In 
your example I didn't understand why you even needed to 
specify a map-id for the various mappings.  When you call 
the dozer mapper.map() with a src and dest class, dozer 
will automatically find the xml mapping and you shouldnt 
have to provide a map-id.  

Internally we also use map-id to &#34;cheat&#34; a bit when 
writing unit tests, but they are not a good example for 
what a production mapping file would look like.  

If you feel strongly that we should take a second look at 
this feature request, please reopen it and include more 
info on the use case.  

Thanks for taking the time to submit the request.</field>
</message>

<message>
		<field name="adddate">1155429250</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Will review the patch that was submitted</field>
</message>

<message>
		<field name="adddate">1150928584</field>
		<field name="user_name">nobody</field>
		<field name="body">Logged In: NO 

There is a similar issue with
MappingProcessor.walkDownSubclasses method. This method
looks up for a classMap where source and destination classes
are assignable from passed in source and destination classes
and it returns the one which matches this criteria and which
is the most specific one. But it does not take in to account
whether a map-id was specified for the selected classMap or
not. It should actually return only that classMap for which
the original criteria is matched AND also map-id is null.
Because we will use walkDownSubclasses method only if map-id
was not null. Thus, you do not want to return a class map
which matches the source and destination class criteria but
has a map-id as well.

Should we open a new feature request for this or should I
fix it as part of this one only.

Thanks
Shalandra</field>
</message>

<message>
		<field name="adddate">1150927827</field>
		<field name="user_name">shailusharma79</field>
		<field name="body">Logged In: YES 
user_id=1105251

I would say that if a user has entered such a mapping where
it is not possible to resolve, we should throw a descriptive
error to the user so that they can correct the same. What do
you think? Please let me know and I will implement the same.</field>
</message>

<message>
		<field name="adddate">1147099196</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

I think this requires some thought, especially WRT
implementing map composition by ID as well.  For example,
what happens if two maps are declared with the same ID and
one's source and dest classes are assignable to the other? 
Does this constitute implicit inheritance?</field>
</message>

<message>
		<field name="adddate">1146869628</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

I do think this could be useful.  Note the relevance to

http://sourceforge.net/tracker/index.php?func=detail&#38;aid=1470589&#38;group_id=133517&#38;atid=727371</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155493751</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155493751</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1155429250</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1397037</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Ability to set default values</field>
	<field name="open_date">1136394879</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We need the ability to set default values. These
default values should be able to be Strings,
primitives, wrappers, complex types, etc.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1163379816</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I dont see this functionality being implemented in the near future.  We can reopen this feature is a patch is 
submitted or this feature is added to the long term roadmap</field>
</message>

<message>
		<field name="adddate">1157990498</field>
		<field name="user_name">garpinc</field>
		<field name="body">Logged In: YES 
user_id=712000

I would like this functionality too.. What's status on 
this?</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163380099</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163379816</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163379816</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1413786</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Default Package Names</field>
	<field name="open_date">1138118141</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">In our project most of our DTOs are in a package 
com.blah1.blah2.blah3.blah4.dto.&#60;all our classes&#62; 
 
Now for every mapping we need to mention this in the
mapping xml. Can we have a global configuration called
default-package so that the rest of the xml looks much
cleaner?</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1163379831</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I dont see this functionality being implemented in the near future.  We can reopen this feature is a patch is 
submitted or this feature is added to the long term roadmap</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163380099</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163379831</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163379831</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1423050</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Non-cumulative should be able to copy from source or dest</field>
	<field name="open_date">1138923567</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">On a non-cumulative relationship we first create a
destination object from the source (usually based on
hints) and then take the existing object in the
Collection and map from that to the destination. We
should be able to map from the 'new' destination to the
existing object.

Very easy code change. Need to add another attribute like:

non-cumulative-a
non-cumulative-b</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1163379901</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I dont see this functionality being implemented in the near future.  We can reopen this feature is a patch is 
submitted or this feature is added to the long term roadmap</field>
</message>

<message>
		<field name="adddate">1146869509</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

oh, didn't see this one before my request

http://sourceforge.net/tracker/index.php?func=detail&#38;aid=1482749&#38;group_id=133517&#38;atid=727371

and I thought about using an attribute here, but I really
can't see the utility of mapping a source object to a dest
object, then mapping &#34;another&#34; dest object to the dest
object, possibly (probably!) losing whatever you mapped from
the original source object anyway.  Dozer should be friendly
with a major player like Hibernate by default IMO.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163379901</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163379901</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163379901</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1537783</field>
	<field user_id="1571368" name="submitted_by">apivonka</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Tie loading of xml with JIBX</field>
	<field name="open_date">1155174444</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">To simplify reading of xml files for config and mappings.
JIBX utilizes byte code manipulation instead of a xml
parser..
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155429666</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I don't think this is a bad idea, but I don't see us 
changing the xml parsing anytime soon.  We are trying to 
focus on new functionality.  We used to use Castor and 
switch to the more manual xml parsing for several 
reasons.  One of those reasons is that we try and keep 
thirdparty jar dependencies to a mimimum to reduce 
contention issues for users.  We might be able to take a 
closer look sometime down the road.  Thanks for submitting 
this.  If you are really eager for something like this, 
you could sumbit the code for review.  I can't promise 
anything, but we will give any submitted code a fair look</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163380098</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155429667</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155429667</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1482751</field>
	<field user_id="120761" name="submitted_by">orangeherbert</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Don\'t write destination value if new value == current value</field>
	<field name="open_date">1146864065</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">What would be the point?  Patch against 21XBranch attached.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1146864126</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

oops; already submitted.  Deleting...</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163380099</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Don't write destination value if new value == current value</field>
		<field name="entrydate">1163380099</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146864126</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146864126</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">176980: refeqskipwrite.patch.txt</field>
		<field name="entrydate">1146864066</field>
		<field name="mod_by">orangeherbert</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1470607</field>
	<field user_id="120761" name="submitted_by">orangeherbert</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">1</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Improved primitive handling</field>
	<field name="open_date">1145054190</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I think the primitive check in mapOrRecurseObject
should only be done if the ClassMap has no matching
class mappings for this FieldMap.  To reuse my other
example:

&#60;mapping&#62;
  &#60;class-a&#62;Foo&#60;/class-a&#62;
  &#60;class-b&#62;Bar&#60;/class-b&#62;
  &#60;field&#62;
    &#60;a&#62;aPrimitiveField&#60;/b&#62;&#60;!-- String, Integer, etc. --&#62;
    &#60;b&#62;aMyProxyClassField&#60;/b&#62;
  &#60;/field&#62;
&#60;/mapping&#62;

&#60;mapping&#62;
  &#60;class-a&#62;java.lang.Object&#60;/class-a&#62;
  &#60;class-b&#62;MyProxyClass&#60;/class-b&#62;
  &#60;field&#62;
    &#60;a&#62;this&#60;/a&#62;
    &#60;b&#62;value&#60;/b&#62;
  &#60;/field&#62;
&#60;/mapping&#62;

br,
Matt</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1156118699</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Moving to deleted status and it is no being worked.  We 
can reopen it if it is pursued at some time in the future</field>
</message>

<message>
		<field name="adddate">1146170137</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

this change introduced performance issues in Dozer and is on
indefinite hold.</field>
</message>

<message>
		<field name="adddate">1145890497</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

It should be possible to map &#34;dozer primitives&#34; including
wrapper classes, Strings, java.util.Date &#38; subclasses, and
java.util.Calendar.  It is not necessary to map these
amongst themselves (converters would be used here if the
defaults are insufficient).  But it should be possible to
map these to other types; caveat: this would probably always
take the form of a &#34;proxy mapping.&#34;</field>
</message>

<message>
		<field name="adddate">1145402132</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

done in 2.1 sandbox</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">120761</field>
		<field name="entrydate">1163380099</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1156118699</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1156118699</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1146170137</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Can't map dozer primitives</field>
		<field name="entrydate">1145890497</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1145235488</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1470435</field>
	<field user_id="120761" name="submitted_by">orangeherbert</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">DozerBeanMapper extensibility</field>
	<field name="open_date">1145030865</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Making DozerBeanMapper.getMappingProcessor() protected
would allow users to make customizations without having
to completely reimplement MapperIF.

Thanks,
Matt</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1145030891</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

oops</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163380099</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1145030891</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1145030891</field>
		<field name="mod_by">orangeherbert</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1456494</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">One-way field mappings.</field>
	<field name="open_date">1143067308</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi, 
 
Field mappings can be defined &#34;One way&#34; even in a
be-directional mapping. 
 
This means that this mapping, when applied from the A
instance to a B instance, take into account this &#34;one
way&#34; field mapping.  
 
This is a great thing because all the mapping doesn't
have to be defined &#34;On Way&#34; BUT What if the one way
field mapping we want to define is from B instance to A
instance ? 
 
By default, a one way defined field mapping is from A
to B but we need a way to state that this one way
mapping isn't from A to B but from B to A... 
 
&#60;field type=&#34;one-way&#34;&#62; // This means exists only for A
to B mapping 
&#60;a&#62;oneFoo&#60;/a&#62; 
&#60;b&#62;oneFooPrime&#60;/b&#62; 
&#60;/field&#62; 
 
We can imagine the following syntax : 
 
&#60;field type=&#34;one-way&#34; direction=&#34;B-A&#34; &#62; // This means
exists only for B to A mapping and a default value for
direction would be &#34;A-B&#34; 
&#60;a&#62;oneFoo&#60;/a&#62; 
&#60;b&#62;oneFooPrime&#60;/b&#62; 
&#60;/field&#62; 
 
Isn't it interesting ? 
 
Richard.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1163380057</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

This ticket has been open for a long time and I dont see this functionality being implemented in the near 
future.  We can reopen this feature is a patch is submitted or this feature is added to the long term roadmap</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1163380099</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163380057</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163380057</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1144791057</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1455478</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Ability to use mapping file with errors</field>
	<field name="open_date">1142956982</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I've got a request to make about &#34;stopOnErrors&#34;. 
Currently, as far as I know Dozer, the value
&#34;stopOnErrors&#34; is used only during the mapping, but not
during the parsing. 
In my project, we've got a huge dozer mapping file.
Each developer doesn't use all the mappings described
in the mapping file, and usually this file is not well
parsed. As dozer doesn't work when the parser throws an
exception, we are forced to correct the file before
launching the application. But that's a tough work for
developers ! 
So it would be great to have a parameter like
&#34;stopOnErrors&#34; that let the mapping works even if some
parts of the file is not correct. A log message could
be shown when a parsing error is found so that the
developer understand what's happening when a mapping
doesn't work correctly. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155428466</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I would recommend componitizing your current huge dozer 
mapping file.  This approach will be better for several 
reasons.  I think erroring out on initialization is a good 
thing because it forces you to fix the mapping xml error.  
Spring works the same way in that it will error out on 
initialization if you have any xml errors or usage 
problems.  If you feel strongly about this feature, let us 
know and we can take a second look.  Also, it would be 
helpful to include a unit test for the use case you want 
to be resolved with this feature.</field>
</message>

<message>
		<field name="adddate">1143067443</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

You say &#34;you don't figure out if you have a mapping problem
until run-time&#34;. 
 
I say : except if logs are well done. Instead of
&#34;Successfully loaded dozer mapping file:...&#34; we could have
&#34;10 errors were found in the dozer mapping file...&#34;. 
 
Bertrand. </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163380099</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155428466</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155428466</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1470564</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">1</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Wildcard expressions for custom converters</field>
	<field name="open_date">1145047904</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Looks like it might be useful to have a way to specify
that a custom 
converter
be used for all classes...

&#60;converter type=&#34;foo.MyCustomConverter&#34;&#62;
  &#60;class-a&#62;*&#60;/class-a&#62;
  &#60;class-b&#62;foo.MyCustomType&#60;/class-b&#62;
&#60;/converter&#62;

Ordinarily you wouldn't use * for both classes, but I
guess if a user 
wanted
to that would be his business...

at the risk of cluttering this thread... it hadn't
occurred to me you 
can't
use forName/loadClass with the primitive &#34;classes&#34;, so
this is actually 
SOL
as-is.  A wildcard or primitive marker of some sort
would work, as 
would always
converting primitive classes to their wrapper
counterparts before 
attempting
to map them.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1163380174</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

This ticket has been open for a long time and I dont see this functionality being implemented in the near 
future.  We can reopen this feature is a patch is submitted or this feature is added to the long term roadmap</field>
</message>

<message>
		<field name="adddate">1146170188</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

this change introduced performance issues in Dozer and is on
indefinite hold.</field>
</message>

<message>
		<field name="adddate">1146170157</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

this change introduced performance issues in Dozer and is on
indefinite hold.</field>
</message>

<message>
		<field name="adddate">1145640593</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

on second thought this seems NOT to have been a red herring
after all.  There are instances, though I have not
pinpointed them yet, where the e.g. Integer.TYPE Class is
seen as a type, and here things break.  When I find these I
will, in the interest of saving time, just change e.g.
Integer.TYPE to Integer.class, meaning
java.lang.Object.class will then match.</field>
</message>

<message>
		<field name="adddate">1145402099</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

this is a red herring and was pretty much available.  Due to
the way bean processing APIs generally work, Dozer doesn't
really work with e.g. Integer.TYPE but always Integer.class.
 This means that using java.lang.Object as a generic object
works for converters.  2.1 sandbox has changes that make
Object -mapping- (as opposed to conversion) feasible, as well.</field>
</message>

<message>
		<field name="adddate">1145053817</field>
		<field name="user_name">orangeherbert</field>
		<field name="body">Logged In: YES 
user_id=120761

What is you guys' stance on giving users &#34;enough rope to
hang themselves with?&#34;  I have an instance where it would be
convenient to be able to actually make my class mapping
accept the proposed wildcard... i.e.:

&#60;class-a&#62;*&#60;/class-a&#62;
&#60;class-b&#62;AKindOfProxyClass&#60;/class-b&#62;
&#60;field&#62;
  &#60;a&#62;this&#60;/a&#62;
  &#60;b&#62;value&#60;/b&#62;
&#60;/field&#62;

Another problem with this approach is that as of v2.1, if
class-a happens to be what Dozer considers &#34;primitive&#34; this
still wouldn't work... I think this needs to be fixed
regardless, so I'll open another enhancement request for this.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163380174</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">120761</field>
		<field name="entrydate">1163380174</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163380174</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1146170188</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1145640593</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">disallow Object property type matching specific classmapping</field>
		<field name="entrydate">1145640593</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1145402292</field>
		<field name="entrydate">1145640593</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1145402292</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1145402292</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Wildcard expressions for custom converters</field>
		<field name="entrydate">1145402292</field>
		<field name="mod_by">orangeherbert</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1145235512</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1657558</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Use Subversion instead of CVS</field>
	<field name="open_date">1171233712</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Use Subversion for source control</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1174582941</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Duplicate.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1174582941</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1174576485</field>
		<field name="entrydate">1174582941</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1174576485</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1174576485</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1171295877</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1674769</field>
	<field user_id="178745" name="submitted_by">maartenc</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Add extra ways to specify mappings</field>
	<field name="open_date">1173183790</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,

I have an InputStream to a mapping file. Is it possible to enhance Dozer to read directly from that InputStream instead of having to pass the filename?

thanks,
Maarten</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175226335</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

You can alternatively load a dozer mapping file outside of the classpath by prepending file: when setting the dozer mapping files. 
 
file:c:\somedozermapping.xml 

I am not sure how it would handle an InputStream.  If you have code that would enable support of InputStream, please submit.

Thanks for the post.

</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175226335</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175226335</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1173754454</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1657564</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Add documentation for using Custom Field Mapper</field>
	<field name="open_date">1171233873</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Need to add doc's</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175828025</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175828025</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1684061</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Investigate perf use case that was submitted</field>
	<field name="open_date">1174358292</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">http://sourceforge.net/forum/forum.php?thread_id=1693307&#38;forum_id=452529

Dozer 3.0 performance
By: GeorgeW (gjwilk01) - 2007-03-13 14:12  
Hi, 
 
I am mapping an XMLBean object graph to an SDO (IBM) graph using deep mapping. When running a single-threaded test in a singleton mode over 1000 iterations I am experiencing a noticeable performance degradation over time. The initial mappings in the test take 0-50 milliseconds (lapsed time), and as the test progresses iteration time increases linearly. The 1000th iteration takes roughly 1 second. This is accompanied by a slow memory leak. I use three custom bean factories and one custom enum type converter. All object references are released after each test iteration (except for the DozerBeanMapper, which is reused). I've also tried creating new instance of the DozerBeanMapper for each iteration, but that didn't seem to have made any difference. 
 
In a background test, excluding dozer mapper, no memory leak was observed and no performance degradation was experienced. 
I'd like to use the Dozer in our enterprise application. Please, let me know if there is a workaround to my problems. 
 
Regards, 
~george 

 


RE: Dozer 3.0 performance
By: Matt Tierney (mhtierney) - 2007-03-13 19:41  
Thanks for the post. Can you submit the unit test that reproduces this issue and we will profile it? Performance is very important to us and we have performance tests that we run with each release. Based on these perf tests mapping performance via Dozer has been very good thus far. But I would like to understand the difference between your use case and the existing perf tests. You may have hit a use case that we havent profiled, or we may be able to provide usage suggestions that would improve performance. 
 
 

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175827997</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Pending test submission</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175827997</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175827997</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1595236</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Collection and Mapping</field>
	<field name="open_date">1163365034</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hello Franz, how are you doing?

 

We encounter a problem I think you can solve (develop J).

 

When mapping arrays, you provide 2 methods:
'cumulative' and &#226;&#8364;&#732;non-cumulative&#226;&#8364;&#8482;

 

Here is a quote form
http://dozer.sourceforge.net/documentation/collectionandarraymapping.html

 

If you are mapping to a Class which has already been
initialized, dozer will either 'add' or 'update'
objects to your List. If your List or Set already has
objects in it dozer checks the mapped List, Set, or
Array and calls the contains() method to determine if
it needs to 'add' or 'update'. This is determined using
the relationship-type attribute on the field tag. The
default is 'cumulative'.

 

In our case, we initialize the target object which
holds an array of size 10. The object array is filled
with default values (not nulls).

We then want to map the source array which has only 5
elements (not nulls) into the existing array.

At the end we expect to have in the target array 10
elements; 5 from the original array and the last 5 are
the last five elements of the original, filled with
default values (in this specific order).

 

We need a third option &#226;&#8364;&#732;update&#226;&#8364;&#8482; which will update
according to order of elements (according to List
definition). Meaning, position 0 will update position
0, etc (perform mapping between the elements of the
same index).

 

I would consider having this option as the default,
because it is the most intuitive (at least to me) but I
understand that this cannot be done (because of
backwards compatibility reasons).

 

BTW I do not understand the logic in asking contains on
Lists.

Contains should be used for Sets. Here we are talking
about Lists. BTW, a list can contain the same element
more than once.

Also, if contains, what&#226;&#8364;&#8482;s the logic in updating it? It
is already there (equals)?

 </field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177460817</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177460817</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163379544</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1707199</field>
	<field user_id="1777661" name="submitted_by">mthielen</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping of getter with argument(s)</field>
	<field name="open_date">1177490461</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I want to map a &#34;DataRow&#34; to a DTO. Thus, the DataRow does have a getter but the first argument of that getter represents the actual &#34;fieldname&#34;.

So this would be nice: 

...
&#60;field&#62; 
&#60;a get-method=&#34;getValue&#34; get-argument1=&#34;fieldNameA&#34;&#62;value1&#60;/a&#62; 
&#60;b&#62;myDestinationFieldNameA&#60;/b&#62; 
&#60;/field&#62; 
&#60;field&#62; 
&#60;a get-method=&#34;getValue&#34; get-argument1=&#34;fieldNameB&#34;&#62;value2&#60;/a&#62; 
&#60;b&#62;myDestinationFieldNameB&#60;/b&#62; 
&#60;/field&#62; 
...

So dozer wont be a &#34;field-mapping&#34;-framework but a &#34;method-mapping&#34;-framework. :)

regards,
Markus</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178248651</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

This was resolved with existing functionality

https://sourceforge.net/forum/forum.php?thread_id=1721912&#38;forum_id=452530</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178248651</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1178248651</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178248651</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1507053</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">bean id's as custom converter type</field>
	<field name="open_date">1150428032</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We have a situation where we're using Spring to
configure and inject custom converters into the Dozer
bean mapper. All of the converters are of the same
class with different configurations. We then added
custom converter definitions to the Dozer config file,
each with the same &#34;type&#34;, but different source and
destination classes. Since the dozer mapping file only
accepts class names in the &#34;type&#34; attribute it can't
figure out which Spring bean to use for each converter
definition (actually, it just uses the first one it
finds that matches the type).  
 
To work around this we need to write empty subclasses
of our converter class for every mapping. It would be
much better if you could specify a Spring bean id or
name as the converter &#34;type&#34; instead of a class name.
The current design really limits the utility of being
able to configure converters as Spring beans and inject
them since it only allows one custom converter per
converter class.
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178852417</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178852417</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1236069</field>
		<field name="entrydate">1177469772</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163380441</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1734162</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Put IF in front of FieldMap</field>
	<field name="open_date">1181414568</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Make FieldMap an interface and rename current FieldMap to AbstractFieldMap.  This is prep work to try and make the map type code cleaner to fix a couple bugs recently posted</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1181512907</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

decided to punt on this for now.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1181512907</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1181512907</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1773122</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">NoSuchMethodException - Print out method looking for</field>
	<field name="open_date">1187016295</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">It would be great as part of this stack trace to print out the method it is actually looking for:

 java.lang.NoSuchMethodException:
&#60;init&#62;
	at
 net.sf.dozer.util.mapping.util.MappingUtils.throwMappingException(MappingUti
ls.java:91)
	at
 net.sf.dozer.util.mapping.util.DestBeanCreator.newInstance(DestBeanCreator.j
ava:125)
	at
 net.sf.dozer.util.mapping.util.DestBeanCreator.create(DestBeanCreator.java:8</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1190308691</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

Fixed with XMLBeans patch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1190308691</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1190308691</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1877148</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Interfaces with is-accessible=&#34;true&#34;</field>
	<field name="open_date">1200998134</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">It would be very convenient if you could use interfaces in dozer mapping file in combination with the option [is-accessible=&#34;true&#34;].
Now this isn't possible, as I explain in my forum post:
http://sourceforge.net/forum/forum.php?thread_id=1864420&#38;forum_id=452530

What happens now: dozer reads this options and tries to access the field directly on the interface defined in the dozer configuration. It should however first create a new instance through the factory defined in the dozer mapping and then access field.
So I think the order of these two actions should be changed (first create new instance, access field).

If you have an questions, please email me.

Regards,
Ed Bras</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1201087898</field>
		<field name="user_name">edbras</field>
		<field name="body">Logged In: YES 
user_id=531357
Originator: YES

I changed this to a bug report.</field>
</message>

<message>
		<field name="adddate">1200998406</field>
		<field name="user_name">edbras</field>
		<field name="body">Logged In: YES 
user_id=531357
Originator: YES

I forgot to mention why this is very convient:
Suppose you have an object that you give to a client (in my case: a gwt client), which contains fields like dateCreation, dateModified and loginFailureCount. 
You don't want the client to be able to access them, as such you don't want any setters on these objects.
Why ?
Because when you receive the modified object back in the backend, you basically just want to use hibernate saveOrUpdate() on the modified object, after you have use dozer to copy back the object.
But wit the setters, the fields might be changed, which ofcourse you don't want, which means you have check this and do more coding before saving.... and ofcourse you don't want that.

Regards,
Ed Bras</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1201087898</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1201087898</field>
		<field name="mod_by">edbras</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2381680</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Consider EL Integration</field>
	<field name="open_date">1228297079</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Technology Integration</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Consider integrating Dozer with any available expression language (EL). It should be preferably compilable to run fast.
Can be used to implement feature requests regarding runtime checks and behavior.
Requires further investigation.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1228381929</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">891576</field>
		<field name="entrydate">1228381929</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1228381929</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2800469</field>
	<field user_id="2525182" name="submitted_by">fmeance</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Problem with inheritance</field>
	<field name="open_date">1244030955</field>
	<field name="artifact_type">Feature Requests</field>
	<field name="category">Mapping Process Improvement</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">Hello,

First, sorry for my english but i am french....!
Here is what i use : RSA V6, dozer 4.3 (i do not have rights to use higher version)
I've a mapping like this :
	&#60;mapping map-null=&#34;false&#34;&#62;
		&#60;class-a&#62;fr.tm.ima.ref.dto.catalogue.CadreFonctionnelSolution&#60;/class-a&#62;
		&#60;class-b&#62;fr.tm.ima.ref.sc.catalogue.bo.CadreFonctionnelSolutionBO&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;cadreFonctionnelDemande.idCadreFonctionnelDemande&#60;/a&#62;
			&#60;b&#62;cadreFonctionnelDemande&#60;/b&#62;
		&#60;/field&#62;
		&#60;field-exclude&#62; 
		  &#60;a&#62;cadreFonctionnelDemande&#60;/a&#62; 
		  &#60;b&#62;cadreFonctionnelDemande&#60;/b&#62; 
		&#60;/field-exclude&#62;
		&#60;field&#62;
			&#60;a&#62;solution.idSolution&#60;/a&#62;
			&#60;b&#62;solution&#60;/b&#62;
		&#60;/field&#62;
		&#60;field-exclude&#62; 
		  &#60;a&#62;solution&#60;/a&#62; 
		  &#60;b&#62;solution&#60;/b&#62; 
		&#60;/field-exclude&#62;
	&#60;/mapping&#62;
 and
	&#60;mapping map-null=&#34;false&#34;&#62;
		&#60;class-a&#62;fr.tm.ima.ref.dto.catalogue.CadreFonctionnelSolutionMEO&#60;/class-a&#62;
		&#60;class-b&#62;fr.tm.ima.ref.sc.catalogue.bo.CadreFonctionnelSolutionMEOBO&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;cadreFonctionnelGarantieDefaut.idCadreFonctionnelGarantie&#60;/a&#62;
			&#60;b&#62;idCadreFonctionnelGarantieDefaut&#60;/b&#62;
		&#60;/field&#62;

	&#60;/mapping&#62;

CadreFonctionnelSolution is SuperClass for CadreFonctionnelSolutionMEO
CadreFonctionnelSolutionBO is superClass for CadreFonctionnelSolutionMEOBO

I'd to exclude solution to solution to avoid OneToOne mapping (i can not use wildcard=false because i need it)

So, here is my error : 
2009-06-03 13:50:03 ERROR net.sf.dozer.util.mapping.MappingProcessor : Field mapping error --&#62;
  MapId: null
  Type: null
  Source parent class: fr.tm.ima.ref.sc.catalogue.bo.CadreFonctionnelSolutionMEOBO
  Source field name: solution
  Source field type: class java.lang.Long
  Source field value: 90
  Dest parent class: fr.tm.ima.ref.dto.catalogue.CadreFonctionnelSolutionMEO
  Dest field name: solution
  Dest field type: fr.tm.ima.ref.dto.catalogue.Solution
java.lang.IllegalArgumentException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:618)
	at net.sf.dozer.util.mapping.util.ReflectionUtils.invoke(ReflectionUtils.java:256)
	at net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor.invokeWriteMethod(GetterSetterPropertyDescriptor.java:228)
	at net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor.setPropertyValue(GetterSetterPropertyDescriptor.java:89)
	at net.sf.dozer.util.mapping.fieldmap.FieldMap.writeDestValue(FieldMap.java:90)
	at net.sf.dozer.util.mapping.MappingProcessor.writeDestinationValue(MappingProcessor.java:827)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:305)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:244)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:213)
	at net.sf.dozer.util.mapping.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:962)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:196)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:152)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:110)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:105)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:94)
	at fr.tm.ima.ref.sc.catalogue.SCCatalogueImpl.mettreAjourGarantieParDefautLiee(SCCatalogueImpl.java:219)

Why the exclude does not work ? I don't see the problem.
Can you help me ?

Regards
Fr&#195;&#169;d&#195;&#169;ric M&#195;&#169;ance</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1244034808</field>
		<field name="user_name">fmeance</field>
		<field name="body">Soory, wrong section..;

fr&#195;&#169;d&#195;&#169;ric</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244034809</field>
		<field name="mod_by">fmeance</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244034809</field>
		<field name="mod_by">fmeance</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1244034809</field>
		<field name="mod_by">fmeance</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3565218</field>
	<field user_id="3966544" name="submitted_by">cnu868</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">9</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Facing problem with List inside the List of objects</field>
	<field name="open_date">1346912698</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hi,

       Am not getting the data for child list objects when i retrieve the parent List objects.

For Example:

VO classes :

public class ClassVO {
private List&#60;SubClassOneVO&#62; subClassOneVOList;
public void setSubClassOneVOList(List&#60;SubClassOneVO&#62; subClassOneVOList){
	this.subClassOneVOList = subClassOneVOList;
}
public List&#60;SubClassOneVO&#62; getSubClassOneVOList(){
	if(this.subClassOneVOList == null){
		this.subClassOneVOList = new ArrayList&#60;SubClassOneVO&#62;();
	}
	return this.subClassOneVOList;
}
}

public class SubClassOneVO {
private Integer id;
public Integer getId(){
return id;
}
public void setId(Integer id){
this.id = id;
}
  private List&#60;SubClassTwoVO&#62; subClassTwoVOList;
	public void setSubClassTwoVOList(List&#60;SubClassTwoVO&#62; subClassTwoVOList){
		this.subClassTwoVOList = subClassTwoVOList;
	}
	public List&#60;SubClassTwoVO&#62; getSubClassTwoVOList(){
		if(this.subClassTwoVOList == null){
			this.subClassTwoVOList = new ArrayList&#60;SubClassTwoVO&#62;();
		}
		return this.subClassTwoVOList;
	}
}

public class SubClassTwoVO {

	private String prop1;
                          public String getProp1() {
		return prop1;
	}

	public void setProp1(String prop1) {
		this.prop1 = prop1;
	}
}


DTO classes :

public class ClassDTO {
           private List&#60;SubClassOneDTO&#62; subClassOneDTOList;
	public void setSubClassOneDTOList(List&#60;SubClassOneDTO&#62; subClassOneDTOList){
		this.subClassOneDTOList = subClassOneDTOList;
	}
	public List&#60;SubClassOneDTO&#62; getSubClassOneDTOList(){
		if(this.subClassOneDTOList == null){
			this.subClassOneDTOList = new ArrayList&#60;SubClassOneDTO&#62;();
		}
		return this.subClassOneDTOList;
	}

}


public class SubClassOneDTO {

	private String id;
                          public String getProp1() {
		return prop1;
	}

	public void setProp1(String prop1) {
		this.prop1 = prop1;
	}

                          private List&#60;SubClassTwoDTO&#62; subClassTwoDTOList;
	public void setSubClassTwoDTOList(List&#60;SubClassTwoDTO&#62; subClassTwoDTOList){
		this.subClassTwoDTOList = subClassTwoDTOList;
	}
	public List&#60;SubClassTwoDTO&#62; getSubClassTwoDTOList(){
		if(this.subClassTwoDTOList == null){
			this.subClassTwoDTOList = new ArrayList&#60;SubClassTwoDTO&#62;();
		}
		return this.subClassTwoDTOList;
	}
}

public class SubClassTwoDTO {

	private String prop1;
public String getProp1() {
		return prop1;
	}

	public void setProp1(String prop1) {
		this.prop1 = prop1;
	}
}


Mapping File:


&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;mappings xmlns=&#34;http://dozer.sourceforge.net&#34;
          xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
          xsi:schemaLocation=&#34;http://dozer.sourceforge.net
          http://dozer.sourceforge.net/schema/beanmapping.xsd&#34;&#62;

  &#60;mapping&#62;
    &#60;class-a is-accessible=&#34;false&#34;&#62;com.sg.test.dozerclasses.ClassVO&#60;/class-a&#62;
    &#60;class-b is-accessible=&#34;true&#34;&#62;com.sg.test.dozerclasses.ClassDTO&#60;/class-b&#62;
            &#60;field &#62;
      &#60;a&#62;subClassOneVOList&#60;/a&#62;
      &#60;b&#62;subClassOneDTOList&#60;/b&#62;
      &#60;b-deep-index-hint&#62;com.sg.test.dozerclasses.SubClassOneDTO&#60;/b-deep-index-hint&#62;
    &#60;/field&#62;

    &#60;!--  Not working --&#62;
    &#60;field &#62;
      &#60;a&#62;subClassOneVOList.subClassTwoVOList&#60;/a&#62;
      &#60;b&#62;subClassOneDTOList.subClassTwoDTOList&#60;/b&#62;
          &#60;/field&#62;
            
    
  &#60;/mapping&#62;
  
&#60;/mappings&#62;



Problem :

As per the above example am getting List of SubClassOneDTO data which are mapped to List of SubClassOneVO, but am not getting the List of SubClassTwoDTO data for each SubClassOneDTO.


Could you please guide me how to do deep mapping LIst inside a List ?</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1346913020</field>
		<field name="mod_by">cnu868</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1346913020</field>
		<field name="mod_by">cnu868</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3554398</field>
	<field user_id="1309428" name="submitted_by">k_o_</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">remove-orphans and non-cumulative with String List</field>
	<field name="open_date">1344122170</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">When using remove-orphans and non-cumulative with a String List the reuslt is incorrect. When passing in &#34;a&#34; and the destination has &#34;a&#34;,&#34;b&#34; the mapped result is empty.

The bug is results from method addOrUpdateToList in class org.dozer.MappingProcessor

On line 771 the case is handled:

      if (RelationshipType.NON_CUMULATIVE.equals(fieldMap.getRelationshipType())
          &#38;&#38; result.contains(destValue)) {
        int index = result.indexOf(destValue);
        // perform an update if complex type - can't map strings
        Object obj = result.get(index);
        // make sure it is not a String
        if (obj != null &#38;&#38; !obj.getClass().isAssignableFrom(String.class)) {
          map(null, srcValue, obj, false, null);
          mappedElements.add(obj);
        }

So if it is a String this is not added to the mappedElements. Later in line 799 in method removeOrphans the mappedElements Collection is checked, nothing is foudn so all are removed.

</field>
</artifact>
<artifact>
	<field name="artifact_id">3552645</field>
	<field user_id="3931480" name="submitted_by"></field>
	<field user_id="1777661" name="assigned_to">mthielen</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Validation errors with maven multi-module projects</field>
	<field name="open_date">1343747426</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Eclipse Plugin Issue</field>
	<field name="artifact_group_id">Eclipse Plugin</field>
	<field name="details">Dozer Eclipse plugin doest not resolve the maven dependencies classpath.

This result to errors like &#34;Class *** not found.&#34; and &#34;Property *** for *** cannot be read from.&#34; as it cannot use the classes in maven classpath to validate dozer XML files.

This is a classic issue when model classes are defined in a particular maven module, and specific mapping files in one other module.
Note that it does not work either with manual related projects configuration in &#34;Java Build Path &#62; Projects&#34;.
</field>
</artifact>
<artifact>
	<field name="artifact_id">3548215</field>
	<field user_id="3925080" name="submitted_by">phpk2007</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">9</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping fails in child list object in 5.3.2</field>
	<field name="open_date">1343200031</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We have been using dozer-3.2 for quite some time and it is working fine. When we upgraded to dozer-5.3.2 we are facing a problem where &#34;we have a object (which we try to map to destination object) which has a class member inside it which in turn has a list member inside it. The mapperIF.map which we used so far has correctly copied the List values (Present inside class-&#62; class -&#62; List). But in latest dozer, we use mapper.map (as it is renamed), but this does not copy the list values. The dozer output says Dest value is null. But if i manually use the get/ set accessors of this object to set this list, it is working fine. So what should i do to make it work? I am using &#34;commons-collections 3.2.1&#34;.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1343200240</field>
		<field name="mod_by">phpk2007</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3544459</field>
	<field user_id="3915141" name="submitted_by">ivoleitao</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">8</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Possible threading issue</field>
	<field name="open_date">1342392521</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hi, I'm not completly sure if this is a problem or not but I'm using Dozer extensively in a large enterprise application namely I'm using a lot of custom converters with parameters. Also I've integrated with spring via the customConvertersWithId and I currently have my converters registered as singleton beans in spring. I was reviewing Dozer code namely the code bellow and I've found (from what I can understand) that the same instance is reused for all the custom conversion needs (line 945). Since the parameter is not protected by any synchronized code and I was not able to find any synchronization code I think that with this configuration it's possible to have threading issues when multiple threads set the parameter..

Can someone from the Dozer team confirm that this is really an issue ?

private Object mapUsingCustomConverter(Class&#60;?&#62; customConverterClass, Class&#60;?&#62; srcFieldClass, Object srcFieldValue,
931                                          Class&#60;?&#62; destFieldClass, Object existingDestFieldValue, FieldMap fieldMap, boolean topLevel) {
932     CustomConverter converterInstance = null;
933     // search our injected customconverters for a match
934     if (customConverterObjects != null) {
935       for (CustomConverter customConverterObject : customConverterObjects) {
936         if (customConverterObject.getClass().isAssignableFrom(customConverterClass)) {
937           // we have a match
938           converterInstance = customConverterObject;
939         }
940       }
941     }
942     // if converter object instances were not injected, then create new instance
943     // of the converter for each conversion
944     // TODO : Should we really create it each time?
945     if (converterInstance == null) {
946       converterInstance = (CustomConverter) ReflectionUtils.newInstance(customConverterClass);
947     } </field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">9</field>
		<field name="entrydate">1342392585</field>
		<field name="mod_by">ivoleitao</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1342392559</field>
		<field name="mod_by">ivoleitao</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3540468</field>
	<field user_id="3904512" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">No loggued error nor message when mapping exception thrown</field>
	<field name="open_date">1341498450</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">GetterSetterPropertyDescriptor.java L 290 statements :
if (readMethod == null &#38;&#38; writeMethod == null) {
      throw new MappingException(&#34;No read or write method found for field (&#34; + fieldName
          + &#34;) in class (&#34; + clazz + &#34;)&#34;);
    }
This exception is thrown if I declare a non existant field in a custom mapping (the mapping XML file is incorrect, I agree). The problem is that the exception is silently ignored in DozerBeanMapping.java L184 :

if (initializing.compareAndSet(false, true)) {
      try {
        loadCustomMappings();
        eventManager = new DozerEventManager(eventListeners);
      } finally {
        ready.countDown();
      }
    }

==&#62; THERE IS NO CATCH STATEMENT. As a result, DozerBeanMapping.customMappings is NULL after initialization. Then, all custom mappings declared in XML will be ignored for the entire application.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1341498775</field>
		<field name="user_name"></field>
		<field name="body">I would save a lot of debugging time if a message could be loggued with error level please.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3539389</field>
	<field user_id="996412" name="submitted_by">vlotarev</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Change modifier of DozerConverter.prototypeA/B to protected</field>
	<field name="open_date">1341218103</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">It would be nice to have prorotypeA/B as protected in order to be more flexible in subclasses.</field>
</artifact>
<artifact>
	<field name="artifact_id">3534584</field>
	<field user_id="3878347" name="submitted_by">metatechbe</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Unexpected exception in LogMsgFactory (same as bug 1797808)</field>
	<field name="open_date">1339507600</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Sorry, the fix in bug 1797808 does not work because because it calls &#34;hashCode()&#34;,
which re-throws the same Exception (LazyInitializationException).

Thread [12433497@qtp-27931868-0] (Suspended (exception
org.hibernate.LazyInitializationException))
       org.hibernate.collection.PersistentSet(org.hibernate.collection.AbstractPersistentCollection).initialize(boolean)
line: 366
       org.hibernate.collection.PersistentSet(org.hibernate.collection.AbstractPersistentCollection).read()
line: 111
       org.hibernate.collection.PersistentSet.hashCode() line: 434
       org.dozer.util.LogMsgFactory.createFieldMappingErrorMsg(java.lang.Object,
org.dozer.fieldmap.FieldMap, java.lang.Object, java.lang.Object) line:
52
       org.dozer.MappingProcessor.mapField(org.dozer.fieldmap.FieldMap,
java.lang.Object, java.lang.Object) line: 283
       org.dozer.MappingProcessor.map(org.dozer.classmap.ClassMap,
java.lang.Object, java.lang.Object, boolean, java.lang.String) line:
245
       org.dozer.MappingProcessor.map(java.lang.Object, java.lang.Class&#60;T&#62;,
T, java.lang.String) line: 187
       org.dozer.MappingProcessor.map(java.lang.Object, java.lang.Class&#60;T&#62;,
java.lang.String) line: 124
       org.dozer.MappingProcessor.map(java.lang.Object, java.lang.Class&#60;T&#62;) line: 119
       org.dozer.DozerBeanMapper.map(java.lang.Object, java.lang.Class&#60;T&#62;) line: 111</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1339507815</field>
		<field name="user_name">metatechbe</field>
		<field name="body">The logged stack trace is :  
org.hibernate.LazyInitializationException: illegal access to loading collection
	at org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:366) ~[hibernate-core-3.6.10.Final.jar:3.6.10.Final]
	at org.hibernate.collection.AbstractPersistentCollection.read(AbstractPersistentCollection.java:111) ~[hibernate-core-3.6.10.Final.jar:3.6.10.Final]
	at org.hibernate.collection.PersistentSet.hashCode(PersistentSet.java:434) ~[hibernate-core-3.6.10.Final.jar:3.6.10.Final]
	at org.dozer.util.LogMsgFactory.createFieldMappingErrorMsg(LogMsgFactory.java:52) ~[dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:283) ~[dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.map(MappingProcessor.java:245) ~[dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.map(MappingProcessor.java:187) ~[dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.map(MappingProcessor.java:124) ~[dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.map(MappingProcessor.java:119) ~[dozer-5.3.2.jar:na]
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:111) ~[dozer-5.3.2.jar:na]
</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3532713</field>
	<field user_id="3872875" name="submitted_by">mkirschbaum</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">Duplicate</field>
	<field name="summary">NPE in MappedFieldsTracker</field>
	<field name="open_date">1339063711</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">If map() (Line 147) in MappingProcessor is called with destClass = NULL, destType is determined by type of given destObj. The destType (never NULL), is passed to all sub methods, but mappedFields getMappedValue() method, where destClass is used (maybe NULL). This will, in case of any mapped fields are already available, lead to an NPE in Line 55 of class MappedFieldsTracker.

We fixed the problem by passing destObj instead of destClass to getMappedValue() and all tests still passed this fix.

I am sorry that we cant provide a test scenario, but constellation is very hard to extract from our code.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1339064011</field>
		<field name="user_name">mkirschbaum</field>
		<field name="body">Duplicate of 3479697</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1339064012</field>
		<field name="mod_by">mkirschbaum</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3528822</field>
	<field user_id="3854352" name="submitted_by">fr3drex</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">invalid copy of array of primitives</field>
	<field name="open_date">1337693601</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hi,
I run into issue, after making copy of bean with primitive array, output array is twice long as source array.
Mapping error occurs when : 
1. when array field has getters/setters or
2. when property is initialized (like in case of bytes field)

Dozer doesn't throw any exception.

I wrote simple test for that:
public class ArrayWrapper{
	byte [] bytes = new byte[3];
	int [] ints;
	
	public byte[] getBytes() {
		return bytes;
	}

	public void setBytes(byte[] bytes) {
		this.bytes = bytes;
	}

	public int[] getInts() {
		return ints;
	}

	public void setInts(int[] ints) {
		this.ints = ints;
	}
}
        @Test
	public void testArrayCopy(){
		DozerBeanMapper mapper = new DozerBeanMapper();
		ArrayWrapper bean = new ArrayWrapper();
		int [] ints = new int[3];
		bean.setInts(ints);
		ArrayWrapper beanCopy = (ArrayWrapper)mapper.map(bean, ArrayWrapper.class);
		assertArrayEquals(ints, beanCopy.ints);
		assertArrayEquals(bean.bytes, beanCopy.bytes);
	}</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1344122832</field>
		<field name="user_name">k_o_</field>
		<field name="body">I guess, this is a result of Dozers strange default settings. Arrays, Lists and so on are cumulativ copied, i.e. duplicated. In all of my projects this was always wrong. This can be prevented with:

&#60;configuration&#62;
        &#60;relationship-type&#62;non-cumulative&#60;/relationship-type&#62;
    &#60;/configuration&#62;</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1337697907</field>
		<field name="mod_by">fr3drex</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3525665</field>
	<field user_id="408508" name="submitted_by">maniksanthosh</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Multiple Bundle using Dozer in OSGi</field>
	<field name="open_date">1336690875</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">Because of BeanContainer is singleton, (BeanContainer.getInstance method used all over the code), Cannot set custom classloader specific to bundle to load mapping files and classes. There should be option to create new instance of BeanContainer for each DozerBeanMapper instance.</field>
</artifact>
<artifact>
	<field name="artifact_id">3519093</field>
	<field user_id="1133433" name="submitted_by">davidfan_uk</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer stops working after running for a while</field>
	<field name="open_date">1334746312</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi, this is the second project I have used dozer so thanks for all the good work so far.

My problem is Dozer would be working but after users have been using the application for a while, we would get a stack trace similar to the below (even though the same source/destination object types have been mapped correctly 1-2 hours earlier):

Caused by: java.lang.NoSuchMethodException: Unable to determine write method for Field: 'id' in Class: class com.mycompany.domain.Match
	at org.dozer.propertydescriptor.JavaBeanPropertyDescriptor.getWriteMethod(JavaBeanPropertyDescriptor.java:47)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.invokeWriteMethod(GetterSetterPropertyDescriptor.java:259)

My understanding of the cause of the issue is due to JavaBeanPropertyDescriptor uses the java.beans.PropertyDescriptor to look up the read/write methods for the property.  Unfortunately, SoftReferences are assigned to PropertyDescriptor.writeMethodRef.  Hence, when the app starts up Dozer would work but after a while the SoftReference would get garbage collected.  I have tried doubling the heap size with no joy.  I have yet to try XX:SoftRefLRUPolicyMSPerMB and investigate the outcome.

However, I cannot help but think there is a better solution and may be someone else has seen this issue before or I interpret the cause of this issue incorrectly?  I would really appreciate some help on this as the only sure way I can think of to fix this issue is to write the mapping code myself, something I would be extremely reluctant to do unless there is no alternative.  Many thanks in advance.</field>
</artifact>
<artifact>
	<field name="artifact_id">3518959</field>
	<field user_id="3813259" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">OSGi integration is broken</field>
	<field name="open_date">1334704298</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">org.dozer.util.DefaultClassLoader.loadClass(String className) tries to load classes with default classloader, which is incorrect in OSGi environment and causes ClassNotDefFound exceptions.

What is funny, it actually happens when DefaultClassLoader tries to load another DefaultClassLoader.

To fix it you need to replase 
result = ClassUtils.getClass(className);

with 
result = ClassUtils.getClass(this.getClass().getClassLoader(), className);

Actually using classloaders are not recommended:
http://www.osgi.org/blog/2011/05/what-you-should-know-about-class.html

but this fix at least make dozer work under OSGi environment. </field>
</artifact>
<artifact>
	<field name="artifact_id">3516038</field>
	<field user_id="1620150" name="submitted_by">brabenetz</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Swallowed InterruptedException </field>
	<field name="open_date">1333964842</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Performance Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Problem: A Thread which uses the DozerBeanMapper, cannot be cancelled.
Restore of Thread State is required after Catching InterruptedException:

-----------------------------
    try {
      ready.await();
    } catch (InterruptedException e) {
      log.error(&#34;Thread interrupted: &#34;, e);
      // Restore the interrupted status:
      Thread.currentThread().interrupt();
    }
-----------------------------


There is a very good description about this &#34;Java theory and practice: Dealing with InterruptedException&#34;:
http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html

With friendly regards,
Harald</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1347654821</field>
		<field name="user_name">brabenetz</field>
		<field name="body">Update: Create PULL request: https://github.com/DozerMapper/dozer/pull/17
(GIT: https://github.com/brabenetz/dozer )</field>
</message>

<message>
		<field name="adddate">1333999793</field>
		<field name="user_name">brabenetz</field>
		<field name="body">The Stacktrace:
After call of java.util.concurrent.Future.cancel(true)
http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html#cancel%28boolean%29


10:11:37,398 ERROR [     org.dozer.DozerBeanMapper: 196] [SimpleAsyncTaskExecutor-1] Thread interrupted: 
java.lang.InterruptedException
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1279)
	at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:207)
	at org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:194)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:118)
	at at.myCompany.myApp.MyAsyncImportImplementation........
 </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">440651: dozer-trunk_2012-04-09.patch</field>
		<field name="entrydate">1333964844</field>
		<field name="mod_by">brabenetz</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3509365</field>
	<field user_id="683436" name="submitted_by">jbialek</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Pojo Lists -&#62; JAXB Lists, Generic Type Info is not used</field>
	<field name="open_date">1332247387</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">When mapping list fields from POJOs to list fields from JAXB Objects, the Type Info of the list is not used (using hints works fine).
The following Exception is logged: 
&#34;java.lang.NoSuchMethodException: Unable to determine write method for Field: '&#60;fieldname&#62;' in Class: class &#60;Classname of JAXB Class&#62;
	at org.dozer.propertydescriptor.JavaBeanPropertyDescriptor.getWriteMethod(JavaBeanPropertyDescriptor.java:47)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.genericType(GetterSetterPropertyDescriptor.java:334)
	at org.dozer.fieldmap.FieldMap.getGenericType(FieldMap.java:145)
&#34;

org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.genericType tries to get the generic type via the setter method, which is not existent for lists in jaxb objects. I propose to change the Method to the following:
&#34;
	public Class&#60;?&#62; genericType() {
	    Class&#60;?&#62; genericType = null;
	    try {
	      Method method = getWriteMethod();
	      genericType = ReflectionUtils.determineGenericsType(method, false);
	    } catch (NoSuchMethodException e) {
	    	try {
		      Method method = getReadMethod();
		      genericType = ReflectionUtils.determineGenericsType(method, true);
		    } catch (NoSuchMethodException e) {
		    	log.warn(&#34;The destination object: {} does neither have a write nor read method for property : {}&#34;, e);
		    }
	    }
	
	    return genericType;
	}
&#34;

</field>
</artifact>
<artifact>
	<field name="artifact_id">3494973</field>
	<field user_id="1212083" name="submitted_by">meiao</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping between two beans with maps</field>
	<field name="open_date">1330342408</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">I wan to a map between one certain key of a maps in one object to another certain key in a map in another object.
But dozer will see that both objects are maps and will instead copy the whole map, ignoring the mapKey property I give.

Here's a test that show the expected result, commented to show what dozer does.

public class BeanA {
    private Map&#60;String, String&#62; map;
    public Map&#60;String, String&#62; getMap() {
        if (this.map == null) {
            this.map = new HashMap&#60;String, String&#62;();
        }
        return this.map;
    }
    public void setMap(Map&#60;String, String&#62; map) {
        this.map = map;
    }
}

public class BeanB {
    private Map&#60;String, String&#62; map;
    // setter and getter as BeanA
}

public void test() {
        BeanMappingBuilder mappingBuilder = new BeanMappingBuilder() {

            @Override
            protected void configure() {
                FieldDefinition def1 = new FieldDefinition(&#34;map&#34;);
                def1.mapKey(&#34;value&#34;);

                FieldDefinition def2 = new FieldDefinition(&#34;map&#34;);
                def2.mapKey(&#34;newValue&#34;);

                this.mapping(BeanA.class, BeanB.class).fields(def1, def2);

            }
        };

        DozerBeanMapper mapper = new DozerBeanMapper();
        mapper.addMapping(mappingBuilder);

        BeanA a = new BeanA();
        a.getMap().put(&#34;value&#34;, &#34;expected&#34;);
        a.getMap().put(&#34;value2&#34;, &#34;another value&#34;);

        BeanB b = mapper.map(a, BeanB.class);

        // this assert fails as b.getMap contains: {value=&#62;expected; value2=&#62;another value}
        Assert.assertNotNull(b.getMap().get(&#34;newValue&#34;));

        // what I really wanted was b.getMap to contain only the key that was given: {newValue=&#62;expected}
        Assert.assertEquals(&#34;expected&#34;, b.getMap().get(&#34;newValue&#34;));
    }</field>
</artifact>
<artifact>
	<field name="artifact_id">3487763</field>
	<field user_id="3735110" name="submitted_by">cgarcia2</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">ClassCastException when mapping List &#60;?&#62;</field>
	<field name="open_date">1329291858</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">When trying to map a field with nested generic types like List&#60;? extends A&#62; I get a ClassCastException (WildcardTypeImpl cannot be cast to java.lang.Class)
I think this issue can be handled with the 3487264.
The exception is raised from the method determineGenericsType(Type) in the ReflectionUtils class, because of the following casting:

    	 result = (Class&#60;?&#62;) genericType

I've patched a copy of the class by replacing that line by the following code, but I'm not sure if it is the optimal solution or even a correct approach, though it works for my own purposes:

    	  if (genericType instanceof WildcardType){
    		  result = (Class&#60;?&#62;) ((WildcardType) genericType).getUpperBounds()[0];
    	  } else {
    		  result = (Class&#60;?&#62;) genericType;
    	  }
</field>
</artifact>
<artifact>
	<field name="artifact_id">3487264</field>
	<field user_id="1846461" name="submitted_by">martinn42</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">ClassCastException when mapping List&#60;List&#60;String&#62;&#62;</field>
	<field name="open_date">1329139955</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">When trying to map a field with nested generic types like List&#60;List&#60;String&#62;&#62; I get a ClassCastException:

Exception in thread &#34;main&#34; java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl cannot be cast to java.lang.Class
	at org.dozer.util.ReflectionUtils.determineGenericsType(ReflectionUtils.java:364)
	at org.dozer.util.ReflectionUtils.determineGenericsType(ReflectionUtils.java:352)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.genericType(GetterSetterPropertyDescriptor.java:335)
	at org.dozer.fieldmap.FieldMap.getGenericType(FieldMap.java:145)
	at org.dozer.MappingProcessor.mapCollection(MappingProcessor.java:493)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:422)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:330)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:276)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:245)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:187)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:124)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:119)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:111)
	at DozerTest.main(DozerTest.java:26)

See example in the attached Java file.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">summary</field>
		<field name="old_value">sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl</field>
		<field name="entrydate">1329140104</field>
		<field name="mod_by">martinn42</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">435684: DozerTest.java</field>
		<field name="entrydate">1329139962</field>
		<field name="mod_by">martinn42</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3484030</field>
	<field user_id="3642357" name="submitted_by">shankarank</field>
	<field user_id="1777661" name="assigned_to">mthielen</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Eclipse Plugin - creates fields a/b in wrong order</field>
	<field name="open_date">1328305199</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Eclipse Plugin Issue</field>
	<field name="artifact_group_id">Eclipse Plugin</field>
	<field name="details">Using Eclipse 3.7 Indigo with Dozer Eclipse Plugin 0.8.1

Dozer XML Schema demands a xsd:sequence of &#34;a&#34; then &#34;b&#34; for xml element order under the &#34;field&#34; xml element. Eclipse plugin adds it in wrong order &#34;b&#34; first and then &#34;a&#34; causing XML validation issues.</field>
</artifact>
<artifact>
	<field name="artifact_id">3484026</field>
	<field user_id="3642357" name="submitted_by">shankarank</field>
	<field user_id="1777661" name="assigned_to">mthielen</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Eclipse plugin not introspecting super class attributes</field>
	<field name="open_date">1328304938</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Eclipse Plugin Issue</field>
	<field name="artifact_group_id">Eclipse Plugin</field>
	<field name="details">In the field mapper , fields list - the dozer plugin does not list attributes from super class.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1331587</field>
		<field name="entrydate">1328305254</field>
		<field name="mod_by">shankarank</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Dozer plugin does not introspect super class attributes</field>
		<field name="entrydate">1328305243</field>
		<field name="mod_by">shankarank</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3479697</field>
	<field user_id="1620150" name="submitted_by">brabenetz</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">NullPointerException MappedFieldsTracker.getMappedValue(55)</field>
	<field name="open_date">1327514071</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">NullPointerException in MappedFieldsTracker.getMappedValue(MappedFieldsTracker.java:55)

ERROR Logging:
----------------------------------------------_
10:22:10,191 ERROR [    org.dozer.MappingProcessor: 283] [main] Field mapping error --&#62;
  MapId: null
  Type: null
  Source parent class: My Source Class
  Source field name: myListProperty
  Source field type: class org.hibernate.collection.PersistentSet
  Source field value: &#60;&#60;A set of difference Objects extends the same Abstract Class&#62;&#62;
  Dest field name: myListProperty
  Dest field type: java.util.List
java.lang.NullPointerException
    at org.dozer.MappedFieldsTracker.getMappedValue(MappedFieldsTracker.java:55)
    at org.dozer.MappingProcessor.map(MappingProcessor.java:182)
    at org.dozer.MappingProcessor.map(MappingProcessor.java:133)
    at org.dozer.MappingProcessor.map(MappingProcessor.java:128)
    at MyCustomListPropertyFieldConverter.convertFrom(MyCustomListPropertyFieldConverter.java:000)
----------------------------------------------_

I think the Solution should be in MappingProcessor.map(MappingProcessor.java:182):

- Object alreadyMappedValue = mappedFields.getMappedValue(srcObj, destClass);
+ Object alreadyMappedValue = mappedFields.getMappedValue(srcObj, destType);


with friendly regards,
Harald</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1327514292</field>
		<field name="user_name">brabenetz</field>
		<field name="body">My workaround was to call map(srcObj, destClass) instead of map(srcObject, destObject).</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3467021</field>
	<field user_id="3680430" name="submitted_by">zsolt83</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">java.lang.NullPointerException</field>
	<field name="open_date">1325183417</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Adding a new mapping xml (attached) with its definitions to others this exception comes.
Caused by: java.lang.NullPointerException
	at org.dozer.MappingProcessor.getClassMap(MappingProcessor.java:1034)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:162)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:124)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:104)</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1325183484</field>
		<field name="mod_by">zsolt83</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">431804: imagedto.xml</field>
		<field name="entrydate">1325183418</field>
		<field name="mod_by">zsolt83</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3454685</field>
	<field user_id="1272021" name="submitted_by">axet</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">crash</field>
	<field name="open_date">1323379316</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">dozer provoke to crash javassist.

if i'm not using dozer to serialize objects everyting working fine. when i use doze it crash my app:

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1324105194</field>
		<field name="user_name">axet</field>
		<field name="body">it will produce the following exception:

java.lang.NullPointerException
	javassist.util.proxy.RuntimeSupport$DefaultMethodHandler.invoke(RuntimeSupport.java:37)
	com.payment.dao.User_$$_javassist_13.writeReplace(User_$$_javassist_13.java)
	sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	java.lang.reflect.Method.invoke(Method.java:616)
	java.io.ObjectStreamClass.invokeWriteReplace(ObjectStreamClass.java:1049)
	java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1131)
	java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)</field>
</message>

<message>
		<field name="adddate">1324105065</field>
		<field name="user_name">axet</field>
		<field name="body">this simple code can reproduce the problem:

            Mapper mapper = DozerBeanMapperSingletonWrapper.getInstance();
            Object oo = mapper.map(o, o.getClass());
            try {
                ObjectOutputStream os = new ObjectOutputStream(new ByteArrayOutputStream());
                os.writeObject(oo);
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">430348: log</field>
		<field name="entrydate">1323379317</field>
		<field name="mod_by">axet</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3445344</field>
	<field user_id="3018011" name="submitted_by">javiercanillas</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">MapperAware &#38; Configurable CustomConverters arent threadsafe</field>
	<field name="open_date">1322586789</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">Well, I found myself with the same problem as these reported bugs:
ID: 3400623
ID: 3039968

I have downloaded the code and start to dig on it. It seems that both MapperAware and ConfigurableCustomConverter introduce this undessire behaviour.
 What I did (I am submitting a patch) was:
 * Remove those both interfaces
 * Added Mapper and Parameters as part of the public convert method of CustomConverter.
 * Modified MappingProcessor.mapUsingCustomConverterInstance to pass through this new variables as method parameters.
 
This will obviously push to some code changes on client customerConverters, but will avoid the concurrency problem.

See the file attached, I worked on trunk version but I feel it might be compatible with 5.3.2</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">429559: dozer-concurrencyOnCC.patch</field>
		<field name="entrydate">1322586802</field>
		<field name="mod_by">javiercanillas</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3441369</field>
	<field user_id="1984189" name="submitted_by">tihpih</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">cant use multiple map-id at the same time</field>
	<field name="open_date">1322034157</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">I have a big and flat object (from mainframe) called fr.tihpih.dozer.vo.RecordDogs. I want to map this object to a fr.tihpih.dozer.vo.Dogs containing 2 differents Dogs (dog1 and dog2). Each dog (of class fr.tihpih.dozer.vo.Dog) must use a special mapping specified by map-id.

	&#60;mapping wildcard=&#34;true&#34;&#62;
		&#60;class-a&#62;fr.tihpih.dozer.vo.RecordDogs/class-a&#62;
		&#60;class-b&#62;fr.tihpih.dozer.vo.Dogs&#60;/class-b&#62;

		&#60;field map-id=&#34;mapdog1&#34;&#62;
			&#60;a&#62;this&#60;/a&#62;
			&#60;b&#62;dog1&#60;/b&#62;
		&#60;/field&#62;
		&#60;field map-id=&#34;mapdog2&#34;&#62;
			&#60;a&#62;this&#60;/a&#62;
			&#60;b&#62;dog2&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;


	&#60;mapping wildcard=&#34;true&#34; map-id=&#34;mapdog1&#34;&#62;
		&#60;class-a&#62;fr.tihpih.dozer.vo.RecordDogs&#60;/class-a&#62;
		&#60;class-b&#62;fr.tihpih.dozer.vo.Dog&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;dog_field_source_A&#60;/a&#62;
			&#60;b&#62;dog_field_dest&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;

	&#60;mapping wildcard=&#34;true&#34; map-id=&#34;mapdog2&#34;&#62;
		&#60;class-a&#62;fr.tihpih.dozer.vo.RecordDogs&#60;/class-a&#62;
		&#60;class-b&#62;fr.tihpih.dozer.vo.Dog&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;dog_field_source_B&#60;/a&#62;
			&#60;b&#62;dog_field_dest&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;

BUT only the first declared map-id is used for mapping from RecordDogs to Dog: mapdog1. The 2 dogs (dog1 and dog2) are mapped with this map-id.

dog2 has dog_field_source_A value instead of dog_field_source_B !!!

Is this a bug ?</field>
</artifact>
<artifact>
	<field name="artifact_id">3440672</field>
	<field user_id="3623996" name="submitted_by">henryclout</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Subclass mappings not honoured for collections</field>
	<field name="open_date">1321870362</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">If a concrete class has a subclass and a mapping is provided for the subclass, it is not honoured when mapping a collection, rather the superclass object is instantiated.  See test case provided.

I've patched the Dozer code to address the issue.  As far as I see it, subclass mappings should be honoured when mapping a collection element, but if you're not mapping a collection element, subclass mappings should not be used in place of the requested mapping.  E.g.

public class A (
)

public class B extends A {
}

If mapping a Collection&#60;A&#62; and the collection contains a B and a mapping for B is provided, a B should be instantiated.  However, if a request is made to map an A but no explicit mapping for A is provided, a B should *not* be returned.  As such, I added a flag to indiciate if we're processing a mapping element -- if we are it's ok to return a subclass even if the requested class (as determined by the collection type) is an A.

I've attached a test case to reproduce the issue, and the modified Dozer files with our fix.  Ref the fix, note the 'collection' flag passed from the MappingProcessor through to the ClassMappings.  It is used in the findInterfaceMapping method.

Could you take a look at patching this for the next release, please?  Either with the proposed fix or if you think there're issues with it, a different fix?

Many thanks,

Henry</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">428968: patch.zip</field>
		<field name="entrydate">1321870442</field>
		<field name="mod_by">henryclout</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">428967: test.zip</field>
		<field name="entrydate">1321870423</field>
		<field name="mod_by">henryclout</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">428966: </field>
		<field name="entrydate">1321870406</field>
		<field name="mod_by">henryclout</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">428966: test.zip</field>
		<field name="entrydate">1321870369</field>
		<field name="mod_by">henryclout</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3439800</field>
	<field user_id="3625371" name="submitted_by">tazzer256</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Date to XMLGregorianCalendar conversion not correct</field>
	<field name="open_date">1321610744</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">The number of seconds is incorrect?

No additional mapping file is used when doing an XMLGregorianCalendar (javax.xml.datatype.XMLGregorianCalendar) to Date converion, the seconds are not mapped correctly?

    @Test
    public void testMain() throws DatatypeConfigurationException {
        DozerBeanMapper dozerMapper = new DozerBeanMapper();

        GregorianCalendar c = new GregorianCalendar();
        c.setTime(new Date());
        XMLGregorianCalendar fromXmldate = DatatypeFactory.newInstance().newXMLGregorianCalendar(c);

        fromXmldate.setFractionalSecond(new BigDecimal(0));
        fromXmldate.setMillisecond(0);
        fromXmldate.setSecond(0);
        Date toDate = dozerMapper.map(fromXmldate, Date.class);
        enquiryDateTimeCheck(fromXmldate, toDate);
        assertEquals(toDate.getSeconds(), fromXmldate.getSecond());
    }</field>
</artifact>
<artifact>
	<field name="artifact_id">3438376</field>
	<field user_id="3621709" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">6</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping null values, TypeMappingOptions.mapNull() do nothing</field>
	<field name="open_date">1321374966</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hi,
I think I have found a bug with default behaviour for mapping null values and empty strings in DOZER. 
From Dozer faq http://dozer.sourceforge.net/documentation/faq.html#bypass-null
There is written that: &#34;we can bypass mapping of null values  by specifing map-null=&#34;false&#34;. Ithis is specified, 
the dest field mapping is bypassed (...)&#34;
From this I can asume that default behaviour nullifies destValue when srcValue equals null, but it does not, at 
least when dozer ist configured only from Java code.

In the following example &#34;myClassMapping1&#34; does not set null in destValue. Even though mapping null behaviour is 
set twice: TypeMappingOptions.mapNull() and redundant TypeMappingOptions.mapNull(true).
After some code analyses it seems to me that .mapNull(true) setting does not work on &#34;mapping&#34; level.

In may test class:


private final DozerBeanMapper MAPPER = new DozerBeanMapper();
final BeanMappingBuilder mapping1 = new BeanMappingBuilder() {            
	@Override
        protected void configure() {               
		mapping(MyClassDTO.class, MyClass.class, TypeMappingOptions.mapId(&#34;myClassMapping1&#34;),
                         TypeMappingOptions.mapNull(), TypeMappingOptions.mapNull(true), 		

TypeMappingOptions.mapEmptyString(), TypeMappingOptions.mapEmptyString(true))
	}
}
MAPPER.addMapping(mapping1 );


	I found that it works well when the .mapNull(true) setting is set on &#34;class&#34; level. Next example: 
&#34;myclassMapping2&#34;  works well.


final BeanMappingBuilder mapping2 = new BeanMappingBuilder() {            
	@Override
        protected void configure() {               
		mapping(
		new TypeDefinition(MyClassDTO.class).mapNull().mapEmptyString()
		, new TypeDefinition(MyClass.class).mapNull().mapEmptyString()
		, TypeMappingOptions.mapId(&#34;myClassMapping2&#34;))
	}
}
MAPPER.addMapping(mapping );


	From code it looks like DOZER should behave properly when only .mappNull() is set on &#34;mapping&#34; level.


package org.dozer.classmap;
private boolean mapNull = DozerConstants.DEFAULT_MAP_NULL_POLICY; //true
ClassMap{
  public boolean isDestMapNull() {
    return destClass.getMapNull() != null ? destClass.getMapNull().booleanValue() : mapNull;
  }



	I think that the problem are not initilized properties in TypeDefinition class, which it's method build() uses to 
configure DozerClass object mapNull property.



package org.dozer.loader.api;
TypeDefinition{
  private boolean mapNull;
  private boolean mapEmptyString;
  public void build(DozerBuilder.ClassDefinitionBuilder typeBuilder) {
    typeBuilder.mapEmptyString(this.mapEmptyString);
    typeBuilder.mapNull(this.mapNull);// --&#62; dozerClass.setMapNull(value);
  }
}


I think changing type mapNull and mapEmptyString to referential Boolean or initializing theses properties with 

&#34;true&#34; can resolve problem. 

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1345968729</field>
		<field name="user_name">jamesbassett</field>
		<field name="body">Hi,

I'm also encountering this bug: map-null at the mapping level just doesn't work via the API (but does via XML).

Here's a simple test to demonstrate (all tests pass, except 'testApiMapNullAtMappingLevel'):

Test class:
-------------------------------------------------------------------------------
package example;

import static org.junit.Assert.assertNull;

import java.util.Arrays;

import org.dozer.DozerBeanMapper;
import org.dozer.loader.api.BeanMappingBuilder;
import org.dozer.loader.api.TypeMappingOptions;
import org.junit.Before;
import org.junit.Test;

public class TestMapNull {
	
	private ClassA classA;
	private ClassB classB;
	
	@Before
	public void setUp() {
		classA = new ClassA();
		classA.setFieldA(null);
		classB = new ClassB();
		classB.setFieldB(&#34;not null!&#34;);
	}
	
	@Test
	public void testXmlMapNullAtMappingLevel() {
		DozerBeanMapper mapper = new DozerBeanMapper(Arrays.asList(&#34;mapNullMapping.xml&#34;));
		mapper.map(classA, classB, &#34;mapNullAtMappingLevel&#34;);
		assertNull(classB.getFieldB());
	}
	
	@Test
	public void testXmlMapNullAtClassLevel() {
		DozerBeanMapper mapper = new DozerBeanMapper(Arrays.asList(&#34;mapNullMapping.xml&#34;));
		mapper.map(classA, classB, &#34;mapNullAtClassLevel&#34;);
		assertNull(classB.getFieldB());
	}
	
	@Test
	public void testApiMapNullAtMappingLevel() {
		DozerBeanMapper mapper = new DozerBeanMapper();
		mapper.addMapping(new BeanMappingBuilder() {
			
			@Override
			protected void configure() {
				mapping(ClassA.class, ClassB.class, 
					TypeMappingOptions.mapNull(true), // map-null at mapping level
					TypeMappingOptions.mapId(&#34;mapNullAtMappingLevel&#34;))
				.fields(&#34;fieldA&#34;, &#34;fieldB&#34;);
				
			}
		});
		mapper.map(classA, classB, &#34;mapNullAtMappingLevel&#34;);
		assertNull(classB.getFieldB()); // fails!!!
	}
	
	@Test
	public void testApiMapNullAtClassLevel() {
		DozerBeanMapper mapper = new DozerBeanMapper();
		mapper.addMapping(new BeanMappingBuilder() {
			
			@Override
			protected void configure() {
				mapping(ClassA.class, type(ClassB.class).mapNull(true), // map-null at class level
					TypeMappingOptions.mapId(&#34;mapNullAtClassLevel&#34;))
				.fields(&#34;fieldA&#34;, &#34;fieldB&#34;);
				
			}
		});
		mapper.map(classA, classB, &#34;mapNullAtClassLevel&#34;);
		assertNull(classB.getFieldB()); 
	}
	
}
-------------------------------------------------------------------------------

XML config (mapNullMapping.xml):
-------------------------------------------------------------------------------
&#60;mappings xmlns=&#34;http://dozer.sourceforge.net&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
	xsi:schemaLocation=&#34;http://dozer.sourceforge.net
          http://dozer.sourceforge.net/schema/beanmapping.xsd&#34;&#62;
	&#60;mapping map-null=&#34;true&#34; map-id=&#34;mapNullAtMappingLevel&#34;&#62;
		&#60;class-a&#62;example.ClassA&#60;/class-a&#62;
		&#60;class-b&#62;example.ClassB&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;fieldA&#60;/a&#62;
			&#60;b&#62;fieldB&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;
	&#60;mapping map-id=&#34;mapNullAtClassLevel&#34;&#62;
		&#60;class-a&#62;example.ClassA&#60;/class-a&#62;
		&#60;class-b map-null=&#34;true&#34;&#62;example.ClassB&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;fieldA&#60;/a&#62;
			&#60;b&#62;fieldB&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;
&#60;/mappings&#62;
-------------------------------------------------------------------------------

Regards,
James</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1321375106</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3435003</field>
	<field user_id="3613047" name="submitted_by">tomziemer</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Inheritance mapping issue with map-ids</field>
	<field name="open_date">1320766250</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hi,

with version 5.3.2, inheritance mapping with map-ids is not always working correctly. The attached project demonstrates the issue. In my concrete usecase I have JAXB-generated classes, with a base-class that is not abstract and several classes extending this base-class. In my mapping files, I have a mapping for the common properties in the base-class plus additional mappings for class-specific extensions, as described in the docs (http://dozer.sourceforge.net/documentation/baseattributes.html). For the extending classes I am using map-ids. This setup was working nicely up until Dozer 5.3.1. With 5.3.2 the inheritance mapping was slightly changed:

The class in question is
org.dozer.classmap.ClassMappings

The following method was changed:
findInterfaceMapping

in 5.3.1:
if (destClass.isAssignableFrom(mappingDestClass) ||
              (mappingDestClass.isInterface() &#38;&#38; mappingDestClass.isAssignableFrom(destClass))) {
        if (MappingUtils.getRealClass(srcClass).equals(mappingSrcClass)) {
          return map;
        }
      }

in 5.3.2:
// Destination could be an abstract type. Picking up the best concrete type to use.
      if ((destClass.isAssignableFrom(mappingDestClass) &#38;&#38; isAbstract(destClass)) ||
              (isInterfaceImplementation(destClass, mappingDestClass))) {
        if (MappingUtils.getRealClass(srcClass).equals(mappingSrcClass)) {
          return map;
        }
      }

I tracked the issue down to the &#34;isAbstract(destClass)&#34; method call, which in my case breaks the mapping. My base-class is not abstract and I cannot change this, since it was generated by JAXB. From my point of view the isAbstract() check should either be removed or appended in a separate OR clause.

You can reproduce the issue by extracting the attached maven project and running &#34;mvn test&#34;. Switching the dozer-version in the pom.xml to 5.3.1 will resolve the issue.

Can you please fix this for the next version?

Best regards,
Tom</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">428009: baz.zip</field>
		<field name="entrydate">1320766256</field>
		<field name="mod_by">tomziemer</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3431972</field>
	<field user_id="3604567" name="submitted_by">grahamford1977</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Duplicate proxy object mapping</field>
	<field name="open_date">1320165978</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Dozer does not seem to handle having nested collections with the same proxied objects in them. Here is an example of the scenario that we have.

class Slide {
  // fields
}

class SlideShow extends Document {
  List&#60;Slide&#62; slides;

  // getter and setters.
}

class ChapterList extends Document {
  List&#60;Chapter&#62; chapters;

  // getters and setters
}

class Chapter {
  List&#60;Slide&#62; slides;

  // getters and setters
}

class Presentation {
  List&#60;Document&#62; documents;

  // getters and setters;
}

The slide objects in the SlideShow and Chapter are the same, and the list of documents contains SlideShow and ChapterList objects. As they have been retrieved using Hibernate they are proxy objects. The problem is that when it finds the SlideShow objects, it calls deProxy on the Slides and adds them to the list of already mapped objects. However, when it come to map the ChapterList object, it does not call deProxy. This causes Dozer to look in the list of mapped objects for a proxy object, and not find the one that has already been mapped, therefore, creating a new object with the same values.

I realise this is a slightly complicated scenario, and may be difficult to understand, but hopefully there is enough information here.  </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1321522506</field>
		<field name="user_name">henryclout</field>
		<field name="body">I've come across this too -- as the Hibernate proxy is not unwrapped, the identity check for previously mapped beans fails, so Dozer fails to maintain referential integrity.  

I've patched org.dozer.MappingProcessor locally to fix the issue:

private Object mapOrRecurseObject(Object srcObj, Object srcFieldValue, Class&#60;?&#62; destFieldType, FieldMap fieldMap, Object destObj)  {
	Object srcFieldValue = MappingUtils.deProxy(srcFieldValue);
        // ...
}

But obviously having my own branch isn't ideal.

Could this fix (or another if you deem this incorrect) be added to the next release please?</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3424776</field>
	<field user_id="1159558" name="submitted_by">sliverc</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping does not handle unmodifiable List</field>
	<field name="open_date">1318850469</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">The Java JDK class java.util.Collections provides methods to make a list unmodifiable.

This might be used e.g. when setter of a list does some more than just setting e.g. setting a parent (quite usual with EJB/JPA) on any entry of the list. To force this behavior the getter of the list only returns a unmodifiable list.

However Dozer does not take care of such a list.

I have attached a patch which fixes this issue + a test. Unfortunately, Collections.unmodifableList is not accessible so I had to do some String comparison.

Patch built against trunk.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1318923128</field>
		<field name="user_name">sliverc</field>
		<field name="body">We do not have bidirectional mapping for our enterprise beans for many reasons (although I do not see that such would help in our situation). And I think it should not be the case that beans need to be adjusted so dozer mapping works.

But I see that such a change as suggested in the patch can be critical when a setter is implemented that the hole persistence list will be replaced. (although not sure if such a setter is useful in other cases).

Just for clarification here a snippet how one of our setter looks like:
public void setAddresses(List&#60;CustomerAddress&#62; addresses)
{
  this.addresses.clear();
  for(CustomerAddress addr : addresses)
  {
     addr.setCustomer(addr);
     addresses.add(addr);
   }
}

However I was thinking about a new attribute on a field e.g. called wrap-list which would do this wrapping instead of checking for unmodifiable. wrap-list is set to false per default. This would be 100% backwards compatible, avoiding side effects but still give the user the chance to wrap its list when needed.</field>
</message>

<message>
		<field name="adddate">1318917273</field>
		<field name="user_name">fuzails</field>
		<field name="body">Yep even for bidirectional relationships we have this working by havinmg mapping entries for both sides of the relationship, only falls short if there is additional logic in the setter other than just setting the parent object or if the object being transformed from doesn't maintain bi-directionality as well. I have written some code that does maintenance for such scenarios, immediately looking at the patch this will be problematic for anyone that uses hibernate as the patch is creating a new list as the destination which means hibernate users would incur a performance hit and loss of the persistent context for their collection.</field>
</message>

<message>
		<field name="adddate">1318872540</field>
		<field name="user_name">sliverc</field>
		<field name="body">That was the first thing I have tried. However when using field access the setter will never be called

As the setter is in charge of setting the parent on any object of the list, new objects in the list won't be assigned to any parent.

So this workaround only works for updating existing items in the list but not adding new ones.</field>
</message>

<message>
		<field name="adddate">1318850649</field>
		<field name="user_name">fuzails</field>
		<field name="body">I believe this is handled by simple declaring this as field access, I know this due to our system using hibernate and us declaring field level access for any collections that use Collections.unmodifableList on there getters.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">426216: unmodifiable-list.patch</field>
		<field name="entrydate">1318850471</field>
		<field name="mod_by">sliverc</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3423926</field>
	<field user_id="3018011" name="submitted_by">javiercanillas</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Random CPU high utilization</field>
	<field name="open_date">1318627834</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Performance Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">First of all let me thank you for this framework. It is really useful. 

Now going on what matters, We have a neither simpler nor complex structure with lists and maps with generic objects getting mapped using dozer 5.2.2 to a most similar structure.
On heavy traffic, we get some random performance issues that get our CPU utilization up to 90%.

When we get such alert, we have proceeded to send a kill -3 to the process to see what might be running, and using another command i can't remember right now we see which of the threads is taking more CPU from the others.

Now getting all together we have seen that during this random scenarios all those threads that takes a lot of CPU are somehow stuck with the following stack trace (this was taken from the thread dump).

&#34;http-8080-136&#34; daemon prio=10 tid=0x00000000453cf800 nid=0x5019 runnable [0x00000000601f4000]
   java.lang.Thread.State: RUNNABLE
	at java.util.IdentityHashMap.get(IdentityHashMap.java:325)
	at org.dozer.MappedFieldsTracker.getMappedValue(MappedFieldsTracker.java:47)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:359)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:320)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:266)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:235)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:460)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:423)
	at org.dozer.MappingProcessor.addOrUpdateToList(MappingProcessor.java:758)
	at org.dozer.MappingProcessor.addOrUpdateToList(MappingProcessor.java:816)
	at org.dozer.MappingProcessor.mapListToList(MappingProcessor.java:665)
	at org.dozer.MappingProcessor.mapCollection(MappingProcessor.java:513)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:411)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:320)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:266)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:235)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:460)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:423)
	at org.dozer.MappingProcessor.addOrUpdateToList(MappingProcessor.java:758)
	at org.dozer.MappingProcessor.addOrUpdateToList(MappingProcessor.java:816)
	at org.dozer.MappingProcessor.mapListToList(MappingProcessor.java:665)
	at org.dozer.MappingProcessor.mapCollection(MappingProcessor.java:513)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:411)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:320)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:266)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:235)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:460)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:423)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:320)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:266)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:235)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:460)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:423)
	at org.dozer.MappingProcessor.addOrUpdateToList(MappingProcessor.java:758)
	at org.dozer.MappingProcessor.addOrUpdateToList(MappingProcessor.java:816)
	at org.dozer.MappingProcessor.mapListToList(MappingProcessor.java:665)
	at org.dozer.MappingProcessor.mapCollection(MappingProcessor.java:513)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:411)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:320)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:266)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:235)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:460)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:423)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:320)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:266)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:235)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:179)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:133)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:128)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:96)

I have seen the code and can't find exactly what might happening, I can tell you that we are using Sun JVM on a CentOS linux box:
Java(TM) SE Runtime Environment (build 1.6.0_20-b02)
Java HotSpot(TM) 64-Bit Server VM (build 16.3-b01, mixed mode)

I will see to upgrade Dozer version to 5.3.2 but from what I have seen, there seems not to be any issue related from what I am experiencing, that's why I opened this ticket.

Can you help me or at least tell me what other things I can do to gather more information when this strange issue strikes again?.

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1319215862</field>
		<field name="user_name">javiercanillas</field>
		<field name="body">Ok, i found 2 issues, we were using version 5.2.2 instead of 5.3.2 (last minute override) and we fixed the concurrency problems with MapperAware singleton implementations. We are going to upload those changes on production environment to see if this error is gone.</field>
</message>

<message>
		<field name="adddate">1318627994</field>
		<field name="user_name">javiercanillas</field>
		<field name="body">Sorry, I am using 5.3.2, not 5.2.2 I updated the issue now. Bug is still happenning.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129554</field>
		<field name="entrydate">1318627952</field>
		<field name="mod_by">javiercanillas</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3423332</field>
	<field user_id="3582462" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">&#60;mapping&#62; in mapping  xml </field>
	<field name="open_date">1318553303</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">void  &#60;mapping /&#62; or &#60;mapping&#62; &#60;/mapping&#62;  leads to Nullpointer Exception and abnormal termitation

02:40:26,866  INFO main CustomMappingsLoader:loadFromFiles:104 - Successfully loaded custom xml mappings from URL: [file:/C:/smng_project/EntityMapperTest/bin/dozerBeanMapping.xml]
02:40:26,913 ERROR main AlternativeShipmentDetails:getReturn:64 - java.lang.NullPointerException</field>
</artifact>
<artifact>
	<field name="artifact_id">3418466</field>
	<field user_id="3570129" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">NPE onResourceLoader.getResource </field>
	<field name="open_date">1317737221</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">On class ResourceLoader :

URL result = Thread.currentThread().getContextClassLoader().getResource(resource); 

can return a NPE cause Thread.currentThread().getContextClassLoader() can be null.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1317739675</field>
		<field name="user_name"></field>
		<field name="body">Here is a patch proposal : https://github.com/jblemee/Dozer/commit/d2a5370aa97a5d80c2bfc739d6410fffa9cd7b20#core/src/main/java/org/dozer/util/ResourceLoader.java</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3411111</field>
	<field user_id="3546346" name="submitted_by">tuluvasudeva</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Hash map to hash map support</field>
	<field name="open_date">1316304839</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">
2011-09-15 00:35:36 EDT

How can I convert a Map A { &#34;key1&#34;= &#34;one&#34; ; &#34;key2&#34;=&#34;two&#34;} to Map B{&#34;key1&#34;=&#34;red&#34;, &#34;key3&#34;=&#34;three&#34;}
I want a one way mapping from MapA --&#62; Map B  so that all keys in A that found in B are replaced so that the result is
Map B{ &#34;key1&#34;=&#34;one&#34;, &#34;key2&#34;=&#34;two&#34;, &#34;key3&#34;=&#34;three&#34;}
Is this an existent feature in dozer

   
</field>
</artifact>
<artifact>
	<field name="artifact_id">3408882</field>
	<field user_id="3544663" name="submitted_by">gunjankalra</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Context based nested mapping issue</field>
	<field name="open_date">1315942982</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Interface (example)</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">
I have two sets of mappings, one context based and another plain one as shown below.

Set 1:

&#60;mapping map-id=&#34;nonidParent&#34;&#62;
     &#60;class-a&#62;${Parent}&#60;/class-a&#62;
     &#60;class-b&#62;${ParentBean}&#60;/class-b&#62;
     &#60;field-exclude&#62;
	&#60;a&#62;id&#60;/a&#62;
	&#60;b&#62;id&#60;/b&#62;
     &#60;/field-exclude&#62;
     &#60;field map-id=&#34;nonidChild&#34; relationship-type=&#34;non-cumulative&#34;  remove-orphans=&#34;true&#34; &#62;
            &#60;a&#62;children&#60;/a&#62;
            &#60;b&#62;children&#60;/b&#62;
            &#60;a-hint&#62;${Child}&#60;/a-hint&#62;
            &#60;b-hint&#62;${ChildBean}&#60;/b-hint&#62;
     &#60;/field&#62;
&#60;/mapping&#62;

&#60;mapping map-id=&#34;nonidChild&#34;&#62;
     &#60;class-a&#62;${Child}&#60;/class-a&#62;
     &#60;class-b&#62;${ChildBean}&#60;/class-b&#62;
     &#60;field-exclude&#62;
	&#60;a&#62;id&#60;/a&#62;
	&#60;b&#62;id&#60;/b&#62;
     &#60;/field-exclude&#62;
     &#60;field&#62;
        &#60;a&#62;childType&#60;/a&#62;
        &#60;b&#62;type&#60;/b&#62;
     &#60;/field&#62;
     &#60;field map-id=&#34;nonidParent&#34;&#62;
        &#60;a&#62;parent&#60;/a&#62;
        &#60;b&#62;parent&#60;/b&#62;
        &#60;a-hint&#62;${Parent}&#60;/a-hint&#62;
        &#60;b-hint&#62;${ParentBean}&#60;/b-hint&#62;
     &#60;/field&#62;
&#60;/mapping&#62;


Set 2:

&#60;mapping&#62;
     &#60;class-a&#62;${Parent}&#60;/class-a&#62;
     &#60;class-b&#62;${ParentBean}&#60;/class-b&#62;
     &#60;field relationship-type=&#34;non-cumulative&#34; remove-orphans=&#34;true&#34; &#62;
            &#60;a&#62;children&#60;/a&#62;
            &#60;b&#62;children&#60;/b&#62;
            &#60;a-hint&#62;${Child}&#60;/a-hint&#62;
            &#60;b-hint&#62;${ChildBean}&#60;/b-hint&#62;
     &#60;/field&#62;
&#60;/mapping&#62;

&#60;mapping&#62;
     &#60;class-a&#62;${Child}&#60;/class-a&#62;
     &#60;class-b&#62;${ChildBean}&#60;/class-b&#62;
     &#60;field&#62;
        &#60;a&#62;childType&#60;/a&#62;
        &#60;b&#62;type&#60;/b&#62;
     &#60;/field&#62;
     &#60;field&#62;
        &#60;a&#62;parent&#60;/a&#62;
        &#60;b&#62;parent&#60;/b&#62;
        &#60;a-hint&#62;${Parent}&#60;/a-hint&#62;
        &#60;b-hint&#62;${ParentBean}&#60;/b-hint&#62;
     &#60;/field&#62;
&#60;/mapping&#62;


I have been able to use the above sets in the same project and have noticed the field &#34;id&#34; correctly getting excluded and not based upon the use of the context map-id &#34;nonidParent&#34; and &#34;nonidChild&#34;. 

However, I am successful at using the above sets only in the method:

destination d = this.mapper.map(source, destination.class, &#34;nonidParent&#34;). 


But the the object to object map method is not copying the nested objects as expected.

this.mapper.map(source, destination, &#34;nonidParent&#34;) 

The method above successfully excludes copying the id field for the parent but does not exclude the id field (as specified in the nonidChild) for the child objects. Am I missing something in my config files?

I am using the latest 5.3.2 version of Dozer. </field>
</artifact>
<artifact>
	<field name="artifact_id">3404846</field>
	<field user_id="3535939" name="submitted_by">deep-creek</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">map(Object, Object) replaces instances in target Object</field>
	<field name="open_date">1315307820</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">When mapping to an instance instead of a Class it happens that the existing instances are replaced by new ones. 
The following test shows this behavior and will fail with an AssertionFailedError:

public void test() {
        // create one instance of each DT and setup the relations
        DtA a = new DtA();
        DtB b = new DtB();
        DtC c = new DtC();

        b.setC(c);
        a.getBs().add(b);

        // map to Entities
        EntA entA = mapper.map(a, EntA.class);
        // map back from Entity to given Datatype instance
        mapper.map(entA, a);

        assertTrue(&#34;The DtC instance differs&#34;, c == a.getBs().get(0).getC());
    }

The test-code and a patch based on tags/5.3.2_RELEASE is attached.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">422949: patch_sf_id_3404846.patch</field>
		<field name="entrydate">1315311357</field>
		<field name="mod_by">deep-creek</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">422936: </field>
		<field name="entrydate">1315308715</field>
		<field name="mod_by">deep-creek</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">422936: patch_sf_id_3404846.patch</field>
		<field name="entrydate">1315308031</field>
		<field name="mod_by">deep-creek</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">422935: test.zip</field>
		<field name="entrydate">1315307822</field>
		<field name="mod_by">deep-creek</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3404329</field>
	<field user_id="548340" name="submitted_by">ceefour</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">NPE at MappingProcessor.getClassMap</field>
	<field name="open_date">1315240586</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">If the first create of the mapper is failed because the XML mapping files has invalid mapping, for example due to &#34;no property setter is found&#34;,

the second call to map() will cause an NPE here:

  private ClassMap getClassMap(Class&#60;?&#62; srcClass, Class&#60;?&#62; destClass, String mapId) {
    ClassMap mapping = classMappings.find(srcClass, destClass, mapId);

It is confirmed that at that point, classMappings == null.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1315244606</field>
		<field name="user_name">ceefour</field>
		<field name="body">Bug fix is completed at : https://github.com/ceefour/dozer/tree/bug-3404329-npe</field>
</message>

<message>
		<field name="adddate">1315243602</field>
		<field name="user_name">ceefour</field>
		<field name="body">partial fix. now gets yet another NPE at different location:

java.lang.NullPointerException
	at org.dozer.MappingProcessor.map(MappingProcessor.java:164)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:124)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:119)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:113)
	at org.dozer.functional_tests.ExceptionHandlingFunctionalTest.shouldRecoverOnInvalidMappingFile(ExceptionHandlingFunctionalTest.java:82)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:616)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:73)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:46)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)
	at org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:220)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

</field>
</message>

<message>
		<field name="adddate">1315241481</field>
		<field name="user_name">ceefour</field>
		<field name="body">NPE trace:

java.lang.NullPointerException
	at org.dozer.MappingProcessor.getClassMap(MappingProcessor.java:1043)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:162)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:124)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:119)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:113)
	at org.dozer.functional_tests.ExceptionHandlingFunctionalTest.shouldRecoverOnInvalidMappingFile(ExceptionHandlingFunctionalTest.java:81)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:616)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:73)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:46)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)
	at org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:220)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

</field>
</message>

<message>
		<field name="adddate">1315241237</field>
		<field name="user_name">ceefour</field>
		<field name="body">Note that the mapping is invalid NOT during construction but during 'runtime' eg during actual .map() call</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3404241</field>
	<field user_id="1309428" name="submitted_by">k_o_</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Exception when mapping lists coming from web service</field>
	<field name="open_date">1315219688</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Exception in ine CustomConverterContainer lin 82:  if ((classA.isAssignableFrom(dest) &#38;&#38; classB.isAssignableFrom(src))

This happens  when trying to map lists bewtween a web service API and a service API, when a ist element had the attribute xsi:nil=&#34;true&#34;.

E.g.:

&#60;SOAP-ENV:Header ...
&#60;employees xsi:nil=&#34;true&#34;&#62;&#60;/employees&#62;
...
&#60;/SOAP-ENV:Envelope&#62;

MapId: null
source parent class javax.xml.ws.Holder.
Source field name: value
Source field type: java.util.ArrayList
Source field value: [null]
Dest parent class; de.....PagingResult
Dest field name: result
Dest field type: java.util.List</field>
</artifact>
<artifact>
	<field name="artifact_id">3404163</field>
	<field user_id="548340" name="submitted_by">ceefour</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Cannot directly map java.util.Map to/from class</field>
	<field name="open_date">1315193025</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Got this:

org.dozer.MappingException: No read or write method found for field (id) in class (interface java.util.Map)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.determinePropertyType(GetterSetterPropertyDescriptor.java:291)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.getPropertyType(GetterSetterPropertyDescriptor.java:66)
	at org.dozer.fieldmap.FieldMap.getDestFieldType(FieldMap.java:115)
	at org.dozer.util.MappingUtils.applyGlobalCopyByReference(MappingUtils.java:212)
	at org.dozer.loader.MappingsParser.processMappings(MappingsParser.java:128)
	at org.dozer.loader.CustomMappingsLoader.load(CustomMappingsLoader.java:65)
	at org.dozer.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:213)
	at org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:186)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:111)
	at id.co.bippo.magento.api.ProductService.mapProducts(ProductService.java:55)
	at id.co.bippo.magento.api.ProductServiceTest.testDozerMapping(ProductServiceTest.java:20)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:616)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

Test:

	@Test
	public void testDozerMapping() {
		ProductService productService = new ProductService(null);
		HashMap&#60;String, Object&#62; input = new HashMap&#60;String, Object&#62;();
		input.put(&#34;id&#34;, 54);
		List&#60;ProductSummary&#62; products = productService.mapProducts(new Map[]{ input });
		assertEquals(54, products.get(0).getId());
	}

Mapping file (doesn't have effect whether it's used or not):

&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;mappings xmlns=&#34;http://dozer.sourceforge.net&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
	xsi:schemaLocation=&#34;http://dozer.sourceforge.net
          http://dozer.sourceforge.net/schema/beanmapping.xsd&#34;&#62;

	&#60;mapping map-id=&#34;ProductSummary&#34;&#62;
		&#60;class-a&#62;id.co.bippo.magento.domain.ProductSummary&#60;/class-a&#62;
		&#60;class-b&#62;java.util.Map&#60;/class-b&#62;
		&#60;field&#62;&#60;a&#62;id&#60;/a&#62;&#60;b&#62;product_id&#60;/b&#62;&#60;/field&#62;
		&#60;field&#62;&#60;a&#62;setId&#60;/a&#62;&#60;b&#62;set&#60;/b&#62;&#60;/field&#62;
		&#60;field&#62;&#60;a&#62;categoryIds&#60;/a&#62;&#60;b&#62;category_ids&#60;/b&#62;&#60;/field&#62;
	&#60;/mapping&#62;

&#60;/mappings&#62;

Mapper usage :

	public List&#60;ProductSummary&#62; mapProducts(Object input) {
		DozerBeanMapper mapper = new DozerBeanMapper(Arrays.asList( new String[]{ &#34;id/co/bippo/magento/api/dozer-mapping.xml&#34;} ));
		Map&#60;String, Object&#62;[] response = (Map&#60;String, Object&#62;[]) input;
		ArrayList&#60;ProductSummary&#62; result = new ArrayList&#60;ProductSummary&#62;();
		for (Map&#60;String, Object&#62; row : response) {
			ProductSummary product = mapper.map(row, ProductSummary.class, &#34;ProductSummary&#34;);
			result.add(product);
		}
		return result;
	}

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1315224870</field>
		<field name="user_name">ceefour</field>
		<field name="body">I've completed branch : https://github.com/ceefour/dozer/tree/bug-3404163-map
which is a bugfix of this issue.

Please merge this patch.

BTW, 

I propose to move dozer from Sourceforge SVN to GitHub. To facilitate contributions easily.

Please consider. Thank you.</field>
</message>

<message>
		<field name="adddate">1315224830</field>
		<field name="user_name">ceefour</field>
		<field name="body">I've completed branch : https://github.com/ceefour/dozer/tree/bug-3404162-classldr
which is a bugfix of this issue.

Please merge this patch.

BTW, 

I propose to move dozer from Sourceforge SVN to GitHub. To facilitate contributions easily.

Please consider. Thank you.</field>
</message>

<message>
		<field name="adddate">1315206197</field>
		<field name="user_name">ceefour</field>
		<field name="body">starting partial work here:
https://github.com/ceefour/dozer/tree/bug-3404163-map</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3404162</field>
	<field user_id="548340" name="submitted_by">ceefour</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">ClassNotFoundException: org.dozer.util.DefaultClassLoader</field>
	<field name="open_date">1315192872</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">ClassNotFoundException: org.dozer.util.DefaultClassLoader when run under scala console

scala&#62;     ps.mapProducts(Array(asMap(input)))
warning: there were 1 deprecation warnings; re-run with -deprecation for details
02:03:08 [Thread-14] INFO  org.dozer.DozerInitializer - Initializing Dozer. Version: 5.3.2, Thread Name: Thread-14
02:03:08 [Thread-14] INFO  org.dozer.jmx.JMXPlatformImpl - Unregistering existing Dozer JMX MBean [org.dozer.jmx:type=DozerStatisticsController].
02:03:08 [Thread-14] INFO  org.dozer.jmx.JMXPlatformImpl - Dozer JMX MBean [org.dozer.jmx:type=DozerStatisticsController] auto registered with the Platform MBean Server
02:03:08 [Thread-14] INFO  org.dozer.jmx.JMXPlatformImpl - Unregistering existing Dozer JMX MBean [org.dozer.jmx:type=DozerAdminController].
02:03:08 [Thread-14] INFO  org.dozer.jmx.JMXPlatformImpl - Dozer JMX MBean [org.dozer.jmx:type=DozerAdminController] auto registered with the Platform MBean Server
org.dozer.MappingException: java.lang.ClassNotFoundException: org.dozer.util.DefaultClassLoader
        at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:82)
        at org.dozer.util.DefaultClassLoader.loadClass(DefaultClassLoader.java:38)
        at org.dozer.DozerInitializer.loadBeanType(DozerInitializer.java:115)
        at org.dozer.DozerInitializer.initialize(DozerInitializer.java:97)
        at org.dozer.DozerInitializer.init(DozerInitializer.java:74)
        at org.dozer.DozerBeanMapper.init(DozerBeanMapper.java:164)
        at org.dozer.DozerBeanMapper.&#60;init&#62;(DozerBeanMapper.java:90)
        at id.co.bippo.magento.api.ProductService.mapProducts(ProductService.java:51)
        at .&#60;init&#62;(&#60;console&#62;:16)
        at .&#60;clinit&#62;(&#60;console&#62;)
        at .&#60;init&#62;(&#60;console&#62;:11)
        at .&#60;clinit&#62;(&#60;console&#62;)
        at $print(&#60;console&#62;)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:704)
        at scala.tools.nsc.interpreter.IMain$Request$$anonfun$14.apply(IMain.scala:920)
        at scala.tools.nsc.interpreter.Line$$anonfun$1.apply$mcV$sp(Line.scala:43)
        at scala.tools.nsc.io.package$$anon$2.run(package.scala:25)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: org.dozer.util.DefaultClassLoader
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at org.apache.commons.lang.ClassUtils.getClass(ClassUtils.java:754)
        at org.apache.commons.lang.ClassUtils.getClass(ClassUtils.java:802)
        at org.apache.commons.lang.ClassUtils.getClass(ClassUtils.java:785)
        at org.dozer.util.DefaultClassLoader.loadClass(DefaultClassLoader.java:36)
        ... 20 more
</field>
</artifact>
<artifact>
	<field name="artifact_id">3400686</field>
	<field user_id="3527995" name="submitted_by">wyachick</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">9</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer duplicated Object in List when mapping</field>
	<field name="open_date">1314704876</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.1</field>
	<field name="details">&#208;&#353;&#208;&#190;&#208;&#179;&#208;&#180;&#208;&#176; &#208;&#8221;&#208;&#190;&#208;&#183;&#208;&#181;&#209;&#8364; &#208;&#188;&#208;&#176;&#208;&#191;&#208;&#191;&#208;&#184;&#209;&#8364;&#209;&#402;&#208;&#181;&#209;&#8218; &#208;&#190;&#208;&#177;&#209;&#352;&#208;&#181;&#208;&#186;&#209;&#8218; &#209; &#208;&#191;&#208;&#190;&#208;&#187;&#208;&#181;&#208;&#188; &#209;&#8218;&#208;&#184;&#208;&#191;&#208;&#176; LIST &#209;&#208;&#190;&#208;&#180;&#208;&#181;&#209;&#8364;&#208;&#182;&#208;&#176;&#209;&#8240;&#208;&#184;&#208;&#188; 1 &#208;&#190;&#208;&#177;&#209;&#352;&#208;&#181;&#208;&#186;&#209;&#8218; &#208;&#178; &#209;&#8364;&#208;&#181;&#208;&#183;&#209;&#402;&#208;&#187;&#209;&#338;&#209;&#8218;&#208;&#176;&#209;&#8218;&#208;&#181; &#208;&#191;&#208;&#190;&#208;&#187;&#209;&#402;&#209;&#8225;&#208;&#176;&#208;&#181;&#209;&#8218;&#209;&#209; &#208;&#208;&#177;&#209;&#352;&#208;&#181;&#208;&#186;&#209;&#8218; &#209; &#208;&#191;&#208;&#190;&#208;&#187;&#208;&#181;&#208;&#188; &#209;&#8218;&#208;&#184;&#208;&#191;&#208;&#176; List &#208;&#189;&#208;&#190; &#209;&#402;&#208;&#182;&#208;&#181; &#209; &#208;&#180;&#208;&#178;&#209;&#402;&#208;&#188;&#209; &#208;&#190;&#208;&#180;&#208;&#184;&#208;&#189;&#208;&#176;&#208;&#186;&#208;&#190;&#208;&#178;&#209;&#8249;&#208;&#188;&#208;&#184; &#208;&#190;&#208;&#177;&#209;&#352;&#208;&#181;&#208;&#186;&#209;&#8218;&#208;&#176;&#208;&#188;&#208;&#184;? &#208;&#8217; &#209;&#8225;&#208;&#181;&#208;&#188; &#208;&#188;&#208;&#190;&#208;&#182;&#208;&#181;&#209;&#8218; &#208;&#177;&#209;&#8249;&#209;&#8218;&#209;&#338; &#208;&#180;&#208;&#181;&#208;&#187;&#208;&#190;?</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1316404542</field>
		<field name="user_name"></field>
		<field name="body">http://sourceforge.net/tracker/?func=detail&#38;aid=3385226&#38;group_id=133517&#38;atid=727368

See if this is the same issue. If it is, the work around is to &#60;field-exclude&#62; the list fields in the mapping for your super classes.</field>
</message>

<message>
		<field name="adddate">1314704940</field>
		<field name="user_name">wyachick</field>
		<field name="body">When Dozer are mapped to the object type field contains a LIST object in the result object with a field of type List but with the same two objects? What could be wrong?</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1314774471</field>
		<field name="mod_by">wyachick</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">422356: eee.zip</field>
		<field name="entrydate">1314704878</field>
		<field name="mod_by">wyachick</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3400623</field>
	<field user_id="3171845" name="submitted_by">fuzails</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">9</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">MapperAware not Thread safe when using singletons via SPring</field>
	<field name="open_date">1314696094</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">A very good description is provided on the forum
http://sourceforge.net/projects/dozer/forums/forum/452530/topic/4672635

Essentially when using MapperAware Interface the should be a way to specify something to the affect of getInstance() on the CustomConverter thus allowing a new instance of the CustomConverter to be created for the current thread/execution. However a better long term solution would be to have CustomConverterFactory but that would require some redesign of how CustomConverters currently work as this is only a thread safety issue when using MapperAware it would be a simple fix that at the same time still allows users to decide how they want to implement the getInstance() method of the MapperAware interface.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1322586877</field>
		<field name="user_name">javiercanillas</field>
		<field name="body">Well, I have created a new issue and submitted the patch there. See ID: 3445344</field>
</message>

<message>
		<field name="adddate">1322586268</field>
		<field name="user_name">javiercanillas</field>
		<field name="body">Well, I found myself with the same problem. I have downloaded the code and start to dig on it. It seems that both MapperAware and ConfigurableCustomConverter introduce this undessire behaviour.
What I did (I am submitting a patch) was:
* Remove those both interfaces
* Added Mapper and Parameters as part of the public convert method of CustomConverter.
* Modified MappingProcessor.mapUsingCustomConverterInstance to pass through this new variables as method parameters.

This will obviously push to some code changes on client customerConverters, but will avoid the concurrency problem.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1314696120</field>
		<field name="mod_by">fuzails</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3400083</field>
	<field user_id="3526535" name="submitted_by">erikgb</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">WildcardTypeImpl cannot be cast to java.lang.Class</field>
	<field name="open_date">1314603734</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.WildcardTypeImpl cannot be cast to java.lang.Class
	at org.dozer.util.ReflectionUtils.determineGenericsType(ReflectionUtils.java:364) ~[dozer-5.3.2.jar:na]
	at org.dozer.util.ReflectionUtils.determineGenericsType(ReflectionUtils.java:352) ~[dozer-5.3.2.jar:na]
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.genericType(GetterSetterPropertyDescriptor.java:335) ~[dozer-5.3.2.jar:na]
	at org.dozer.fieldmap.FieldMap.getGenericType(FieldMap.java:145) ~[dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.mapCollection(MappingProcessor.java:493) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:422) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:330) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:276) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.map(MappingProcessor.java:245) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:483) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:434) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.addToSet(MappingProcessor.java:703) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.mapCollection(MappingProcessor.java:545) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:422) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:330) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:276) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.map(MappingProcessor.java:245) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:999) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.map(MappingProcessor.java:234) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.map(MappingProcessor.java:187) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.map(MappingProcessor.java:124) [dozer-5.3.2.jar:na]
	at org.dozer.MappingProcessor.map(MappingProcessor.java:119) [dozer-5.3.2.jar:na]
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:111) [dozer-5.3.2.jar:na]

This seem to happen because the source (and target) property is defined with a generics wildcard. Example:
void setConductingEquipment_Terminals(Set&#60;? extends Terminal&#62; ConductingEquipment_Terminals);

I have tried to use hints as a workaround, but no luck....

Apache CXF seems to have had a similar issue, and looking at the code, I think applying an equivalent patch should fix the problem:
https://issues.apache.org/jira/browse/CXF-3470</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1314625560</field>
		<field name="user_name">erikgb</field>
		<field name="body">I think the attached patch should fix the problem.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">422302: ReflectionUtils.patch</field>
		<field name="entrydate">1314625528</field>
		<field name="mod_by">erikgb</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3389481</field>
	<field user_id="1638723" name="submitted_by">tomvanrossom</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">feature request of ID: 3378581</field>
	<field name="open_date">1312970387</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Is there a workarround for my feature request (ID: 3378581)</field>
</artifact>
<artifact>
	<field name="artifact_id">3378952</field>
	<field user_id="3486249" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Map collection to collection</field>
	<field name="open_date">1311711597</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">method org.dozer.MappingProcessor.mapCollection(Object, Object, FieldMap, Object) can't handle mapping 
from 
srcCollectionValue	HashMap$Values  (id=127)	
to
destCollectionType	Class&#60;T&#62; (java.util.List) (id=222)	

it returns the null


</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1332756041</field>
		<field name="user_name">sorrel</field>
		<field name="body">Also fixed on https://bitbucket.org/JRS/open-dozer/overview</field>
</message>

<message>
		<field name="adddate">1332755974</field>
		<field name="user_name">sorrel</field>
		<field name="body">Patch

diff -r b2fe93404ada core/src/main/java/org/dozer/MappingProcessor.java
--- a/core/src/main/java/org/dozer/MappingProcessor.java	Tue Jan 17 10:34:41 2012 +0100
+++ b/core/src/main/java/org/dozer/MappingProcessor.java	Mon Mar 26 11:59:08 2012 +0200
@@ -551,6 +551,10 @@
     else if (CollectionUtils.isCollection(srcFieldType) &#38;&#38; MappingUtils.isSupportedMap(destCollectionType)) {
       result = mapListToList(srcObj, (List&#60;?&#62;) srcCollectionValue, fieldMap, destObj);
     }
+    // Collection to List value. Fix for 3378952, http://sourceforge.net/tracker/index.php?func=detail&#38;aid=3378952&#38;group_id=133517&#38;atid=727368
+    else if (CollectionUtils.isCollection(srcFieldType) &#38;&#38; CollectionUtils.isList(destCollectionType)) {
+      result = mapListToList(srcObj, (Collection&#60;?&#62;) srcCollectionValue, fieldMap, destObj);
+    }
     return result;
   }
 
</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3378891</field>
	<field user_id="3486249" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Map a collection with generic content</field>
	<field name="open_date">1311707258</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">The destination collection is Collection&#60;LangModel&#60;String&#62;&#62;

78946 [btpool0-4] ERROR org.dozer.MappingProcessor  - Field mapping error --&#62;
  MapId: null
  Type: null
  Source parent class: com.jresearchsoft.booking.manager.impl.dto.ServiceDetailDto
  Source field name: names
  Source field type: class java.util.HashMap$Values
  Source field value: [com.jresearchsoft.booking.base.localization.manager.impl.dto.LocalizedTextDto@66036e58, com.jresearchsoft.booking.base.localization.manager.impl.dto.LocalizedTextDto@6b4187ba, com.jresearchsoft.booking.base.localization.manager.impl.dto.LocalizedTextDto@1b35fb59]
  Dest parent class: com.jresearchsoft.booking.gwt.client.model.ServiceDetailModel
  Dest field name: names
  Dest field type: java.util.Collection
java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl cannot be cast to java.lang.Class
	at org.dozer.util.ReflectionUtils.determineGenericsType(ReflectionUtils.java:364)
	at org.dozer.util.ReflectionUtils.determineGenericsType(ReflectionUtils.java:352)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.genericType(GetterSetterPropertyDescriptor.java:335)
	at org.dozer.fieldmap.FieldMap.getGenericType(FieldMap.java:145)
	at org.dozer.MappingProcessor.mapCollection(MappingProcessor.java:493)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:422)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:330)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:276)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:245)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:187)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:124)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:119)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:111)</field>
</artifact>
<artifact>
	<field name="artifact_id">3370309</field>
	<field user_id="3475433" name="submitted_by">greg703</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">hierarchy mapping when I mapping fields to fields in object</field>
	<field name="open_date">1310997770</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">problem with dozer: hierarchy mapping when we mapping fields to fields in object in subclass

when i try mapping hierarchy 
    &#60;mapping&#62;
        &#60;class-a&#62;Superclass&#60;/class-a&#62;
        &#60;class-b&#62;someclass&#60;/class-b&#62;
        &#60;field&#62;
          &#60;a&#62;postWebsite.name&#60;/a&#62;
          &#60;b&#62;postWebsiteName&#60;/b&#62;
        &#60;/field&#62;
        &#60;field&#62;
            &#60;a&#62;operator.name&#60;/a&#62;
            &#60;b&#62;operator&#60;/b&#62;
        &#60;/field&#62;
        &#60;field&#62;
            &#60;a&#62;issueNumber&#60;/a&#62;
            &#60;b&#62;id&#60;/b&#62;
        &#60;/field&#62;
    &#60;/mapping&#62;

I must define fields postWebsite.name and operator.name in subclass like this:

    &#60;mapping&#62;
        &#60;class-a&#62;SubClass&#60;/class-a&#62;
        &#60;class-b&#62;someclass&#60;/class-b&#62;
        &#60;field&#62;
          &#60;a&#62;postWebsite.name&#60;/a&#62;
          &#60;b&#62;postWebsiteName&#60;/b&#62;
        &#60;/field&#62;
        &#60;field&#62;
            &#60;a&#62;operator.name&#60;/a&#62;
            &#60;b&#62;operator&#60;/b&#62;
        &#60;/field&#62;
    &#60;/mapping&#62;

but to result from documentation i don\'t have to define this  fields again in subclass</field>
</artifact>
<artifact>
	<field name="artifact_id">3366084</field>
	<field user_id="3469412" name="submitted_by">jwinne35</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Map mapping bug when variable starts with j</field>
	<field name="open_date">1310563813</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When trying to map a Map&#60;Integer, Article&#62; to a Map&#60;Integer,ArticleOld&#62;, an Article is being put in the target map instead of the desired ArticleOld.
This only seems to happen when,all following conditions are met:
(1) wildcard is set to true
(2) both maps have the same name, start with the letter 'j' and are followed by a capital

See uploaded jar file together with source to simulate the problem, just run DozerXmlMappingTest and observe the classcastexception</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">418031: dozerbug.jar</field>
		<field name="entrydate">1310563830</field>
		<field name="mod_by">jwinne35</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3317447</field>
	<field user_id="3433716" name="submitted_by">crmason2</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">NullPointerException from MappedFieldsTracker</field>
	<field name="open_date">1308248370</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">MappedFieldsTracker will throw a NPE if destType is null (at aprox line 55) which can happen in a number of cases. In MappingProcessor (aprox line 182) destClass is passed into MappedFieldsTracker.getMappedValue however destClass can and will be null if the map method is called from called from the public mapping methods of public void map(final Object srcObj, final Object destObj) or public void map(final Object srcObj, final Object destObj, final String mapId). I believe instead of passing destClass, destType should be passed to the getMappedValue method instead, since logic is in place to prevent that from being null.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">summary</field>
		<field name="old_value">Null Pointer Error from MappedFieldsTracker</field>
		<field name="entrydate">1308248621</field>
		<field name="mod_by">crmason2</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3317194</field>
	<field user_id="3433000" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">MapFieldMap.getSrcFieldValue ignores custom getters/setters</field>
	<field name="open_date">1308211578</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">During mapping, MapFieldMap attempts to detect the runtime property type of the bean side of a Bean-Map mapping, failing to check if the bean uses custom getters/setters.

See the attached test which recreates the issue.

If you're wondering why I even need this - I'm using Dozer to map Scala classes, which have different names for the get/set methods :)</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1308211723</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1308211723</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">414980: DozerBug.java</field>
		<field name="entrydate">1308211629</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3310587</field>
	<field user_id="2739155" name="submitted_by">ctapobep</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer doesn't support Fluent Interface</field>
	<field name="open_date">1307016159</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">I have a class that follows the fluent interface (setters return the instance of the class itself). Dozer doesn't try to convert FROM this class. If I change setters to return void, it works just fine. 
This is not what I expect, from my perspective Dozer shouldn't care about return type of setters (expecially if it needs getters ;)).</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1327381039</field>
		<field name="user_name"></field>
		<field name="body">Support for non-void setters was added in Git ID 59513a3e91791671b2475a46655ee81fcc038c5b</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3308349</field>
	<field user_id="1748305" name="submitted_by">jdavid82</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Problem with proxy mappings</field>
	<field name="open_date">1306492152</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.1</field>
	<field name="details">In the case where you first map a detachedObject with a javassist Hibernate proxy class, classMappings add e default mapping using proxied class. Then if you try to map a new DetachedObject to the unProxiedClass, classmapping resolve the destType as the stored proxyClass, so when the DestBeanCreator create a new instance of the proxied class, he used the default javassist proxy (wich lose the hibernate capabilities like checking the getLazyHibernateInitializer).

To resolve it in my case, I modified the getClassMap method as below to ensure that it's the un proxied class that's going to be store in the classMappings.

private ClassMap getClassMap(Class&#60;?&#62; srcClass, Class&#60;?&#62; destClass, String mapId) {
		ClassMap mapping = classMappings.find(srcClass, destClass, mapId);
		
		if (mapping == null) {
			// If mapping not found in existing custom mapping collection, create
			// default as an explicit mapping must not
			// exist. The create default class map method will also add all default
			// mappings that it can determine.
			// MODIF : use unproxied classes
			final Class&#60;?&#62; realSrcClass = MappingUtils.getRealClass(srcClass);
			final Class&#60;?&#62; realDestClass = MappingUtils.getRealClass(destClass);
			mapping = ClassMapBuilder.createDefaultClassMap(globalConfiguration, realSrcClass, realDestClass);
			classMappings.addDefault(realSrcClass, realDestClass, mapping);
		}
		
		return mapping;
	}</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">412890: MappingProcessor.java</field>
		<field name="entrydate">1306492168</field>
		<field name="mod_by">jdavid82</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3307519</field>
	<field user_id="2112401" name="submitted_by">przemek_dyk</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Generic interface getter problem</field>
	<field name="open_date">1306333106</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">I cannot copy field with getter declared in generic interface. Example code (complete maven project attached):

public interface GenericInterface&#60;T&#62; {
	T getId();
}

public class Sample implements GenericInterface&#60;String&#62; {

	private String id;
	private String name;

	public String getId() {
		return id;
	}
	public void setId(String id) {
		this.id = id;
	}
	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name = name;
	}
}


//given
final Mapper mapper = new DozerBeanMapper();
final Sample sample = new Sample();
sample.setId(&#34;id&#34;);
sample.setName(&#34;name&#34;);

//when
Sample copy = mapper.map(sample, Sample.class);

//then
Assert.assertEquals(&#34;name&#34;, copy.getName()); //ok
Assert.assertEquals(&#34;id&#34;, copy.getId()); //failure
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">412721: dozer-generics.zip</field>
		<field name="entrydate">1306333141</field>
		<field name="mod_by">przemek_dyk</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3304685</field>
	<field user_id="3394980" name="submitted_by">bdaici</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Cannot exclude deep fields</field>
	<field name="open_date">1305823379</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I am trying to exclude deeply mapped fields but the exclusion is not done, the fields do get set. There are getters/setters and the other mappings work well.

&#60;mapping&#62;
        &#60;class-a&#62;com.operative.dashboard.model.customfield.MultiSelectVal&#60;/class-a&#62;
        &#60;class-b&#62;com.operative.dashboard.dto.customfield.MultiSelectValTO&#60;/class-b&#62;
        &#60;field-exclude&#62;
            &#60;a&#62;multiSelectObj.optionObjs&#60;/a&#62;
            &#60;b&#62;multiSelectObj.optionObjs&#60;/b&#62;
        &#60;/field-exclude&#62;
    &#60;/mapping&#62;

public class MultiSelectVal extends CustomFieldVal {
  private MultiSelectObj multiSelectObj;

public class MultiSelectValTO extends CustomFieldValTO {
  private MultiSelectObjTO multiSelectObj;

public class MultiSelectObj extends CustomFieldObj {
  private List&#60;OptionObj&#62; optionObjs = new ArrayList&#60;OptionObj&#62;();

public class MultiSelectObjTO extends CustomFieldObjTO {
  private List&#60;OptionObjTO&#62; optionObjs = new ArrayList&#60;OptionObjTO&#62;();
</field>
</artifact>
<artifact>
	<field name="artifact_id">3298470</field>
	<field user_id="3376342" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Too restrictive setCustomConverters() on DozerBeanMapper</field>
	<field name="open_date">1304716117</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Interface (example)</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">The method setCustomConverters (and its friends) of DozerBeanMapper is declared as 
void setCustomConverters(List&#60;CustomConverter&#62; customConverters). It should be: void setCustomConverters(List&#60;? extends CustomConverter&#62;)</field>
</artifact>
<artifact>
	<field name="artifact_id">3295486</field>
	<field user_id="3367178" name="submitted_by">kubam</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">deep indexed mapping error</field>
	<field name="open_date">1304193516</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">When trying to use deep index mapping I'm getting NillPointerException. 
My bean hierarchy looks like this: 
&#60;a&#62;bean.listOfBeans[0].finalBean.listOfString[0]&#60;/a&#62;

When this first bean is removed - everything works fine 
&#60;a&#62;listOfBeans[0].finalBean.listOfString[0]&#60;/a&#62;

Please see the attached examples. 

I don't find it critical, because there is a simple workaround for that: just split mapping into two, to avoid two indexed fields in a single mapping. </field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">410351: dozer-deep-indexed-bug-example.zip</field>
		<field name="entrydate">1304193517</field>
		<field name="mod_by">kubam</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3287229</field>
	<field user_id="3342205" name="submitted_by">turbulence-in</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Partial FieldMaps in DozerEvent object in DozerEventListener</field>
	<field name="open_date">1302851649</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">I'm facing this issue when I implemented DozerEventListener. In mappingFinished or mappingStarted methods DozerEvent object I get has ClassMap for just completed/abt to start mapping. This ClassMap contains List of FieldMaps. I saw that the list is not a full list of all the mappings I defined, its a subset of full list.

Whereas If I capture the DozerEvent in preWritingDestinationValue or postWritingDestinationValue methods and try to dig ClassMap object and then list of FieldMaps, there it contains full list of mappings which I had defined.

Can somebody let me know if this is a bug or it is functionally expected behavior. 

Because for me I wanted a single particular field mapping when two classes are mapped, I thought best would be to use mappingStarted or mappingFinished methods but there sometimes it finds the mapping sometimes not depending upon the containing List of FieldMaps contains my mapping which I absolutely know should be there. For a single mapping I didn't wanted to use  preWritingDestinationValue or postWritingDestinationValue methods (which gives correct FieldMap list) as my object contains almost 200-300 fields each, so I have to check for each field mapping instance.</field>
</artifact>
<artifact>
	<field name="artifact_id">3286800</field>
	<field user_id="3341700" name="submitted_by">swapnl</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">9</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Mapper.map(object, object) issue</field>
	<field name="open_date">1302816315</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">Hi, 
I have two classes where I am trying to map the attributes. The problem is both the classes contains List variables with same name. 
I am mapping the objects as Mapper.map(src, dest, stringId). But since the hint is not proper so one Collection object is trying to map and producing an error as MemoryOutofError.. 
I have no clue since logging in Dozer not working, please  note I am using Log-4j and done the setting in log4j properties file. If you can help me to setup the Dozer logging will help me a lot. 
Another problem can someone please describe me how dozer map the Collection object if there is not hint present, and if by mistake I try to map it and then what will happen. 

thanks,</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1302817194</field>
		<field name="mod_by">swapnl</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3267397</field>
	<field user_id="3318986" name="submitted_by">avillafranca</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">NullPointerException - readonly collection properties</field>
	<field name="open_date">1301666937</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">NullPointerException for read-only (no setter method) collection properties on 5.3.2

What I have seen is that for collection properties dozer creates a new collection, add your own existing collection to it and then set back this newly created collection; but I have a read only (no setter method provided) List property so when dozer try through reflection to set my list there is no setter method and therefore a NullPointerException is thrown.

java.lang.NullPointerException
	at org.dozer.util.ReflectionUtils.invoke(ReflectionUtils.java:286)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.writeDeepDestinationValue(GetterSetterPropertyDescriptor.java:204)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.setPropertyValue(GetterSetterPropertyDescriptor.java:86)
	at org.dozer.fieldmap.FieldMap.writeDestValue(FieldMap.java:94)
	at org.dozer.MappingProcessor.writeDestinationValue(MappingProcessor.java:870)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:337)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:276)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:245)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:187)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:133)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:128)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:118)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1302283731</field>
		<field name="user_name">avillafranca</field>
		<field name="body">this seems to be a popular issue, I think this is pretty close related to 
https://sourceforge.net/tracker/?func=detail&#38;aid=2812002&#38;group_id=133517&#38;atid=727371
we are probably facing the same issue - dealing with jaxb auto generated code</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1302283731</field>
		<field name="mod_by">avillafranca</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3258024</field>
	<field user_id="3314961" name="submitted_by">endocraft</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">6</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">@Generated Colum values not being mapped</field>
	<field name="open_date">1301420129</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hi.  I'm trying to map in Java a DTO to an Entity class.  Everything works fine, except the ID column of the Entity, which is not being copied.  I suspect this is because the id column is defined as an @generated value using hibernate annotations.  Is there any way of mapping every field so I don't have to manually assign other fields?

Thanks.

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1301420394</field>
		<field name="user_name">endocraft</field>
		<field name="body">P.D.  I don't know if this is a bug or working as intended.  However, I'd like to know if there's a way to solve it.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1301420394</field>
		<field name="mod_by">endocraft</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3234536</field>
	<field user_id="3302749" name="submitted_by">biletnikov</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">isField is not supported by Dozer for deep mapping</field>
	<field name="open_date">1300796437</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hello, I found that Dozer does not support isField (getter) in case of deep mapping:

&#60;field&#62;
            &#60;a&#62;assignedArticle.hasVehicleLink&#60;/a&#62;
            &#60;b&#62;hasVehicleLink&#60;/b&#62;
 &#60;/field&#62;

assignedArticle is getAssignedArticle()
hasVehicleLink is defined as   isHasVehicleLink()  (Boolean type)
Dozer reports this error:
  Source parent class: net.tecdoc.webservice_cs.pegasus_2_0.services.tecdoctocatwl.ArticlesByIds2Record
  Source field name: directArticle.hasVehicleLink
  Source field type: null
  Source field value: null
  Dest parent class: de.alfah.business.beans.ArticleBean
  Dest field name: hasVehicleLink
  Dest field type: java.lang.Boolean
java.lang.NullPointerException
	at org.dozer.util.ReflectionUtils.invoke(ReflectionUtils.java:286)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.getDeepSrcFieldValue(GetterSetterPropertyDescriptor.java:121)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.getPropertyValue(GetterSetterPropertyDescriptor.java:74)
	at org.dozer.fieldmap.FieldMap.getSrcFieldValue(FieldMap.java:84)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:263)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:245)



I think the reason of the problem is a bug in case of deep mapping.
Thanks.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">summary</field>
		<field name="old_value">isField is not supported by Dozer</field>
		<field name="entrydate">1300796460</field>
		<field name="mod_by">biletnikov</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3206169</field>
	<field user_id="3284134" name="submitted_by">tfreyne</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">XMLGregorianCalendar to XMLGregorianCalendar not ok in 5.3.1</field>
	<field name="open_date">1299830948</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.1</field>
	<field name="details">When mapping XMLGregorianCalendar to XMLGregorianCalendar mapping exception occurs. Creation of xml gregorian like so (I know about the newXMLGregorianCalendar(in,int,...)):

XMLGregorianCalendar getXMLCalendar(int year, int month, int day){
        XMLGregorianCalendar d = DatatypeFactory.newInstance().newXMLGregorianCalendar();
        d.setYear(year);
        d.setMonth(month);
        d.setDay(day);
        d.setHour(0);
        d.setMinute(0);
        d.setSecond(0)
        return d
    }




org.dozer.MappingException: java.lang.IllegalAccessException: Class org.dozer.util.ReflectionUtils can not access a member of class org.apache.xerces.jaxp.datatype.XMLGregorianCalendarImpl with modifiers &#34;public&#34;
	at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:88)
	at org.dozer.util.ReflectionUtils.invoke(ReflectionUtils.java:291)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.invokeReadMethod(GetterSetterPropertyDescriptor.java:243)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.getPropertyValue(GetterSetterPropertyDescriptor.java:76)
	at org.dozer.fieldmap.FieldMap.getSrcFieldValue(FieldMap.java:82)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:257)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:239)
	at org.dozer.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:998)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:228)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:472)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:427)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:324)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:270)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:239)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:472)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:427)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:324)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:270)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:239)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:181)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:134)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:129)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:118)
	at org.dozer.Mapper$map.call(Unknown Source)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1325668789</field>
		<field name="user_name">saideena</field>
		<field name="body">Add custom converter to fix this issue.

&#60;custom-converters&#62;
			&#60;converter type=&#34;com.xxx.XMLGC2XMLGC&#34;&#62;
				&#60;class-a&#62;javax.xml.datatype.XMLGregorianCalendar&#60;/class-a&#62;
				&#60;class-b&#62;javax.xml.datatype.XMLGregorianCalendar&#60;/class-b&#62;
			&#60;/converter&#62;
		&#60;/custom-converters&#62;
XMLGC2XMLGC.java:

public class XMLGC2XMLGC extends
		DozerConverter&#60;XMLGregorianCalendar, XMLGregorianCalendar&#62; {

	public XMLGC2XMLGC() {
		super(XMLGregorianCalendar.class, XMLGregorianCalendar.class);
	}

	@Override
	public XMLGregorianCalendar convertFrom(XMLGregorianCalendar src,
			XMLGregorianCalendar dest) {
		return src;
	}

	@Override
	public XMLGregorianCalendar convertTo(XMLGregorianCalendar src,
			XMLGregorianCalendar dest) {
		return dest;
	}

}</field>
</message>

<message>
		<field name="adddate">1311155177</field>
		<field name="user_name">sheelavignesh</field>
		<field name="body">I face the same issue. Is there any solution for this?</field>
</message>

<message>
		<field name="adddate">1308077961</field>
		<field name="user_name">camrdale</field>
		<field name="body">I was just stung by this bug as well. I also have xerces (via WebSphere) on the classpath.

Are there any plans to fix it?</field>
</message>

<message>
		<field name="adddate">1300098235</field>
		<field name="user_name">tfreyne</field>
		<field name="body">added very basic simple test project that displays the issue</field>
</message>

<message>
		<field name="adddate">1300098106</field>
		<field name="user_name">tfreyne</field>
		<field name="body">This bug apears when xerces is on the classpath! When using xerces the implementation of XMLGregorian comes from this api org.apache.xerces.jaxp.datatype.XMLGregorianCalendarImpl
otherwhise it comes from JDKs com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl

When using Xerces the mapping fails when using the JDKs is works. I will included a small maven test project for you to run and you can see the issue.</field>
</message>

<message>
		<field name="adddate">1299967302</field>
		<field name="user_name">buzdin</field>
		<field name="body">please provide a test case reproducing this issue or at least more details what are the source and target beans</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">404284: DozerPoc.zip</field>
		<field name="entrydate">1300098199</field>
		<field name="mod_by">tfreyne</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3201924</field>
	<field user_id="3277498" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Configurations of multiple mappers interfer with each other</field>
	<field name="open_date">1299510619</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.1</field>
	<field name="details">Due to static members in class ConstructionStrategies,  it is not possible to provide independent configuration , if one uses multiple DozerBeanMappers within an application.
The DozerBeanMapper.setFactories() method will always overwrite the factories already set for a previously configured  DozerBeanMapper, since it sets the static field ConstructionStrategies.byFactory </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1299512935</field>
		<field name="user_name"></field>
		<field name="body">@fuzails:  Thanks, I think you are right. Hoever, if  one has different factories for the same key (== class name) in differen mappers, then they will override.  
 </field>
</message>

<message>
		<field name="adddate">1299512615</field>
		<field name="user_name"></field>
		<field name="body">Correction:  The DozerBeanMapper does not set the static field ConstructionStrategies.byFactory, as described above,  but it sets the list of factories hold by the object in ConstructionStrategies.byFactory .

Result is the same... There is only one &#34;global&#34; list of factories for all bean mappers. And the last bean mapper being configured always wins.

</field>
</message>

<message>
		<field name="adddate">1299511253</field>
		<field name="user_name">fuzails</field>
		<field name="body">I don't believe it will overwrite it as it uses #putAll so its adding to the known factories not overriding them.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1299510822</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1299510749</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1299510749</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Configurations of multiple mappers interfers with each other</field>
		<field name="entrydate">1299510644</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3176468</field>
	<field user_id="3233886" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">String to String conversion</field>
	<field name="open_date">1297257694</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">why assertEquals(&#34;test&#34;, mapper.map(&#34;test&#34;, String.class)) fails ?
</field>
</artifact>
<artifact>
	<field name="artifact_id">3023375</field>
	<field user_id="1732619" name="submitted_by">chromy96</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">8</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">List object's property is duplicated instead of updated</field>
	<field name="open_date">1277905925</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Class A has list of B objects. B has a reference to C. Exactly the same structure is for ADTO, BDTO and CDTO classes. If we map A to ADTO and then try to map back using mapper.map(aDto, a), object of type C (and any other that B has reference to) will be created instead of updated.

This presents a problem if e.g. the object we're trying to update are JDO enhanced. If this structure (A,B,C) is read from the database, mapped to the dto objects (ADTO, BDTO, CDTO), updated on the front end and mapped back to original objects in order to update them, creating new object(s) instead of updating an old one will result in a row(s) being added in the database instead of updated, once we try to persist the updated structure.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1297168615</field>
		<field name="mod_by">chromy96</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1297168615</field>
		<field name="mod_by">chromy96</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129554</field>
		<field name="entrydate">1289566601</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">378834: dozertest.zip</field>
		<field name="entrydate">1277905925</field>
		<field name="mod_by">chromy96</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3171934</field>
	<field user_id="3226575" name="submitted_by">lmolinero</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">creation of empty objects when source sub-property is null</field>
	<field name="open_date">1296762636</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">I'll try to explain the issue using an example.
lets say i have 2 objects called Parent and Child
Object Parent contains an object Child

and i want to map them to another 2 classes: ParentDTO and ChildDTO.

here is my mapping: (Child maps directly to ChildDTO, no need to define any mapping)

  &#60;mapping map-null=&#34;true&#34;&#62;
        &#60;class-a&#62;Parent&#60;/class-a&#62;
        &#60;class-b&#62;ParentDto&#60;/class-b&#62;
        &#60;field&#62;
            &#60;a&#62;child&#60;/a&#62;
            &#60;b&#62;childDTO&#60;/b&#62;
        &#60;/field&#62;
        &#60;field&#62;
         	&#60;a&#62;childName&#60;/a&#62;
        	&#60;b&#62;childDTO.name&#60;/b&#62;
        &#60;/field&#62;
  &#60;/mapping&#62;

if I do this:

/* java code */

Parent parent = new Parent();
// this means that parent.getChild() returns null and parent.getChildName() also returns null

ParentDTO parentDto = (ParentDTO)  dozer.map(parent, ParentDTO.class);

/* end of java code */

I expected that parentDto.getChildDTO() would be null, but it is not!!! it turns out that dozer creates an empty ChildDTO object (all its properties null).

I have been debugging this, and I found where the problem is:

when dozer is trying to map childName to childDTO.name it ends up calling this method

writeDeepDestinationValue(.....)  of the GetterSetterPropertyDescriptor class.

in this method the hierarchy is resolved and then if it's necessary the objects in the hierarchy are created (in this case a ChildDTO object) by executing this line

o = DestBeanCreator.create(clazz);

That seams perfectly fine, but in this case the source object is NULL

I think that it would be better if dozer creates the necessary object in the hierarchy only if the source object is not null.

I known that if i use  map-null=&#34;false&#34; the problem is solve, but i need it in my particular mapping. I've solved my the problem by using one-way mapping.
I would be nice if a could set the map-null property to the &#60;field&#62; tag.

Thanks.

P.S: hope i'm clear, my english might not be the best



</field>
</artifact>
<artifact>
	<field name="artifact_id">3169878</field>
	<field user_id="3148947" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">objectId strange behavior</field>
	<field name="open_date">1296585807</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I have a strange behavior when using a property called objectId
net.sf.dozer.util.mapping.MappingException: Exception occurred determining deep field hierarchy for Class --&#62; com....MyClass, Field --&#62; objectId.id.  Unable to determine property descriptor for Class --&#62; com.j...MyClass, Field Name: objectId
It only works after a simple renaming.
Does objectId is used for internal processing, or is it a reserved word ?</field>
</artifact>
<artifact>
	<field name="artifact_id">3123689</field>
	<field user_id="3148947" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Add type to API</field>
	<field name="open_date">1291137773</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">The field mapping type is not available at the top-level API

&#60;b set-method=&#34;add(java.lang.Object)&#34; type=&#34;iterate&#34;&#62;anything&#60;/b&#62;</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1296585492</field>
		<field name="user_name"></field>
		<field name="body">The use case was the equivalent of the xml shown, for collections direct mapping (without loop).</field>
</message>

<message>
		<field name="adddate">1293794786</field>
		<field name="user_name">buzdin</field>
		<field name="body">sorry, not fixed. I simply added iterate() feature to programmatic API.
I have certain doubts regarding the feature you are requesting. What is the use case behind? Is it a bean with only iterable collection fields?

.fields(
            field(&#34;integers&#34;),
            field(&#34;strings&#34;).iterate().setMethod(&#34;addString&#34;),
           hintB(String.class)
);</field>
</message>

<message>
		<field name="adddate">1293794582</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1293794786</field>
		<field name="entrydate">1296585492</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1296585492</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1293794582</field>
		<field name="entrydate">1293794786</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">0</field>
		<field name="entrydate">1293794786</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1293794786</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293794786</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1293794786</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1293794582</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293794582</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1323099</field>
		<field name="entrydate">1293794582</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1293794582</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293794582</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">394859: TypeMappingBuilder.java</field>
		<field name="entrydate">1291139839</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">394858: FieldDefinition.java</field>
		<field name="entrydate">1291139820</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3153579</field>
	<field user_id="3191821" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Spring integration of custom converters does not work.</field>
	<field name="open_date">1294570854</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">I tried the custom converter integration with Spring but I cannot make it work. The patch in attachment highlights the problem.

I am willing to implement the correction if necessary. But so far I do not see how to do so that the injected custom converter is returned by MappingProcessor.getClassMap(...);</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1294932157</field>
		<field name="user_name">fuzails</field>
		<field name="body">I believe the problem is that you haven't told dozer to use your custom converter. 
You need to add it to a mapping file first, since your test is converting Strings rather than objects you will need to specify it as part of the global configuration.

check the documentation here:
http://dozer.sourceforge.net/documentation/customconverter.html
and
http://dozer.sourceforge.net/documentation/globalConfiguration.html

I use Spring injected custom converters heavily in my project and they do work as expected.
Regards
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">398061: eclipse-patch.txt</field>
		<field name="entrydate">1294570854</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3150423</field>
	<field user_id="3184793" name="submitted_by">rramakrishnan</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Invalid mapping files causes DozerBeanMapper to keep waiting</field>
	<field name="open_date">1294073412</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Steps to reproduce :
A singleton DozerBeanMapper is instantiated . And an invalid mapping file is available for loading via the DozerBeanMapper::setMappingFiles() call..
When the mapper is invoked for object conversion, the mapper keeps waiting ..

Question :
Is this behavior normal ?. Can the mapper check for the validity of mapping files while instantiating the Mapper itself ?

Pls. advise.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1294162538</field>
		<field name="user_name">rramakrishnan</field>
		<field name="body">I noticed the thread hang for duplicate mappings as well.</field>
</message>

<message>
		<field name="adddate">1294135189</field>
		<field name="user_name">buzdin</field>
		<field name="body">This thread hanging behavior is fixed in 5.3.2, which is not released yet.

Speaking of the initialization sequence - you are right. Some validation is done only on first mapping. This should be fixed, lets keep this ticket open.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1294135189</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1323099</field>
		<field name="entrydate">1294135189</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1294135189</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3148148</field>
	<field user_id="1196389" name="submitted_by">lordorient</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer does not work well with ehcache-spring-annotations</field>
	<field name="open_date">1293715917</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">There is a nice sample of how to get dozer custom mappers from spring context:
http://stackoverflow.com/questions/4390178/dozer-custom-converter-id-mapping-object-to-long-and-long-to-object-via-dozercon
but it does not work if Converter is annotated with http://code.google.com/p/ehcache-spring-annotations/ annotations.
My guess is that Dozer relies on class names while searching for Converter, but  ehcache-spring-annotations produce aop proxies, that are not mached by Dozer.</field>
</artifact>
<artifact>
	<field name="artifact_id">3120533</field>
	<field user_id="3144017" name="submitted_by">tomatetomate</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Polymorphism and exclude include field</field>
	<field name="open_date">1290859940</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hello !
 I think there is a bug here.
Class A
{
 field;
}
Class B extends A
{
}

If i map as following :
&#60;mapping&#62;
	&#60;class-a&#62;A&#60;/class-a&#62;
	&#60;class-b&#62;A&#60;/class-b&#62;
	
	&#60;field&#62;
		&#60;a&#62;field&#60;/a&#62;
		&#60;b&#62;field&#60;/b&#62;
	&#60;/field&#62;
&#60;/mapping&#62;


&#60;mapping&#62;
	&#60;class-a&#62;B&#60;/class-a&#62;
	&#60;class-b&#62;B&#60;/class-b&#62;
	
	&#60;field-exclude&#62;
		&#60;a&#62;field&#60;/a&#62;
		&#60;b&#62;field&#60;/b&#62;
	&#60;/field-exclude&#62;
&#60;/mapping&#62;

When I process dozer for B, it will get the field. This is due to org.dozer.MappingProcessor.processSuperTypeMapping() function who is called before the mapping of class B and get the field of super class A. Peraps, after you the processSuperTypeMapping you delete the field in the child class, but with hibernate proxy, this cause a BDD request (and in my case, a stackoverflow exception).

Thanks for your work !</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1291044594</field>
		<field name="user_name">tomatetomate</field>
		<field name="body">I use org.dozer.util.HibernateProxyResolver enabled in dozer.properties.
To solve my problem, I write a mapping file for all my classes, and In the source of dozer, I remove org.dozer.MappingProcessor.processSuperTypeMapping() function.</field>
</message>

<message>
		<field name="adddate">1291029949</field>
		<field name="user_name">buzdin</field>
		<field name="body">please check if you are using Hibernate-specific proxy resolver and report your results.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3118958</field>
	<field user_id="3144017" name="submitted_by">tomatetomate</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">StackOverflowError width hibernate proxy</field>
	<field name="open_date">1290730396</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hello !
I have un problem, I think it's a bug of Dozer :

Class A
{

	C c;

}

Class B 
{
	A a;		
}

class C
{
	B b;	
}

A a=new A();
B b=new B();
C c=new C();

a.setC(c);
b.setA(a);
C.setB(b);

When i process Dozer for a, I have the stackoverflow.
Notice : all the fields are proxified by hibernate.

The problem is the object returned by the HibernateProxyResolver contain a proxyfied object too.

Here the stack trace:

org.dozer.MappingException: java.lang.StackOverflowError
	at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:88)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:282)

How can I resolve this problem?</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1294405123</field>
		<field name="user_name">buzdin</field>
		<field name="body">tried to reproduce with a clean test using both Javassist and CGlib and failed :(
Do you have an isolated test case?</field>
</message>

<message>
		<field name="adddate">1291044401</field>
		<field name="user_name">tomatetomate</field>
		<field name="body">Yes, I use org.dozer.util.HibernateProxyResolver enabled in dozer.properties</field>
</message>

<message>
		<field name="adddate">1291029745</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hello,

Did you enable HibernateProxyResolver as described here http://dozer.sourceforge.net/documentation/proxyhandling.html?

Dmitry</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2927625</field>
	<field user_id="2762308" name="submitted_by">fdankof</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping hierarchy with abstract base class</field>
	<field name="open_date">1262879468</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">When mapping a class hirarchy with an abstract base class (e.g. List to List), an InstantiationException
occurs, because the mapper always assumes the base class as destination type.

Relatet issues seem to be the following:

1. Dest-hints are overwritten by generic type even though there are
hints present:

To solve it replace 
if (genericType != null) {
with
if (fieldMap.getDestHintContainer == null &#38;&#38; genericType != null) {

in MappingProcessor.mapCollection()

2. Instantiation of abstract classes:

Don't permit instantiation of abstract class

Related Bugs:

Bug #2794873 
Bug #2889666 </field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1289566764</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2975880</field>
	<field user_id="2855175" name="submitted_by">schudel7556</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">4</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">setCustomConverters(..) not working</field>
	<field name="open_date">1269436516</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">When i program a customconverter based on the DozerConverter&#60;String, MyEnumType&#62;, and place it in the &#60;configuration&#62;&#60;custom-converters&#62;..&#60;/&#62;&#60;/&#62; section of the dozer bean mappings, the custom converter works fine, without me needing to define it on a field level in the bean mappings.

However, I prefer to set the customConverter through the setCustomConverters(List) method on the DozerBeanMapper (so I can inject Spring beans). In this case, the custom converter is not used at all, resulting in a &#34;illegal object type&#34; exception!

I thought the &#34;setCustomConverters&#34; method did essentially the same as defining the &#60;custom-converter&#62; section in the dozer bean mappings? Or am I mistaken?</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283514492</field>
		<field name="user_name">buzdin</field>
		<field name="body">Current implementation is so that setCustomConverter should be used together with its Xml definition. This is done because by simply adding custom converter instance you do not say to which type pairs it is applied. If there is a converter instance provided dozer will use it , otherwise default constructor will be called during each conversion.</field>
</message>

<message>
		<field name="adddate">1281452892</field>
		<field name="user_name">controlix</field>
		<field name="body">I'm facing the same problem.

Going through the source code, I see that the custom converters are totally ignored in the MappingProcessor when looking for a converter for fields.

Being able to inject the custom converters through Spring is a great advantage to having to define them statically in the mapping file. However the injected converters seem to be ignored.</field>
</message>

<message>
		<field name="adddate">1276245708</field>
		<field name="user_name">mraben</field>
		<field name="body">We have a project with many modules, because of configuration dependency problems i
would prefer to set &#34;customConverter through the setCustomConverters(List) method on the DozerBeanMapper&#34;, the way schudel7556 said.

This would be good for unit testing, too!

I don't get any Exception, because in MappingProcessor
in the following method &#34;classMap.getCustomConverters()is already null.
MappingProcessor:
private &#60;T&#62; T map(final Object srcObj, final Class&#60;T&#62; destClass, final T destObj, final String mapId) {
..
..
      Class&#60;?&#62; converterClass = MappingUtils.findCustomConverter(converterByDestTypeCache, classMap.getCustomConverters(), srcObj
...
}

-------
Here is my unit test method:

final BooleanHolder holder = new BooleanHolder();
holder.setDeleted(Boolean.FALSE);

final DozerBeanMapper mapper = new DozerBeanMapper();
final List&#60;CustomConverter&#62; customConverters = new ArrayList&#60;CustomConverter&#62;();
customConverters.add(new BooleanConverter());
mapper.setCustomConverters(customConverters);

final BooleanHolder holder2 = mapper.map(holder, BooleanHolder.class);
assertEquals(holder.isDeleted(), holder2.isDeleted());


Here is the class definition of my customconverter:
public class BooleanConverter implements CustomConverter</field>
</message>

<message>
		<field name="adddate">1270638276</field>
		<field name="user_name">buzdin</field>
		<field name="body">Could you provide an exception stack trace. In general setting Converter from API should be backed up by definition in &#60;configuration&#62; with the difference that you can inject instantiated beans with dependencies.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129554</field>
		<field name="entrydate">1289566737</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1283514492</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">929386</field>
		<field name="entrydate">1273698235</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273698235</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3020955</field>
	<field user_id="2966271" name="submitted_by"></field>
	<field user_id="2912290" name="assigned_to">hedget</field>
	<field name="priority">9</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer can't find read/write methods for inherited methods.</field>
	<field name="open_date">1277404199</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">No read or write method found for field (object.number) in class (class com.usetrans.partsmanager.server.domain.PartData)
org.dozer.MappingException: No read or write method found for field (object.number) in class (class com.usetrans.partsmanager.server.domain.PartData)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.determinePropertyType(GetterSetterPropertyDescriptor.java:280)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.getPropertyType(GetterSetterPropertyDescriptor.java:62)
	at org.dozer.fieldmap.FieldMap.getSrcFieldType(FieldMap.java:118)
	at org.dozer.loader.MappingsParser.processMappings(MappingsParser.java:102)
	at org.dozer.loader.CustomMappingsLoader.load(CustomMappingsLoader.java:65)
	at org.dozer.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:153)
	at org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:136)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:96)
	at com.usetrans.partsmanager.server.service.LocalizedObjectService.save(LocalizedObjectService.groovy:71)
	at com.usetrans.partsmanager.server.service.LocalizedObjectService$$FastClassByCGLIB$$4d1b6c7e.invoke(&#60;generated&#62;)
	at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
	at com.usetrans.partsmanager.server.service.PartsService$$EnhancerByCGLIB$$75c7090a.save(&#60;generated&#62;)
	at com.usetrans.partsmanager.server.service.LocalizedObjectService$save.call(Unknown Source)
	at PartsServiceTests.testCreateNewDTO(PartsServiceTests.groovy:18)

dozermapping.xml:
  &#60;mapping&#62;
    &#60;class-a&#62;com.usetrans.partsmanager.server.domain.PartData&#60;/class-a&#62;
    &#60;class-b&#62;com.usetrans.partsmanager.shared.dto.PartDTO&#60;/class-b&#62;
    &#60;field type=&#34;one-way&#34;&#62;
      &#60;a&#62;object.id&#60;/a&#62;
      &#60;b&#62;id&#60;/b&#62;
    &#60;/field&#62;
    &#60;field&#62;
      &#60;a&#62;object.number&#60;/a&#62;
      &#60;b&#62;number&#60;/b&#62;
    &#60;/field&#62;
    &#60;!--
    &#60;field&#62;
      &#60;a&#62;object.tnved&#60;/a&#62;
      &#60;b&#62;tnved&#60;/b&#62;
    &#60;/field&#62;
    &#60;field&#62;
      &#60;a&#62;object.okp&#60;/a&#62;
      &#60;b&#62;okp&#60;/b&#62;
    &#60;/field&#62;
    --&#62;
  &#60;/mapping&#62;</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1277404274</field>
		<field name="user_name"></field>
		<field name="body">Java classes attached...</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129554</field>
		<field name="entrydate">1289566684</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1278486549</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1277404329</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">378296: Classes.zip</field>
		<field name="entrydate">1277404199</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3102861</field>
	<field user_id="3117547" name="submitted_by">jeroenwolff</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Xmlbeans Array's</field>
	<field name="open_date">1288872016</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">Hi, i like dozer a lot!!

Now i'm trying to map a HashMap to a XmlBeans Document.

So far so good.

This is my mapping file:

	&#60;mapping wildcard=&#34;false&#34;&#62;
		&#60;class-a&#62;xmlgeneratie.dozervariant.GomXML&#60;/class-a&#62;
		&#60;class-b bean-factory=&#34;org.dozer.factory.XMLBeanFactory&#34;&#62;namespace.een.zommaar.ShiporderDocument&#60;/class-b&#62;

		&#60;field&#62;
			&#60;a key=&#34;code1&#34;&#62;xmlmap&#60;/a&#62;
			&#60;b&#62;shiporder.orderid&#60;/b&#62;
		&#60;/field&#62;
		&#60;field&#62;
			&#60;a key=&#34;code2&#34;&#62;xmlmap&#60;/a&#62;
			&#60;b&#62;shiporder.orderperson&#60;/b&#62;
		&#60;/field&#62;
		&#60;field&#62;
			&#60;a key=&#34;code2&#34;&#62;xmlmap&#60;/a&#62;
			&#60;b&#62;shiporder.shipto.name&#60;/b&#62;
		&#60;/field&#62;
		&#60;field&#62;
			&#60;a key=&#34;code3&#34;&#62;xmlmap&#60;/a&#62;
			&#60;b&#62;shiporder.itemarray[0].note&#60;/b&#62;
		&#60;/field&#62;
		&#60;field&#62;
			&#60;a key=&#34;code3&#34;&#62;xmlmap&#60;/a&#62;
			&#60;b&#62;shiporder.itemarray[0].note&#60;/b&#62;
		&#60;/field&#62;


The last field i have to put in twice otherwise the note property is not set. 

Is it correct to use itemarray[0] ? 

If i only put in the field once i get &#60;item/&#62; and if i put in the field mapping two times i get
&#60;code&#62;
&#60;item&#62;
  &#60;note&#62;value3&#60;/note&#62;
&#60;item&#62;
&#60;/code&#62;

Do i something wrong? Or is it a bug....


Regards,

Jeroen Wolff</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1288872060</field>
		<field name="mod_by">jeroenwolff</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Xmlbean Array's</field>
		<field name="entrydate">1288872047</field>
		<field name="mod_by">jeroenwolff</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3093903</field>
	<field user_id="2909883" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">JaxB : Nested / Indexed field-exclude doesn't work</field>
	<field name="open_date">1287869888</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">I am copying from same type of JaxB generated object to another, and want to exclude some properties, which are nested as well as indexed.

The following works:

&#60;mapping&#62;
		&#60;class-a bean-factory=&#34;org.dozer.factory.JAXBBeanFactory&#34;&#62;xxx.Document&#60;/class-a&#62;
		&#60;class-b bean-factory=&#34;org.dozer.factory.JAXBBeanFactory&#34;&#62;xxx.Document&#60;/class-b&#62;
		&#60;field-exclude&#62; 
		  &#60;a&#62;cstmrCdtTrfInitn&#60;/a&#62; 
		  &#60;b&#62;cstmrCdtTrfInitn&#60;/b&#62; 
		&#60;/field-exclude&#62;       
	&#60;/mapping&#62;

But this doesn't:

&#60;mapping&#62;
		&#60;class-a bean-factory=&#34;org.dozer.factory.JAXBBeanFactory&#34;&#62;xxxx.Document&#60;/class-a&#62;
		&#60;class-b bean-factory=&#34;org.dozer.factory.JAXBBeanFactory&#34;&#62;xxxx.Document&#60;/class-b&#62;
		&#60;field-exclude&#62; 
		  &#60;a&#62;cstmrCdtTrfInitn.grpHdr.ctrlSum[0].abc&#60;/a&#62; 
		  &#60;b&#62;cstmrCdtTrfInitn.grpHdr.ctrlSum[0].abc&#60;/b&#62; 
		&#60;/field-exclude&#62;       
	&#60;/mapping&#62;</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1287994349</field>
		<field name="user_name">buzdin</field>
		<field name="body">Looks like a bug (read missing feature) with field-exclude and indexed properties. This is not a common case. I would not expect the fix being easy as field exclusion is a problematic functionality. There is a redesign pending for field-exclude feature, but I can not promise any date now. The best thing you could do for the starters is to attach to the issue a failing unit test patch against Dozer trunk. This will save some time on reproducing the issue. If you will have idea on how to fix that as well you are welcome to share it.</field>
</message>

<message>
		<field name="adddate">1287869963</field>
		<field name="user_name"></field>
		<field name="body">Please let me know, if I can help out resolving this somehow.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1287869923</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1287869923</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3086708</field>
	<field user_id="562259" name="submitted_by">cbourque1</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Exception on duplicate mappings</field>
	<field name="open_date">1286982363</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">The new behavior of Dozer for duplicate mappings is to throw an exception when one is found (java.lang.IllegalArgumentException).

I don't think this is right since a duplicate mapping is sometimes necessary when you need to redefine hints of a specific field (it is also not backward compatible with the previous release)...

Ref. Feature Request ID: 2931921</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1346934170</field>
		<field name="user_name">uwe_ewald</field>
		<field name="body">In a multi-thread runtime environment such as a servlet engine, two threads could add the same mapping even if only one configuration is used.

The code in MappingProcessor::getClassMap allows this.

To fix it, the null check should use a synchronized block:


if (mapping == null) {
  synchronized (this) {
    if (mapping == null) {
      ClassMap m = ClassMapBuilder.createDefaultClassMap(etc.
      classMappings.add(srcClass, desClass, m);
      mapping = m;
    }
  }
}</field>
</message>

<message>
		<field name="adddate">1287586552</field>
		<field name="user_name">buzdin</field>
		<field name="body">but that would mean when you start Spring context you can not rollback to generic version of the mapping. If this is true I see it as more configuration/build script task to put the right set of mappings in the classpath.</field>
</message>

<message>
		<field name="adddate">1287497451</field>
		<field name="user_name">cbourque1</field>
		<field name="body">No we only have one instance of Dozer which is bootstrapped by Spring with two configuration files, the first one is the generic one and the second one is the specialized one... In my case I can't use map-id because the code part that does the call to Dozer doesn't know that it should use a different mapping...</field>
</message>

<message>
		<field name="adddate">1287491016</field>
		<field name="user_name">buzdin</field>
		<field name="body">Does it mean that you create a new instance of DozerBeanMapper for each request? It could be done configurable of course. But the behavior is not predictable. Overrides are resolved based on the sequence of loaded mappings. If you are using masked loading of Dozer mappings, say load by mask &#34;*.dozer.xml&#34; you can not really predict what is overriding what.

For the cases you describe we have map-id feature. We can define as many different mappings as you want and manipulate the process by passing right Strning id as third parameter to map() method. Let me know if this solves your problem and we could close this issue.</field>
</message>

<message>
		<field name="adddate">1287443599</field>
		<field name="user_name">cbourque1</field>
		<field name="body">Well I have this use case: 

We have this application that have a generic core and specialized implementations for different clients. For the generic part we have a mapping file to convert all of our JPA entities to DTOs and vice versa using Dozer. For a specific implementation we sometimes need to override the default mapping with a specialized one to specify additional informations like for instance:

Default Mapping:
&#60;mapping&#62;
  &#60;class-a&#62;AEntity&#60;/class-a&#62;
  &#60;class-b&#62;ADto&#60;/class-b&#62;
  &#60;field&#62;
    &#60;a&#62;someList&#60;/a&#62;
    &#60;b&#62;someList&#60;/b&#62;
    &#60;a-hint&#62;BEntity&#60;/a-hint&#62;
    &#60;b-hint&#62;BDto&#60;/b-hint&#62;
  &#60;/field&#62;
&#60;/mapping&#62;

Specialized Mapping:
&#60;mapping&#62;
  &#60;class-a&#62;AEntity&#60;/class-a&#62;
  &#60;class-b&#62;ADto&#60;/class-b&#62;
  &#60;field&#62;
    &#60;a&#62;someList&#60;/a&#62;
    &#60;b&#62;someList&#60;/b&#62;
    &#60;a-hint&#62;BEntity, CEntity&#60;/a-hint&#62;
    &#60;b-hint&#62;BDto, CDto&#60;/b-hint&#62;
  &#60;/field&#62;
&#60;/mapping&#62;

The new mapping is almost identical to the original except for the hint list which is valid in our case...

Perhaps the new &#34;behavior&#34; could be configurable?

Thanks
</field>
</message>

<message>
		<field name="adddate">1287127208</field>
		<field name="user_name">buzdin</field>
		<field name="body">The duplication functionality was in Dozer long before. However due to the bug it only checked duplicates in one Xml file. Now it checks cross all files, which is more correct. If you put two mappings to the same class pair and map-id the second one will *replace* the first one. It is a Map-based cache. This results in silent bugs where, by accident, one mapping replaces previous one.

Question is how do you make use of duplicate mappings if old ones are removed?</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3086678</field>
	<field user_id="562259" name="submitted_by">cbourque1</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">bug in TypeResolver with generics / inheritance</field>
	<field name="open_date">1286979818</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">Unfortunately the problem is still there when using &#34;is-accessible=true&#34;!

Ref. Bug ID: 2919659
</field>
</artifact>
<artifact>
	<field name="artifact_id">3023709</field>
	<field user_id="2969737" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">SelfPropertyDescriptor does not set Value</field>
	<field name="open_date">1277974157</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I am using a mapping as defined in the following pseudo code 

&#60;mapping&#62;
  &#60;class-a&#62;A&#60;/class-a&#62;
  &#60;class-b&#62;B&#60;/class-b&#62;
  ... 
  &#60;field custom-converter=&#34;myCustomConverter&#34;&#62;
  &#60;a&#62;this&#60;/a&#62; 
  &#60;b&#62;message&#60;/b&#62;  
  &#60;/field&#62;
  ... 
&#60;/mapping&#62;

Executing the mapping from A-&#62;B works well. The other way round (B--&#62;A), just a new instance of a is created having its properties set null. The myCustomConverter works delivers the expected results for both directions. So I debugged the Dozer code an tracked the problem down to the SelfPropertryDescriptor.setPropertyValue() - lines 30-32 in current trunk http://dozer.svn.sourceforge.net/viewvc/dozer/trunk/core/src/main/java/org/dozer/propertydescriptor/SelfPropertyDescriptor.java?revision=1047&#38;view=markup. The argument bean carries the newly instantiated object and the argument value would carry the correct value. Thus, setting bean to value would deliver the correct results. However, the method body does nothing. (// do nothing). </field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1283513959</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">379848: DozerSelfPropertyDescriptor-Bug3023709-TestProject.zip</field>
		<field name="entrydate">1278950803</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3047148</field>
	<field user_id="3025538" name="submitted_by">phanirocks</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">4</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Configuration file for the custom XMLBean</field>
	<field name="open_date">1282066230</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">Hello,

I have a xsd like :
&#60;xsd:complexType name=&#34;myType&#34;&#62;
   &#60;xsd:sequence&#62;
         &#60;xsd:element name=&#34;demo&#34; type=&#34;DemoType&#34; minOccurs=&#34;0&#34; maxOccurs=&#34;unbounded&#34;/&#62;
   &#60;/xsd:sequence&#62;
&#60;/xsd:complexType&#62;

&#60;xsd:complexType name=&#34;DemoType&#34;&#62;
   &#60;xsd:sequence&#62; 
       &#60;xs:element name=&#34;patient_firstName&#34; type=&#34;xsd:string&#34; minOccurs=&#34;0&#34; maxOccurs=&#34;unbounded&#34;/&#62;
   &#60;/xsd:sequence&#62;
&#60;/xsd:complexType&#62;

Config File:

&#60;mapping wildcard=&#34;false&#34;&#62;
		&#60;class-a bean-factory=&#34;org.dozer.factory.XMLBeanFactory&#34;&#62;
			com.ndorange.cos.xml.medplexus.medicalRecord.types.myType
		&#60;/class-a&#62;
		&#60;class-b bean-factory=&#34;org.dozer.factory.XMLBeanFactory&#34;&#62;
			com.ndorange.cos.xml.medicalRecord.types.DemoType1
  		&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;myType.DemoType.gender&#60;/a&#62;
			&#60;b&#62;firstName&#60;/b&#62;
		&#60;/field&#62;
		&#60;field&#62;
			&#60;a&#62;myType.DemoType.religion&#60;/a&#62;
			&#60;b&#62;citizenship&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;

Is the configuration file fine?


Thank you in advance.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283513908</field>
		<field name="user_name">buzdin</field>
		<field name="body">Please give us a bit more details. Why do you think that mapping is wrong? Is there an exception or some particular fields are not mapped?</field>
</message>

<message>
		<field name="adddate">1282066322</field>
		<field name="user_name">phanirocks</field>
		<field name="body">I am using XML Bean Factory to generate beans.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1283513920</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2791828</field>
	<field user_id="2508196" name="submitted_by">olegych</field>
	<field user_id="2418250" name="assigned_to">vadeg</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">Invalid</field>
	<field name="summary">Exception while mapping generic types</field>
	<field name="open_date">1242321430</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Try mapping the following classes with this:
    &#60;mapping&#62;
        &#60;class-a&#62;NewsItemDto&#60;/class-a&#62;
        &#60;class-b&#62;NmlNewsItemsBase&#60;/class-b&#62;
        &#60;field&#62;
            &#60;a&#62;language&#60;/a&#62;
            &#60;b&#62;nmlNewsComponentss[0].langId&#60;/b&#62;
        &#60;/field&#62;
    &#60;/mapping&#62;

public class NewsItemDto {
    private String language;
//relevant setters and getters
}
public abstract class NmlNewsComponentsBase {
 private String langId;
}
public class NmlNewsComponents extends NmlNewsComponentsBase{
}
public class NmlNewsItems extends NmlNewsItemsBase&#60;NmlNewsComponents&#62; {
}
public abstract class NmlNewsItemsBase&#60;NCT extends NmlNewsComponentsBase&#62; {
//relevant setters and getters
    public Set&#60;NCT&#62; getNmlNewsComponentss() {
        return this.nmlNewsComponentss;
    }
}

You will get this exception:
java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.TypeVariableImpl cannot be cast to java.lang.Class
	at org.dozer.util.ReflectionUtils.determineGenericsType(ReflectionUtils.java:311)
	at org.dozer.util.ReflectionUtils.determineGenericsType(ReflectionUtils.java:283)
	at org.dozer.util.ReflectionUtils.getDeepFieldHierarchy(ReflectionUtils.java:103)
	at org.dozer.util.ReflectionUtils.findPropertyDescriptor(ReflectionUtils.java:50)
	at org.dozer.propertydescriptor.JavaBeanPropertyDescriptor.getPropertyDescriptor(JavaBeanPropertyDescriptor.java:74)
	at org.dozer.propertydescriptor.JavaBeanPropertyDescriptor.getReadMethod(JavaBeanPropertyDescriptor.java:60)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.determinePropertyType(GetterSetterPropertyDescriptor.java:294)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.getPropertyType(GetterSetterPropertyDescriptor.java:69)
	at org.dozer.fieldmap.FieldMap.getDestFieldType(FieldMap.java:112)
	at org.dozer.loader.MappingsParser.processMappings(MappingsParser.java:104)
	at org.dozer.loader.CustomMappingsLoader.load(CustomMappingsLoader.java:91)
	at org.dozer.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:149)
	at org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:132)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:94)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1281122686</field>
		<field name="user_name">vadeg</field>
		<field name="body">I don't have error as yours. It seems, that because I fixed 2919659 some hours ago.</field>
</message>

<message>
		<field name="adddate">1281122613</field>
		<field name="user_name">vadeg</field>
		<field name="body">I didn't get it to work. The mapping is wrong. Dozer can't deal with &#60;b&#62;nmlNewsComponentss[0].langId&#60;/b&#62;</field>
</message>

<message>
		<field name="adddate">1262473191</field>
		<field name="user_name">buzdin</field>
		<field name="body">could be related to 2919659 </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1281122720</field>
		<field name="mod_by">vadeg</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262473191</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3039968</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Concurrency Bug in case of injected converters</field>
	<field name="open_date">1281007614</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">In case converter is injected and is implementing MapperAware or Configurable interface there is an opportunity for concurrency bug as explained in forum thread here : https://sourceforge.net/projects/dozer/forums/forum/452529/topic/3794928/index/page/1</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1322586907</field>
		<field name="user_name">javiercanillas</field>
		<field name="body">Well, I found myself with the same problem. I have downloaded the code and
 start to dig on it. It seems that both MapperAware and
 ConfigurableCustomConverter introduce this undessire behaviour.
 What I did (I am submitting a patch) was:
 * Remove those both interfaces
 * Added Mapper and Parameters as part of the public convert method of
 CustomConverter.
 * Modified MappingProcessor.mapUsingCustomConverterInstance to pass through
 this new variables as method parameters.
 
This will obviously push to some code changes on client customerConverters,
 but will avoid the concurrency problem.
 
Well, I have created a new issue and submitted the patch there. See ID: 3445344</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1163967</field>
		<field name="entrydate">1289566637</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1283513944</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3039233</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Array Instantiation does not work</field>
	<field name="open_date">1280907168</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">    List&#60;String&#62; list = new ArrayList&#60;String&#62;();
    Integer[] result = mapper.map(list, Integer[].class);

Code as simple as that results in :
org.dozer.MappingException: java.lang.NoSuchMethodException: [Ljava.lang.Integer;.&#60;init&#62;()
	at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:88)
	at org.dozer.factory.ConstructionStrategies$ByConstructor.newInstance(ConstructionStrategies.java:248)
	at org.dozer.factory.ConstructionStrategies$ByConstructor.create(ConstructionStrategies.java:232)
	at org.dozer.factory.DestBeanCreator.create(DestBeanCreator.java:66)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:176)

Forum thread : https://sourceforge.net/projects/dozer/forums/forum/452530/topic/3793489</field>
</artifact>
<artifact>
	<field name="artifact_id">3033577</field>
	<field user_id="64829" name="submitted_by">ogerardin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">default should be non-cumulative and remove-orphans</field>
	<field name="open_date">1279892960</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">When mapping object A to B, the expected behaviour (and the whole raison d'&#195;&#170;tre of Dozer) is that after the mapping, object B will be an image of object A.
However, if mapping to an initialized instance of B, collection fields will not be &#34;mapped&#34; but instead all elements from the A side will be added to the B side, which will result in duplicates with default settings..

To achieve proper mirroring, I need to specify relationship-type=non-cumulative (to not add elements already present on the B side) AND remove-orphans=true (to remove elements on the B side that are not present on the A side). This is rather complicated and counterintuitive. I believe the default for the relationship-type and remove-orphans should be respectively non-cumulative and true, OR there should be an simple option to specify that we want mirroring of the collection (not some kind of merging).

Alternately, I can also reset the collection on the B side before invoking Dozer, which is probably more efficient than applying the described settings.

For better understanding, here's my use case: I want to update a hibernate entity from a DTO sent by the client. If the entity doesn't yet exist in the DB, I map to a newly created instance, no problem. But if the entity already exists, I load it and map the DTO to it. And if I don't take precautions, I get duplicates in my entity's collections because all elements from the DTO side are added to the entity side. I would expect the default to be just a simple mirroring of collections, just as with basic types, whether the target instance is initialized or not.
</field>
</artifact>
<artifact>
	<field name="artifact_id">3026568</field>
	<field user_id="2486626" name="submitted_by">stpalazzi</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Excluding fields from super class</field>
	<field name="open_date">1278538159</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Hi
i have ClassA with field1 and field2. In this class there are set and get methods for each fields. I have another ClassB, that extends class A. In the class B there are field3 and field4 and set and get methods.
I want mapping ClassA to ClassADto (thats has field1 and field2) and ClassB to ClassBDto (thats has field3 and field4) where ClassBDto extends ClassADto.
In the file mapping i have this tag:
&#60;mapping map-id=&#34;customMapping&#34;&#62;
   &#60;class-a&#62;ClassB&#60;/class-a&#62;
   &#60;class-b&#62;ClassBDto&#60;/class-b&#62;
      &#60;field-exclude&#62;   		
         &#60;a&#62;field1&#60;/a&#62;
     	 &#60;b&#62;field1&#60;/b&#62;  
      &#60;/field-exclude&#62;
      &#60;field-exclude&#62;   		
         &#60;a&#62;field3&#60;/a&#62;
     	 &#60;b&#62;field3&#60;/b&#62;  
      &#60;/field-exclude&#62;
&#60;/mapping&#62;

I want exclude field1 and field3 from mapping but dozer maps field1 (wrong)  while not field3 (correct).

this is a Bug?</field>
</artifact>
<artifact>
	<field name="artifact_id">3026449</field>
	<field user_id="2980539" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Problem with reflection inflation</field>
	<field name="open_date">1278522790</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">We recently got a problem with an error case where we expected a MappingException but all of a sudden received an IllegalArgumentException instead. The error did not occur on all machines and it seemed to only occur when we ran the whole test suite.

After some hours of debugging and headscratching we finally found out that the problem is with the way reflection hands out MethodAccessors. The default behaviour is to hand out native MethodAccessors for each method the first 15 times and after that it hands out generated accessors and the problem is that the generated accessors throws a ClassCastException wrapped in an IllegalArgumentException and since ReflectionUtils checks the message of the exception to be able to throw a better error message, it fails to handle this case and just re-throws the IllegalArgumentException instead of a MappingException.

This behaviour of reflection can be seen in the ReflectionFactory.newMethodAccessor (line 143 here http://www.docjar.com/html/api/sun/reflect/ReflectionFactory.java.html) and can be forced by -Dsun.reflect.noInflation=true

Here's a solution to the problem (might be a naive solution though since I haven't put much thought into any possible consequences this might have):

diff --git a/core/src/main/java/org/dozer/util/ReflectionUtils.java b/core/src/main/java/org/dozer/util/ReflectionUtils.java
index 14c3489..9eee394 100644
--- a/core/src/main/java/org/dozer/util/ReflectionUtils.java
+++ b/core/src/main/java/org/dozer/util/ReflectionUtils.java
@@ -43,6 +43,7 @@ import java.util.StringTokenizer;
 public final class ReflectionUtils {
 
   private static final String IAE_MESSAGE = &#34;argument type mismatch&#34;;
+  private static final String CCE_MESSAGE = &#34;java.lang.ClassCastException&#34;;
 
   private ReflectionUtils() {}
 
@@ -270,7 +271,7 @@ public final class ReflectionUtils {
       result = method.invoke(obj, args);
     } catch (IllegalArgumentException e) {
 
-      if (e.getMessage().equals(IAE_MESSAGE)) {                
+      if (e.getMessage().equals(IAE_MESSAGE) || e.getMessage().startsWith(CCE_MESSAGE)) {                
         MappingUtils.throwMappingException(prepareExceptionMessage(method, args), e);
       }
       MappingUtils.throwMappingException(e);

I have also attached a file with a failing unit test which shows the problem if run with -Dsun.reflect.noInflation=true</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">379440: InvalidRecursiveTypeTest.tar.gz</field>
		<field name="entrydate">1278522790</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1877216</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">is-accessible=&#34;true&#34; not work with factory on field</field>
	<field name="open_date">1201003827</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">Hellu,

Sorry, but found another one:

I have a object A that contains a reference interface B.
Something like:
interface A {
  B getB();
}

and implementation class of B:
class Bimpl implements B {
  private someField;
}

The mapping for B:
&#60;mapping wildcard=&#34;true&#34;&#62;
  &#60;class-a&#62;B&#60;/class-a&#62;
  &#60;class-b&#62;BDto&#60;/class-b&#62;
    &#60;field&#62;
     &#60;a is-accessible=&#34;true&#34;&#62;someField&#60;/a&#62;
     &#60;b is-accessible=&#34;true&#34;&#62;someField&#60;/b&#62;
    &#60;/field&#62;
&#60;/mapping&#62;

We are mapping Adto to A. Adto is an implementation class, has no interface, just like BDto and contains an reference to Bdto. And this his what happens:

Dozer will encounter B reference in A and will ask the factory for an instance. It will receive BImpl and continues to map the content of BDto to BImpl. However, it will skip the field someField.....  :(

So after it receives and instance from the factory, it isgnores the mapping information appearantly....

If I directly map Bdto to BImpl, such that the factory isn't asked for a instance, it will work fine and it doesn't skip the field.

Hope you post enought information.
If not, please let me know.
Ed</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1277402940</field>
		<field name="user_name">buzdin</field>
		<field name="body">setting priority to high</field>
</message>

<message>
		<field name="adddate">1216286580</field>
		<field name="user_name">edbras</field>
		<field name="body">Logged In: YES 
user_id=531357
Originator: YES

A little remark:

I tried to patch it (was working with a patched version already anyway) and noticed that it's a bit of a chicken-egg problem: The factorymethod to create the object is retrieved from the classMap in the method DestBeanCreator.create. However this method is needed to determine the correct implementation class, that is need during the creation of the classMap :(... (in the method MappingProcessor.mapCustomObject....</field>
</message>

<message>
		<field name="adddate">1216254785</field>
		<field name="user_name">edbras</field>
		<field name="body">Logged In: YES 
user_id=531357
Originator: YES

To be more precise about the last remark:
Dozer should first use the factory to create the actual class, and use this created class to construct the classMap in the MappingProcessor, instead first creating the classMap from the encountered field Type which is the interface and then use the factory to creat the target....</field>
</message>

<message>
		<field name="adddate">1216254589</field>
		<field name="user_name">edbras</field>
		<field name="body">Logged In: YES 
user_id=531357
Originator: YES

Did some more debugging and find a workaround for the problem:
In the mapping from Adto to A define the implementation class in the field mapping B as a hint. 
Dozer will then use this class instead of the interface that it encounters and makes the proper classMap against the implementation class. Otherwise it will use the interface to try to access the property someField directly (without getter/setter) which is ofcourse bogus for an interface.
What dozer should do: get the implementation class B from the factory and use that, just like it does for interface A. Appearantly dozer doesn't use the factory for a field mapping of the class.
</field>
</message>

<message>
		<field name="adddate">1216252230</field>
		<field name="user_name">edbras</field>
		<field name="body">Logged In: YES 
user_id=531357
Originator: YES

Hmmm encountered the problem again with another class, but with the same problem...
Any idea when it's solved ?</field>
</message>

<message>
		<field name="adddate">1202727544</field>
		<field name="user_name">maxxyme</field>
		<field name="body">Logged In: YES 
user_id=731522
Originator: NO

Should work.
Ref. to http://dozer.sourceforge.net/documentation/custommethods.html</field>
</message>

<message>
		<field name="adddate">1201003976</field>
		<field name="user_name">edbras</field>
		<field name="body">Logged In: YES 
user_id=531357
Originator: YES

Extra note:
if someField as accessors in Bimpl, it will work. Probably because wildcard=true by default in my configuration.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1277402941</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1277402941</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1277402941</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">is-accessible=&#34;true&#34; not work with factory</field>
		<field name="entrydate">1201088004</field>
		<field name="mod_by">edbras</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3018119</field>
	<field user_id="2866272" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Regression ==&#62; Context Nested Mapping does not work again.</field>
	<field name="open_date">1276880240</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">In the release of v2.0.2.1 I've seen this :

Context Based Mapping and Nested Context based mapping does not work unless a Map  Issues 1413443 and 1413451 

And now, this isn't working in version 5.2.1</field>
</artifact>
<artifact>
	<field name="artifact_id">2926936</field>
	<field user_id="2744287" name="submitted_by"></field>
	<field user_id="2912290" name="assigned_to">hedget</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">custom-converter-param value injected/retrieved as &#34;null&#34;</field>
	<field name="open_date">1262789451</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">I am using a ConfigurableCustomConverter (on a field level), and am setting the custom-converter-param to a string value. However, when the setParameter() method of my ConfigurableCustomConverter instance is called, it receives a &#34;null&#34; string value, instead of the value I had set in my mapping.xml file. This was confirmed to be a bug in dozer; an example follows below.


&#60;mapping wildcard=&#34;false&#34;&#62; 
&#60;class-a bean-factory=&#34;org.dozer.factory.JAXBBeanFactory&#34;&#62;com.project.projectData.DTOClass&#60;/class-a&#62; 
&#60;class-b&#62;com.project.projectData.entityClass&#60;/class-b&#62; 
&#60;field custom-converter=&#34;com.project.projectUnit.JaxbGenericConverter&#34; custom-converter-param=&#34;groupName&#34;&#62; 
&#60;a&#62;groupName&#60;/a&#62; 
&#60;b&#62;groupName&#60;/b&#62; &#60;/field&#62; 
.......

In this example, when setParameter() method in the JaxbGenericConverter instance is called, it receives &#34;null&#34; as its input parameter instead of &#34;groupName&#34;.  To clarify, it does not receive a NULL pointer; it receives a valid string where the actual string value is &#34;null&#34;.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1275377140</field>
		<field name="user_name">buzdin</field>
		<field name="body">please look into this. May be related to bean-factory usage somehow.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">2418250</field>
		<field name="entrydate">1275377140</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262941083</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262941082</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2948816</field>
	<field user_id="2802387" name="submitted_by"></field>
	<field user_id="2912290" name="assigned_to">hedget</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Orphans are not removed when using Iteratem method mapping</field>
	<field name="open_date">1265761838</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">With this mapping config are not removed:
        &#60;field remove-orphans=&#34;true&#34;&#62;
            &#60;a set-method=&#34;addServiceType&#34; type=&#34;iterate&#34;&#62;serviceTypes&#60;/a&#62;
            &#60;b&#62;serviceTypes&#60;/b&#62;
            &#60;a-hint&#62;com.foo.ServiceType&#60;/a-hint&#62;
        &#60;/field&#62;

With this mapping config ARE  removed:
        &#60;field remove-orphans=&#34;true&#34;&#62;
            &#60;a &#62;serviceTypes&#60;/a&#62;
            &#60;b&#62;serviceTypes&#60;/b&#62;
        &#60;/field&#62;
I've verified this in 5.1 not 5.2 since it's not maven central yet.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1275166271</field>
		<field name="user_name">hedget</field>
		<field name="body">Verifying.</field>
</message>

<message>
		<field name="adddate">1274787445</field>
		<field name="user_name">buzdin</field>
		<field name="body">Please take a look at this one Hee Tatt.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1274787445</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">898417</field>
		<field name="entrydate">1274787445</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1274787445</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2596739</field>
	<field user_id="2378311" name="submitted_by">amichalec</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Deep mapping fails for primitives when interfaces used.</field>
	<field name="open_date">1234548360</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">I am facing problem I pinned down after couple hours of trace on dozer's client side... Either I've found dozer nasty bug (appearing in v4.4 and v5.0/snapshot) or I did some fundamental mistake in mapping configuration:

Boundary conditions:
1. configure deep mapping
2. use primitives as mapped src/dst endpoints
3. use interfaces and hints in mapping
The result is &#34;IllegalArgumentException: argument type mismatch&#34; on Method.invoke() on destination getter. See attached source to reproduce problem.

Since I am working on legacy code I cannot change any of these boundary conditions -- any workaround ASAP is welcome!

cheers,
andy.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1234548401</field>
		<field name="mod_by">amichalec</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">313420: dozer_bug.zip</field>
		<field name="entrydate">1234548360</field>
		<field name="mod_by">amichalec</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2555932</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">public methods in package protected classes aren't accessibl</field>
	<field name="open_date">1233520404</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hellu,

Public methods in package protected classes aren't accessible. 
In my case I use them as parent classes and have to make them public as otherwise dozer can't access his methods, even do they are public.

I think this is easy by calling Method.setAccessible(true) in ReflectionUtils.invoke(Method method, .....) such that the method is accessible.
BTW: Dozer dos find the method but do fails in the ReflectionUtils.invoke method.

More info: http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html

Cheers,
Ed
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1238272366</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi,

I would argue that this is a bug. If your class is package level or inner private Dozer should not have access to that unless you use is-accessible=true or similar feature to break Java encapsulation explicitly. There is feature for private fields, but not yet for classes with secure access modifier.

Dmitry</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1754596</field>
	<field user_id="1631860" name="submitted_by">jcsf</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping from interface/abstract class to well-known concrete</field>
	<field name="open_date">1184571850</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi there,

Although I appreciate that mapping from a concrete to an interface/abstract class is something of a pipedream, I do feel that mapping from an interface/abstract to a well-known concrete should be achievable.

Attached is a simple test case. It throws a MappingException when I feel it should just do the mapping. 

Inner is a simple class which has a single member &#34;string&#34; (along with accessors).

Outer holds a reference to an Inner &#34;inner&#34;. This field has a static/compile type of Object - but a runtime time of &#34;Inner&#34;.

My mapping configuration tries to map what in essence is ((Inner) outer.getInner()).getString() to a well-known target type of &#34;Target&#34;.

MappingException is thrown because from a purely static/reflective point of view (i.e. not taking into consideration any runtime types), the member &#34;inner&#34; is of type Object - and not of type Inner.

When we're moving from complex object graphs (the &#34;enterprise language&#34;) to a more specific domain graph, we often need to do deep field mappings from an interface/abstract member to a well-known type. 

I have been selling Dozer hard as we use it on another project. Unfortunately, I have to give a demo on Wednesday, and it doesn't work for this example! I will have to try and fudge  a workaround in for now :)

Thanks
JC</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1187671953</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">237166: Archive.zip</field>
		<field name="entrydate">1184571853</field>
		<field name="mod_by">jcsf</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1878027</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">is-accessible=&#34;true&#34; option not work with interface mapping</field>
	<field name="open_date">1201087942</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Sorry guys, but I think it's better to report this as a bug. I first reported it as a feature request, but I think it's a bug.
That is: when using an interface mapping, using the field option [is-accessible=&#34;true&#34;] will throw an exception as it tries to access the field on the interface. 
Instead it should use the custom factory to first request  an instance of the interface implementation.
I think this bug has a lot to do with my earlier bug report 1877216
The feature request earlier:
-----
t would be very convenient if you could use interfaces in dozer mapping
file in combination with the option [is-accessible=&#34;true&#34;].
Now this isn't possible, as I explain in my forum post:
http://sourceforge.net/forum/forum.php?thread_id=1864420&#38;forum_id=452530

What happens now: dozer reads this options and tries to access the field
directly on the interface defined in the dozer configuration. It should
however first create a new instance through the factory defined in the
dozer mapping and then access field.
So I think the order of these two actions should be changed (first create
new instance, access field).

If you have an questions, please email me.
-----

And the additional feedback with the request:
---------
I forgot to mention why this is very convient:
Suppose you have an object that you give to a client (in my case: a gwt
client), which contains fields like dateCreation, dateModified and
loginFailureCount. 
You don't want the client to be able to access them, as such you don't
want any setters on these objects.
Why ?
Because when you receive the modified object back in the backend, you
basically just want to use hibernate saveOrUpdate() on the modified object,
after you have use dozer to copy back the object.
But wit the setters, the fields might be changed, which ofcourse you don't
want, which means you have check this and do more coding before saving....
and ofcourse you don't want that.
----

Good luck,
Ed

</field>
</artifact>
<artifact>
	<field name="artifact_id">2903668</field>
	<field user_id="2669308" name="submitted_by">rflexor</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Recursion in bidirectional non-cumulative n:m-mapping</field>
	<field name="open_date">1259146604</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">We have an n:m-mapping in our datamodel that we want mapped via dozer. Since the target object's collection's content are to be updated in case of equality, we have to use the configuration &#34;non-cumulative&#34;. This results in an infinite recursion. 

Please find attached a sample JUnit-test.

Best wishes       Ralf</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">898417</field>
		<field name="entrydate">1269511492</field>
		<field name="mod_by">rflexor</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">352450: ntom-recursion.tgz</field>
		<field name="entrydate">1259146604</field>
		<field name="mod_by">rflexor</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1897185</field>
	<field user_id="731522" name="submitted_by">maxxyme</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Only String's are mapped in a class-lvl-props to Map mapping</field>
	<field name="open_date">1203448945</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hello,

I'm currently having a serious issue using the class level properties to java.util.Map mapping, as described here:
http://dozer.sourceforge.net/documentation/mapbackedproperty.html#Mapping%20Class%20Level%20Properties%20to%20a%20java.util.Map%20or%20a%20Custom%20Map%20with%20unique%20Get/Set%20methods


When you have a java.lang.String , the &#34;class level properties&#34; are perfectly mapped into a java.util.Map

But if these class level properties are in fact some more complicated default objects, like a Set&#60;String&#62;, it does not work anymore.


In the attached two examples, first one is as follow:

1/
TestSetTO contains 3 String fields (set1, set2, set3)
TestMapTO contains 1 Map&#60;String, String&#62; field (map)

in the dozer xml config, I defined 1 &#34;map&#34; mapping (id=setToMap1) which maps each particular field of the TestSetTO to a java.util.Map with a specific key.

Resulting mapped TestMapTO object has its &#34;map&#34; field populate with the three pairs (key=&#62;value), as defined in the mapping.

2/
TestSetTO contains 3 Set&#60;String&#62; fields (set1, set2, set3)
TestMapTO contains 1 Map&#60;String, Set&#60;String&#62;&#62; field (map)

in the dozer xml config, I defined 1 &#34;map&#34; mapping (id=setToMap2) which maps each particular field of the TestSetTO to a java.util.Map with a specific key (indeed, same kind of mapping as for the first case)

Resulting mapped TestMapTO object has its &#34;map&#34; field empty. WRONG!!!


I included the *.log for both cases, setting log4j.logger.net.sf.dozer.util.mapping.MappingProcessor=DEBUG )

Notice that I use Dozer 4.2 in a Java 5.0 environment (using Eclipse Europa 3.3.1.1)</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">267078: ClassLevelPropertiesToMapMapping.zip</field>
		<field name="entrydate">1203448946</field>
		<field name="mod_by">maxxyme</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1897962</field>
	<field user_id="2014393" name="submitted_by">pmagli</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">XmlBeans and List/Set &#60;-&#62; primitive array mapping</field>
	<field name="open_date">1203521309</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi folks,
in our project we use Dozer to map Java DTOs &#60;-&#62; XmlBeans, and we ran in a couple of issues with List/Set &#60;-&#62; primitive array mapping.

The DTO is as follows:

public class MyDTO {
   private List&#60;BigInteger&#62; myBigIntegerList;
   private List&#60;Boolean&#62; myBooleanList;
   private Set&#60;Integer&#62; myIntegerSet;

   // Getters and setters...
}

in the XmlBean class, these three fields are arrays:

   private BigInteger[] myBigIntegerArray;
   private boolean[] myBooleanArray;
   private int[] myIntegerArray;

*** ISSUE #1 (DTO -&#62; XmlBeans)
myBigIntegerList gets correctly mapped on myBigIntegerArray, but we get a ClassCastException (in MappingProcessor.addOrUpdateToList) when mapping myBooleanList -&#62; myBooleanArray and myIntegerSet -&#62; myIntegerArray (i.e. mapping fails when mapping a List/Set to a primitive array).

Here follows the stacktrace printed by Dozer when it tries to map myBooleanList -&#62; myBooleanArray (the stacktrace for myIntegerSet -&#62; myIntegerArray exactly the same):

SEVERE: Field mapping error --&#62;
  MapId: null
  Type: bi-directional
  Source parent class: com.hp.dto.MyDTO
  Source field name: myBooleanList
  Source field type: class java.util.ArrayList
  Source field value: [true, false, true]
  Dest parent class: com.hp.impl.MyXmlBeanDocumentImpl
  Dest field name: myXmlBean.booleansArray
  Dest field type: [Z
java.lang.ClassCastException: [Z
	at net.sf.dozer.util.mapping.MappingProcessor.addOrUpdateToList(MappingProcessor.java:721)
	at net.sf.dozer.util.mapping.MappingProcessor.mapListToArray(MappingProcessor.java:635)
	at net.sf.dozer.util.mapping.MappingProcessor.mapCollection(MappingProcessor.java:501)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:405)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:309)

*** ISSUE #2 (XmlBeans -&#62; DTO):
myBigIntegerArray -&#62; myBigIntegerList and myBooleanArray -&#62; myBooleanList are OK, but we get a ClassCastException (in MappingProcessor.mapCollection) when mapping myIntegerArray -&#62; myIntegerSet (i.e. mapping fails when mapping a primitive array to a Set).

Here follows the stacktrace printed by Dozer:

SEVERE: Field mapping error --&#62;
  MapId: null
  Type: bi-directional
  Source parent class: com.hp.impl.MyXmlBeanDocumentImpl
  Source field name: myXmlBean.integersArray
  Source field type: class [I
  Source field value: [I@14df764
  Dest parent class: com.hp.dto.MyDTO
  Dest field name: myIntegerSet
  Dest field type: java.util.Set
java.lang.ClassCastException: [I
	at net.sf.dozer.util.mapping.MappingProcessor.mapCollection(MappingProcessor.java:512)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:405)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:309)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:255)


I already have a patch for both these issues, will post it later.


Pierangelo Magli
HP Italy Innovation Center</field>
</artifact>
<artifact>
	<field name="artifact_id">2817268</field>
	<field user_id="2230420" name="submitted_by">coolsubhasis</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">8</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Caching Problem for same ID</field>
	<field name="open_date">1246861217</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">Let&#226;&#8364;&#8482;s assume, there are three Classes: 
CLASS_1, CLASS_2 &#38; CLASS_3.

Now, 
OBJECT_1A, OBJECT_1B are Instances of CLASS_1.
OBJECT_2 is Instance of CLASS_2
OBJECT_3 is Instance of CLASS_3 

Inside Mapping_1: OBJECT_2 refers OBJECT_1A with Primary Key (X).
Inside Mapping_2: OBJECT_3 refers OBJECT_1B with Primary Key (X).

As, the Primary Key is same here (X), hence OBJECT_1B is not getting created. An already initialized Instance of OBJECT_1A is forcefully pushed into Mapping_2.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1249579348</field>
		<field name="user_name">naveensundaram</field>
		<field name="body">This is a bug in 4.4 . Not sure whether it got fixed in latest versions .

Try this method  by overriding custom converter if it  List

@Override
	public Object convert(Object destValue, Object srcValue, Class destClass, Class srcClass) {
		if(srcValue == null){
			return null;
		}
		List sourceValue = (ArrayList)srcValue;
		List destination = new ArrayList(sourceValue);
		return destination;
	}</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1246861273</field>
		<field name="mod_by">coolsubhasis</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">333752: DOZER_BUG.zip</field>
		<field name="entrydate">1246861218</field>
		<field name="mod_by">coolsubhasis</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1908892</field>
	<field user_id="1739274" name="submitted_by">deveshgote</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping id doesn't works</field>
	<field name="open_date">1204821812</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">eg:
public class A {
	Integer a;
	Integer b;
	Integer c;
	public Integer getA() {
		return a;
	}
	public void setA(Integer a) {
		this.a = a;
	}
	public Integer getB() {
		return b;
	}
	public void setB(Integer b) {
		this.b = b;
	}
	public Integer getC() {
		return c;
	}
	public void setC(Integer c) {
		this.c = c;
	}
}

public class B {
	Integer a;
	Integer b;
	Integer c;
	public Integer getA() {
		return a;
	}
	public void setA(Integer a) {
		this.a = a;
	}
	public Integer getB() {
		return b;
	}
	public void setB(Integer b) {
		this.b = b;
	}
	public Integer getC() {
		return c;
	}
	public void setC(Integer c) {
		this.c = c;
	}
}



//eg:
&#60;mapping map-id=&#34;caseA&#34; wildcard=&#34;false&#34;&#62; 
&#60;class-a&#62;A&#60;/class-a&#62;
&#60;class-b&#62;B&#60;/class-b&#62;
&#60;field&#62;
&#60;a&#62;a&#60;/a&#62;
&#60;b&#62;a&#60;/b&#62;
&#60;/field&#62;
&#60;field&#62;
&#60;a&#62;b&#60;/a&#62;
&#60;b&#62;b&#60;/b&#62;
&#60;/field&#62;
&#60;field&#62;
&#60;a&#62;c&#60;/a&#62;
&#60;b&#62;c&#60;/b&#62;
&#60;/field&#62;      
&#60;/mapping&#62;
 
&#60;mapping map-id=&#34;caseB&#34; wildcard=&#34;false&#34;&#62;
&#60;class-a&#62;A&#60;/class-a&#62;
&#60;class-b&#62;B&#60;/class-b&#62;
&#60;field&#62;
&#60;a&#62;a&#60;/a&#62;
&#60;b&#62;a&#60;/b&#62;
&#60;/field&#62;
&#60;field&#62;
&#60;a&#62;b&#60;/a&#62;
&#60;b&#62;b&#60;/b&#62;
&#60;/field&#62;    
&#60;/mapping&#62;

//What if i want to map with mapping id caseB
//Currently which ever configuration is prior to other 
//According to that mapping is carried out 
//i.e consider the above sequence and i want to map only two fields out of the three 
// then what happens is it maps all the three field
//If mapping  is of only two fields and wildcard is set to false 
//then default mapping taken is the first one not the other
Is this the bug or nay thing is missing while mapping</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1227301910</field>
		<field name="user_name">buzdin</field>
		<field name="body">Trying to understand this one. So what exactly is the problem?
Are you complaining that the first mapping is taken by default if you do not specify mapId?</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1950626</field>
	<field user_id="1607595" name="submitted_by">haschibaschi</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">losing custom-converter with inheritance-mapping</field>
	<field name="open_date">1209037901</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Here ist the xml:

&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;!DOCTYPE mappings PUBLIC &#34;-//DOZER//DTD MAPPINGS//EN&#34;
   &#34;http://dozer.sourceforge.net/dtd/dozerbeanmapping.dtd&#34; [
&#60;!ENTITY XMLBeanFac &#34;net.sf.dozer.util.mapping.factory.XMLBeanFactory&#34;&#62;
&#60;!ENTITY PedasIdDlamEnumConv &#34;ch.post.pf.dlam.svr.pedas.converter.PedasIdDlamEnumConverter&#34;&#62;
&#60;!ENTITY PedasYearDlamDateConv &#34;ch.post.pf.dlam.svr.pedas.converter.PedasYearDlamDateConverter&#34;&#62;
]&#62;

&#60;mappings&#62;
  &#60;configuration&#62;
    &#60;stop-on-errors&#62;true&#60;/stop-on-errors&#62;
    &#60;date-format&#62;MM/dd/yyyy HH:mm&#60;/date-format&#62;
    &#60;wildcard&#62;true&#60;/wildcard&#62;
  &#60;/configuration&#62;
  &#60;!-- Mapping for PersonGDT and Person --&#62;
  &#60;mapping&#62;
    &#60;class-a bean-factory=&#34;&#38;XMLBeanFac;&#34;&#62;
      ch.post.pf.pedas.xmlbeans.type.gdt.PersonGDT
    &#60;/class-a&#62;
    &#60;class-b&#62;ch.post.pf.dlam.svr.persistence.pdo.Person&#60;/class-b&#62;
    &#60;field&#62;
      &#60;a&#62;GDOVersion&#60;/a&#62;
      &#60;b&#62;gdoVersion&#60;/b&#62;
    &#60;/field&#62;
    &#60;field&#62;
      &#60;a&#62;personOID&#60;/a&#62;
      &#60;b&#62;oid&#60;/b&#62;
    &#60;/field&#62;
    &#60;field custom-converter=&#34;&#38;PedasIdDlamEnumConv;&#34;&#62;
      &#60;a&#62;sprache&#60;/a&#62;
      &#60;b&#62;sprache&#60;/b&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;
  
  &#60;!-- Mapping for NatuerlichePersonGDT and NatuerlichePerson --&#62;
  &#60;mapping&#62;
    &#60;class-a&#62;
      ch.post.pf.dlam.svr.persistence.pdo.NatuerlichePerson
    &#60;/class-a&#62;
    &#60;class-b bean-factory=&#34;&#38;XMLBeanFac;&#34;&#62;
      ch.post.pf.pedas.xmlbeans.type.gdt.NatuerlichePersonGDT
    &#60;/class-b&#62;
    &#60;field custom-converter=&#34;&#38;PedasIdDlamEnumConv;&#34;&#62;
      &#60;a&#62;aufenthaltsbewilligung&#60;/a&#62;
      &#60;b&#62;aufenthaltsbewilligung&#60;/b&#62;
    &#60;/field&#62;
    &#60;field custom-converter=&#34;&#38;PedasYearDlamDateConv;&#34; type=&#34;one-way&#34;&#62;
      &#60;a&#62;aufenthaltsbewilligung&#60;/a&#62;
      &#60;b&#62;aufenthaltsbewilligung&#60;/b&#62;
    &#60;/field&#62;
    &#60;field custom-converter=&#34;&#38;PedasIdDlamEnumConv;&#34;&#62;
      &#60;a&#62;geschlecht&#60;/a&#62;
      &#60;b&#62;geschlecht&#60;/b&#62;
    &#60;/field&#62;
    &#60;!-- Field mapping for Namen --&#62;
    &#60;field custom-converter=&#34;&#38;PedasIdDlamEnumConv;&#34;&#62;
      &#60;a&#62;nameZusatz&#60;/a&#62;
      &#60;b&#62;nameZusatz&#60;/b&#62;
    &#60;/field&#62;
    &#60;field custom-converter=&#34;&#38;PedasIdDlamEnumConv;&#34;&#62;
      &#60;a&#62;nationalitaet&#60;/a&#62;
      &#60;b&#62;nationalitaet&#60;/b&#62;
    &#60;/field&#62;
    &#60;field custom-converter=&#34;&#38;PedasIdDlamEnumConv;&#34;&#62;
      &#60;a&#62;titel&#60;/a&#62;
      &#60;b&#62;titel&#60;/b&#62;
    &#60;/field&#62;
    &#60;field custom-converter=&#34;&#38;PedasIdDlamEnumConv;&#34;&#62;
      &#60;a&#62;anrede&#60;/a&#62;
      &#60;b&#62;anrede&#60;/b&#62;
    &#60;/field&#62;
    &#60;field-exclude&#62;
      &#60;a&#62;geburtsdatum&#60;/a&#62;
      &#60;b&#62;geburtsdatum&#60;/b&#62;
    &#60;/field-exclude&#62;
  &#60;/mapping&#62;
&#60;/mappings&#62;

NatuerlichePerson inherit from Person.
The beans with the name gdt are xml-beans. The Problem is now, that the custom-converter defined on Person is lost on the way, and the mapper try to map without custom-converter. This causes obvious an exception.
the field sprache exists only on the types Person/PersonGDT.

I debug this problem now since 4 hours (in the dozer-source) but I don't see what's the problem.

In another mapping file I use the same style of mapping with custom-converter on a parent class. The only difference is, that the bean is not created by a bean-factory and the name of the attributes are different.

Ok, changed the name of the dest-attribute to sprache1 and now see, the convertion functions.
Seems like the following case fails:
- inheritance mapping
- custom-converter defined on a field of the parent-class
- the field-names are identical</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1209101542</field>
		<field name="user_name">haschibaschi</field>
		<field name="body">Logged In: YES 
user_id=1607595
Originator: YES

Ok I located the bug (or feature ;-)). The problem makes this piece of code:

// Fix for bug # [ 1486105 ] Inheritance mapping not working correctly
    // We were not creating a default configuration if we found a parent level class map
    if(mapping.getSourceClass().getClassToMap() != sourceClass
       || mapping.getDestClass().getClassToMap() != destClass) {
    	// there are fields from the source object to dest class we might be missing. create a default mapping between the two.
    	mapping = ClassMapBuilder.createDefaultClassMap(globalConfiguration, sourceClass, destClass);
        superClasses.add(mapping);
    }

Its in the MappingProcessor on line 1020 (version 3.4). 

The problem is that I come here with an XMLBean-object, so the this statement &#34;mapping.getSourceClass().getClassToMap() != sourceClass&#34; is true, cause in the mapping-xml I declare the interface to map. Cause its true the MappingProcessor overwrites my custom-converters.

I don't understand really the logic, but perhaps we must check if the &#34;mapping.getSourceClass().getClassToMap()&#34; is assignable to the Class (in my case an interface) &#34;sourceClass&#34;. And only create the default mapping when it isn't assignable.

I found a workaround:

First I declare the XMLBean-implementation in the mapping file. This breaks the functionality of the Factory but worksaround the bug in the Mappingprocessor. Then I extended the XMLBeanfactory and change the name of the XMLBean-implementation into the name of the interface, before I instantiate the Bean.

Cheers Flo</field>
</message>

<message>
		<field name="adddate">1209048006</field>
		<field name="user_name">haschibaschi</field>
		<field name="body">Logged In: YES 
user_id=1607595
Originator: YES

I forget to say that I have tested this with the versions 3.4, 4.0, 4.1, 4.2. And the failure appeared in every version. In version 4.1 and 4.2 the failure appeared but didn't throw an exception which terminates the thread. But in this versions it have other problems with inheritance which break my other mappings.</field>
</message>

<message>
		<field name="adddate">1209045305</field>
		<field name="user_name">haschibaschi</field>
		<field name="body">Logged In: YES 
user_id=1607595
Originator: YES

I think the bug is on line 1025 from the MappingProcessor. There the orginal field-mappings get overwritten with false ones. I think we need to check if there are original ones available with special configuration before overwrite them.</field>
</message>

<message>
		<field name="adddate">1209038925</field>
		<field name="user_name">haschibaschi</field>
		<field name="body">Logged In: YES 
user_id=1607595
Originator: YES

Tried to exclude the field. But every constelation failed:
- exclude on child-class
- exclude on parent-class
- exclude on parent- / child-class

dozer would every-time map the field with the standard-mapper, which failed.

Perhaps you can me explain a little bit how this functions with the class-maps and the superclass-types. Then I can provide a patch.

Ah yeah, I forgott to say that we work with the version 3.4, cause in the version 4.2 the inheritance-mapping is more broken than in version 3.4.

Cheers haschibaschi</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1209038021</field>
		<field name="mod_by">haschibaschi</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1968111</field>
	<field user_id="1759155" name="submitted_by">grzegorzoledzki</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Non-cumulative collection mapping uses cache wrongly</field>
	<field name="open_date">1211304444</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">v1.0 (example)</field>
	<field name="details">Mapping setup:
1. A class containing a list. Mapped as non-cumulative and having remove-orphans=true. Elements of the list should be complex objects (a user-defined class).
2. The same structure of classes on the target side of mapping.
3. Mapping is done onto an existing instance of target class. 

Problem:
Some objects of the web of objects lose some information.
This is caused by two mappings being done in non-cumulative mode: one to a class, then the second one onto an object. During the first mapping a wrong result is cached and then used. 

I attach some minimal set of classes which illustrates the problem.
If something is unclear please ask.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1307109765</field>
		<field name="user_name">lehew</field>
		<field name="body">This was reported a long time ago, but it is causing us a problem now. It looks to me like this could be solved by saving the state of the cache and restoring it when the code detects that the object already exists in a non-cumulative collection just before the mapping is repeated targeting the existing collection member. 

I'm going to try this. If it work, I'll post a patch.</field>
</message>

<message>
		<field name="adddate">1229940852</field>
		<field name="user_name">buzdin</field>
		<field name="body">I have investigated this issue. Thank you for the test case.
In my opinion this is caused due to the fact that recursive non-cumulative mapping is just not implemented at all. Meaning that Dozer will update all fields of collection elements, but not the attribute fields. Everything below one level of depth will be overwritten.

It could be a nice feature request. I will state in documentation that it is not provided yet and we might implement recursive object update in the future. Lets keep this issue open for now.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">278455: dozerFailingWithCumulative.zip</field>
		<field name="entrydate">1211304444</field>
		<field name="mod_by">grzegorzoledzki</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2021776</field>
	<field user_id="1418311" name="submitted_by">chrisahn</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">bug in MappingProcessor.checkForSuperTypeMapping()</field>
	<field name="open_date">1216409770</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">checkForSuperTypeMapping() looks for mappings for the superclasses of two classes, but only finds the mapping for the direct superclass, not for any superclasses higher up in the class hierarchy.

The attachment contains a package called 'dozer', which contains several classes and a mapping config. 

The classes consist of two parallel hierarchies: ZeroA is the base class of OneA, which is the base class of TwoA. Similar for ZeroB, OneB, TwoB. The mapping config file contains three mappings: ZeroA - ZeroB, OneA - OneB, TwoA - TwoB.

The base classes ZeroA and ZeroB have a field 'id'. The ZeroA - ZeroB mapping contains an exclude-field for field 'id'.

If I map instances of OneA and OneB, the field is excluded, because the mappings OneA - OneB and ZeroA - ZeroB are used.

If I map instances of TwoA and TwoB, the field is *not* excluded, because *only* the mappings TwoA - TwoB and OneA - OneB are used. The mapping ZeroA - ZeroB is ignored.

Class dozer.DozerTest demonstrates this.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1225221583</field>
		<field name="user_name">buzdin</field>
		<field name="body">Existing workaround is to use wildcard=false for class mappings of the hierarchy.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224697493</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224697493</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">285225: dozer.zip</field>
		<field name="entrydate">1216409770</field>
		<field name="mod_by">chrisahn</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2225093</field>
	<field user_id="1973604" name="submitted_by">mlfresh</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">9</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Some Tests fail with Java 6</field>
	<field name="open_date">1225886527</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">I am unable to build the dozer trunk, because 4 tests are failing with Java6.

The maven results are:

Failed tests:
  testSetToArray(net.sf.dozer.functional_tests.proxied.ProxiedMapperTest)
  testSetToArray(net.sf.dozer.functional_tests.MapperTest)
  testPropertyToClassLevelMap(net.sf.dozer.functional_tests.proxied.ProxiedMapTypeTest)
  testPropertyToClassLevelMap(net.sf.dozer.functional_tests.MapTypeTest)

Tests in error:
  testNestedCustomMap(net.sf.dozer.functional_tests.proxied.ProxiedMapTypeTest)
  testNestedCustomMap(net.sf.dozer.functional_tests.MapTypeTest)

Tests run: 455, Failures: 4, Errors: 2, Skipped: 0


My Java Version:
java version &#34;1.6.0_07&#34;
Java(TM) SE Runtime Environment (build 1.6.0_07-b06)
Java HotSpot(TM) Client VM (build 10.0-b23, mixed mode, sharing)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1340195411</field>
		<field name="user_name">sslavic</field>
		<field name="body">Current Dozer 5.3.3-SNAPSHOT builds well with Java 6 now, but it fails to build with Java 7. At http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html it is stated:

Area: API: Utilities
Synopsis: Due to an error in java.util.TreeMap, it was previously possible to insert invalid null elements and elements not implementing Comparable into empty TreeMaps and TreeSets. Only a single invalid element could be inserted into the empty TreeMaps or TreeSets; additional elements would cause the expected NullPointerException or ClassCastException. Most other operations upon the collection would also fail. As of JDK 7, inserting an invalid null element or an element not implementing Comparable into an empty TreeMap or TreeSet throws a NullPointerException.
RFE: 5045147


Some Dozer tests fail because of this collections api misuse.

Also, there are several errors reported by compiler:
&#34;...is internal proprietary API and may be removed in a future release&#34;

Both compiler and resources maven plugins also report
&#34;[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!&#34;</field>
</message>

<message>
		<field name="adddate">1234356596</field>
		<field name="user_name">tomrigole</field>
		<field name="body">The fix should be quite simple: just test if the resulting set/list contains the mapped values and never check the order of object which are put in or fetched from a set since Sets do not guarantee a certain iteration order by definition.

But I think you already figured that out, right?</field>
</message>

<message>
		<field name="adddate">1229397713</field>
		<field name="user_name">mhtierney</field>
		<field name="body">MapTypeTest.testPropertyToClassLevelMap appears to be failing with 1.6.  The workaround until this is fixed is to use jdk 1.5 for development</field>
</message>

<message>
		<field name="adddate">1228211635</field>
		<field name="user_name">buzdin</field>
		<field name="body">I have decided to disable failing MapTypeTest for the 4.3 release. This issue will be addressed in version 4.4 with high priority.</field>
</message>

<message>
		<field name="adddate">1227866436</field>
		<field name="user_name">buzdin</field>
		<field name="body">I made a simple fix for the test relying on Set ordering. But MapTypeTest is a bug for real. I spent half a day in debugger and could not really understand where it comes from. If anyone knows the answer don't keep it for yourself. Will continue to dig today...</field>
</message>

<message>
		<field name="adddate">1226677146</field>
		<field name="user_name">edbras</field>
		<field name="body">I also noticed that the test, as mentioned below/above, fail.
Hope this will be solved soon.

</field>
</message>

<message>
		<field name="adddate">1225889247</field>
		<field name="user_name">mlfresh</field>
		<field name="body">I forgot to mention that the failing tests make assumptions about the ordering of elements in Sets - which does not make sense.</field>
</message>

<message>
		<field name="adddate">1225886695</field>
		<field name="user_name">mlfresh</field>
		<field name="body">I'd like to commit a patch for a problems with hints we had in our project, but I need the test running first...</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888638</field>
		<field name="entrydate">1228211644</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227527625</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227527625</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">8</field>
		<field name="entrydate">1225886626</field>
		<field name="mod_by">mlfresh</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1225886622</field>
		<field name="mod_by">mlfresh</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">300250: net.sf.dozer.functional_tests.proxied.ProxiedMapTypeTest.txt</field>
		<field name="entrydate">1225886594</field>
		<field name="mod_by">mlfresh</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">300249: net.sf.dozer.functional_tests.proxied.ProxiedMapperTest.txt</field>
		<field name="entrydate">1225886584</field>
		<field name="mod_by">mlfresh</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">300248: net.sf.dozer.functional_tests.MapTypeTest.txt</field>
		<field name="entrydate">1225886574</field>
		<field name="mod_by">mlfresh</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">300247: net.sf.dozer.functional_tests.MapperTest.txt</field>
		<field name="entrydate">1225886527</field>
		<field name="mod_by">mlfresh</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2879851</field>
	<field user_id="2637980" name="submitted_by">procher</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">field-exclude in grandparent doesn't work for child</field>
	<field name="open_date">1255609676</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">The bug with ID 1865775 seems not to be completly fixed: 
I have a field-exclude in my grandparent mapping which works for the parent classes but doesn't work for the child of one of them.
If I copy the field-exclude from the grandparent mapping to the parent mapping, then it works for the child...</field>
</artifact>
<artifact>
	<field name="artifact_id">2550893</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Set mapping  conflicts with mappedFields property</field>
	<field name="open_date">1233363935</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v4.4.1</field>
	<field name="details">Hellu,

I found a nasty bug in the current trunk of Dozer and will explain below what it is. I also attached a test case to reproduce the bug. The code is uses TestNg but can easily be used differently. It also contains a piece of mapping xml.

The bug appears when mapping a set to an existing set, such that the target items should be updated (relationship-type=&#34;non-cumulative&#34; remove-orphans=&#34;true&#34;).
General dozer functionality: when mapping the set items, Dozer will create temporarily target objects when and then use this to find the existing target item. If it find one it will use this to map the source item to this target item.

It's a bit difficult to explain what goes wrong, so let me outline the test that is attached:
We have the following Main object:
class Main {
 private String id;
 private String name;
 private Main main;
 private Set&#60;Main&#62; childs;
 // property methods
}

The id is used in the hashCode and equals to identify the object and the name is property that is tested.
We map this to a MainDto that looks the same.

The test Main object that we use in our test:
One Main object that contains 1 Main child object and a name and id. The child contains also a id and name and another Main object. This other main object contains a id and name.
The name is only mapped one-way, that is to the Dto.
We map the created main object to the main dto counterpart and map this back to the existing main object to update possible changes that occurred (in the front-end).
The result: The other main object in the main object is null, which shouldn't because it can't be mapped from dto back to the original other main object and it wasn't null in the first place :(.

What happened: the mapping to the dto main object is correct. The mapping back fails, when dozer maps the dto child back to the original child it first creates a new main object and  fills this with the dto values according to the xml mapping. A such the created main object will have a valid id but no name (one-way mapping). It will then recursively map the other  dto main  object, put this also in the mappedField property (remeber this) and attach this to the new created main object. Then this new created main object will be used to find the original main object in the existing target set. It finds it and then will ignore the just created temporarily main objects and will map the dto object to the found main object. First it will map the child dto to the existing child object and then recursively the other dto object to the existing other main object. In this last step it will see that this target object already exists in the mappedField properties and will then simple use this and will overwrite the existing other object with the found version. But his found version is incorrect and was just a temporarily object that was put in mappedField. Note that it also contains no name property because of the one-way mapping. This is tested in the test to check this is described behavior occurs.

I hope you understand my explanation, otherwise, just let me know.

The solution isn't that easy and I haven't implemented one. I hope however that we can implement a patch quickly as it's a real showstopper for me. And I am suprised that this bug didn't show up earlier, or it did, but people never noticed. Why? Because the situation I described is very common in enterprise application: you convert a domain object to a dto, send it to the front-end, that send back his changes which is then mapped back to the existing domain object such that the changes are saved in the db. Note that I convert back to the existing domain object, as the dto object only contains some of the domain properties. If I would convert it to a new domain object, these not-used properties in the dto object will be null in the domain object (not filled by the dto object), such that they will be null in db when stored to the db which ofcourse is incorrect. Having a domain object with a set that contains another object also isn't that strange. I only noticed it due to the one-way mapping.

Anway, there are several way to solve it and I would like to open an discussion on this to come up with a solution. My idea's: 
- Easy way: simple empty the mappedField property when the above behavior is signaled. I tried it, and that works. But probably to easy and it might lead to infinite loops in other maps..
- Only remove the created temporarily objects when the above behavior is signaled. Which means you have to categorize the mappgedfields such that you can mark a beginning of temporarily objects such that you can delete them in one goal. More elegant then the above and won't disturb existing working code.
- The problem with above solutions is that first the temporarily object is created as it's used to retrieve the existing target object. This can be very cumbersome and a performance drawback. In my case the temporarily object is an object with other nested objects, that it will first have to create all to find the existing target object. If it's found, it will igrnore the temporarily objects and basically throw them away. So al this expensive creation of the temporarily objects was very expensive to just determine the target object. Couldn't this be done cheaper ? 
I think this is possible if you leave this action up to the developer. That is: the developer could help you retrieving the target object as it has the knowledge to do so. Now this knowledge isn't used, so you must create the complete temporarily target object such that the hashCode and equals can be correctly calculated such that the existing target object can be determined.
this is done better (read: much faster) if I could tell dozer which is the existing target object. I my case and the case above: the hashcode and equals only consists of the id, such that I can help Dozer to retrieve the existing target object and give it to Dozer. Dozer can then continue his mapping.
This overcomes the creation of the comple temporarily object tree which safes a lot of time in my case.
These hints can't be done through configuration I think but should be done Runtime.
Think about a class:

public interface DestinationValue {

 Result determineDesitnationValue(Collection col, Ojbect sourceValue);

 Public static class Result {
  private Object destinationValue;
  private boolean accept;
 }

}

The object method should be called in the method MappingProcessor.addToSet(..) just before:
 destValue = mapOrRecurseObject(srcObj, srcValue, destEntryType, fieldMap, destObj);

With the result object the developer will indciate if it is able/wants to retrieve the existing value (:accept= true if it can). The result property contains the existing target value that should be used.... 
If the deverlop indicates that it can't throught the accept property, dozer can still take the old path, but then you still have the same problem as above...

Ofcourse this is just a rough idea... but I think is a good start for discussion.
Please have a good look at this and let me know how we deal with it. In the meam time I will have to work my way around it :(..


Cheers,
Ed Bras



We create 






</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1254818830</field>
		<field name="user_name">edbras</field>
		<field name="body">What is the status of this bug ?</field>
</message>

<message>
		<field name="adddate">1234861268</field>
		<field name="user_name">edbras</field>
		<field name="body">How do you want to do that?

I think this feature was never implemented correctly. It's like it's not finished yet. That's why it very fragil and buggy.

Like explained below, you need to tell Dozer what the existing target object is in the Collection, as otherwise it will create the whole Target object graph which can be very large. When it find's the existing target object graph, it will simple remove the created target object graph, which is a lot of work/memory for nothing that can lead to serious memory/performance problems like in my case (that's why I added a feature request to add more real-life enterprice look-alike examples with a mapping xml that contains a 500 lines or so). 
Anyway, that said, you need to help Dozer a bit and the only way to do that is to attach some kind of helper object that does exactly that (= MappingHelper)...

Call it what every you like: bug, feature request....: Mapping to an existing Collection doesn't work at the moment, like the attached use case shows you. 
I hope it will be fixed in 5.0. Please let me know?

-- Ed
</field>
</message>

<message>
		<field name="adddate">1234848162</field>
		<field name="user_name">mhtierney</field>
		<field name="body">This patch includes ref's to an injected MappingHelper object.  This is something that conceptually does not exist in the codebase now.  I think this needs to be opened as a feature request for evaluation to determine it's impacts and thus these bug patches would be dependent on that being implemented.  In the meantime, if they can be resolved without using the MappingHelper, please attach that code and we will take a look.  Thanks.
</field>
</message>

<message>
		<field name="adddate">1234359740</field>
		<field name="user_name">edbras</field>
		<field name="body">Replaced the file that contains the addToSet method.
Find a tinny bug in an if statement when I advanced my unit tests.
It concerns the mapping to an existing set of a new source value.

-- Ed</field>
</message>

<message>
		<field name="adddate">1233758281</field>
		<field name="user_name">edbras</field>
		<field name="body">Few notes:
- Just uploaded a new version of the addToSet() method as it has a little tinny bug.
- The disadvantage of this solution is that the method MappingHelper.getExistingObject(..) is called for every existing set item, so also for basic JRE objects like enum's, Integer, String, etc...
I filter them out in my implementation, but I don't think is't really necessary to call the method for these JRE types...
- Don't forget the same kind of functionality to the method addOrUpdateToList if you are going for it.

--Ed</field>
</message>

<message>
		<field name="adddate">1233703364</field>
		<field name="user_name">edbras</field>
		<field name="body">One more note:
I just notice that there is also a method called addOrUpdateToList.
This method should have the same functionality that I added to the method addToSet.
But I leave that up to you guys as I am exhausted and really need to continue. I don't use it at the moment so for me it's not (yet) a problem.

-- Ed</field>
</message>

<message>
		<field name="adddate">1233703120</field>
		<field name="user_name">edbras</field>
		<field name="body">Btw: the improved test that I added, also contains two tests: one that uses the MappingHelper and one that doesn't..</field>
</message>

<message>
		<field name="adddate">1233702976</field>
		<field name="user_name">edbras</field>
		<field name="body">Hellu,

I solved this by chaning the code of the current dozer trunk a bit. 
I make use of the MappingHelper that I added in bug 2560608.
This interface contains a method:
	ExistingObject getExistingObject(Collection&#60;? extends Object&#62; col, Object srcObj, Class&#60;?&#62; destType);

That is used in the MappingProcessor.addToSet.  
This works for me now at this moment and give me a good performance improvement. But when integration this in to the Dozer code, I would think it need some extra desing-thoughts. Maybe it's more elegant to define the use of this interface per field in the xml configuration instead of a global MappingHelper. I also have no idea how this is used in case of list collections, and if this is needed.

Anyway: what I do in the addToSet, is simple asking the MappingProcessor if it can retrieve the existing target value if we are mapping to an existing set that has at least one item, if not, it's not needed. 
My implementation of the MappingProcessor can determine, with knowledge of the objects that are being mapped, very quickly what the target object is, if it exists. If yes, it will return it, or simple null if it's not present or the helper indicates that it can't determine the target object. In this latter case, it will do it the old fashion way.

I didn't run the dozer tests, but did run the bug tests and my own mapping tests (about 100) and it seem to work fine. But I want to do some more tests that I will do tomorrow...

The code change is in the patch of the other bug: 2560608.
But in words: I only changed the content of addToSet a bit, that's it.
I attached the new version of this method.

Please let me know how Dozer will integrate this kind of functionality?

Cheers,
Ed
PS: I also attached a new version of the bug test as I noticed a tinny mistake...







</field>
</message>

<message>
		<field name="adddate">1233395814</field>
		<field name="user_name">edbras</field>
		<field name="body">BTW: the remark &#34;we create&#34; at the end are just lost words of writing the post that I forgot to remove before posting.. (the text area to write is sooo smalll :(...

-- Ed</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">313029: addToTest.txt</field>
		<field name="entrydate">1234359666</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">312025: </field>
		<field name="entrydate">1234359637</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">312025: addToTest.txt</field>
		<field name="entrydate">1233758102</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">311918: </field>
		<field name="entrydate">1233758077</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">311918: addToTest.txt</field>
		<field name="entrydate">1233703210</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">311917: bugtest.txt</field>
		<field name="entrydate">1233703073</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">311353: bugtest.txt</field>
		<field name="entrydate">1233363935</field>
		<field name="mod_by">edbras</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2560608</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer can't handle proxy objects (out of memory)</field>
	<field name="open_date">1233663412</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">Hellu,

Dozer doesn't seem to handle Proxy objects very well.
Dozer does contain some stuff to deal with it, like the method MappingUtils.getRealClass but it's not good enough and not used everywhere like I explain below.
The result is that you can run out of Memory which I had. So the bug has quite an performance impact :( (in my case)
I am sure that other people have the same problem when working with Hibernate and have lazy loading enabled, but you only notice it when having more &#34;complex&#34; mappings. In my case: one-way mappings on sub classes that are proxied. However, they will stay have a performance drawback. 
I have attached a test case that test the problems below. It's a more advanced proxy test and more like Hibernate, Spring and other tools use the proxy. The simple Proxy test currently contained in Dozer is too simple and not representive for &#34;real&#34; situations.

Let's assume the following classes:
class Main {
 private String name;
 private SubMarker main;
 // getter/setters 
} 

class SubMarker extends Main {
 private String marker;
 // gettter/setter
}

class Sub extends SubMarker {
 private String detail;
 // getters/setters for detail 
} 

We also have MainDto and SubDto that are copies of the above. But the SubDto doesn't contain a setter for the detail property.

We have a mapping:
&#60;configuration&#62;
 &#60;!-- The factory --&#62;
 &#60;bean-factory&#62;factory1&#60;/bean-factory&#62;
&#60;/configuration&#62;

&#60;mapping wildcard=&#34;true&#34; map-null=&#34;false&#34;&#62;
 &#60;class-a&#62;SubMarker&#60;/class-a&#62;
 &#60;class-b&#62;SubMarkerDto&#60;/class-b&#62;
  &#60;field type=&#34;one-way&#34;&#62;
   &#60;a&#62;marker&#60;/a&#62;
   &#60;b&#62;marker&#60;/b&#62;
  &#60;/field&#62;
&#60;/mapping&#62;

&#60;mapping wildcard=&#34;true&#34; map-null=&#34;false&#34;&#62;
 &#60;class-a&#62;Sub&#60;/class-a&#62;
 &#60;class-b&#62;SubDto&#60;/class-b&#62;
   &#60;field&#62;
    &#60;a&#62;detail&#60;/a&#62;
     &#60;b is-accessible=&#34;true&#34;&#62;detail&#60;/b&#62;
   &#60;/field&#62;
&#60;/mapping&#62;

Test situation: a Main instance with a name property and a Sub instance as SubMarker association. The Sub is a proxy and contains a detail.
We use a factory to create the SubDto from the Sub Proxy. Otherwise dozer would create a MainDto instance as that's what it sees as target Field type in MainDto.

Problems as far (maybe more):
1) In the ClassMappings.find(srcClass, destClass, mapId) dozer tries to determine the mapping and uses the MappingUtils.getRealClass(..)) to retrieve the real class name. This method does a proxy check and if it's a proxy it returns the proxy super class. So in case of the mapping between the objects Main.main and MainDto.main it will try to find the mapping SubMarker --&#62; SubDto. So as you can see the mapping between Sub --&#62; SubDto is completely ignored and will never used. Why? Because it detects that Main.main contains a proxy and as such it will return the super class of the object which is SubMarker.
But this is incorrect and too easy.
If you look at Hibernate (from their manual): it will create a proxy that is a direct subclass of the field class. So the proxy will always be of type Main and never Sub. But the encapsulated object is of type Main or Sub.
So to determine the real source class you have to retrieve that of the encapsulated object. Hibernate has HibernateProxyHelper class that does exactly that for you. It contains a method getClassWithoutInitializingProxy to retrieve the real implementation type. Other tools like Spring will probably do it a bit different.
My point: It's impossible for dozer to know the real class type. It depends on the proxy implementation. The only way to do this (without having a dependency to other frameworks like Hibernate) is to let the developer indicate what the real class it.
So the developer should be able to inject a helper instance that has a method like getRealClass(Object).


2) For every proxy, a new bean mapping is created and added to the classMappings. This is a performance problem in my case and I had to increase my memory durng the test otherwise I will run out of memory. I am not sure if it's all caused by this problem, but it certainly has a big impact in my mapping tests.
In the method MappingProcessor.getClassMap a new mapping is created because it couldn't found a mapping between Main --&#62; MainDto.
However, for the newly created mapping, the srcObj.getClass() is used instead of the class from MappingUtils.getRealClass(..) like done in 1. Because srcObj is a proxy, srcObj.getCLass() is generated and unique. 
a) It wrong that srcObj.getClass() is used. The real class of the proxy should be used like explained in 1)
b) It makes no sense to store the created mapping in classMappings map. Even worse, when you map many of this proxy objecsts, like me, your map is getting very large :(


3) In the method MappingProcessor.checkForSuperTypeMapping, the mapping between SubMarker -&#62; SubMarkerDto is ignored and never used.
This is because in this method the metod call MappingUtils.getRealSuperclass is used to retrieve the super class of the object in Main.main. Because the proxy is a direct subclass of Main, this method call will return Main as class. So dozer will look for the class map Main -&#62; MainDto. Because this mapping isn't present in the mapping xml, it's not used. 
However, note that the mapping SubMarker -&#62; SubMarkerDto is never used as the method MappingUtils.getRealSuperclass(proxy instance) will never return SubMarker as this method will take the super of the super class which is Main.
Just like mentioned in 1, dozer has no way to bullet proof determine the real source class so the developer has to indicate what the real class it.   


I get the impression that the proxy support isn't finished yet :(
These are the problems that I encounter, but maybe there are more as Dozer uses the (incorrect proxy) class name on more places.
I am going to write a patch now against the Dozer 5.0 trunk as this is really a big showstopper for me. I will combine it will the other bug that I posted: mapping to an existing set.
I hope that the Dozer team will use the patch asap and others can make use of it. At least let me know what the planning is?

Involved forum threads:
https://sourceforge.net/forum/message.php?msg_id=4973733
https://sourceforge.net/forum/message.php?msg_id=4630995
https://sourceforge.net/forum/message.php?msg_id=4471941
... etc..


Regards,
Ed




</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262898904</field>
		<field name="user_name">buzdin</field>
		<field name="body">working on the proxy solution...
hibernate integration test suite is being added to project...</field>
</message>

<message>
		<field name="adddate">1245957546</field>
		<field name="user_name">buzdin</field>
		<field name="body">lets just keep it open until it is not fixed...</field>
</message>

<message>
		<field name="adddate">1235242420</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Thanks for the additional information on the use case.  The hibernate documentation was to the point and explained clearly what you were trying to.  As mentioned in the documentation, you could argue this proxy behavior is not intuitive and breaks a fundamental aspect of the Java language.  It is impossible for dozer to be able to handle this.

I think a good feature to add is to be able plugin a custom Proxy resolver to dozer and would contain the following operations.  That way dozer could be provided a custom hibernate implementation for these methods without coupling dozer code to hibernate(which of course is not an option).  I will create a feature request for this.

isProxy(Class&#60;?&#62; clazz)
Class&#60;?&#62; getRealClass(Class&#60;?&#62; clazz)
Class&#60;?&#62; getRealSuperclass(Class&#60;?&#62; clazz)


BTW, you can update these tickets by filerting on deleted.  </field>
</message>

<message>
		<field name="adddate">1235237183</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Response from ED.....

1) How can I give feedback on a bug that you deleted!!
2) Why do you delete the bug as I had the impression we were in the middle of
solving it/discussion.....

3) I don't see my test cases that reproduce the bug(s). You give me some pointers
to code but I can't find them there. So yes, it's not surprising that you can't
reproduce the bugs. Just use my test case that I attached to the bug and you
will see that it fails....

4) You don't understand the bug so please read it again. All the information
is contained in the bug report. If you don't understand, please ask.

5) You don't understand the Hibernate proxy lazy loading very well.
This is easy to conclude from your last remark about &#34;you and other using HIbernate
lazy loading/proxy&#34;.
Have a look at http://www.hibernate.org/280.html and read it well please (especially
the part about downcasting).
Let me try one more time (it's all in the bug report)
Suppose that you have Farther object that has an Object field Child and you
fill it with a subclass of Child, namely Son. If the field is an hibernate
many-to-one lazy loading mapping, the proxy will look like
Child$$EnhancerByCGLIB$$f2205172.
Two important things:
a) The proxy will be a sub class of Child and NOT (NEVER) of Son.
b) The proxied object is of TYPE Son, but not seen from the OUTSIDE.

This said, it doesn't take magix science to see that the proxy functionality
in Dozer doesn't, and can't work.

That you haven't been able to experience this in your experience with Dozer/Hibernate
is because didn't map subclasses that were proxied and that there exists a mapping
between this sub classes.

Why dozer doesn't work?, easy:
Receiving the Child$$EnhancerByCGLIB$$f2205172 as &#194;&#160;source object to map, Dozer
will take the Real super class when finding out his super mappings. Dozer will
determine Child as super class, and will look for any mappings between Child
and any target object class. Sooooo it won't find the mapping between Son and
SonDto and as such will ignore it such that an incorrect mapping takes place..
Do you really understand this ?? 
If yes, you won't write what you just have written in your bug response.
Even if you can't be able to get my test cases to fail, from the text above
you can draw your own conclusion and very easily make your own test case ....

Sorry for being so direct, but I am running out of patient, and realy not have
time for this at the moment..(I am busy setting up a new company with big delay's
and drawbacks and work 6/7 days a week, 14 hours a day... that's it... that's
all I can effort by now)...

I did my best, spend a lot of time in it, so I would use it useful. My time
it up now. I have my own dozer now that works acceptable for now. Java 7 is
coming with some promising mapping features so I will try to hang in there for
now.

Good luck,
Ed</field>
</message>

<message>
		<field name="adddate">1235182890</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Not sure the best place to start on this one, but here goes....

-  I boiled your unit test down to remove the noise.  It is checked into trunk InheritanceMappingTest.testSubMarker() + ProxiedInheritanceMappingTest.testSubMarker().  Both tests run green with and without proxies without any code changes to dozer.  Please look to see if it is missing any asserts

-  I think in the test code you submitted, you are proxying an Abstract class instead of the implementing class and I think that may be the diff.

-  Can you take a look at the test case and see if see any deltas that should be added to match the use case.

-  I watched the internal class mappings collection and what I saw is that dozer did not add the proxy class name(i.e) org.dozer.vo.inheritance.Sub$$EnhancerByCGLIB$$f2205172), but instead only stored the real class name org.dozer.vo.inheritance.Sub.  The classMappings collection uses the class names for keys, so as expected it didnt grow indefinetely when dealing with proxied classes

-  The dozer proxy support is released in production.  Myself and others have used Dozer on enterprise Hibernate projects without any known issues when dealing with proxied objects via lazy loading. 

-  All of our functional tests also run in a proxy mode where every dataobject in the object graph is proxied via cglib.  There are about 200 of these tests and they all run green

-  A getProxyRealClass plugin to dozer sounds like a good idea if we have cases where it would be impossible for dozer to determine the real class.  We havent seen many reported issues with hibernate proxies.  But I think it would be good to open a feature request for this if we get some.

-  If you run into a corner case that Dozer just doesnt seem to be handling correctly, you can always fall back to manual mapping for that particular case(s). I always try to encapsulate application mapping logic so that you have the flexiblility to drop down a level if needed for any odd ball mapping scenarios

http://dozer.sourceforge.net/documentation/faq.html#encapsulation

-  I will close this for now pending any feedback and new info from you on this use case.

Thanks!

</field>
</message>

<message>
		<field name="adddate">1234860459</field>
		<field name="user_name">edbras</field>
		<field name="body">He,

I understand what you mean, that's why I added the code explanation.
It's probably formatted because of my shortcut habit that I use regularly  without thinking :( to format my own code.  But, it also contains several patches on top of each other, so I wouldn't use the patch.
The code change and impact is very little like explained below.
You could see it as a feature request yes, but then still the current code contains a bug as it doesn't handle cglib hibernate proxies.
I hope you can still implement it in dozer 5.0, especially as the change/impact is small and I think the Hibernate proxy support is a cruacial one.

anyway, you are right, to explain a bit more of the MappingHelper:
It's an interface. I have attached it.
public interface MappingHelper {
 Object unProxy(Object obj);
  ExistingObject getExistingObject(Collection&#60;? extends Object&#62; col, Object srcObj, Class&#60;?&#62; destType);
}

Like explained below, it's injected in to the DozerBeanMapping that uses it to construct the MappingProcessor. I did put it in the constructor of the MappingProcessor, but you can inject it like you want:
protected MappingProcessor(ClassMappings classMappings, Configuration globalConfiguration, CacheManager cacheMgr, StatisticsManager statsMgr, List&#60;CustomConverter&#62; customConverterObjects, List&#60;DozerEventListener&#62; eventListeners, 			CustomFieldMapper customFieldMapper, Map&#60;String, CustomConverter&#62; customConverterObjectsWithId, MappingHelper mappingHelper) {


In the DozerBeanMapper it's a simple property with getters and setters that I use in my Spring config to inject it:
private MappingHelper mappingHelper;
public MappingHelper getMappingHelper() {
   return mappingHelper;
}

public void setMappingHelper(MappingHelper mappingHelper) {
  this.mappingHelper = mappingHelper;
}


As you can see, it nothing magical, all very simple, but very important to support Hibernate.
I also attached my MappingHelper implementation as example.

Let me know how it goes.


</field>
</message>

<message>
		<field name="adddate">1234847817</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Ed,

I looked at this patch file and it was impossible to see what were actually the code changes to fix this.  It looks like you may have reformatted classes and thus almost every line shows up as a mod.    

Also, not sure if this patch includes ref's to an injected MappingHelper object.  If so, I believe this is something that conceptually does not exist in the codebase now.  I think this needs to be opened as a feature request for evaluation to determine it's impacts and thus these bug patches would be dependent on that being implemented.

Thanks.</field>
</message>

<message>
		<field name="adddate">1233703605</field>
		<field name="user_name">edbras</field>
		<field name="body">One more note: 
When using the unproxy functionality, please remove the method getRealClassName, or modify it, as it's doing an unncessary search on the word CGLIB in the class name (only cost a bit performance)
BTW: javassist is on the move, so only checking for CGLIB isn't enough anyway. That's why it's good to simple outsourse these kind of problems...</field>
</message>

<message>
		<field name="adddate">1233702275</field>
		<field name="user_name">edbras</field>
		<field name="body">BTW: I removed the extra logging in the MappingParser such that the attached patch only contains the changes to the files MappingProcessor/DozerBeanFactory and the new MappingHelper.

I added extra logging to the MappingParser as I think the loading of my configuration xml takes too long. (about 400 lines long). It takes about 30 seconds.</field>
</message>

<message>
		<field name="adddate">1233701755</field>
		<field name="user_name">edbras</field>
		<field name="body">Hi,

I changed the current trunk code to solve it. 
It seems to work just fine and has a considerable performance improvement in some performance tests that I do.
I want to do some more testing, but I now get the java.lang.NoSuchMethodError: org.apache.commons.lang.ClassUtils error after just updating the code ;).

Anyway: I simple unproxy the source objects in the mapping of a new object. That's it. So it has little impact on the code and doesn't touch any of the hardcore dozer code.

Details in words:
I added the following unproxy method:
private Object unProxy(Object obj) {
 return this.mappingHelper == null ? obj : this.mappingHelper.unProxy(obj);
}

This method is called at the beginning of 3 mapping methods:
-- private void map(ClassMap classMap, Object src, Object destObj, boolean bypassSuperMappings, String mapId) {
	  Object srcObj = unProxy(src);
	..
	
-- private &#60;T&#62; T map(final Object src, final Class&#60;T&#62; destClass, final T destObj, final String mapId) {
	  Object srcObj = unProxy(src);
    ...

-- 	private void mapField(FieldMap fieldMapping, Object srcObj, Object destObj) {
     ....
     ....
		 srcFieldValue = unProxy(fieldMapping.getSrcFieldValue(srcObj));


That's it.
I added a new interface for now that's called MapperHelper wich it called by the unproxy. It's set through the DozerBeanFactory just like the other stuff. I have put it in the constructor of the MappingProcessor and set it with Spring in my case.
In the implementation of the unProxy method I do something like this (I have it in a UtilsHibernate that I always use):
		// check if it concerns a hibernate proxy
		if (maybeProxy instanceof HibernateProxy) {
			return ((HibernateProxy) maybeProxy).getHibernateLazyInitializer().getImplementation();
		}

Don't forget that this MapperHelper implementation has a dependency with Hibernat so I wouldn't put it in the core Dozer code. You would add it as extra utility code somewhere....

This interface also contains another method to solve bug 2550893, determining the existing value in a set. 
That bug together with this one was quite a performance boost in my case.

I have added an improved version of the test case. Did you already run the other test case ?
This improved version, will run two test cases; one with the bug, and one with the bug solved by adding theh MapperHelper implementation.

I also added a patch. However, this patch also contains code to solve bug 2550893, and some logging that I added. It's not a lot, but still....

Let me know how you will integrate this please?
I prefer working against your build instead of my own build that I have now.





</field>
</message>

<message>
		<field name="adddate">1233693012</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi Ed,

First thing I am thinking is to restrict mapping cache to some sane amount and applying MRU policy. I would try to please Hibernate proxies specifically, because it will be good in 80% of the cases where Dozer is used with proxied objects. Of course no runtime dependencies will be required only dirty Reflection tricks. I will try to think on the best of the worst solution. 

Regarding the plans - realistic 5.0 release date could be March/May. I know that you want those changes badly, but we want 5.0 to have certain functionality, which is not yet ready. We can think of releasing 4.4.2 with critical updates instead if you want to keep the &#34;official&#34; source code version. However then the less files are modified the better, because of the packaging changes in 5.0 automated merging is hard.

Thanks again for your involvement,
Dmitry</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1236069</field>
		<field name="entrydate">1262898904</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1262898904</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">3</field>
		<field name="entrydate">1245957546</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1235182751</field>
		<field name="entrydate">1245957546</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">0</field>
		<field name="entrydate">1245957546</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1235182751</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1235182751</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1235182751</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1235182751</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">313889: DozerMappingHelper.java</field>
		<field name="entrydate">1234860640</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">313888: MappingHelper.java</field>
		<field name="entrydate">1234860519</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">312027: patch1</field>
		<field name="entrydate">1233758358</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">311916: </field>
		<field name="entrydate">1233758332</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">311916: patch</field>
		<field name="entrydate">1233702139</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">311914: proxyBug.txt</field>
		<field name="entrydate">1233701849</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1233693012</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">311830: proxyBug.txt</field>
		<field name="entrydate">1233663412</field>
		<field name="mod_by">edbras</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2643773</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Continue bugs in interface/super class mappings ....</field>
	<field name="open_date">1235697291</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,

This bug belongs to bug https://sourceforge.net/tracker2/?func=detail&#38;aid=2556896&#38;group_id=133517&#38;atid=727368,
but because that bug is deleted I have to open another one.
I discovered an additional bug concerning super classses/interfaces mapping and have added that to the test case that was attached to bug https://sourceforge.net/tracker2/?func=detail&#38;aid=2556896&#38;group_id=133517&#38;atid=727368. 
This bug contains an modified version of that test case to reproduce this bug, so it should be replaced with this version.

The bug: the mapped fields when mapping the super classes/interfaces is ignored.

In the method MappingProcessor.processSuperTypeMapping all the mapped fields are collected in the variable mappedFields. However these fields aren't used during the mapping of a super class/interface, which should!

Example (like in the test case):
We have:
public Member {
 private IntWrapper price;
 public IntWrapper deterPrice() {
   return price;
  }
  public void setPrice(IntWrapper price) {
    this.price = price
  } 
 }
 
 public class Taxer extends Member {
  private int softNr;
   public int getSofNr() {
    return this.sofiNr;
   }
   public void setSofNr(int sofNr) {
    this.sofNr = sofNr;
   }
 }
 
 We have MemberDto and TaxerDto that look the same. 
   
 The mapping config contains a mapping between Member -&#62; MemberDto for the one-way-mapping field price with a customized getter. 
 The configuration also contains a mapping between Taxer -&#62; TaxerDto.
 When mapping an object TaxerDto to an existing Taxer object, Dozer will map the super classes/interfaces first: MemberDto -&#62; Member and then TaxerDto -&#62; Taxer.
 First it will map Member -&#62; MemberDto. This mapping will not map the price as it's a one-way mapping. The field is however mapped  when Dozer processes the mapping TaxerDto -&#62; Taxer, as a default mapping (we use wildcard is true). It will then throw an exception that it can't find the read method of price in Taxer as it uses the default get method which doesn't exists. It does this to determine the existing value. Ofcourse this is wrong as the field has a special mapping as indicated in the MemberDto -&#62; Member mapping that is ignored however. 

The test case will show the bug.
Work around: Duplciate the price mapping from Member-&#62; MemberDto in Taxer -&#62; TaxerDto (see the mapping file of the test case).
Solution: when processing the super classes, the mapped fields should be taken in consideration. This is done after the super classes are mapped, but not while mapping them. 

 Note that in this bug we assume that Dozer already contains the Super class/interface mapping as desribed in the https://sourceforge.net/tracker2/?func=detail&#38;aid=2556896&#38;group_id=133517&#38;atid=727368. But you could probable also reproduce it without this modification when not using interfaces and only super class mappings.

Good luck,
Ed </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1235983937</field>
		<field name="user_name">edbras</field>
		<field name="body">Hi,

I hope that with your comment/vote the Dozer team will give this bug higher priority and correct this bug asap.

-- Ed</field>
</message>

<message>
		<field name="adddate">1235983508</field>
		<field name="user_name">kristofl</field>
		<field name="body">Thanks for your proposition
, but I already wrote a correction.

First I change ClassMapFinder.findClassMap() and comment the findInterfaceMapping
Second time I change findInterfaceMappings to find all interfaces mapping (and not only super interfaces as it actually does)
Third I add:
 private void checkForClassMapping(Class srcClass, List superClasses, Class superDestClass) {
	List mappings = ClassMapFinder.findInterfaceMappings(this.customMappings, srcClass, superDestClass);
	if (mappings != null) {
	      superClasses.addAll(mappings);
	}
[...]
}

Because if I have Superclasses on src and 3 level inheritance on dest, Dozer will not do the job.

With this patches it's OK
</field>
</message>

<message>
		<field name="adddate">1235839465</field>
		<field name="user_name">edbras</field>
		<field name="body">Hmmmm can't attach the jar file, as it's just too big (isn't allowed to attache files larger then 256 Kb).
If you want, let me know, I email it to you.

-- Ed</field>
</message>

<message>
		<field name="adddate">1235838955</field>
		<field name="user_name">edbras</field>
		<field name="body">I think that your solution lies in the bugs:
- https://sourceforge.net/tracker2/?func=detail&#38;aid=2556896&#38;group_id=133517&#38;a
tid=727368
- https://sourceforge.net/tracker2/?func=detail&#38;aid=2560608&#38;group_id=133517&#38;atid=727368

I patched it myself and it works just fine....

I have attached my patched dozer jar. You can give it a try. Just make sure you create a class that implements The MapperHelper interface as described in the above bug. It will take care of the unproxy operation.
Works very well. I had the same problems as you.

Ed</field>
</message>

<message>
		<field name="adddate">1235824380</field>
		<field name="user_name">kristofl</field>
		<field name="body">Hi, 

I have the same problem.

2 interfaces: I1 and I2 mapped to class C, in custom mappings.
But I use proxy to use this interfaces, so my real class is: ProxyXX.

When I want to use Dozer with I2, using the proxy (or it could be another implementation or sub interface).

First dozer is searching for direct mapping in findClassMap with 
ClassMap mapping = (ClassMap) customMappings.get(ClassMapKeyFactory.createKey(srcLookupClass, destLookupClass, mapId));

Of course it does not exist and then:
if (mapping == null) {
      mapping = findInterfaceMapping(customMappings, destClass, srcClass, mapId);
}

But the problem is that it returns the first assignable interface found in mappings. So it's not really good for me.
In my case: I1.
The result is that all I1 fields are used but not I2.

How to make findInterfaceMapping return the better interface and not the first one?


Thanks 

Christophe
</field>
</message>

<message>
		<field name="adddate">1235734146</field>
		<field name="user_name">edbras</field>
		<field name="body">Hi,

I was planning to use the workaround as described above, but solved the bug in the meantime as it had more impact on my code then expected.
The solution seem to be rather simple and has a nice performance improvement in my case as it overcomes quite a few double field mappings (or mappings that shouldn't run) because the mapping in the super class/interface was ignored like explained above. 
Ofcourse the performance highly depends on the mappings in your super classes/interface.

It makes no sense to provide you with a patch as my code is already patched a lot.
Changes in the code:
In the method MappingProcessor.processSuperTypeMapping I changed one line (the last argument is new):
 map(map, srcObj, destObj, true, mapId, mappedFields);
As you can see I specify the mappedFields in the method call when mapping a super class/interface.

So as a consequecuense the signature of this method is changed:
 private void map(ClassMap classMap, Object src, Object destObj, boolean bypassSuperMappings, String mapId, List&#60;String&#62; superMappedFields) {

And I added a new method:
	private void map(ClassMap classMap, Object src, Object destObj, boolean bypassSuperMappings, String mapId) {
		map(classMap, src, destObj, bypassSuperMappings, mapId, null);
	}

That simple calls the modfified methods with null as superMappedFields, such that other method calls still work.

In the modified method I changed also only one line of code:
 List&#60;String&#62; mappedParentFields = superMappedFields;
 
And that's it... 
So now when mapping the super class, it will consider the already mapped fields and will ignore the fields that are contained in this List.

The test case that's attached to this bug will run successful with this modifications and all dozer tests run just as before these modifications (some tests did already fail).



*** Another IMPORTANT change that I made that I forgot in bug https://sourceforge.net/tracker2/?func=detail&#38;aid=2556896&#38;group_id=133517&#38;atid=727368 is removing the following call:
if (mapping == null) {
 mapping = findInterfaceMapping(destClass, srcClass, mapId);
}

In het method call ClassMappings.find(...).

This call is redunant due to the code changes in bug https://sourceforge.net/tracker2/?func=detail&#38;aid=2556896&#38;group_id=133517&#38;atid=727368 and can lead to problems due to conflicts. So you must remove this. It even gives a slightly performance improvement as it's not needed anymore as the new interface/super class code already does all this.

What errors you can expect?:
Suppose that you have an interface:
public interface Item {
  Product getProduct();
} 

and 
public interface ItemLuxe extends Item {
  seProduct(Product prd);
} 

And we have ItemDto and ItemLuxeDto counterparts.
And a mapping in the dozer xml between Item and ItemDto.
Now suppose that you are mapping an item ItemLuxeDto to an ItemLuxe. Dozer will NOT map the product as you would expect as a default mapping between the field product with wildcard is true!
Why Not?
Easy: Dozer tries to get the ClassMap between ItemLuxeDto -&#62; ItemLuxe, and doesn't find it. It will then try the interfaces (the removed call above) and will find the mapping ItemDto -&#62; Item and will use that one. However, this mapping will NOT map the product as it only contains a getter for the product and no setter (write method), such that it will simple ignore this.
Just make a test case yourself and try it.... I have a test case in my own code, that difficult to copy/paste.


Please let me know how this will be processed?
Goodluck,
Ed





</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">315344: interfaceSuperBug2TestCase.txt</field>
		<field name="entrydate">1235697329</field>
		<field name="mod_by">edbras</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2581936</field>
	<field user_id="2394418" name="submitted_by">dosoudilj</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Corrupted mapping String[] and Collections of String</field>
	<field name="open_date">1234194726</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Mapping String[], List&#60;String&#62;, Set&#60;String&#62;, ... between each of them is corrupted.
Settings in configuration changes behavior but I can't set something to act like &#60;field relationship-type=&#34;non-cumulative&#34; remove-orphans=&#34;true&#34;&#62;...&#60;/field&#62;

testcase:
class TestList {
  private List&#60;String&#62; values;
....
}

class TestArray {
  private String[] values;
....
}

class Test {
public testString() {
  TestArray ta = new TestArray();

  ta.setValues(new String[] {&#34;value11&#34;});

  TestList tl = (TestList) mapper.map(ta, TestList.class);

  assertEquals(1, tl.getValues().size());

  mapper.map(ta, tl);

  assertEquals(1, fch.getValues().size());

  TestArray ta2 = (TestArray) mapper.map(tl, TestArray.class);

  assertEquals(1, ta2.getValues().length);

  ta2.setValues(new String[] {&#34;value1&#34;, &#34;value2&#34;});

  mapper.map(ta2, tl);

  assertEquals(2, tl.getValues().size());

  ta2.setValues(new String[] {&#34;value2&#34;});

  mapper.map(ta2, tl);

  assertEquals(1, tl.getValues().size());
  
}
}</field>
</artifact>
<artifact>
	<field name="artifact_id">2589247</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">copy-by-reference not work on root object</field>
	<field name="open_date">1234361487</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,

The copy-by-reference in the global configuration only applies to Object fields, but not to the object itself.
Example: If I call 

Date source = new Date();
Date target = map(source, Date.class)

And Date is indicated in the global configuration in the dozer mapping xml as copy-by-reference, the target object will always be a new object.
This is because the copy-by-reference check isn't contained in the method (in the MappingProcessor):

private &#60;T&#62; T map(final Object src, final Class&#60;T&#62; destClass, final T destObj, final String mapId) {

In this method, the class map is determined that contains the correct global configuration, but is ignored when creating a target object in this same method.

Regards,
Ed


</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234362485</field>
		<field name="user_name">edbras</field>
		<field name="body">BTW: it might sound strange to report this, but  for example: in automated dto conversions, converting a few dozens of objects that are contained in a collection (that you iterate yourself instead of dozer) you don't want to check if the next item in the collection is an item that can be copied by reference. You rather have this information stored in a central place such that dozer can handle it when it concerns a field Object or just a class map.

Looked a bit more: the FieldMap object contains the copyByReference property but the not the ClassMap object. However, the ClassMap object has an instance of the global information that contains this information.

-- Ed </field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2608708</field>
	<field user_id="2378311" name="submitted_by">amichalec</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Deep indexed mapping fails when interfaces used.</field>
	<field name="open_date">1234864366</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">Going deeper with problems of mapping primitives when interfaces are used (bug # 2596739) I touched mapping lists in context of deep mapping and interfaces that led to other failure type.

Having this configuration (see sources attached):

&#60;mapping&#62; 
  &#60;class-a&#62;net.amichalec.dozerbug.Src&#60;/class-a&#62;
  &#60;class-b&#62;net.amichalec.dozerbug.Dst&#60;/class-b&#62;
  &#60;field&#62;
    &#60;a&#62;srcArray&#60;/a&#62;
    &#60;b&#62;sub.dstArray&#60;/b&#62;
    &#60;b-hint&#62;net.amichalec.dozerbug.DstSubImpl&#60;/b-hint&#62;
    &#60;b-deep-index-hint&#62;
      net.amichalec.dozerbug.DstSubImpl,
      net.amichalec.dozerbug.DstImpl
    &#60;/b-deep-index-hint&#62;
&#60;/field&#62;

conversion between list and array i.e. CollectionUtils.convertListToArray() still uses interface (Dst class) instead pointed DstImpl class leading to IllegalArgumentException:

  MapId: null
  Type: bi-directional
  Source parent class: net.amichalec.dozerbug.SrcImpl
  Source field name: srcArray
  Source field type: class [Lnet.amichalec.dozerbug.Src;
  Source field value: [Lnet.amichalec.dozerbug.Src;@43ea43ea
  Dest parent class: net.amichalec.dozerbug.DstImpl
  Dest field name: sub.dstArray
  Dest field type: [Lnet.amichalec.dozerbug.Dst;
java.lang.IllegalArgumentException
	at java.lang.reflect.Array.setImpl(Native Method)
	at java.lang.reflect.Array.set(Array.java:312)
	at net.sf.dozer.util.mapping.util.CollectionUtils.convertListToArray(CollectionUtils.java:95)
	at net.sf.dozer.util.mapping.MappingProcessor.mapArrayToArray(MappingProcessor.java:559)
	at net.sf.dozer.util.mapping.MappingProcessor.mapCollection(MappingProcessor.java:483)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:395)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:301)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:247)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:216)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:155)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:113)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:108)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:94)
	at net.amichalec.dozerbug.MapTest.main(MapTest.java:22)


cheers,andy.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1234864417</field>
		<field name="mod_by">amichalec</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">313895: dozer_bug.zip</field>
		<field name="entrydate">1234864366</field>
		<field name="mod_by">amichalec</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2608731</field>
	<field user_id="2378311" name="submitted_by">amichalec</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">NPE when multiple hints used in deep mapping.</field>
	<field name="open_date">1234864955</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">Consider source code attached with bug # 2596739.
When more than one class is used in hint NullPointerException is thrown.

&#60;mapping&#62;
&#60;class-a&#62;net.amichalec.dozerbug.Src&#60;/class-a&#62;
&#60;class-b&#62;net.amichalec.dozerbug.Dst&#60;/class-b&#62;
&#60;field&#62;
&#60;a&#62;val&#60;/a&#62;
&#60;b&#62;sub.val&#60;/b&#62;
&#60;!-- this works fine:
&#60;b-hint&#62;net.amichalec.dozerbug.DstSubImpl&#60;/b-hint&#62; --&#62;
&#60;!-- but this leads to NPE: --&#62;
&#60;b-hint&#62;net.amichalec.dozerbug.DstSubImpl java.lang.Integer&#60;/b-hint&#62;
&#60;/field&#62;
&#60;/mapping&#62;

Here Integer class is used but in case custom interface is used (and it is NOT collection) it is suitable to hint with implementation second class name.

If this is mapping specification error something like ConfigurationException should be thrown, not NPE. Looking at HintContainer.getHint() it looks more like expected but clumsy behavior.

cheers,
andy.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234865017</field>
		<field name="user_name">amichalec</field>
		<field name="body">Missing coma -- should be:
&#60;b-hint&#62;net.amichalec.dozerbug.DstSubImpl,java.lang.Integer&#60;/b-hint&#62;
which still leads to failures</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2640965</field>
	<field user_id="177826" name="submitted_by">imaixner</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Deep index hint ignored on Object array</field>
	<field name="open_date">1235641840</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">Given classes in package dozertest:
public class SrcArrayWrapper {
 private Object[] array;
 public Object[] getArray() {return array;}
 public void setArray(Object[] array) {this.array = array;}
}
public class TgtArrayWrapper{
 private Object[] array;
 public Object[] getArray() {return array;}
 public void setArray(Object[] array) {this.array = array;}
}
public class Bean {
 private String property;
 public String getProperty() {return property;}
 public void setProperty(String property) {this.property = property;}
}
And mapping:
&#60;mapping&#62;
 &#60;class-a&#62;dozertest.SrcArrayWrapper&#60;/class-a&#62;
 &#60;class-b&#62;dozertest.TgtArrayWrapper&#60;/class-b&#62;
 &#60;field&#62;
  &#60;a&#62;array[0]&#60;/a&#62;
  &#60;b&#62;array[0].property&#60;/b&#62;
  &#60;b-deep-index-hint&#62;dozertest.Bean&#60;/b-deep-index-hint&#62;
 &#60;/field&#62;
&#60;/mapping&#62;

Then calling:
 SrcArrayWrapper src = new SrcArrayWrapper();
 src.setArray(new Object[] { &#34;value&#34; });
 TgtArrayWrapper tgt;
 tgt = (TgtArrayWrapper) mapper.map(src, TgtArrayWrapper.class);

Throws exception:
Exception in thread &#34;main&#34; net.sf.dozer.util.mapping.MappingException: Exception occurred determining deep field hierarchy for Class --&#62; dozertest.TgtArrayWrapper, Field --&#62; array[0].property.  Unable to determine property descriptor for Class --&#62; java.lang.Object, Field Name: property

Dozer ignores the deep index hint and treats array[0] as java.lang.Object instead of dozertest.Bean.

This contradicts the documentation, which says that for Object Array the hint determines the type of objects created.
It also contradicts common sense - when I have taken the pain to specify the hint explicitly, it should take precedence over whatever defaults Dozer has.

Interestingly, when the array wrappers are exchanged for List wrappers, the example works alright. Seems like Dozer only resorts to hints when it is unable to guess any default. This might then have the same root cause as #2608708.

Attached is a Maven project with both array and list examples. After unpacking execute by:
mvn compile exec:java -Dexec.mainClass=dozertest.Main
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">315209: dozer-bug-project.zip</field>
		<field name="entrydate">1235641840</field>
		<field name="mod_by">imaixner</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2831267</field>
	<field user_id="2276614" name="submitted_by">nathanvb</field>
	<field user_id="1777661" name="assigned_to">mthielen</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Using field name instead of bean name in Editor</field>
	<field name="open_date">1249259901</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Eclipse Plugin Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">The editor auto populate a list of fields from the bean, but the names of those fields are taken from field names on the bean, rather than the actual bean name:
E.g.

private String localPassword;

public String getPassword() {
   return this.localPassword;
}

public String  setPassword(String password) {
   this.localPassword = password;
}

In this instance, the auto population field shows localPassword, whereas the correct name would be password.

This instance arrives where we want to use dozer to convert auto generated ADB Beans: http://ws.apache.org/axis2/1_4/adb/adb-howto.html

We don't control the code in these beans, and they use non matching field names to do some funky logic under the covers, but expose properly formatted bean names via getters and setters.

For example, using org.apache.commons.beanutils.PropertyUtils.getPropertyDescriptors(ExampleClass.class) would return descriptor with property password, not localPassword.

Have installed the 0.8.0 dozer plugin in Eclipse 3.4.1.</field>
</artifact>
<artifact>
	<field name="artifact_id">2691763</field>
	<field user_id="2418250" name="submitted_by">vadeg</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping map with Map inside</field>
	<field name="open_date">1237382033</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I don't know exacly is this a bug or feature :)

For example, we have HashMap with other hashMap inside: 
Map child = new HashMap();
child.put(&#34;num&#34;, 123);
child.put(&#34;test&#34;, &#34;test string&#34;);

Map parent = new HashMap();
parent.put(&#34;primeB&#34;, child);
parent.put(&#34;name&#34;, &#34;test name&#34;);

and we have an object:

public class DestA {

    private String name;

    private long num;

    private String test;
}

I'd like to map this Map hierarchy to plain object. I wrote mapping like this:

    &#60;mapping&#62;
        &#60;class-a&#62;java.util.HashMap&#60;/class-a&#62;
        &#60;class-b&#62;ru.otr.test.dozer.DestA&#60;/class-b&#62;
        &#60;field&#62;
            &#60;a key=&#34;primeB&#34;&#62;this&#60;/a&#62;
            &#60;b&#62;this&#60;/b&#62;
            &#60;a-hint&#62;java.util.HashMap&#60;/a-hint&#62;            
        &#60;/field&#62;
    &#60;/mapping&#62;

but after this, fields &#34;num&#34; and &#34;test&#34; will be empty. Why? I know why.

In the first iteration we have next classmaps:
primeB -&#62; this
this (name) -&#62; name
this (num) -&#62; num
this (test) -&#62; test

When &#34;primeB -&#62; this&#34; classmap executes, fields &#34;num&#34; and &#34;test&#34; are filled right. Then classmap &#34;this (name) -&#62; name&#34; executes, which fills field &#34;name&#34; correct.

But when mapping &#34;this (num) -&#62; num&#34; or &#34;this (test) -&#62; test&#34; executes, it searches keys &#34;num&#34; and &#34;test&#34; in the parent HashMap. Of course, there is no such key, and dozer place null's in &#34;num&#34; and &#34;test&#34; fields, overwriting early setted values.

I don't know is this my bug, or I had a bad mapping, or this is a feature, but it is possible to write mapping between Map hierarchy and plain object?
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1239600023</field>
		<field name="user_name">tuncan</field>
		<field name="body">I have a similar problem, just the wrapped object in the map is a pojo bean.</field>
</message>

<message>
		<field name="adddate">1237542551</field>
		<field name="user_name">vadeg</field>
		<field name="body">Somebody? :)</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2905896</field>
	<field user_id="2719741" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping multiple destination object in a collection</field>
	<field name="open_date">1259576740</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">When I try to put multiple object in a target collection like in the following example:
&#60;field&#62;
    &#60;a key=&#34;provincia1&#34;&#62;properties&#60;/a&#62;
    &#60;b&#62;indirizzi[0].provincia&#60;/b&#62;
&#60;/field&#62;
&#60;field&#62;
    &#60;a key=&#34;provincia2&#34;&#62;properties&#60;/a&#62;
    &#60;b&#62;indirizzi[1].provincia&#60;/b&#62;
&#60;/field&#62;
&#60;field&#62;
    &#60;a key=&#34;provincia3&#34;&#62;properties&#60;/a&#62;
    &#60;b&#62;indirizzi[2].provincia&#60;/b&#62;
&#60;/field&#62;
where indirizzi is a List&#60;Indirizzo&#62; and Indirizzo is a java bean holding address data, I have a NullPointerException during the creation of the element at index 1 and 2 of the destination collection.
I attach the patch to the GetterSetterPropertyDescriptor in order to make it work.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1268761052</field>
		<field name="user_name">relaydhsu</field>
		<field name="body">Building with this patch resulted in NPE failures in testSetValueToNullArray(org.dozer.functional_tests.CollectionTest) and test_UnableToDetermineType(org.dozer.functional_tests.ExceptionHandlingFunctionalTest).

In the meantime, explicitly adding the appropriate number of elements to the List (within the constructor most likely) will allow Dozer to map properly.</field>
</message>

<message>
		<field name="adddate">1268661147</field>
		<field name="user_name">relaydhsu</field>
		<field name="body">I am having the same issue, with flat source fields (not within Map objects).  Will try out the patch, thanks.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">353109: GetterSetterPropertyDescriptor.java</field>
		<field name="entrydate">1259576741</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2800490</field>
	<field user_id="2525182" name="submitted_by">fmeance</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Problem with inheritance</field>
	<field name="open_date">1244034845</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hello,

First, sorry for my english but i am french....!
Here is what i use : RSA V6, dozer 4.3 (i do not have rights to use higher
version)
I've a mapping like this :
&#60;mapping map-null=&#34;false&#34;&#62;
&#60;class-a&#62;fr.tm.ima.ref.dto.catalogue.CadreFonctionnelSolution&#60;/class-a&#62;
&#60;class-b&#62;fr.tm.ima.ref.sc.catalogue.bo.CadreFonctionnelSolutionBO&#60;/class-
b&#62;
&#60;field&#62;
&#60;a&#62;cadreFonctionnelDemande.idCadreFonctionnelDemande&#60;/a&#62;
&#60;b&#62;cadreFonctionnelDemande&#60;/b&#62;
&#60;/field&#62;
&#60;field-exclude&#62;
&#60;a&#62;cadreFonctionnelDemande&#60;/a&#62;
&#60;b&#62;cadreFonctionnelDemande&#60;/b&#62;
&#60;/field-exclude&#62;
&#60;field&#62;
&#60;a&#62;solution.idSolution&#60;/a&#62;
&#60;b&#62;solution&#60;/b&#62;
&#60;/field&#62;
&#60;field-exclude&#62;
&#60;a&#62;solution&#60;/a&#62;
&#60;b&#62;solution&#60;/b&#62;
&#60;/field-exclude&#62;
&#60;/mapping&#62;
and
&#60;mapping map-null=&#34;false&#34;&#62;
&#60;class-a&#62;fr.tm.ima.ref.dto.catalogue.CadreFonctionnelSolutionMEO&#60;/class-a
&#62;
&#60;class-b&#62;fr.tm.ima.ref.sc.catalogue.bo.CadreFonctionnelSolutionMEOBO&#60;/cla
ss-b&#62;
&#60;field&#62;
&#60;a&#62;cadreFonctionnelGarantieDefaut.idCadreFonctionnelGarantie&#60;/a&#62;
&#60;b&#62;idCadreFonctionnelGarantieDefaut&#60;/b&#62;
&#60;/field&#62;

&#60;/mapping&#62;

CadreFonctionnelSolution is SuperClass for CadreFonctionnelSolutionMEO
CadreFonctionnelSolutionBO is superClass for CadreFonctionnelSolutionMEOBO

I'd to exclude solution to solution to avoid OneToOne mapping (i can not
use wildcard=false because i need it)

So, here is my error :
2009-06-03 13:50:03 ERROR net.sf.dozer.util.mapping.MappingProcessor :
Field mapping error --&#62;
MapId: null
Type: null
Source parent class:
fr.tm.ima.ref.sc.catalogue.bo.CadreFonctionnelSolutionMEOBO
Source field name: solution
Source field type: class java.lang.Long
Source field value: 90
Dest parent class:
fr.tm.ima.ref.dto.catalogue.CadreFonctionnelSolutionMEO
Dest field name: solution
Dest field type: fr.tm.ima.ref.dto.catalogue.Solution
java.lang.IllegalArgumentException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:7
9)
at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImp
l.java:43)
at java.lang.reflect.Method.invoke(Method.java:618)
at
net.sf.dozer.util.mapping.util.ReflectionUtils.invoke(ReflectionUtils.java:
256)
at
net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor
.invokeWriteMethod(GetterSetterPropertyDescriptor.java:228)
at
net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor
.setPropertyValue(GetterSetterPropertyDescriptor.java:89)
at
net.sf.dozer.util.mapping.fieldmap.FieldMap.writeDestValue(FieldMap.java:90
)
at
net.sf.dozer.util.mapping.MappingProcessor.writeDestinationValue(MappingPro
cessor.java:827)
at
net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor
.java:305)
at
net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:2
44)
at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:213)
at
net.sf.dozer.util.mapping.MappingProcessor.processSuperTypeMapping(MappingP
rocessor.java:962)
at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:196)
at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:152)
at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:110)
at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:105)
at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:94)
at
fr.tm.ima.ref.sc.catalogue.SCCatalogueImpl.mettreAjourGarantieParDefautLiee
(SCCatalogueImpl.java:219)

Why the exclude does not work ? I don't see the problem.
Can you help me ?

Regards
Fr&#195;&#169;d&#195;&#169;ric M&#195;&#169;ance</field>
</artifact>
<artifact>
	<field name="artifact_id">2832002</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Issue with mapping empty map over existing Bean</field>
	<field name="open_date">1249392698</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">When mapping empty HashMap to existing Java Bean properties all mapped fields are overwritten to null.
This is not expected behavior. Instead only explicit &#34;id&#34;-&#62;&#34;null&#34; entries should be overwritten, but other values left without changes.</field>
</artifact>
<artifact>
	<field name="artifact_id">2855276</field>
	<field user_id="2625094" name="submitted_by">samppasa</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Custom converters using Spring proxies don't work</field>
	<field name="open_date">1252511127</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Class.isAssignable should be the other way around so that proxies (dynamically created sub classes) would work:

### Eclipse Workspace Patch 1.0
#P dozer
Index: src/main/java/org/dozer/MappingProcessor.java
===================================================================
--- src/main/java/org/dozer/MappingProcessor.java	(revision 951)
+++ src/main/java/org/dozer/MappingProcessor.java	(working copy)
@@ -872,7 +872,7 @@
     // search our injected customconverters for a match
     if (customConverterObjects != null) {
       for (CustomConverter customConverterObject : customConverterObjects) {
-        if (customConverterObject.getClass().isAssignableFrom(customConverterClass)) {
+        if (customConverterClass.isAssignableFrom(customConverterObject.getClass())) {
           // we have a match
           converterInstance = customConverterObject;
         }
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1255944038</field>
		<field name="user_name">buzdin</field>
		<field name="body">In theory it would work. But unfortunately it will break hierarchical custom converters where someone would have slightly different converters extending each other.

Instead I propose to do Proxy check for converters as we do for mapped objects.
</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2058427</field>
	<field user_id="2182547" name="submitted_by">spunukollu</field>
	<field user_id="2418250" name="assigned_to">vadeg</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Null Pointer Exception mapping to Collection Element</field>
	<field name="open_date">1219097096</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">we gettting NullPointerException while mapping a domain object to XML Bean Array compiled for Java 1.5. 
The mapping is working fine while converting from XML Bean to domain object. 
The opposite i.e; Domain to XML bean does not work. 
 
I created the domain bean EmployeeDet similar to the xml bean. As mentioned below the mappings work only if we add a element to list.
 
I think Dozer is unable to initialize the List before setting the value.




---------------------------------- 
Class 
---------------------------------- 
 
class EmployeeDet { 
ArrayList store=new ArrayList(); 
java.util.List&#60;some.domain.Employee&#62; getEmployeeList(){ 
final class EmployeeList extends java.util.AbstractList&#60;some.domain.Employee&#62; { 
void put(int i, Object o){} 
void add(int i, Object o){} 
void remove(int i){ } 
 
} 
EmployeeList list=new EmployeeList(); 

return list; 
} 
 
} 
 
---------------------------------- 
Mapping 
---------------------------------- 
&#60;mapping&#62; 
&#60;class-a&#62;some.domain.Employee&#60;/class-a&#62; 
&#60;class-b&#62;some.domain.EmployeeDet&#60;/class-b&#62; 
&#60;field&#62; 
&#60;a&#62;firstName&#60;/a&#62; 
&#60;b&#62;EmployeeList[0].name&#60;/b&#62; 
&#60;/field&#62; 
&#60;/mapping&#62; 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1260384353</field>
		<field name="user_name">vadeg</field>
		<field name="body">Could you attach xml schema for your XMl Bean, please?</field>
</message>

<message>
		<field name="adddate">1224765642</field>
		<field name="user_name">buzdin</field>
		<field name="body">If you could just create a unit test and attach that to the issue this problem will be next on my fix list :)
</field>
</message>

<message>
		<field name="adddate">1222818540</field>
		<field name="user_name">nathan_deckard</field>
		<field name="body">bump</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1256284958</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2887766</field>
	<field user_id="1940658" name="submitted_by">abent</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">EmptyList mapping error</field>
	<field name="open_date">1256719705</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Version:5.1 release

Example:
Class A{
  List&#60;C&#62; cList;
}
Class B{
  List&#60;C&#62; cList;
  public B(){
    c = ListUtils.lazyList(new ArrayList&#60;C&#62;(), FactoryUtils.instantiateFactory(C.class));
  }
}
When mapping A-&#62;B,report exception:
java.lang.UnsupportedOperationException
org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:90)
org.dozer.MappingProcessor.mapField(MappingProcessor.java:257)
....
Issue:
I found issue in MappingProcessor.prepareDestinationList(line:754)-&#62;MappingProcessor.addOrUpdateToList(line:726),dozer can't judge Collections.EmptyList,and invoke Collections.EmptyList.add(),then error</field>
</artifact>
<artifact>
	<field name="artifact_id">2889666</field>
	<field user_id="2682666" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Hierarchy Problems</field>
	<field name="open_date">1256932273</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Mapping a collection of elements that extends from an abstract class, tries to instantiate the AbstractClass.

dozerBeanMapper.map(sourceSubObject, DestinationRootObjectAbstract.class)

run JUnit in the attachment to see what I mean.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">348900: DozerTestHierarchy-Exclude.jar</field>
		<field name="entrydate">1256932274</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2893120</field>
	<field user_id="2691001" name="submitted_by">aeshr</field>
	<field user_id="2418250" name="assigned_to">vadeg</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Boolean and boolean in same bean maps to null</field>
	<field name="open_date">1257494616</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">My entity has the following two attributes:

private Boolean active;
private boolean created;

If the variable &#34;active&#34; is &#34;false&#34; DozerBeanMapper sets the primitve wrapper type to &#34;null&#34;. However, the primitive boolean &#34;created&#34; is mapped correctly.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1281335673</field>
		<field name="user_name">aeshr</field>
		<field name="body">I'm mapping EJB3 entity beans, e.g.

@Entity
@Table(name=&#34;MY_ENTITY&#34;)
public class MyEntity implements Serializable {

private static final long serialVersionUID = -1L;

private Boolean active;
private boolean created;

// ... setters &#38; getters

}

I'm using Dozer to produce identical but detached entity objects.</field>
</message>

<message>
		<field name="adddate">1281120803</field>
		<field name="user_name">vadeg</field>
		<field name="body">Could you please provide mapping example? I don't understand exactly what beans you are mapping.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">898417</field>
		<field name="entrydate">1262474640</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262474640</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2937042</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Wildcard is ignored when source and dest are equal</field>
	<field name="open_date">1264152572</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Consider 2 objects of class &#34;Name&#34;, srcObj and destObj
class Name {
String lname;
String fname;
String mname;
.. constructor/getters/setters..
}

Name srcObj = new Name(&#34;SLast&#34;, &#34;SFirst&#34;, &#34;SMiddle&#34;);
Name destObj = new Name(&#34;DLast&#34;, &#34;DFirst&#34;, &#34;DMiddle&#34;);

&#60;mapping wildcard=&#34;false&#34; type=&#34;one-way&#34; map-empty-string=&#34;false&#34; map-null=&#34;false&#34;&#62;
&#60;class-a&#62; Name &#60;/class-a&#62;
&#60;class-b&#62; Name &#60;/class-b&#62;
&#60;field&#62;
&#60;a&#62;fname&#60;/a&#62;
&#60;b&#62;fname&#60;/b&#62;
&#60;/field&#62;
&#60;/mapping&#62;

mapper.map(srcObj, destObj)

My intent here is to copy only the value of fname. ie, i want the destObj to have &#34;SFirst&#34;. However, I see that all the values of srcObj are written to destObj. Am I missing something here?
</field>
</artifact>
<artifact>
	<field name="artifact_id">2967419</field>
	<field user_id="739226" name="submitted_by">cibes</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Custom Converter only works one-way when defined by field</field>
	<field name="open_date">1268233074</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">Hello,

I had to implement a custom MapObjectConverter to &#34;convert&#34; a Map into an Object (actually the Map is just copied into this Object). I found out that if I configure this Converter on field-base...

    &#60;mapping&#62;
        &#60;class-a&#62;dozerTest2.ClassE&#60;/class-a&#62;
        &#60;class-b&#62;dozerTest2.ClassF&#60;/class-b&#62;
        &#60;field custom-converter=&#34;dozerTest2.MapObjectConverter&#34;&#62;
            &#60;a&#62;foos&#60;/a&#62;
            &#60;b&#62;foos&#60;/b&#62;
        &#60;/field&#62;
    &#60;/mapping&#62;

...the mapping only works one-way. If I define this converter on configuration-base...

    &#60;configuration&#62;
        &#60;custom-converters&#62;
            &#60;converter type=&#34;dozerTest2.MapObjectConverter&#34;&#62;
                &#60;class-a&#62;java.util.Map&#60;/class-a&#62;
                &#60;class-b&#62;java.lang.Object&#60;/class-b&#62;
            &#60;/converter&#62;
        &#60;/custom-converters&#62;
    &#60;/configuration&#62;

... the mapping works both ways!??

I first thougt I did something wrong in my converter, but with debugging I found out, that the &#34;source&#34; is already NULL.

Stepping through the Dozer-code I found these lines interesting:

MapFieldMap.getSrcFieldValue(Object srcObj)

    Object targetObject = srcObj;  // line 89
    // -&#62; Here my Map (that should go to my converter) is filled into &#34;targetObject&#34;

    result = propDescriptor.getPropertyValue(targetObject);  // line 113


MapPropertyDescriptor.invokeReadMethod(Object target)

    result = ReflectionUtils.invoke(getReadMethod(), target, new Object[]{key});  // line 145

    // (getReadMethod() = &#34;get&#34;, target = HashMap*, key = &#34;foos&#34;)
    // *The HashMap that should be copied!

There seems to be a disarrangement of the &#34;layer&#34; that should be mapped.
Instead of mapping the HashMap-object (found in property &#34;foos&#34;), Dozer searches _within_ the Map for a property with the key &#34;foos&#34;!??

I attached a small demo-app with both configuration-approaches that shows the problem.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1289681702</field>
		<field name="user_name">dozeruser</field>
		<field name="body">I have been doing a bit of research on this one. The issue seems to have nothing to do with CustomConverters. Actually, removing the custom converter reference from the field mapping, has no effect on the problem:

    &#60;mapping&#62;
        &#60;class-a&#62;dozerTest2.ClassE&#60;/class-a&#62;
        &#60;class-b&#62;dozerTest2.ClassF&#60;/class-b&#62;
        &#60;field&#62;&#60;!-- custom-converter=&#34;dozerTest2.MapObjectConverter&#34;&#62; --&#62; 
            &#60;a&#62;foos&#60;/a&#62;
            &#60;b&#62;foos&#60;/b&#62;
        &#60;/field&#62;
    &#60;/mapping&#62;

When the Map-Object mapping is specified at the class/configuration level, it is considered a FieldMap instance, and source is successfully copied to destination. However, when the map is specified at the field level, the map is considered a MapFieldMap, whose purpose is slightly different according to the Dozer documentation:

http://dozer.sourceforge.net/documentation/mapbackedproperty.html

Dozer considers the source field a property, and tries to invoke its getter method, which obviously silently fails since the source is a HashMap.

In my opinion, when source and destination are HashMap instances, FieldMap should be used rather than MapFieldMap. This would cause the copy of source HashMap to destination HashMap.

Will try to test it, but in the meantime, any expert voice that can shed some light on this one?</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">366131: dozerTest2.jar</field>
		<field name="entrydate">1268233074</field>
		<field name="mod_by">cibes</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3000953</field>
	<field user_id="2909883" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">7</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Custom Set() and Get() methods for XMLBean generated objects</field>
	<field name="open_date">1273730987</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">I am not very sure if this is a bug, but since it works fine for normal non-XMLBean generated classes, I am tempted to submit it.

Using xmlbeans, one of the schema generated xyz class has element &#34;P_TEMPLATE_CD&#34; like below, which is  to be mapped:

 /**
     * Gets the &#34;P_TEMPLATE_CD&#34; element
     */
    java.lang.String getPTEMPLATECD();
    
    /**
     * Gets (as xml) the &#34;P_TEMPLATE_CD&#34; element
     */
    org.apache.xmlbeans.XmlString xgetPTEMPLATECD();
    
    /**
     * True if has &#34;P_TEMPLATE_CD&#34; element
     */
    boolean isSetPTEMPLATECD();
    
    /**
     * Sets the &#34;P_TEMPLATE_CD&#34; element
     */
    void setPTEMPLATECD(java.lang.String ptemplatecd);
    
    /**
     * Sets (as xml) the &#34;P_TEMPLATE_CD&#34; element
     */
    void xsetPTEMPLATECD(org.apache.xmlbeans.XmlString ptemplatecd);
    
    /**
     * Unsets the &#34;P_TEMPLATE_CD&#34; element
     */
    void unsetPTEMPLATECD();


Clearly, the getter setter for P_TEMPLATE_CD are not usual, so I have this in my config file:

Note:
OrderExtnType class contains templateInfo object, which contains templateCode string type field.
SubmitExtensionType class contains xyz object, which contains P_TEMPLATE_CD string type field.

&#60;mapping&#62;
		&#60;class-a bean-factory=&#34;org.dozer.factory.XMLBeanFactory&#34;&#62;
				OrderExtnType
		&#60;/class-a&#62;
		&#60;class-b bean-factory=&#34;org.dozer.factory.XMLBeanFactory&#34;&#62;
				SubmitExtensionType
		&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;templateInfo.templateCode&#60;/a&#62;
			&#60;b set-method=&#34;setPTEMPLATECD&#34; get-method=&#34;getPTEMPLATECD&#34;&#62;xyz.P_TEMPLATE_CD&#60;/b&#62;
		&#60;/field&#62;
&#60;/mapping&#62;

This fails throwing:

INFO: Successfully loaded custom xml mappings from URL: [file:C:/dozerMappingNew.xml]
Exception in thread &#34;main&#34; org.dozer.MappingException: No read or write method found for field (xyz.P_TEMPLATE_CD) in class (interface xxx.xxx.xxx.SubmitExtensionType)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.determinePropertyType(GetterSetterPropertyDescriptor.java:279)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.getPropertyType(GetterSetterPropertyDescriptor.java:61)
	at org.dozer.fieldmap.FieldMap.getDestFieldType(FieldMap.java:112)
	at org.dozer.loader.MappingsParser.processMappings(MappingsParser.java:102)
	at org.dozer.loader.CustomMappingsLoader.load(CustomMappingsLoader.java:66)
	at org.dozer.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:153)
	at org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:136)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:96)

XMLBean to XMLBean mapping is possible, and I did this successfully in my last project which is in production, and the getter/setter were straight there :)

If a working example is needed, I can upload my files.

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273731246</field>
		<field name="user_name"></field>
		<field name="body">Increasing the priority 2 points and assigning to buzdin, as I interacted with him earlier. :)</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1273731246</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273731246</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3001900</field>
	<field user_id="2233282" name="submitted_by">nathan_deckard</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">IllegalMonitorStateException during field mapping</field>
	<field name="open_date">1273879699</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">Encountered a possible race condition when dozer was mapping fields. We ran the program again and the error did not occur. 

15:37:07,006 ERROR threadPoolTaskExecutor-6 MappingProcessor:254 - Field mapping error --&#62;
  MapId: null
  Type: bi-directional
  Source parent class: com.somecompany.SomeObject1
  Source field name: someField1
  Source field type: generic
  Source field value: null
  Dest parent class: com.somecompany.SomeObject2
  Dest field name: someField2
  Dest field type: java.math.BigDecimal
java.lang.IllegalMonitorStateException
        at java.beans.PropertyDescriptor.getReadMethod(Unknown Source)
        at net.sf.dozer.util.mapping.propertydescriptor.JavaBeanPropertyDescriptor.getReadMethod(JavaBeanPropertyDescriptor.java:56)
        at net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor.invokeReadMethod(GetterSetterPropertyDescriptor.java:233)
        at net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor.getPropertyValue(GetterSetterPropertyDescriptor.java:67)
        at net.sf.dozer.util.mapping.fieldmap.FieldMap.getSrcFieldValue(FieldMap.java:83)
        at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:234)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:216)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:155)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:113)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:108)
        at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:94)
        at com.somecompany.SomeMapper.map(SomeMapper.java:119)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1274036159</field>
		<field name="user_name">buzdin</field>
		<field name="body">The problem should occur in a situation when two threads map SRC-&#62;DEST class pair for the first time simultaniously. We should come up with some kind of locking mechanism during &#34;cold&#34; caches state. Thanks for reporting.

Are you going to upgrade to version 5? Because we dont really support 4.x branch.</field>
</message>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2850038</field>
	<field user_id="2617892" name="submitted_by">artbristol</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">index mapping tries to instantiate java.util.List</field>
	<field name="open_date">1251991203</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">During an indexed mapping operation, when mapping from a simple field to a particular item in a List, Dozer thinks the target list is null and tries to instantiate one. This appears to only happen when the field is a bean (i.e. not a String or some other simple type). See attached test case. In testIndexMapChildObjects(), the mapper falls over with org.dozer.MappingException: java.lang.NoSuchMethodException: java.util.List.&#60;init&#62;().

May be a duplicate of bug 2064346, but the patch for that didn't fix the problem.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1274364725</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">341647: dozertest2.tar.gz</field>
		<field name="entrydate">1251991210</field>
		<field name="mod_by">artbristol</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3582809</field>
	<field user_id="3882312" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Unit test failed</field>
	<field name="open_date">1351944748</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Just pulled version 5.4.0 (df0274c37379c0a8dfa3ece2cfd7e265c571df68) from github. Unit test failed like

Tests in error: 
  testEmptyFieldB(org.dozer.functional_tests.InvalidMappingTest): Unexpected exception, expected&#60;java.lang.NullPointerException&#62; but was&#60;org.dozer.MappingException&#62;

Tests run: 873, Failures: 0, Errors: 1, Skipped: 13


</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1352477584</field>
		<field name="user_name">buzdin</field>
		<field name="body">build fixed</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1352477587</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1352477587</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1352477587</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1352477587</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1352477587</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3381218</field>
	<field user_id="769752" name="submitted_by">markkerzner</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Documentation fix</field>
	<field name="open_date">1311874515</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Documentation Issue</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">Here, http://dozer.sourceforge.net/documentation/springintegration.html

instead of &#60;list/&#62; it should be &#60;/list&#62;</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1318189140</field>
		<field name="user_name">buzdin</field>
		<field name="body">done, will publish with 5.3.3</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1318189140</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318189140</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318189140</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318189140</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318189140</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318189140</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318189140</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3008059</field>
	<field user_id="2934177" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">iterate mapping with more than one hint fails</field>
	<field name="open_date">1274978710</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">We have an object structure with a parent and a list of children. The child objects are of different type but all implement the same interface. Assume the following mapping:

  &#60;mapping&#62;
    &#60;class-a&#62;ParentDto&#60;/class-a&#62;
    &#60;class-b&#62;Parent&#60;/class-b&#62;
    &#60;field&#62;
      &#60;a&#62;children&#60;/a&#62;
      &#60;b set-method=&#34;addChild&#34; type=&#34;iterate&#34;&#62;children&#60;/b&#62;
      &#60;a-hint&#62;
        ChildADto,
        ChildBDto
      &#60;/a-hint&#62;
      &#60;b-hint&#62;
        ChildA,
        ChildB
      &#60;/b-hint&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;

The mapping fails because MappingProcessor assumes that only one destination hint is present. This seems to be an unnecessary restriction. The following patch fixes the issue in our case:

$ diff MappingProcessor.java MappingProcessor.java.patched
606c606
&#60;             value = map(value, fieldMapping.getDestHintContainer().getHint());
---
&#62;             value = map(value, fieldMapping.getDestHintType(value.getClass()));

please consider applying this patch to the dozer codebase.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1318187672</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk</field>
</message>

<message>
		<field name="adddate">1283413049</field>
		<field name="user_name">jegese</field>
		<field name="body">Hi,

I have created a new issue in the patches where I have uploaded the unit test regarding this topic.

https://sourceforge.net/tracker/?func=detail&#38;aid=3058022&#38;group_id=133517&#38;atid=727370</field>
</message>

<message>
		<field name="adddate">1281961434</field>
		<field name="user_name">jegese</field>
		<field name="body">I have a unit test for learning how &#34;iterate&#34; works with other attributes like remove orphan, cumulative, and hints. Actually, none of the combination of these attributes works if I use iterate.

For the hint attribute the solution would be to review the usages of the method:

org.dozer.fieldmap.HintContainer.getHint()

and replace them where needed as the posts wrote.

I couldn't attach the unit test to this issue, how could I do that without opening a new issue?</field>
</message>

<message>
		<field name="adddate">1275577333</field>
		<field name="user_name"></field>
		<field name="body">same issue reported here: &#34;list with a hierarchy - hint problem - ID: 2794873&#34;
http://sourceforge.net/tracker/?func=detail&#38;aid=2794873&#38;group_id=133517&#38;atid=727370;</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1318187672</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318187672</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318187672</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1049123</field>
		<field name="entrydate">1318187672</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318187672</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318187672</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1316535963</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3409577</field>
	<field user_id="3544727" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Mapping null values within List&#60;&#62;List mapping causes NPE</field>
	<field name="open_date">1316025316</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">See: https://sourceforge.net/projects/dozer/forums/forum/452530/topic/4706621

I looked at the source and figured out, that looking up converters dies with NPE when the src value is null while mapping List&#60;&#62;List.
It can't recognize the type of the destination properly. What the patch does:

- first, try to use the last found dest type (as before)
- if not found, try to get the dest object type from dest hint (new)
- if not found, try to get the dest object type from src hint (as before)

In addition I added missing support for map-null attribute. It's now respected correctly.
I've seen that Set's have similar problems but I didn't patch them too.

After applying the patch, all testcases are still valid.

Please review the patch and if you find it useful, please apply it to Sets as well and
integrate it in the next version.

Thanks
Veit
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1318179836</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk</field>
</message>

<message>
		<field name="adddate">1316035770</field>
		<field name="user_name"></field>
		<field name="body">Seemed to be a mapping error. After correcting the mapping the error didn't occur again. Sorry for the inconvenience.
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1316035770</field>
		<field name="entrydate">1318179836</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318179836</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1331587</field>
		<field name="entrydate">1318179836</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">105</field>
		<field name="entrydate">1318179836</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">3</field>
		<field name="entrydate">1318179836</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1316035770</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1316035770</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1316035770</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1316035770</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">423566: patch.txt</field>
		<field name="entrydate">1316025318</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3385226</field>
	<field user_id="3495367" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">9</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Multiple superclass mappings, fields mapped over and over.</field>
	<field name="open_date">1312340821</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">When classes being mapped have multiple super classes, super mappings are processed multiple times.

So if you have:

class TestClassA extends SuperClassA1{...}
class SuperClassA1 extends SuperClassA{...}
..and..
class TestClassB extends SuperClassB1{...}
class SuperClassB1 extends SuperClassB{...}

and mappings like so:
&#60;mapping&#62;
    &#60;class-a&#62;TestClassA&#60;/class-a&#62;
    &#60;class-b&#62;TestClassB&#60;/class-b&#62;
  &#60;/mapping&#62;   

  &#60;mapping&#62;
    &#60;class-a&#62;SuperClassA&#60;/class-a&#62;
    &#60;class-b&#62;SuperClassB&#60;/class-b&#62;
  &#60;/mapping&#62;   
  &#60;mapping&#62;
    &#60;class-a&#62;SuperClassA1&#60;/class-a&#62;
    &#60;class-b&#62;SuperClassB1&#60;/class-b&#62;
  &#60;/mapping&#62;

and do:
TestClassA a = new TestClassA();
dozerBeanMapper.map(a,TestClassB.class);

The fields defined in SuperClassA will be mapped twice. This is especially apparent in collection cases as the final mapped class will have the amount of collection items doubled.

Failing test and all test classes are in the attached ZIP file.
Failing unit test and all test classes are attached in the zip.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1318173737</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1318173737</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318173737</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318173737</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1331587</field>
		<field name="entrydate">1318173737</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318173737</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318173737</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1312343893</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">420117: dozerSuperMappingFailingTest.zip</field>
		<field name="entrydate">1312340823</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1953410</field>
	<field user_id="1607595" name="submitted_by">haschibaschi</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">inheritance problems with custom-converters on fields</field>
	<field name="open_date">1209389478</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">Ok following situation:

I use version 3.4, cause in the versions above 4 the inheritance-mapping is
broken.

The inheritance structure is like this:

c -&#62; b -&#62; a
z -&#62; y -&#62; x

on the classes a and x is a property with the name test (same name !!!)

The problem is, that dozer creates two superClassMaps. One with the
custom-converter declared, one without the custom-converter declared.

If the custom-converter would be executed decides alone the method
superClasses.toArray().

Cause this array would be used to process the super-type-mapping. And if
the super-class-mapping of b to y is at the first position, the
custom-converter wouldn't be executed.

A workaround is, to declare the custom-converter also on the b to y
mapping.

A test-case is provided, but it fails not everytime. Perhaps by you it
fails never. I had a rate of 50% failings (I think the trigger is the
add-method to the set)

I my view this bug has no relation to the bug 1950626 </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1318173714</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed by provided patch</field>
</message>

<message>
		<field name="adddate">1229397796</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Added failing test case.  The patch provided resolved this test case, but broke other regression tests.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1318173714</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318173714</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318173714</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318173714</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318173714</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318173714</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318173714</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">276138: inheritanceBug.jar</field>
		<field name="entrydate">1209389478</field>
		<field name="mod_by">haschibaschi</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3200805</field>
	<field user_id="3274293" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">deep index mapping for untyped Collection</field>
	<field name="open_date">1299365800</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">This is a follow up to the bug and subsequent patch --&#62; NullPointerException when mapping single fields to List - ID: 3157966

The patch correctly determines the type for Collections that have a defined type via Java 1.5 Generics, but does not account for the reverse mapping of untyped Collections, even with the presence of the deep-index-hint in the mapping configuration.  The attached patch adds another null check after attempting to get the type from the Generic Collection.  If the type is still null at this point, I believe it can be assumed that this is an untyped collection, and the first listed class as the deep-index-hint will be used as the type.  The patch also contains log warnings when using the deep-index-mapping on an untyped collection - but remove if they aren't thought necessary.

Attached is a patch file with changes to org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.java, as well as a test case, required pojo classes, and example mapping file for test case.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1318172607</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed by patch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1318172607</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318172607</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318172607</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1331587</field>
		<field name="entrydate">1318172607</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318172607</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318172607</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">403485: dozer-untyped-list-deep-index-patch.zip</field>
		<field name="entrydate">1299365801</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3314925</field>
	<field user_id="3426011" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Invalid</field>
	<field name="summary">OSGI Support after 5.2.1</field>
	<field name="open_date">1307750184</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hi, I saw that OSGI support was added in 5.2.1. It has been removed in the releases after that. Is there any reason for it? I can use the maven-bundle-plugin to OSGi it, but it would help if the OSGI'ed version of library is made available (Our release engg does not like modifying open source jars).

Thank you.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1307969980</field>
		<field name="user_name">buzdin</field>
		<field name="body">OSGi release is moved in the separate jar
http://repo1.maven.org/maven2/net/sf/dozer/dozer-osgi/</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1307969980</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1307969980</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1307969980</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1307969980</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3304697</field>
	<field user_id="3394980" name="submitted_by">bdaici</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Duplicate</field>
	<field name="summary">Cannot exclude deep fields</field>
	<field name="open_date">1305825481</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I am trying to exclude deeply mapped fields but the exclusion is not done, the fields do get set. There are getters/setters and the other mappings work well.

&#60;mapping&#62;
        &#60;class-a&#62;com.operative.dashboard.model.customfield.MultiSelectVal&#60;/class-a&#62;
        &#60;class-b&#62;com.operative.dashboard.dto.customfield.MultiSelectValTO&#60;/class-b&#62;
        &#60;field-exclude&#62;
            &#60;a&#62;multiSelectObj.optionObjs&#60;/a&#62;
            &#60;b&#62;multiSelectObj.optionObjs&#60;/b&#62;
        &#60;/field-exclude&#62;
    &#60;/mapping&#62;

public class MultiSelectVal extends CustomFieldVal {
  private MultiSelectObj multiSelectObj;

public class MultiSelectValTO extends CustomFieldValTO {
  private MultiSelectObjTO multiSelectObj;

public class MultiSelectObj extends CustomFieldObj {
  private List&#60;OptionObj&#62; optionObjs = new ArrayList&#60;OptionObj&#62;();

public class MultiSelectObjTO extends CustomFieldObjTO {
  private List&#60;OptionObjTO&#62; optionObjs = new ArrayList&#60;OptionObjTO&#62;();
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1305825545</field>
		<field name="mod_by">bdaici</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1305825545</field>
		<field name="mod_by">bdaici</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1305825545</field>
		<field name="mod_by">bdaici</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1305825545</field>
		<field name="mod_by">bdaici</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3303910</field>
	<field user_id="3294976" name="submitted_by">arie5000</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Boolean mapping</field>
	<field name="open_date">1305724279</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.1</field>
	<field name="details">Hi,

Where using dozer to map our DTO object to our Domain objects.
To prevent much xml configuration we use the same property in both classes.

When we use a property with type Boolean (or boolean) with the name isAuthorized (with getter public Boolean isAuthorized()) it is not being mapped by Dozer.
If we change the property getter to getIsAuthorized is is being mapped.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1305726648</field>
		<field name="user_name">arie5000</field>
		<field name="body">Seems like it is not a dozer issue, but a BlazeDS issue in our case.</field>
</message>

<message>
		<field name="adddate">1305726644</field>
		<field name="user_name">arie5000</field>
		<field name="body">Seems like it is not a dozer issue, but a BlazeDS issue in our case.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1305726644</field>
		<field name="mod_by">arie5000</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1305726644</field>
		<field name="mod_by">arie5000</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1305726644</field>
		<field name="mod_by">arie5000</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3289543</field>
	<field user_id="3294715" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">org.dozer.loader.api.TypeDefinition.mapNull default value</field>
	<field name="open_date">1303220386</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">Right now TypeDefinition.mapNull has default value = false, but should be = true.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1303820209</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1303820209</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1303820209</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1303820209</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1303820209</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1303820209</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3243252</field>
	<field user_id="3307963" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">[FAQ] Error in maven dependency</field>
	<field name="open_date">1301044504</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Documentation Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">There is a typo in the maven dependency section in the FAQ. The groupId lakcs a leading / which cases the xml to be malformed:

    &#60;dependency&#62;
      &#60;groupId&#62;net.sf.dozer&#60;groupId&#62;
      &#60;artifactId&#62;dozer&#60;/artifactId&#62;
      &#60;version&#62;${project.version}&#60;/version&#62;
    &#60;/dependency&#62;</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1303819334</field>
		<field name="user_name">buzdin</field>
		<field name="body">thanks, fixed</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1303819334</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1303819334</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1303819334</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1303819334</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1303819334</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3037311</field>
	<field user_id="619157" name="submitted_by">couzteau</field>
	<field user_id="1777661" name="assigned_to">mthielen</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Cannot install from update site</field>
	<field name="open_date">1280522142</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Eclipse Plugin Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I get the  error &#34;No repository found at http://dozer.sourceforge.net/eclipse-plugin/&#34; when trying to install the eclipse plugin from the site.

Running STS 2.3.2.RELEASE, OSX10.6.4 1.6.0_20-b02-279</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1299967573</field>
		<field name="user_name">buzdin</field>
		<field name="body">dependencies bundled now. installable on 3.6</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1299967573</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1299967573</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1299967573</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1299967573</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2815000</field>
	<field user_id="484267" name="submitted_by">baron_roberts</field>
	<field user_id="1777661" name="assigned_to">mthielen</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Cannot install Eclipse plugin</field>
	<field name="open_date">1246430131</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Eclipse Plugin Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Now that I can access the update site, Eclipse says that it cannot install the plugin because:

&#34;Cannot find a solution satisfying the following requirements org.eclipse.debug.ui [3.4.0.v20080529-1300].&#34;

This is on Eclipse 3.4.2 on a Mac running 10.5.7.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1299967564</field>
		<field name="user_name">buzdin</field>
		<field name="body">dependencies bundled now. installable on 3.6</field>
</message>

<message>
		<field name="adddate">1255084106</field>
		<field name="user_name">baron_roberts</field>
		<field name="body">I installed the plugin manually and found that one of the problems is the use of an internal jface viewer api that is no longer present 3.5. Attached is a patch to fix that problem.</field>
</message>

<message>
		<field name="adddate">1248396283</field>
		<field name="user_name">rajesh31</field>
		<field name="body">Unable to Install the plug in The Site does not seem to be working .
If i go the manual route of copying into the eclipse plugin folder . even that does not seem to work . </field>
</message>

<message>
		<field name="adddate">1247298814</field>
		<field name="user_name">baron_roberts</field>
		<field name="body">I tried installing the plugin on Eclipse 3.5 and received a different error. Apparently the plugin is looking for a specific version of the Spring bundle included with the Spring IDE plugin. Apparently the current version of the Spring plugin has changed the name of its components so the Dozer plugin will not install.</field>
</message>

<message>
		<field name="adddate">1247118019</field>
		<field name="user_name">baron_roberts</field>
		<field name="body">Is there any update to this issue? I would love to be able to use the Eclipse plugin.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1299967564</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1299967564</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1299967564</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1299967564</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1255084182</field>
		<field name="mod_by">baron_roberts</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">345899: patch.txt</field>
		<field name="entrydate">1255084151</field>
		<field name="mod_by">baron_roberts</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1246480811</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1246480811</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2828946</field>
	<field user_id="2129102" name="submitted_by">schumnana1</field>
	<field user_id="1777661" name="assigned_to">mthielen</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Eclipse Plugin can not be installed on 3.5</field>
	<field name="open_date">1248869984</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Eclipse Plugin Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Eclipse Plugin can not be installed on 3.5 (dependency problems).</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1299967547</field>
		<field name="user_name">buzdin</field>
		<field name="body">dependencies bundled now. installable on 3.6</field>
</message>

<message>
		<field name="adddate">1255536478</field>
		<field name="user_name">hoomb</field>
		<field name="body">it doesn't solve the problem as there is no &#34;ViewerSingleSelectionObservableValue&#34; class in JFace ver. 3.5.x anymore which the Plugin is using it to show the mapping values, this means, this deprecated class must be replaced with a correct one:

java.lang.NoClassDefFoundError: org/eclipse/jface/internal/databinding/viewers/ViewerSingleSelectionObservableValue
at net.sf.dozer.eclipse.plugin.editorpage.DozerModelManager.bindFieldValue(DozerModelManager.java:474)
at net.sf.dozer.eclipse.plugin.editorpage.DozerModelManager.createMappingFieldBindings(DozerModelManager.java:416)
at net.sf.dozer.eclipse.plugin.editorpage.DozerModelManager.createFieldBindings(DozerModelManager.java:380)
at net.sf.dozer.eclipse.plugin.editorpage.pages.FieldDetailsPage.selectionChanged(FieldDetailsPage.java:158)
at org.eclipse.ui.forms.DetailsPart$1.run(DetailsPart.java:274)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.forms.DetailsPart.showPage(DetailsPart.java:261)
at org.eclipse.ui.forms.DetailsPart.update(DetailsPart.java:234)
at org.eclipse.ui.forms.DetailsPart.selectionChanged(DetailsPart.java:219)
at org.eclipse.ui.forms.ManagedForm.fireSelectionChanged(ManagedForm.java:148)
at net.sf.dozer.eclipse.plugin.editorpage.pages.MappingMasterPage$1.selectionChanged(MappingMasterPage.java:145)
at org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:162)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.runtime.Platform.run(Platform.java:888)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:48)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
at org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:160)
at org.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:2132)
at org.eclipse.jface.viewers.StructuredViewer.handleSelect(StructuredViewer.java:1160)
at org.eclipse.jface.viewers.StructuredViewer$4.widgetSelected(StructuredViewer.java:1190)
at org.eclipse.jface.util.OpenStrategy.fireSelectionEvent(OpenStrategy.java:228)
at org.eclipse.jface.util.OpenStrategy.access$4(OpenStrategy.java:222)
at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:389)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1003)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3880)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3473)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2405)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2369)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2221)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:500)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:493)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:113)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:194)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:368)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:559)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:514)
at org.eclipse.equinox.launcher.Main.run(Main.java:1311)

</field>
</message>

<message>
		<field name="adddate">1254989278</field>
		<field name="user_name">kieselhorst</field>
		<field name="body">Patched it by removing the 2.5.6 version from feature.xml.</field>
</message>

<message>
		<field name="adddate">1249641656</field>
		<field name="user_name">hoomb</field>
		<field name="body">It's trying to build a dependency to SpringIDE 2.5.6 which fails.

Cannot complete the install because one or more required items could not be found.
  Software being installed: Dozer Plugin Feature 0.8.0 (net.sf.dozer.eclipse.feature.feature.group 0.8.0)
  Missing requirement: Dozer Plugin Feature 0.8.0 (net.sf.dozer.eclipse.feature.feature.group 0.8.0) requires 'org.springframework.bundle.spring 2.5.6' but it could not be found
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1299967547</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1299967547</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1299967547</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1299967547</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3157966</field>
	<field user_id="3195945" name="submitted_by">rakaposhi25</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">NullPointerException when mapping single fields to List</field>
	<field name="open_date">1294994556</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">I have following situation

public class Person1
{
   private String familyName;
   private String secondFamilyName;
}

public class PersonName
{
   private String familyName;
}

public class Person2
{
    private List&#60;PersonName&#62; personNames;
}

mapping:


&#60;mapping&#62;
	&#60;class-a&#62;Person1&#60;/class-a&#62;
	&#60;class-b&#62;Person2&#60;/class-b&#62;
	&#60;field&#62;
	    &#60;a&#62;familyName&#60;/a&#62;
	    &#60;b&#62;personNames[0].familyName&#60;/b&#62;
	&#60;/field&#62;
	&#60;field&#62;
	    &#60;a&#62;secondFamilyName&#60;/a&#62;
	    &#60;b&#62;personNames[1].familyName&#60;/b&#62;
	&#60;/field&#62;

when I execute the mapping I get a NullPointerException:

Stacktrace:

java.lang.NullPointerException
	at java.lang.Class.isAssignableFrom(Native Method)
	at org.dozer.factory.ConstructionStrategies$ByGetInstance.isApplicable(ConstructionStrategies.java:113)
	at org.dozer.factory.DestBeanCreator.create(DestBeanCreator.java:64)
	at org.dozer.factory.DestBeanCreator.create(DestBeanCreator.java:51)
	at org.dozer.factory.DestBeanCreator.create(DestBeanCreator.java:47)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.writeDeepDestinationValue(GetterSetterPropertyDescriptor.java:195)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.setPropertyValue(GetterSetterPropertyDescriptor.java:86)
	at org.dozer.fieldmap.FieldMap.writeDestValue(FieldMap.java:92)
	at org.dozer.MappingProcessor.writeDestinationValue(MappingProcessor.java:869)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:331)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:270)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:239)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:181)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:125)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:120)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:111)
	at com.cg.ihe.doc.sourceadapter.internal.TianiDozerMappingTest.testPatient(TianiDozerMappingTest.java:139)

I think the problem is in GetterSetterProperty in line 195 with pd.getPropertyType().getComponentType() because pd.getPropertyType() returns null for a java. util.List. 

I think you should use  Class&#60;?&#62; genericType = ReflectionUtils.determineGenericsType(pd); to determine the type as used in line 162.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1297539363</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed, will be in 5.3.2</field>
</message>

<message>
		<field name="adddate">1295979561</field>
		<field name="user_name">sah5</field>
		<field name="body">I'm also getting this error, with Dozer v5.3.0.
Any workaround in the meantime for this?</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1297539363</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1297539363</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1297539363</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1297539363</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1297539363</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3129869</field>
	<field user_id="3155457" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">java.util.Map is not mapped entirely</field>
	<field name="open_date">1291638498</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">I have a Entity containing translations in java.util.Map&#60;String, EntityInt&#62;.
EntityInt is a classe that contain a label, a code and a parent reference (baseObject) to translate my bean.

When i try to map my Entity into a DTO that contains DTOInt like this : java.util.Map&#60;String, DTOInt&#62;.
My map contains a DTOInt in the first element of my map but all the rest of my map contains EntityInt.

If I set the baseObject to null or if I delete it from the superclass of DTOInt so all works fine.

The mapping configuration : 
	&#60;mapping&#62;
		&#60;class-a&#62;poc.Entity&#60;/class-a&#62;
		&#60;class-b&#62;poc.dto.DTO&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;translations&#60;/a&#62;
			&#60;b&#62;translations&#60;/b&#62;
			&#60;a-hint&#62;poc.EntityInt&#60;/a-hint&#62;
			&#60;b-hint&#62;poc.dto.DTOInt&#60;/b-hint&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;


Regards.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1296829204</field>
		<field name="user_name">sf-robot</field>
		<field name="body">This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1292880590</field>
		<field name="user_name">buzdin</field>
		<field name="body">Can you reproduce that with the latest version of Dozer?
If I get the problem only first element in the map was translated correctly and the rest is copied as is. I remember fixing something similar in 5.3.0.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1292940511</field>
		<field name="entrydate">1296829204</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1296829204</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1296829204</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1292940511</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1292940511</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">395369: OOM.png</field>
		<field name="entrydate">1291638499</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3151273</field>
	<field user_id="3171845" name="submitted_by">fuzails</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">9</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">StackOverFlow when using MapperAware Custom Converters</field>
	<field name="open_date">1294159273</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">When using Custom Converters there is no ability to retrieve if the object has already been processed this can cause a StackOverFlow error if the CustomConverters are Mapperaware and internally use the mapper to map an object after and before some processing.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1294924005</field>
		<field name="user_name">fuzails</field>
		<field name="body">Sorry about that. </field>
</message>

<message>
		<field name="adddate">1294921086</field>
		<field name="user_name">buzdin</field>
		<field name="body">ok, submitted the code anyway.</field>
</message>

<message>
		<field name="adddate">1294393073</field>
		<field name="user_name">buzdin</field>
		<field name="body">please resubmit your test code without license headers in the source code. Otherwise I can not integrate it to Dozer source code.</field>
</message>

<message>
		<field name="adddate">1294159637</field>
		<field name="user_name">fuzails</field>
		<field name="body">See https://sourceforge.net/tracker/?func=detail&#38;aid=3017589&#38;group_id=133517&#38;atid=727371#</field>
</message>

<message>
		<field name="adddate">1294159576</field>
		<field name="user_name">fuzails</field>
		<field name="body">This is a blocker for us, it would also resolve  ID: 3017589 for us</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1294921086</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1294921086</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1294921086</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1294159718</field>
		<field name="mod_by">fuzails</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1294159718</field>
		<field name="mod_by">fuzails</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1294159718</field>
		<field name="mod_by">fuzails</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1294159578</field>
		<field name="mod_by">fuzails</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">397656: BidirectionalMany.java_1.tar.gz</field>
		<field name="entrydate">1294159513</field>
		<field name="mod_by">fuzails</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">397655: MappingProcessor.patch</field>
		<field name="entrydate">1294159274</field>
		<field name="mod_by">fuzails</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3150436</field>
	<field user_id="3184793" name="submitted_by">rramakrishnan</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Duplicate</field>
	<field name="summary">Invalid mapping files causes DozerBeanMapper to keep waiting</field>
	<field name="open_date">1294076048</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.1</field>
	<field name="details">Steps to reproduce :
A singleton DozerBeanMapper is instantiated . And an invalid mapping file is available for loading via the DozerBeanMapper::setMappingFiles() call..
When the mapper is invoked for object conversion, the mapper keeps waiting ..

Question :
Is this behavior normal ?. Can the mapper check for the validity of mapping files while instantiating the Mapper itself ?

Pls. advise.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1294135092</field>
		<field name="user_name">buzdin</field>
		<field name="body">closed</field>
</message>

<message>
		<field name="adddate">1294076155</field>
		<field name="user_name">rramakrishnan</field>
		<field name="body">This is a duplicate to bug#3150423</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1294135092</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1294135092</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1294135092</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3097462</field>
	<field user_id="562259" name="submitted_by">cbourque1</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Invalid</field>
	<field name="summary">one-way doesn't work at the mapping level</field>
	<field name="open_date">1288280496</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">One way mapping doesn't work when used at the mapping level:

&#60;mapping type=&#34;one-way&#34;&#62;
    &#60;class-a&#62;A&#60;/class-a&#62;
    &#60;class-b&#62;APrime&#60;/class-b&#62;
&#60;/mapping&#62;

When mapping APrime to A, the fields in APrime are still copied to A!
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1293892724</field>
		<field name="user_name">buzdin</field>
		<field name="body">sorry for the deja-vu effect :)

Missed your and mine comments altogether.

Having looked at the test you sent came to conclusion that this is still not a bug.

One important point is wildcard setting in configuration block. In your case it is &#34;true&#34;. To make test pass you should add one more reverse one-way mapping with wildcard=false.

Another option is to set configuration level wildcard to false and then Dozer will not try to perform mappings automatically, but only via explicit field mappings.

&#60;mapping wildcard=false type=one-way&#62;
&#60;a&#62;APrime&#60;/a&#62;
&#60;b&#62;A&#60;/b&#62; 
&#60;/maping&#62;

I am closing the issue ticket.</field>
</message>

<message>
		<field name="adddate">1293824618</field>
		<field name="user_name">cbourque1</field>
		<field name="body">Didn't you read my previous comment? I have already tried that!</field>
</message>

<message>
		<field name="adddate">1293795035</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi, you should also set wildcard=false.
Dozer works in implicit and explicit mapping modes. You are telling in your mapping that you want explicit one-way and implicit other way around. What you need in addition is to disable implicit mappings via wildcard attribute</field>
</message>

<message>
		<field name="adddate">1288364071</field>
		<field name="user_name">cbourque1</field>
		<field name="body">I tried the following and it didn't work:

&#60;mapping type=&#34;one-way&#34; wildcard=&#34;false&#34;&#62;
    &#60;class-a&#62;com.mycompany.mavenproject1.A&#60;/class-a&#62;
    &#60;class-b&#62;com.mycompany.mavenproject1.APrime&#60;/class-b&#62;
&#60;/mapping&#62;
</field>
</message>

<message>
		<field name="adddate">1288337902</field>
		<field name="user_name">buzdin</field>
		<field name="body">Could you try to add empty mapping from APrime to A with wildcard=false specified. I have a feeling that even if you choose one-way, but you are having wildcard option, then it is one-way only for explicit mappings, not implicit.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1293892724</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293892724</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1163967</field>
		<field name="entrydate">1293892724</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293892724</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1293795035</field>
		<field name="entrydate">1293824618</field>
		<field name="mod_by">cbourque1</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1293824618</field>
		<field name="mod_by">cbourque1</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1293795035</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1293795035</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1293795035</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293795035</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">391469: mavenproject1.zip</field>
		<field name="entrydate">1288281895</field>
		<field name="mod_by">cbourque1</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2856035</field>
	<field user_id="890710" name="submitted_by">justinwalsh</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Mapping String collections with &#34;iterate&#34; fails</field>
	<field name="open_date">1252591814</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">I have two classes, each with a Set of Strings called &#34;names&#34;
o Class WithAccessors contains getters and setters for the collection
o Class WithoutAccessors contains a getter, no setter, but an addName(String name) method

public class WithAccessors {
    
    private Set&#60;String&#62; names = new HashSet&#60;String&#62;();
    
    public Set&#60;String&#62; getNames() {
        return names;
    }
    public void setNames(Set&#60;String&#62; names) {
        this.names = names;
    }
}

public class WithoutAccessors {
    
    private Set&#60;String&#62; names = new HashSet&#60;String&#62;();
    
    public void addName(String name) {
        names.add(name);
    }
    public Set&#60;String&#62; getNames() {
        return names;
    }
}

I provide a mapping as follows:

  &#60;mapping&#62;
    &#60;class-a&#62;WithAccessors&#60;/class-a&#62;
    &#60;class-b&#62;WithoutAccessors&#60;/class-b&#62;
    &#60;field&#62;
        &#60;a&#62;names&#60;/a&#62;
        &#60;b set-method=&#34;addName&#34; type=&#34;iterate&#34;&#62;names&#60;/b&#62;
        &#60;b-hint&#62;java.lang.String&#60;/b-hint&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;

The following test fails:
    @Test
    public void someConversionStringCollectionUsingCustomAccessors() {
        
        WithAccessors with = new WithAccessors();
        Set&#60;String&#62; names = new HashSet&#60;String&#62;();
        names.add(&#34;foo&#34;);
        with.setNames(names);
        
        WithoutAccessors without = dozerBeanMapper.map(with, WithoutAccessors.class);
        Assert.assertEquals(1, without.getNames().size());
        Assert.assertEquals(&#34;foo&#34;, without.getNames().iterator().next());
    }

The converted collection is the correct length (1) but contains an empty string. 

The value to be set (&#34;foo&#34;) is correct up until this point in the org.dozer.MappingProcessor.mapFromIterateMethodFieldMap(Object, Object, Object, FieldMap) method:
value = map(value, fieldMapping.getDestHintContainer().getHint());

At that point the returned value is empty.

It appears as if the method which is invoked tries to map a constant string value to a String object.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1293794472</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1293794473</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293794473</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">2912290</field>
		<field name="entrydate">1293794473</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1293794473</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1293794473</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293794473</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1275377302</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3124339</field>
	<field user_id="3148947" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Add ability to define is-accessible at the type level</field>
	<field name="open_date">1291190224</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Hi

Add ability to define is-accessible at the type level (ie for all the fields of a given type)
Sometimes the use (or not ) of getter and setter is more a programming style, and we may wish to apply this style to the entire type,
without defining all fields.

Possible syntax :
&#60;mapping&#62;
    &#60;class-a is-all-accessible=&#34;false&#34;&#62;org.dozer.vo.TestObject&#60;/class-a&#62;
    &#60;class-b is-all-accessible=&#34;true&#34;&#62;org.dozer.vo.TestObjectPrime&#60;/class-b&#62;
&#60;/mapping&#62;

Thanks</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1312473533</field>
		<field name="user_name"></field>
		<field name="body">Hey, not sure if I'm miss understanding this feature as it was released in 5.3.2... 

I'm trying to map a class that has only public fields with no getters/setters to another class that has getters/setters.  I provide a mapping similar to this in xml:
  &#60;mapping&#62; 
    &#60;class-a is-accessible=&#34;true&#34;&#62;Object.that.has.no.getters.setters&#60;/class-a&#62;
    &#60;class-b&#62;object.with.getters.setters&#60;/class-b&#62; 
  &#60;/mapping&#62;  

When I perform the map in the program I don't get any data in the produced object.  Isn't the class level is-accessible flag supposed to act as if i had explicitly put the flag for each of the fields?  Is the behavior I'm seeing a bug?  

Explicitly using the flag on the fields does work but this requires me to define field mappings for all the fields.
</field>
</message>

<message>
		<field name="adddate">1293576135</field>
		<field name="user_name">buzdin</field>
		<field name="body">done. the same attribute name is-accessible is used.
you can override the behavior of particular fields even if is-accessible is set for the whole class.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1293576135</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1293576135</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1323099</field>
		<field name="entrydate">1293576135</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1293576135</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1293576135</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3134335</field>
	<field user_id="1231841" name="submitted_by">dstieg1</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Mapping of XMLGregorianCalendar not working</field>
	<field name="open_date">1291987135</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">I have two JAXB objects where each have an XMLGregorianCalendar field. I am trying to map them using Dozer 5.3.1. It seems to map correctly without any hiccups yet when I ran a JUnit test to compare the XMLGregorianCalendar from the source object to the one in the destination I got an assertion error. The error was due to the source XMLGregorianCalendar having a value for the timezone field while the destination did not. Every other field in the XMLGregorianCalendar though seemed to be mapped correctly.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1292795596</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed in 5.3.2. XMLGregorianCalendar has both timezone and timeZone. Since Dozer checked those using equalsIgnoreCase this was causing a problem. Now equals() checks is prevalent over equalsIgnoreCase.

In a few words  - now it works :)</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1292795596</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1292795596</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1292795596</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1323099</field>
		<field name="entrydate">1292795596</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1292795596</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1292795596</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3136650</field>
	<field user_id="1748305" name="submitted_by">jdavid82</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">ClassMappings get wrong ClassMap in polymorphism case</field>
	<field name="open_date">1292260736</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">I have an issue in the following case:

class A {
 private String prop1:
 private String prop2;
 // geters/setters
}

class B {
 private String prop1:
 // geters/setters
}

class C extends B{
 private String prop2;
 // geters/setters
}

if I map A-&#62;C ClassMappings store a ClassMap&#60;A,C&#62; then I try to map A -&#62; B and ClassMappings give me the  previous ClassMap&#60;A,C&#62; so I have an exception like : 
org.dozer.MappingException: No read or write method found for field (prop2) in class (class B)

the bug is caused by the cose in &#34;findInterfaceMapping&#34; method
  ex :  if (destClass.isAssignableFrom(mappingDestClass) ||
              (mappingDestClass.isInterface() &#38;&#38; mappingDestClass.isAssignableFrom(destClass))) {
 So has B.isAssignableFrom(C) =&#62; true ClassMap&#60;A,C&#62; is ok for the couple A,B

For resolving it I just comment the &#34;findInterfaceMapping&#34; method and it's call in &#34;find&#34; method.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1292793258</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in 5.3.2. This was a feature for abstract type mappings. Now if() conditions are also checking if type is abstract or not.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1292793258</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1292793258</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1323099</field>
		<field name="entrydate">1292793258</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1292793258</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1292793258</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3134120</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Thread hang during initialization</field>
	<field name="open_date">1291969205</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Dozer version used - 5.3.1
Dozer mapper is defined via spring as singleton as recommended. 
Whenever the following exception occurs ,
java.lang.IllegalArgumentException: Duplicate Class Mapping Found.
The consecutive calls on the mapper instance is hung. 
This seems to be a bug. Can you please cross verify. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1292789786</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed, now all threads will exit with exceptions</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1292789786</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1292789786</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1292789786</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1292789786</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3121314</field>
	<field user_id="3146612" name="submitted_by"></field>
	<field user_id="1777661" name="assigned_to">mthielen</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">Invalid</field>
	<field name="summary">Eclipse Update-URL KO</field>
	<field name="open_date">1290964231</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Eclipse Plugin Issue</field>
	<field name="artifact_group_id">Eclipse Plugin</field>
	<field name="details">http://dozer.sourceforge.net/eclipse-plugin

An error has been encountered in accessing this page.

1. Server: dozer.sourceforge.net 
2. URL path: /eclipse-plugin/ 
3. Error notes: NONE 
4. Error type: 403 
5. Request method: GET 
6. Request query string: NONE 
7. Time: 2010-11-28 17:09:48 UTC (1290964188)

Reporting this problem: The problem you have encountered is with a project web site hosted by SourceForge.net. This issue should be reported to the SourceForge.net-hosted project (not to SourceForge.net).

If this is a severe or recurring/persistent problem, please do one of the following, and provide the error text (numbered 1 through 7, above):

Contact the project via their designated support resources.
Contact the project administrators of this project via email (see the upper right-hand corner of the Project Summary page for their usernames) at user-name@users.sourceforge.net
If you are a maintainer of this web content, please refer to the Site Documentation regarding web services for further assistance.

NOTE: As of 2008-10-23 directory index display has been disabled by default. This option may be re-enabled by the project by placing a file with the name &#34;.htaccess&#34; with this line:

Options +Indexes</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1291029873</field>
		<field name="user_name">buzdin</field>
		<field name="body">Eclipse plugin is currently not supported. Waiting for contributor to make it work and upgrade for latest Eclipse version.

It is mentioned on this page http://dozer.sourceforge.net/documentation/eclipse-plugin/installation.html</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1291029873</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1291029873</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1291029873</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1291029873</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1290968890</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3120346</field>
	<field user_id="3076587" name="submitted_by">ucrkarthik</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Invalid</field>
	<field name="summary">Deploying WebService with Dozer</field>
	<field name="open_date">1290836227</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">When I try to deploy a Web Service with Dozer in Web Logic I get the following error:

Nov 26, 2010 9:29:40 PM com.sun.xml.ws.transport.http.HttpAdapter fixQuotesAroundSoapAction
WARNING: Received WS-I BP non-conformant Unquoted SoapAction HTTP header: urn:createUserSupportPlan
Nov 26, 2010 9:29:40 PM com.sun.xml.ws.server.sei.EndpointMethodHandlerImpl invoke
SEVERE: org.apache.commons.lang.ClassUtils.getClass(Ljava/lang/String;)Ljava/lang/Class;
java.lang.NoSuchMethodError: org.apache.commons.lang.ClassUtils.getClass(Ljava/lang/String;)Ljava/lang/Class;
        at org.dozer.util.DefaultClassLoader.loadClass(DefaultClassLoader.java:31)
        at org.dozer.DozerInitializer.loadBeanType(DozerInitializer.java:116)
        at org.dozer.DozerInitializer.initialize(DozerInitializer.java:98)
        at org.dozer.DozerInitializer.init(DozerInitializer.java:75)
        at org.dozer.DozerBeanMapper.init(DozerBeanMapper.java:116)
        at org.dozer.DozerBeanMapper.&#60;init&#62;(DozerBeanMapper.java:80)
        at org.dozer.DozerBeanMapperSingletonWrapper.getInstance(DozerBeanMapperSingletonWrapper.java:43)

Has anyone run into this error?

Thanks,
Karthik</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1291029800</field>
		<field name="user_name">buzdin</field>
		<field name="body">You should upgrade your commons-lang dependency. This is a known problem if you use outdated jar version.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1291029800</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1291029800</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1291029800</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3066742</field>
	<field user_id="2782883" name="submitted_by">wujeksrujek</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">9</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Recursive mapping of List properties results in ClassCastExc</field>
	<field name="open_date">1284547282</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.1</field>
	<field name="details">I have the following beans:
1. JAXB - XMLApplication has a name, version and a list of XMLModules; XMLModule has a name and userName, where username uses a custom converter to convert between String and User
2. application beans (eventually these will be JPA entities) - Application that has a name, version and a list of Modules; Module has a name and a User

When the JAXB graph (#1) is unmarshalled, I try to create the other graph (#2). This works fine: the factories are called, the converter is called.
When I take the resulting Application instance, and try to map it back to XMLApplication, it doesn't work for the modules properties - the ones that get written to XMLApplication.modules are of type Module, simply reference-copied. The converter is not used, nor is the JAXBFactory - basically the whole mapping for XMLModule / Module is ignored.

I am attaching a test case (maven 2 project) that contains:
1. src/main/java/com.test.config - package for the Application hierarchy
2. src/main/java/com.test.dozer - package for the converter
3. src/main/generated/com.test.xml - package for the XMLApplication hierarchy, generated from my schema by JAXB plugin
4. src/main/resources/XML - application.xsd is the schema for JAXB, bindings.xjb refines the mapping slightly (influences the way code from #3 is generated) and dozerApplication.xml that is a Dozer mapping file
5. src/test/resources/XML/applicationInstance.xml - is a test XML file for JAXB to generate the graph
6. src/test/java contains one test class that unmarshalls the XML, performs the XMLApplication -&#62; Application mapping, and then attempts to do it the other way round; is also contains a comment which point the error and the cause (ClassCastException)

The logs include the following line</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1289760156</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed. Will be released in 5.3.1</field>
</message>

<message>
		<field name="adddate">1289146411</field>
		<field name="user_name">buzdin</field>
		<field name="body">Your test case works after providing collection mapping hint

&#60;field&#62;
            &#60;a is-accessible=&#34;true&#34;&#62;modules&#60;/a&#62;
            &#60;b&#62;modules&#60;/b&#62;
            &#60;b-hint&#62;com.test.xml.XMLModule&#60;/b-hint&#62;
        &#60;/field&#62;

However this is still a bug as Dozer looks at generic type on setter method only. Getter is ignored. And since JAXB generated Beans does not have setter for collections hint is needed as a workaround. Will be fixed in 5.3.1 and released this week. Hope it is not too late for you...

Dmitry</field>
</message>

<message>
		<field name="adddate">1284547469</field>
		<field name="user_name">wujeksrujek</field>
		<field name="body">Sorry, wrong button clicked.

The logs include the following line:
Sep 15, 2010 12:23:55 PM org.dozer.MappingProcessor mapCollection
WARNING: The destination object: com.test.xml.XMLApplication@265a2eaa does not have a write method
I don't know what it refers to, the XMLApplication.modules field is configured to be directly accessible.

I am setting the priority to 9 as we are deciding whether to go with Dozer or not, and this will have influence on the decision.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1289760156</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1289760156</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129554</field>
		<field name="entrydate">1289760156</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1289760156</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1284547470</field>
		<field name="mod_by">wujeksrujek</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">386725: DozerBidiRecursiveTest.zip</field>
		<field name="entrydate">1284547282</field>
		<field name="mod_by">wujeksrujek</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1852593</field>
	<field user_id="358115" name="submitted_by">benoitx</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Postponed</field>
	<field name="summary">4.1 and 4.2 CLASS level copy-by-references not working</field>
	<field name="open_date">1197917028</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi

We have a case whereby we use the JODA LocalDate (amongst other) on both source and target objects.  The JODA objects are immutable so, a copy by reference should be ok.

Unfortunately, left to its own device, Dozer creates a new instance of the LocalDate (ie TODAY) and does not copy the source value.

After several trials-errors, we can report that:
1/ defining a FIELD copy-by-reference does work fine but it would be quite tedious and risky to write a field configuration for each of those.
2/ defining a customer converter (see below) also works fine (but we should not have to convert...)
3/ the definition of CLASS level copy-by-references does NOT work

eg

&#60;mappings&#62;
  &#60;configuration&#62;
     &#60;!-- This works... --&#62;
     &#60;custom-converters&#62;
        &#60;converter type=&#34;xxxxx.LocalDateConverter&#34;&#62;
           &#60;class-a&#62;org.joda.time.LocalDate&#60;/class-a&#62;
             &#60;class-b&#62;org.joda.time.LocalDate&#60;/class-b&#62;
        &#60;/converter&#62;
     &#60;/custom-converters&#62;

     &#60;!-- This does not work! --&#62;
     &#60;copy-by-references&#62;       &#60;copy-by-reference&#62;org.joda.time.LocalDate&#60;/copy-by-reference&#62;
     &#60;/copy-by-references&#62;
  &#60;/configuration&#62;
&#60;/mappings&#62;

May be we misunderstood the XML configuration but shouldn't the copy-by-references be used whenever the class org.joda.time.LocalDate is found (there are NO sub-classes).

I have tested this issue with both 4.1 and 4.2.; I believe it is an issue with Dozer but could be wrong...

Is there any log/extra information that you might require?

Many thanks

Benoit</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1289483251</field>
		<field name="user_name">buzdin</field>
		<field name="body">It is impossible to investigate without the stacktrace. Closing until next incedent. In general copy-by-reference works, but could be failing in certain conditions.</field>
</message>

<message>
		<field name="adddate">1198210096</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Let me write a unit test and let you know what I come up with. Thanks for looking!</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1289483251</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1289483251</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1289483251</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1289483251</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1198210096</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3066750</field>
	<field user_id="2782883" name="submitted_by">wujeksrujek</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Invalid</field>
	<field name="summary">Implicit mapping of List doesn't work in the B -&#62; A directio</field>
	<field name="open_date">1284547675</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">The structure of the project is identical as here: https://sourceforge.net/tracker/index.php?func=detail&#38;aid=3066742&#38;group_id=133517&#38;atid=727368
the only difference being that 'modules' field is not explicitly mapped. As a result, when performing the B -&#62; A mapping, it is ignored (works for A -&#62; B). However, it is inconsistent with other implicit field, version, which works just fine in both directions.
Attaching a test case with a single test and a comment on the line that fails (maven 2 project).</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1289304060</field>
		<field name="user_name">buzdin</field>
		<field name="body">This is how Dozer works. Implicit mapping does not take into consideration properties with missing setter. In case of JAXB collection you do not have setter, thus Dozer does not resolve that as a writable property. Fields are not traversed in implicit mappings. As for related bug it will be fixed in 5.3.1.</field>
</message>

<message>
		<field name="adddate">1284547780</field>
		<field name="user_name">wujeksrujek</field>
		<field name="body">Including explicit mapping for the 'modules' field in the mapping file results in issue https://sourceforge.net/tracker/index.php?func=detail&#38;aid=3066742&#38;group_id=133517&#38;atid=727368 .</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1289304060</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1289304060</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1289304060</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">386727: DozerBidiImplicitListTest.zip</field>
		<field name="entrydate">1284547675</field>
		<field name="mod_by">wujeksrujek</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3102050</field>
	<field user_id="3116753" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">8</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">DozerBeanMapper initialization is not thread safe</field>
	<field name="open_date">1288768972</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.3.1</field>
	<field name="details">When multiple threads access the DozerBeanMapper (as a singleton), a situation can arise where threads try to get a mapping processor before the class mapping initialization has been completed. What happens is that the first thread calls getMappingProcessor, and loading of mapping files is started, but before this process is completed, other threads calls getMappingProcessor, and instead of waiting until the loading of mapping files has been completed, execution is continued with uninitialized class mappings. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1289140442</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk. Will be releasing 5.3.1 this week.</field>
</message>

<message>
		<field name="adddate">1288772950</field>
		<field name="user_name"></field>
		<field name="body">The previous comment is somewhat wrong. A new MappingProcessor instance is created for each thread, but each instance operates on a common instance of classMappings, which causes the problem.</field>
</message>

<message>
		<field name="adddate">1288771592</field>
		<field name="user_name"></field>
		<field name="body">It appears that the problem also applies to the method getClassMap in MappingProcessor. Multiple threads can see that the mapping is 'null' and attempt to create and add a new mapping to the classMappings table, which results in a &#34;Duplicate Class Mapping Found&#34;.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1289140442</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1289140442</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1163967</field>
		<field name="entrydate">1289140442</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1289140442</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1289140442</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">7</field>
		<field name="entrydate">1288769131</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1288769047</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">392071: threadsafebug.diff</field>
		<field name="entrydate">1288768972</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3102233</field>
	<field user_id="3117151" name="submitted_by">nitinkumar20</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Invalid</field>
	<field name="summary">org.joda.time.DateTime copy fails</field>
	<field name="open_date">1288793129</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">The copy for fields of type org.joda.time.DateTime fail from source to destination bean. Adding a custom converter that simply returns the source seems to be working fine. I believe this is a bug in the Dozer implementation as changing the field type also fixes the problem. Please fix.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1289118426</field>
		<field name="user_name">buzdin</field>
		<field name="body">Dozer does not handle joda.time out of the box.
DateTime instances can not be instantiated, thus you need to copy instances. To do so you could either write a custom converter as mentioned, or a simpler way to enable copy-by-reference option for DateTime type as described here. 

http://dozer.sourceforge.net/documentation/copybyreference.html 

Closing this issue, because it is not really a bug. Joda is not planned to be supported by Dozer without additional configuration. If mentioned does not help - feel free to reopen with additional comments.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1289118426</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1289118426</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1289118426</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3061171</field>
	<field user_id="2782883" name="submitted_by">wujeksrujek</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Imprecise documentation for DozerBeanMapper.setMappingFiles</field>
	<field name="open_date">1283866138</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Documentation Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi. The method's JavaDoc says only that these are 'files', whatever that means. It takes a good look into the code to see that these are actually classpath resources, whose contents is attempted to be read by various classloaders, and if this fails, it is possible that it is a URL. By using file:// URL it is possible to use external files, but the generall JavaDoc is very vague on this. Based on the info that could be found quickly, the fact that these are just files almost excluded Dozer as a framework for us, as we can't use the filesystem (EJB environment prohibits that); it seemed impossible that only files are supported and the code revealed that, maybe it would be a good idea to include a more detailed description what the 'files' are and how they are found.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1286713652</field>
		<field name="user_name">buzdin</field>
		<field name="body">added that to method javadoc.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1286713652</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1286713652</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1286713652</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1286713652</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1286713652</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3084022</field>
	<field user_id="3086087" name="submitted_by">mellster2010</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">ReflectionUtils.findAMethod can escape by returning null</field>
	<field name="open_date">1286575514</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">Calls to ReflectionUtils.findAMethod are guarded by catching NoSuchMethodException and then throwing a descriptive MappingException, e.g. in GetterSetterPropertyDescriptor.writeDeepDestinationValue. However ReflectionUtils.findAMethod can return null through ReflectionUtils.findMethod, thus breaking the contract of throwing NoSuchMethodException if the method was not found and causing a non-descriptive NullPointerException in the subsequent call of Method.invoke on null.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1286713007</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed in trunk.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1286713008</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1286713008</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1286713008</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129554</field>
		<field name="entrydate">1286713008</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1286713008</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1286713008</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3061167</field>
	<field user_id="2782883" name="submitted_by">wujeksrujek</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Unnecessary call to method</field>
	<field name="open_date">1283865830</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Performance Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">Hi. Here:
http://dozer.svn.sourceforge.net/viewvc/dozer/trunk/core/src/main/java/org/dozer/util/MappingValidator.java?revision=1070&#38;view=markup
in lines 58-59 you can see the very same method called twice in a row, once for side effects only, then the second one stores the result (URL). Looks like the first call is unnecessary and could be deleted.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1284667908</field>
		<field name="user_name">buzdin</field>
		<field name="body">the unnecessary statement was removed.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1284667909</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1284667909</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1284667909</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1284667909</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1284667909</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1284667909</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2725143</field>
	<field user_id="1759155" name="submitted_by">grzegorzoledzki</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Hard to use XML config when mapping from/to java.util.Map</field>
	<field name="open_date">1238595418</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">When using XML file to configure dozer to map between two {@link java.util.Map}s, there's no neutral configuration file.
The observed problem is as follows - when mapping without an XML file - it's OK, creating an XML file and providing &#60;mapping&#62; for this class but with no specific options make the mapping fail.

I thought:
	&#60;mapping&#62;
		&#60;class-a&#62;SomeClass&#60;/class-a&#62;
		&#60;class-b&#62;SomeClass&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;values&#60;/a&#62;
			&#60;b&#62;values&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;
is neutral to the mapping configuration and running with and without such an element should give the same results.
It doesn't if values is of type java.util.Map.

Sorry for a chaotic description, please take a look at the attached file. There's a working example (for both versions 4.2 and 5.0).</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283515064</field>
		<field name="user_name">buzdin</field>
		<field name="body">Did it in a slightly different fashion:

(isSupportedMap(classMap.getDestClassToMap())
                      &#38;&#38; !isSupportedMap(classMap.getSrcClassToMap()))
                  || (isSupportedMap(classMap.getSrcClassToMap())
                      &#38;&#38; !isSupportedMap(classMap.getDestClassToMap()))
                  || (isSupportedMap(fieldMap.getDestFieldType(classMap.getDestClassToMap()))
                      &#38;&#38; !isSupportedMap(fieldMap.getSrcFieldType(classMap.getSrcClassToMap())))
                  || (isSupportedMap(fieldMap.getSrcFieldType(classMap.getSrcClassToMap())))
                      &#38;&#38; !isSupportedMap(fieldMap.getDestFieldType(classMap.getDestClassToMap())

But the idea is the same.</field>
</message>

<message>
		<field name="adddate">1241764024</field>
		<field name="user_name">grzegorzoledzki</field>
		<field name="body">For us the workaround was to change:

              if (MappingUtils.isSupportedMap(classMap.getDestClassToMap())
                  || MappingUtils.isSupportedMap(classMap.getSrcClassToMap())
                  || MappingUtils.isSupportedMap(fieldMap.getDestFieldType(classMap.getDestClassToMap()))
                  || MappingUtils.isSupportedMap(fieldMap.getSrcFieldType(classMap.getSrcClassToMap()))) {

to

              if (MappingUtils.isSupportedMap(classMap.getDestClassToMap())
                  || MappingUtils.isSupportedMap(classMap.getSrcClassToMap())) {


to prevent MapFieldMap being used when mapping two java.util.Maps. I am not really sure if it's inline with all the use cases, so I don't submit it as a patch.
I only guess there's nothing special about mapping two maps, a generic FieldMap is enough. Mapping map's elements is a different story and a special FieldMap subclass (MapFieldMap) comes in handy.
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1283515064</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283515064</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1283515064</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283515064</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283515064</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">320677: dozerIssueWithMaps.zip</field>
		<field name="entrydate">1238595418</field>
		<field name="mod_by">grzegorzoledzki</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3058383</field>
	<field user_id="2884342" name="submitted_by">onetrakmindz</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">XMLGregorianCalendar instantiation fails</field>
	<field name="open_date">1283461070</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">When you get instance of a XMLGregorianCalendar field it returns a XMLGregorianCalendarImpl object which is an instanceof XMLGregorianCalendar. When trying to map this instantiation will fail. This is from a test where there was no conversion, simple XMLGregorianCalendar from one object to the next.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283513810</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed, will be shipped in 5.3.0</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1283513819</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283513819</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283513819</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283513810</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129554</field>
		<field name="entrydate">1283513810</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283513810</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">XMLGregorianCalendar</field>
		<field name="entrydate">1283461130</field>
		<field name="mod_by">onetrakmindz</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3058382</field>
	<field user_id="2884342" name="submitted_by">onetrakmindz</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">DateFormat instantiation fails</field>
	<field name="open_date">1283460986</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">When you get instance of a DateFormat field it returns a SimpleDateFormat object which is an instanceof DateFormat. When trying to map this instamtiation will fail. This is from a test where there was no conversion, simple DateFormat from one object to the next.

Sep 2, 2010 4:43:39 PM org.dozer.MappingProcessor mapField
SEVERE: Field mapping error --&#62;
  MapId: null
  Type: null
  Source parent class: com.stw.ws.test.TestCustConvXMLGCIObject
  Source field name: dateFormat
  Source field type: class java.text.SimpleDateFormat
  Source field value: java.text.SimpleDateFormat@f85ae543
  Dest parent class: com.stw.ws.test.TestCustConvXMLGCIObjectPrime
  Dest field name: dateFormat
  Dest field type: java.text.DateFormat
org.dozer.MappingException: java.lang.InstantiationException
	at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:88)
	at org.dozer.factory.ConstructionStrategies$ByConstructor.newInstance(ConstructionStrategies.java:252)
	at org.dozer.factory.ConstructionStrategies$ByConstructor.create(ConstructionStrategies.java:217)
	at org.dozer.factory.DestBeanCreator.create(DestBeanCreator.java:66)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:453)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:423)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:320)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:266)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:235)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:179)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:124)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:119)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.dozer.stats.StatisticsInterceptor.invoke(StatisticsInterceptor.java:43)
	at $Proxy5.map(Unknown Source)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:92)
	at com.stw.test.main.CustomXMLGCIConverterMappingTest.testCustomXMLGCIConverterMapping(CustomXMLGCIConverterMappingTest.java:76)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:46)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283511728</field>
		<field name="user_name">buzdin</field>
		<field name="body">Closed in trunk. Getting DateFormat using getInstance now.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1283511729</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283511729</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283511729</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129554</field>
		<field name="entrydate">1283511729</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283511729</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283511729</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3034762</field>
	<field user_id="277307" name="submitted_by">jgongo</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Dozer could fail to correctly map an object graph</field>
	<field name="open_date">1280159400</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">In our application one of our mappings failed due to a NullPointerException. The exception was being thrown by the equals method of one of our classes, being called on an empty instance (all properties set to null) just created by Dozer.

Upon further investigation we disocvered the equals method was being called because Dozer code was calling the contains method on an object list, to check if the newly created instance was already included in the list. The problematic code is in the MappedFieldsTracker, in its put method:

  public void put(Object src, Object dest) {
    List&#60;Object&#62; mappedTo = mappedFields.get(src);
    if (mappedTo == null) {
      mappedTo = new ArrayList&#60;Object&#62;();
      mappedFields.put(src, mappedTo);
    }
    if (!mappedTo.contains(dest)) {
      mappedTo.add(dest);
    }
  }

This code seems to be used to correctly map object graphs. To achieve this it correctly uses an IdentityHashMap, so key inclusion in the map is based in reference equality (==) instead of object equality (equals). But the value part is implemented using a list, and inclusion in the list is checked using contains, so here YOU'RE INCORRECTLY USING OBJECT EQUALITY.

I guess this could cause Dozer to fail to properly map certain object graphs, if somebody provides a wrong equals implementation. Anyway, I think Dozer shouldn't call equals or hashCode in this case, as the call is usually made on empty instances with all properties set to null.

We've found this behavior mapping classes in a hierarchy, when you provide an explicit mapping (even if the mapping is empty, with wildcard = true)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283505917</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed in trunk. Now dozer will use object identity in MappedFieldsTracker and not call equals or hashCode.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1283505917</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283505917</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283505917</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129554</field>
		<field name="entrydate">1283505917</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283505917</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283505917</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3057599</field>
	<field user_id="362167" name="submitted_by">mikehaller</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Mixed-type values in Map incorrectly all converted to String</field>
	<field name="open_date">1283360237</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">Situation: A bean with a Map&#60;String,Object&#62;. The Map contains objects of various types, including an ArrayList.
Result: All values mapped after the ArrayList has been mapped are incorrectly converted to java.lang.String
Expected Result: All values are mapped 1:1 to their original type, including the ArrayList.

Analysis: The ArrayList object in the Map causes mapCollection() to set a destination type hint into the FieldMap. It uses java.lang.String (taken from the Map's generic type of the key?!?!) as the hint. The same FieldMap is then used for the rest of the entries in the Map. All the entries are converted to Strings.

Test case attached.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283434395</field>
		<field name="user_name">buzdin</field>
		<field name="body">Thank you for exceptionally good test case, this helped a lot!
This was solved by cloning field map instead of replacing global instance.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1283434395</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283434395</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283434395</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129554</field>
		<field name="entrydate">1283434395</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283434395</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283434395</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">385258: DozerBugTest.java</field>
		<field name="entrydate">1283360238</field>
		<field name="mod_by">mikehaller</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2788366</field>
	<field user_id="1759155" name="submitted_by">grzegorzoledzki</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">remove-orphans not handled when mapping java.util.Map</field>
	<field name="open_date">1241699409</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">the mapMap() method in MappingProcessor doesn't take remove-orphans field map attribute into account. This makes mapping the maps onto existing maps hard.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283431165</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk</field>
</message>

<message>
		<field name="adddate">1254864950</field>
		<field name="user_name">grzegorzoledzki</field>
		<field name="body">I would definitely agree. This would be compatible with standard java.util.Map contract. Note that Map#remove() operates on keys, not entries (keys+values).

In other words. With remove-orphans set, the destination Map should have the same content as the source one (module custom setters, custom converters and stuff like that). I believe this is how Dozer handles collections in general.</field>
</message>

<message>
		<field name="adddate">1254859239</field>
		<field name="user_name">buzdin</field>
		<field name="body">What is the expected behavior in this case? Should we treat values equal by their unique keys or values itself?

I would propose keys. In this case mapping [1-&#62;a, 2-&#62;b'] onto [2-&#62;b, 3-&#62;c] would give [1-&#62;a, 2-&#62;b'] in case remove-orphans enabled.</field>
</message>

<message>
		<field name="adddate">1241764206</field>
		<field name="user_name">grzegorzoledzki</field>
		<field name="body">For us it was enough to add:
    if (field == null) {
      // no destination map exists
      result = (Map) DestBeanCreator.create(srcMapValue.getClass());
    } else {
      result = (Map) field;
      if (fieldMap.isRemoveOrphans()) {
          result.clear();
        }
    }

in mapMap(...) method.

I am not sure if this is inline with all the mapping use cases, so I don't submit it as a patch. Still someone may find it useful.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1283431165</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283431165</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">929386</field>
		<field name="entrydate">1283431165</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283431165</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283431165</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1254859291</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1254859291</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2818302</field>
	<field user_id="2153017" name="submitted_by">tipharas</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Array to Set mapping ignores hints</field>
	<field name="open_date">1247014505</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Had a working mapping in 4.3 for an array of DTOs in a container DTO that would map to a superclass.
In the mapping configuration file the hint would specify the correct subclass to map to.
Now it seems 5.0 just tries to create an instance of the abstract superclass no matter what is in the mapping file.

For example:
The container DTO is  Boat containing Array of Animals.
The domain entity side has a Boat with a Set of Animals which are actually Mammals  (Hibernate TargetEntity = Mammal.class and same fields)

Something like this used to work:

 &#60;mapping&#62;
       &#60;class-a&#62;DTO.Boat&#60;/class-a&#62;
       &#60;class-b&#62;Domain.Boat&#60;/class-b&#62;
        &#60;field&#62;
          &#60;a&#62;Animals&#60;/a&#62;
          &#60;b&#62;Animals&#60;/b&#62;
          &#60;a-hint&#62;DTO.Animal&#60;/a-hint&#62;
          &#60;b-hint&#62;Domain.Mammal&#60;/b-hint&#62;
       &#60;/field&#62;
&#60;/mapping&#62;

Now will only return error:

MapId: null
  Type: null
  Source parent class: DTO.Boat
  Source field name: Animals
  Source field type: class [LDTO.Animal;
  Source field value: [LDTO.Animal;@353f6a
  Dest parent class: Domain.Boat
  Dest field name: Animals
  Dest field type: java.util.Set
org.dozer.MappingException: java.lang.InstantiationException</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283352105</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed as described in comments</field>
</message>

<message>
		<field name="adddate">1256243429</field>
		<field name="user_name">vadeg</field>
		<field name="body">Revison number is 914.</field>
</message>

<message>
		<field name="adddate">1250520739</field>
		<field name="user_name">momega</field>
		<field name="body">I guess this issue is duplicate of 2714863 which is fixed in current trunk and works.

But I'd like to ask the maintainers if they can provide revision number(s) or patch for version 5.0 to fix this issue. I'd like to patch the released version 5.0 and avoid possible other bugs.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1283352105</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283352105</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1283352105</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283352105</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2927310</field>
	<field user_id="2761819" name="submitted_by">jblinick</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Bug with Javassist</field>
	<field name="open_date">1262834370</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">I am getting an error using Hibernate with Javassist, where Dozer is storing the javassist proxy class in the dozer class.  I have isolated the problem to ClassMapBuilder.createDefaultClassMap( (Configuration globalConfiguration, Class&#60;?&#62; srcClass, Class&#60;?&#62; destClass).

In this method, classMap.setDestClass( new DozerClass( destClass.getName(), destClass .... ) is called, where destClass is the proxied javassist class.

I resolved the issue for me by adding to the top of the method:

destClass = MappingUtils.getRealClass(destClass);
srcClass = MappingUtils.getRealClass(srcClass);

I realize this is not a very good bug submission in terms of understanding the problem, but I was hoping that someone with more understanding of the source code could perhaps take a look and understand if this is truely the bug.  I could submit a patch, but as you can see, it is a 2-line fix.

Please confirm that this is in fact a bug, or please ask for clarification.

Thanks</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283342328</field>
		<field name="user_name">buzdin</field>
		<field name="body">Proxy handling fixes are coming in 5.3.0. Please check your test case when Snapshot becomes available.</field>
</message>

<message>
		<field name="adddate">1262896497</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi, yes, this is a bug.
This thread has in depth investigation https://sourceforge.net/tracker/?func=detail&#38;aid=2560608&#38;group_id=133517&#38;atid=727368
I will try to set-up few integration tests reproducing the behavior before putting in the lines you suggested and fixes, explained in referenced thread. If you would find minimal hibernate mapping and configuration reproducing the problem, it could help.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1283343997</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283343997</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">929386</field>
		<field name="entrydate">1283342328</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283342328</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262896497</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262896497</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1780082</field>
	<field user_id="127475" name="submitted_by">geraldloeffler</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">custom converters only apply to classes with custom  mapping</field>
	<field name="open_date">1187864195</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I have many classes that do not require custom mappings, i.e. the matching of properties by name that dozer does out-of-the-box is perfectly fine for these classes.

However, many of these classes use the Joda time objects as the types of properties. Joda time objects are immutable and so they require dozer customer converters, which I set up as follows:

&#60;mappings&#62;
  &#60;configuration&#62;
    &#60;custom-converters&#62;
      &#60;converter type=&#34;...DateTimeConverter&#34;&#62;
        &#60;class-a&#62;org.joda.time.DateTime&#60;/class-a&#62;
        &#60;class-b&#62;org.joda.time.DateTime&#60;/class-b&#62;
      &#60;/converter&#62;
    &#60;converter type=&#34;...YearMonthDayConverter&#34;&#62;
    ...
     &#60;/converter&#62;
   &#60;/custom-converters&#62;
  &#60;/configuration&#62;
&#60;/mappings&#62;

My assumption was that these custom converters would be used whenever a property of type DateTime in the source class needs to be mapped to a property of type DateTime in the destination class.

It turns out that this is only the case when there is an explicit custom mapping for the mapped classes! I.e., if I add this:

  &#60;mapping&#62;
    &#60;class-a&#62;...From&#60;/class-a&#62;
    &#60;class-b&#62;...To&#60;/class-b&#62;
  &#60;/mapping&#62;

my custom converters are called; without this custom mapping my custom converters are ignored. Please note that the custom mapping is empty because there is nothing to customize apart from the fact that custom converters are to be used to map the properties of the classes From and To.

  thanks,
  gerald

http://www.gerald-loeffler.net
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283343914</field>
		<field name="user_name">buzdin</field>
		<field name="body">Closing this as no clean way to reproduce. Look like the bug could be in more specific cases than simply implicit mapping.</field>
</message>

<message>
		<field name="adddate">1197887658</field>
		<field name="user_name">aymericalibert</field>
		<field name="body">Logged In: YES 
user_id=1147455
Originator: NO

Matt,
For some reasons I don't have this option displayed. I sent the test case to your sf e-mail address.

Aymeric,
</field>
</message>

<message>
		<field name="adddate">1197761381</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Can you attach the unit test to this ticket?  If you scroll to the bottom, you should see an option to &#34;Upload and Attach a File:&#34;</field>
</message>

<message>
		<field name="adddate">1193231913</field>
		<field name="user_name">aymericalibert</field>
		<field name="body">Logged In: YES 
user_id=1147455
Originator: NO

I can reproduce that behavior with Dozer 4.0. I use a customer converter to map Calendar objects. 
If I only have a configuration file with my custom converter in it, it works fine. If I load an additionnal mapping file (mine is empty), the custom converter won't be used. In that case, I need to specify the converter for each classes. 

I have a test case, but I don't see an option to upload it.

Thanks,

Aymeric</field>
</message>

<message>
		<field name="adddate">1188965354</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Hi Gerald,

Would you be able to trim this down to a simple(as possible) unit test case.  I am having a difficult time reproducing the issue, so there must be something unique to your use case that I am missing.  Thanks!</field>
</message>

<message>
		<field name="adddate">1188292626</field>
		<field name="user_name">geraldloeffler</field>
		<field name="body">Logged In: YES 
user_id=127475
Originator: YES

My scenario includes several mapping files. However, only the first of those includes a &#60;configuration&#62; element. All the other mapping files just have &#60;mapping&#62;s. If needed, i should be able to trim my scenario down to a test case ;-)</field>
</message>

<message>
		<field name="adddate">1187999756</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Gerald,

Thanks for the post.  Your assumption is correct that the expected behavior is that custom converter def's get applied to both explicit and implicit mappings.  You should not have to explicitly define the mapping for the custom converter to get picked up.  I looked through our unit test inventory and this use case is covered (See CustomConverterMappingTest.testSimpleCustomConverter_ImplicitMapping()).  So there must be another variable in your use case and perhaps you have found a bug.  Can you verify that you are using the latest version....4.0.  How many mapping files do you have and how many define a &#60;configuration&#62; block?  If the answer to both of those questions is more than one, that could possibly explain the behavior you are seeing.  Dozer expects only one global configuration.  But I am just brainstorming right now.
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1283343914</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283343914</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2919659</field>
	<field user_id="562259" name="submitted_by">cbourque1</field>
	<field user_id="2418250" name="assigned_to">vadeg</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">bug in TypeResolver with generics / inheritance</field>
	<field name="open_date">1261522022</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">I think there's a bug in TypeResolver when it tries to resolve and cache the generic type of a read method for a mapped class (C) that inherits from an intermediate class (B) which itself inherits from a parent base class (A), eg:

abstract class A&#60;ID extends Serializable&#62;

ID getId()
setId(ID id)

abstract class B&#60;ID extends Serializable&#62; extends A&#60;ID&#62;

class C extends B&#60;Long&#62;

The generic type that will be cached by TypeResolver is ID of class B but the lookup will be made on ID of class A ! Since there are different TypeResolver will simple return null and the mapping will crash at runtime with a ClassCastException...

With only 1 level of inheritance (remove B in my example) it works !

I think the problem lies in the fact that the types are cached in a map keyed by their parameter. Like in my case I have ID multiple times but for Dozer they all should be equal, of course for Java their not!

Thanks

Christian
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1281618404</field>
		<field name="user_name">buzdin</field>
		<field name="body">Seems to be fixed. Will be released in 5.3</field>
</message>

<message>
		<field name="adddate">1281120503</field>
		<field name="user_name">vadeg</field>
		<field name="body">Bug was found and fixed. Appropriate test added.</field>
</message>

<message>
		<field name="adddate">1262473125</field>
		<field name="user_name">buzdin</field>
		<field name="body">Vadim - could you please investigate how difficult is to fix this</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1281618404</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1281618404</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">929386</field>
		<field name="entrydate">1281618404</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1281618404</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1281120503</field>
		<field name="mod_by">vadeg</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262473126</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">898417</field>
		<field name="entrydate">1262473126</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262473126</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1824642</field>
	<field user_id="1885834" name="submitted_by">sguillory6</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Deep property mapping and is-accesssible=true incompatible</field>
	<field name="open_date">1194008925</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">I have a JAXB generated class which has a *ListType property which has a List&#60;&#62; member with no setter. I attempt to map this as follows:

&#60;field&#62;
   &#60;a is-accessible=&#34;true&#34;&#62;amenityCodes&#60;/a&#62;
   &#60;b is-accessible=&#34;true&#34;&#62;amenityList.amenties&#60;/b&#62;
&#60;/field&#62;   

It appears that the is-accessible feature will not traverse a deep-property specification, instead failing because there is no such property &#34;amenityList.amenities&#34; on the destination object.

It would be nice if dozer would negotiation the chain of properties and then assume that the last nested property is the field to lookup.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1280932046</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed in trunk.
Mappings, which are nested *and* indexed at the same moment are not currently supported.</field>
</message>

<message>
		<field name="adddate">1280913621</field>
		<field name="user_name">buzdin</field>
		<field name="body">This was never implemented. I am currently working on resolution.</field>
</message>

<message>
		<field name="adddate">1279098370</field>
		<field name="user_name"></field>
		<field name="body">Indeed, I also have this problem. It's really annoying when using JAXB since it doesn't allow the generation of setter for collections. I have to modify the auto-generated classes in order for Dozer to work correctly, which is painful.
Can someone fix it once and for all, please ?
I may look at the code but I'm not that comfortable with it so it would take time to come with a clean solution.</field>
</message>

<message>
		<field name="adddate">1277584885</field>
		<field name="user_name">svaret</field>
		<field name="body">Somehow yes: 
http://sourceforge.net/projects/dozer/forums/forum/452530/topic/3737951</field>
</message>

<message>
		<field name="adddate">1277584382</field>
		<field name="user_name">chdams1976</field>
		<field name="body">did you find any workaround ?</field>
</message>

<message>
		<field name="adddate">1277147117</field>
		<field name="user_name">svaret</field>
		<field name="body">Hi, I have the same problem nearly 3 years later. Why no comments on this one?  Are we doing something wrong? Is this still an issue?

Best regards
/Lasse Bergstr&#195;&#182;m</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1280932047</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1280932047</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1280932047</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1280932047</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1280913621</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1280913621</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3023846</field>
	<field user_id="2384703" name="submitted_by">mattb82</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Dozer has semi-undocumented dependency on XMLBeans</field>
	<field name="open_date">1277996020</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Documentation Issue</field>
	<field name="artifact_group_id">Dozer v5.3.0</field>
	<field name="details">In Dozer's POM, org.apache.xmlbeans:xmlbeans is listed as an optional dependency.

However, attempting to use Dozer to handle a simple mapping in which Dozer needs to build the dest bean itself in a project that does not have xmlbeans as a dependency itself results in a NoClassDefFoundError.

Caused by: java.lang.NoClassDefFoundError: org/apache/xmlbeans/XmlObject
    at org.dozer.factory.ConstructionStrategies$XMLBeansBased.isApplicable(ConstructionStrategies.java:191)
    at org.dozer.factory.DestBeanCreator.create(DestBeanCreator.java:65)
    at org.dozer.MappingProcessor.map(MappingProcessor.java:176)

The code that triggered this exception on my end looks something like:


final T obj = dao.get(id);
T copy = mapper.map(obj, clazz);

T is a type parameter for this method, clazz is defined as Class&#60;T&#62;

In effect this code simply retrieves an object instance from one of my DAOs and then passes it to Dozer to create a copy of itself (the reason for doing this is unrelated, but I am attempting to map the bean to a new instance to remove Hibernate proxies from the POJO instance). 

From looking at the source code in Dozer 5.2.2 this error appears to occur because DestBeanMapper.create(BeanCreationDirective) polls each BeanCreationStrategy until it finds one that is applicable for the directive. The fourth entry in the availableStrategies array is ConstructionStrategies.XMLBeansBased, which attempts to use XmlBeans classes without checking to see if they are available. The BeanCreationStrategy which is ultimately used for my type, byConstructor, is last in the list.

Thus if DestBeanCreator needs to create the destBean with it's constructor, it will always first check if XmlBeans strategy is applicable - even if XmlBeans is not on the classpath.

I'd suggest either one of two changes: 1) remove  optional=true for the xmlbeans dependency in the POM, or 2) add logic to ConstructionStrategies.XMLBeansBased to handle situations where the XmlObject class cannot be found (and return false instead of propogating any ClassDefNotFoundExceptions or NoClassDefFoundErrors).
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1278684872</field>
		<field name="user_name">buzdin</field>
		<field name="body">direct reference replaced with reflective one. Dozer was checked to be working well without XmlBeans.</field>
</message>

<message>
		<field name="adddate">1278486863</field>
		<field name="user_name">buzdin</field>
		<field name="body">thanks for the bug report. I have not realized that we are introducing this dependency. We will go with option 2 most probably as XmlBeans are absolutly not required to be packaged with Dozer.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">0</field>
		<field name="entrydate">1278684880</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1278684872</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1278684872</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1278684872</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1278684872</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1278486863</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129554</field>
		<field name="entrydate">1278486863</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1277996146</field>
		<field name="mod_by">mattb82</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3021364</field>
	<field user_id="2967015" name="submitted_by">alaintra</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Latest version download problem</field>
	<field name="open_date">1277468796</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">
On the download page, it's specified that the latest version is the 5.2.2 but when clicking this link, the next download page propose to download only the 5.2.1 version.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1277815808</field>
		<field name="user_name">buzdin</field>
		<field name="body">Latest release is available both in Maven repositiry and by download link.
Uploading binaries to SourceForge was the forgotten piece during release process :)

Dmitry </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1277815996</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1277815996</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1277815996</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1277815808</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2928288</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">ConcurrentModificationException on first map</field>
	<field name="open_date">1262959643</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">FieldMap has concurrency bug during caching of property descriptors. This is happening only if very first mapping was executed in concurrent mode.

Results in following stack trace:
java.util.ConcurrentModificationException: concurrent access to HashMap attempted by Thread[WebContainer : 4,5,main]
	at java.util.HashMap.onExit(HashMap.java:217)
	at java.util.HashMap.transfer(HashMap.java:514)
	at java.util.HashMap.resize(HashMap.java:500)
	at java.util.HashMap.addEntry(HashMap.java:800)
	at java.util.HashMap.put(HashMap.java:441)
	at org.dozer.fieldmap.FieldMap.getSrcPropertyDescriptor(FieldMap.java:381)
	at org.dozer.fieldmap.FieldMap.getSrcFieldValue(FieldMap.java:82)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:232)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:214)
	at org.dozer.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:938)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:203)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:441)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:405)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:299)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:245)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:214)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:159)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:117)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:112)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:90)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1275162471</field>
		<field name="user_name">buzdin</field>
		<field name="body">replaced HashMap with ConcurrentHashMap. Should solve the issue.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1275162471</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1275162471</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1275162471</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">929386</field>
		<field name="entrydate">1275162471</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1275162471</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1275162471</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3007936</field>
	<field user_id="2518870" name="submitted_by">pliljenberg</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">CustomConverterContainer puts null results in cache</field>
	<field name="open_date">1274964431</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Performance Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">CustomConverterContainer.getCustomConverter put null results in the DozerCache. The DozerCache.put method i synchronized which causes Threadblocking.
I've patched it and tried it locally and all the blocking threads disappeared from DozerCache.
The fix is to check the result for null before putting in the cache.
Since the code checks for a null value in the cache before trying to locate the customconverter the change should be safe to use.
-------

  public Class getCustomConverter(Class&#60;?&#62; srcClass, Class&#60;?&#62; destClass, Cache converterByDestTypeCache) {
    if (converters.isEmpty()) {
      return null;
    }

    // Check cache first
    final Object cacheKey = CacheKeyFactory.createKey(destClass, srcClass);
    Class result = (Class) converterByDestTypeCache.get(cacheKey);
    if (result != null) {
      return result;
    }

    // Let's see if the incoming class is a primitive:
    final Class src = ClassUtils.primitiveToWrapper(srcClass);
    final Class dest = ClassUtils.primitiveToWrapper(destClass);

    // Otherwise, loop through custom converters and look for a match. Also, store the result in the cache
    for (CustomConverterDescription customConverter : converters) {
      final Class classA = customConverter.getClassA();
      final Class classB = customConverter.getClassB();

      // we check to see if the destination class is the same as classA defined in the converter mapping xml.
      // we next check if the source class is the same as classA defined in the converter mapping xml.
      // we also to check to see if it is assignable to either. We then perform these checks in the other direction for classB
      if ((classA.isAssignableFrom(dest) &#38;&#38; classB.isAssignableFrom(src))
          || (classA.isAssignableFrom(src) &#38;&#38; classB.isAssignableFrom(dest))) {
        result = customConverter.getType();
      }
    }
    if (result != null) {
	    converterByDestTypeCache.put(cacheKey, result);
    }
    return result;
  }</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1275160744</field>
		<field name="user_name">buzdin</field>
		<field name="body">Solved a bit differently. We need null entries in cache not to resolve once more in next mappings. Instead it is possible to check id key is in cache and based on that return either null or converter type. 
Issue with synchronization should be solved.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1275160744</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1275160744</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1275160744</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">898417</field>
		<field name="entrydate">1275160744</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1275160744</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1275160744</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">375356: patch.txt</field>
		<field name="entrydate">1274967113</field>
		<field name="mod_by">pliljenberg</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1049123</field>
		<field name="entrydate">1274967102</field>
		<field name="mod_by">pliljenberg</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2721816</field>
	<field user_id="2457944" name="submitted_by">nadavh</field>
	<field user_id="2912290" name="assigned_to">hedget</field>
	<field name="priority">8</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">mapping primitive List -&#62;primitive array does not work</field>
	<field name="open_date">1238402458</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">Hi, 
Because the new version of dozer now supports generics a problem occurs when trying to map List of Primitive Objects (i.e. Primitive Wrappers such as Double,Integer,Long ...) to array of primitive types (i.e. double,int,long...).

I'll explain:
Lets say that we have 2 Classes that we want to map, A and B.
A has a field called lsDouble which is a list of Doubles (i.e. List&#60;Double&#62; lsDouble).
B has a field called arrDouble which is an array of Doubles (i.e. double [] arrDouble).

we define the mapping as follows:

&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;mappings xmlns=&#34;http://dozer.sourceforge.net&#34;
          xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
          xsi:schemaLocation=&#34;http://dozer.sourceforge.net http://dozer.sourceforge.net/schema/beanmapping.xsd&#34;&#62;
	&#60;mapping&#62;
		&#60;class-a&#62;A&#60;/class-a&#62;
		&#60;class-b&#62;B&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;lsDouble&#60;/a&#62;
			&#60;b&#62;arrDouble&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;
&#60;/mappings&#62;

When the mapping processor will perform the conversion of lsDouble -&#62; arrDouble it uses the method convertListToArray from the utility class CollectionUtils.
The method body is exactly the same as in the previous dozer version (v4.4.1), the differences is in the method signature
and the return value.
because of the usage of generics the method signature is now convertListToArray(List&#60;T&#62; list, Class&#60;T&#62; destEntryType);
and the return value is T[].
The problem lies within the return value.
because we are obligated to return T[] we cast the return value to T[].
As we know generics only supports Objects but we create an array of reference type, so when we cast the result to T[] , we're actually saying that at runtime we will return an array of Objects, which is not correct and this is why we receive the following class cast exception:
java.lang.ClassCastException: [D cannot be cast to [Ljava.lang.Object;

I fixed it by changing the return value to Object and removed the casting from the return statement (i.e. now it is exactly the same as in the previous dozer version).
Everything works fine (all the dozer test passed successfully).
I'm attaching the new Updated CollectionUtils.java so you can repackage it.

--important!!!-- 
   I'm not granting that this is the correct fix and this should be used.
   you can use it at your own risk.

I think that maybe the Dozer team should release an official patch/version with the fix as the see it.

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1275159749</field>
		<field name="user_name">hedget</field>
		<field name="body">fixed in trunk.</field>
</message>

<message>
		<field name="adddate">1274720682</field>
		<field name="user_name">hedget</field>
		<field name="body">applying patch and testing.</field>
</message>

<message>
		<field name="adddate">1258268487</field>
		<field name="user_name">nadavh</field>
		<field name="body">updated</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1275159749</field>
		<field name="mod_by">hedget</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1275159749</field>
		<field name="mod_by">hedget</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">102</field>
		<field name="entrydate">1275159749</field>
		<field name="mod_by">hedget</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1275159749</field>
		<field name="mod_by">hedget</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1274720682</field>
		<field name="mod_by">hedget</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1287959</field>
		<field name="entrydate">1274712184</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1274364721</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1258020196</field>
		<field name="mod_by">nadavh</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1258020172</field>
		<field name="mod_by">nadavh</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">320235: CollectionUtils.java</field>
		<field name="entrydate">1238402461</field>
		<field name="mod_by">nadavh</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1939200</field>
	<field user_id="1759155" name="submitted_by">grzegorzoledzki</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">DOC lacking description in inheritance mapping</field>
	<field name="open_date">1207815008</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Documentation Issue</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">Looking at the page:
http://dozer.sourceforge.net/documentation/baseattributes.html
I feel a description of the images at the bottom of the pages are lacking. I couldn't find any word about mapping a collection of hierarchy of classes to collection of hierarchy of classes (last diagram).

One of solutions is to have multiple classes as hints separated by commas. It's not documented anywhere, is it?

An example given in description of patch #1939196:
http://sourceforge.net/tracker/index.php?func=detail&#38;aid=1939196&#38;group_id=133517&#38;atid=727370
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1228295314</field>
		<field name="user_name">buzdin</field>
		<field name="body">We have added multiple hits section to &#34;Inheritance Mapping&#34; page.
General documentation update will be done in 4.4 release. So this time we are just adding missing things.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1228295260</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228295260</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228295260</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228295260</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1228295260</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227703239</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2910273</field>
	<field user_id="2651474" name="submitted_by">dobrynya</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">NPE is thrown</field>
	<field name="open_date">1260218746</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">NPE is thrown when bi-direction mapping type is used but class of the source object has no setters. Despite the fact that there are no setters the object can be used as data source for the destination object. In my opinion an exception should be thrown during setting values on such an object.

java.lang.NullPointerException
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.determinePropertyType(GetterSetterPropertyDescriptor.java:270)
	at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.getPropertyType(GetterSetterPropertyDescriptor.java:56)
	at org.dozer.fieldmap.FieldMap.getSrcFieldType(FieldMap.java:118)
	at org.dozer.loader.MappingsParser.processMappings(MappingsParser.java:104)
	at org.dozer.loader.CustomMappingsLoader.load(CustomMappingsLoader.java:91)
	at org.dozer.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:151)
	at org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:134)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:90)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262450182</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed in trunk. Thanks for reporting. ... and a happy new year :)

--
Dmitry</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262450190</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262450190</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">898417</field>
		<field name="entrydate">1262450190</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262450190</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262450190</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1262450190</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1845706</field>
	<field user_id="1803910" name="submitted_by">mattjmorrison</field>
	<field user_id="2308193" name="assigned_to">cchou</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Deep Index Custom Converter Problem</field>
	<field name="open_date">1196963180</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">When trying to use a custom converter for a deep index mapping I get an error stating that &#34;object is not an instance of declaring class&#34; - which makes sense...that's why I'm trying to use a custom converter.  If I remove the &#34;Deep&#34; index mapping and keep the have only a single index the custom converter is envoked and works fine.  Here is a quick example.

this works and envokes the custom converter
&#60;a&#62;second.thirdArray[7]&#60;/a&#62;

this works and envokes the custom converter
&#60;a&#62;secondArray[0].third&#60;/a&#62;

this doesn't work and doesn't envoke the custom converter
&#60;a&#62;secondArray[0].thirdArray[7]&#60;/a&#62;

I've attached an example of this.  Let me know if you have any questions regarding this issue.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1229011879</field>
		<field name="user_name">cchou</field>
		<field name="body">Hi Matthew,

Thanks for pointing out the problem.  We have investigated this issue and fixed it.

Hi Mickael,

Thank you very much for providing the patch.  It helps a lot.

Chia-Chou</field>
</message>

<message>
		<field name="adddate">1219224943</field>
		<field name="user_name">mickaelmorier</field>
		<field name="body">Logged In: YES 
user_id=2176658
Originator: NO

Hi,

I have the same problem, so I submit a patch.
Explanation and download on http://sourceforge.net/tracker/index.php?func=detail&#38;aid=2061942&#38;group_id=133517&#38;atid=727370.

Enjoy,

Mickael</field>
</message>

<message>
		<field name="adddate">1205514006</field>
		<field name="user_name">mattjmorrison</field>
		<field name="body">Logged In: YES 
user_id=1803910
Originator: YES

any more updates on this issue?</field>
</message>

<message>
		<field name="adddate">1201034060</field>
		<field name="user_name">mattjmorrison</field>
		<field name="body">Logged In: YES 
user_id=1803910
Originator: YES

I was just wondering if you had made any progress on this issue.  Thanks!</field>
</message>

<message>
		<field name="adddate">1197837541</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I was able to reproduce this bug using the unit test that was submitted.  Thanks for taking the time to put the test together.  It will really help as we dig through the code.  I spent some time investigating this and looking through the code, but it wasn't obvious what was causing it.  I believe it is specific to deep index mapping in conjunction with the last element in the chain also being indexed.  I am confident that it can be resolved, but it will take further investigation.  I am planning on working on this over the next couple weeks and can push a minor release out to production with this in it.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888638</field>
		<field name="entrydate">1229012617</field>
		<field name="mod_by">cchou</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1229011920</field>
		<field name="mod_by">cchou</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1229011920</field>
		<field name="mod_by">cchou</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228557065</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228557065</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228557065</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">257557: Dozer.jar</field>
		<field name="entrydate">1196963181</field>
		<field name="mod_by">mattjmorrison</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1806780</field>
	<field user_id="1602869" name="submitted_by">josechillan</field>
	<field user_id="2308193" name="assigned_to">cchou</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Problem with Java 1.5 enum and inheritance</field>
	<field name="open_date">1191400126</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">There is a problem with the handling of inherited enums in java 1.5
I first declare an enum using inheritance :

public enum MyType
{
  FOO
  {
    @Override
    public String display() { return &#34;foo&#34;;}      
  },
  BAR 
  {
    @Override
    public String display() { return &#34;bar&#34;;  }
  };
  
  public abstract String display();
}

Then I declare a bean containinng the following
enum
public class MyBean
{
  private MyType type;
  // Getters and setters here... 
}

When I try to map this bean to itself, Dozer throws an Exception. 
The point here is that dozer tries to instantiate the enumeration to set it in the destination bean because it doesn't recognize the value as an enum. This is because the values here (FOO and BAR) are not instances of an enum class, but each one has a type that is derivated from the enum.
My investigations showed that the problem is in the class MappingProcessor, in method mapOrRecurseObject(),
line 410 in version 4.1. The way enum values are detected is erroneous because the method isEnum()
returns true only is a class is a java declared enum,
and this is not the case for the types of my FOO and BAR value. We should call first the method getDeclaringClass() which returns the Class of the enum associated to FOO and BAR (in this case, MyType.class) and the isEnum() method has to be invoked on this one.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1229116414</field>
		<field name="user_name">cchou</field>
		<field name="body">Hi, 
Sorry for the late response.  This issue has been fixed as attached.  Feel free to let us know if you still have the same problems.

Thanks,

Chia-Chou  
File Added: patch_1806780.zip</field>
</message>

<message>
		<field name="adddate">1220601723</field>
		<field name="user_name">maxxyme</field>
		<field name="body">Logged In: YES 
user_id=731522
Originator: NO

I think you can't expect someone to fix this, as well as any other bugs in this tracker, as it seems to me the project has been abandoned by its original administrators/contributors.
Have a look, no bug, nor any feature request has received a feedback from them for almost a year!!!
Same thing in the forums, no answer!!!

It's hopeless! :((((</field>
</message>

<message>
		<field name="adddate">1220549381</field>
		<field name="user_name">jieryn</field>
		<field name="body">Logged In: YES 
user_id=2204652
Originator: NO

What is the status of this? It still seems to be failing over a year after bug report. Erk. This is a blocker for me..</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1229116414</field>
		<field name="mod_by">cchou</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">305094: patch_1806780.zip</field>
		<field name="entrydate">1229116414</field>
		<field name="mod_by">cchou</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1229116414</field>
		<field name="mod_by">cchou</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">2243056</field>
		<field name="entrydate">1228556962</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888638</field>
		<field name="entrydate">1228556962</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224345759</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224345759</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1828693</field>
	<field user_id="1061853" name="submitted_by">jhampton</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">NullPointerException in Dozer 4.1</field>
	<field name="open_date">1194571909</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">I received a NullPointerException in dozer 4.1.  I'll attach the patch that we used to work around the problem.  I'm not sure if the patch is correct, but it fixes the issue for us.  

BTW, I think MappingProcessor.checkForSuperTypeMapping needs some review.  I'm not sure it is doing what is intended (although I'm also not sure exactly what it is trying to accomplish :)).  Looking at the code it looks like it only walks the destination superclasses once no matter how many source superclasses there are.  My assumption is that the intent is to walk all of the destination superclasses for each source superclass.

Stack Trace:

java.lang.NullPointerException
        at net.sf.dozer.util.mapping.util.ClassMapKeyFactory.createKey(ClassMapKeyFactory.java:34)
        at net.sf.dozer.util.mapping.util.ClassMapKeyFactory.createKey(ClassMapKeyFactory.java:45)
        at net.sf.dozer.util.mapping.MappingProcessor.checkForSuperTypeMapping(MappingProcessor.java:892)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:214)
        at net.sf.dozer.util.mapping.MappingProcessor.mapCustomObject(MappingProcessor.java:454)
        at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:417)
        at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:319)
        at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:265)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:234)
        at net.sf.dozer.util.mapping.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:932)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:218)
        at net.sf.dozer.util.mapping.MappingProcessor.mapCustomObject(MappingProcessor.java:454)
        at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:417)
        at net.sf.dozer.util.mapping.MappingProcessor.addOrUpdateToList(MappingProcessor.java:739)
        at net.sf.dozer.util.mapping.MappingProcessor.addOrUpdateToList(MappingProcessor.java:774)
        at net.sf.dozer.util.mapping.MappingProcessor.mapListToList(MappingProcessor.java:646)
        at net.sf.dozer.util.mapping.MappingProcessor.mapCollection(MappingProcessor.java:507)
        at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:408)
        at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:319)
        at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:265)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:234)
        at net.sf.dozer.util.mapping.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:932)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:218)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:146)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:120)
        at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:94)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1229397535</field>
		<field name="user_name">mhtierney</field>
		<field name="body">This is fixed </field>
</message>

<message>
		<field name="adddate">1209776966</field>
		<field name="user_name">jhampton</field>
		<field name="body">Logged In: YES 
user_id=1061853
Originator: YES

We recently updated to 4.2 and have the same problem.  I've attached another patch file.  I was a little more aggressive with this patch. The problem is reproducible using cglib proxies.  I've updated the unit tests to reproduce the problem.  Applying the patch and reverting the change to MappingProcessor.java will reproduce the NPE.

As I stated in my previous notes, the code in the original implementation does not implement the stated intent in the comment.  The comment made it appear that the code was to match every source superclass with every destination superclass.  The previous code did not achieve that effect.  I've rewritten the method to achieve that affect.  All of the unit tests pass with my change.

If for some reason the change is not acceptable, please use my changes to the unit tests as a basis of identifying the problem.
  </field>
</message>

<message>
		<field name="adddate">1209776578</field>
		<field name="user_name">jhampton</field>
		<field name="body">Logged In: YES 
user_id=1061853
Originator: YES

File Added: Dozer_Bugfix1.patch</field>
</message>

<message>
		<field name="adddate">1197761267</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I tried to apply the patch as is and it resulted in one of the unit tests hanging.</field>
</message>

<message>
		<field name="adddate">1194583023</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Thanks. I will apply the patch and run our tests. If all goes well we can apply to our 4.2 release.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1229397535</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1229397535</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1229397535</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1229397535</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">276669: Dozer_Bugfix1.patch</field>
		<field name="entrydate">1209776578</field>
		<field name="mod_by">jhampton</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1194583034</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">253493: NullPointerException.patch</field>
		<field name="entrydate">1194571909</field>
		<field name="mod_by">jhampton</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2130213</field>
	<field user_id="1506947" name="submitted_by">tdrencak</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Error in loading mapping files located in jar file</field>
	<field name="open_date">1222437072</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">When I tried to configure dozer by MyDozerBeanMapperFactoryBean in spring with mapping files everything works OK while mapping files were located directly on file system. But when they were located in jar file, it complains about FindNotFoundException.

To solve this problem you need to change 
mappings.add(MapperConstants.FILE_PREFIX + this.mappingFiles[i].getFile().toString());
to 
mappings.add(this.mappingFiles[i].getURL().toString());
in DozerBeanMapperFactory. Below is fixed version of the method.

@SuppressWarnings(&#34;unchecked&#34;)
	public final void afterPropertiesSet() throws Exception {
		this.beanMapper = new DozerBeanMapper();

		if (this.mappingFiles != null) {
			final List mappings = new ArrayList(this.mappingFiles.length);
			for (int i = 0; i &#60; this.mappingFiles.length; i++) {
				mappings.add(this.mappingFiles[i].getURL().toString());
			}
			this.beanMapper.setMappingFiles(mappings);
		}
		if (this.customConverters != null) {
			this.beanMapper.setCustomConverters(this.customConverters);
		}
		if (this.eventListeners != null) {
			this.beanMapper.setEventListeners(this.eventListeners);
		}
		if (this.factories != null) {
			this.beanMapper.setFactories(this.factories);
		}
	}</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1229398800</field>
		<field name="user_name">mhtierney</field>
		<field name="body">This code has been applied</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1229398800</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1229398800</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1287959</field>
		<field name="entrydate">1229398800</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1229398800</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1222690499</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1921248</field>
	<field user_id="2041599" name="submitted_by">daniel_barbato</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Problem loading Dozer bean mapper from Spring</field>
	<field name="open_date">1206029188</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">When using Dozer to load the mapping file, the mapping file must be directly between the &#60;value&#62;&#60;/value&#62; tags otherwise it fails to load. It appears to attempt to include any whitespace that is present in the filename.

For example:

&#60;!-- Dozer bean mapper --&#62;
&#60;bean id=&#34;mapper&#34; class=&#34;net.sf.dozer.util.mapping.DozerBeanMapper&#34;&#62;
  &#60;property name=&#34;mappingFiles&#34;&#62;
    &#60;list&#62;
      &#60;!-- the name of the dozer configuration file --&#62;
        &#60;value&#62;
          dozerMapper.xml
        &#60;/value&#62;
    &#60;/list&#62;
  &#60;/property&#62;
&#60;/bean&#62;

Produces the stack trace which follows.

Changing the value tag to read:

&#60;value&#62;dozerMapper.xml&#60;/value&#62;

is a current workaround. An example eclipse project which demonstrates this issue is attached.


Stack Trace:
net.sf.dozer.util.mapping.MappingException: Unable to locate dozer mapping file [
					dozerMapper.xml
				] in the classpath!!!
	at net.sf.dozer.util.mapping.util.MappingUtils.throwMappingException(MappingUtils.java:96)
	at net.sf.dozer.util.mapping.util.MappingValidator.validateURL(MappingValidator.java:59)
	at net.sf.dozer.util.mapping.util.CustomMappingsLoader.load(CustomMappingsLoader.java:58)
	at net.sf.dozer.util.mapping.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:149)
	at net.sf.dozer.util.mapping.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:132)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:98)
	at com.sample.dozer.TestDozer.testDozer(TestDozer.java:33)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at junit.framework.TestCase.runTest(TestCase.java:168)
	at junit.framework.TestCase.runBare(TestCase.java:134)
	at org.springframework.test.ConditionalTestCase.runBare(ConditionalTestCase.java:69)
	at junit.framework.TestResult$1.protect(TestResult.java:110)
	at junit.framework.TestResult.runProtected(TestResult.java:128)
	at junit.framework.TestResult.run(TestResult.java:113)
	at junit.framework.TestCase.run(TestCase.java:124)
	at junit.framework.TestSuite.runTest(TestSuite.java:232)
	at junit.framework.TestSuite.run(TestSuite.java:227)
	at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:81)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:38)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)



</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1229397920</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Reopening.  Was not fixed in 4.3</field>
</message>

<message>
		<field name="adddate">1222760003</field>
		<field name="user_name">buzdin</field>
		<field name="body">This bug is fixed by applying trim() operation on the file name before loading it.
Thank for reporting the flaw.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1229399376</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1229399376</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1229397920</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888638</field>
		<field name="entrydate">1229397920</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1287959</field>
		<field name="entrydate">1229397920</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1222760003</field>
		<field name="entrydate">1229397920</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1225360488</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1222760003</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1222760003</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1222760003</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1222689951</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">271213: DozerSampleBug.zip</field>
		<field name="entrydate">1206029188</field>
		<field name="mod_by">daniel_barbato</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2398621</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Throw exception if more than one global configuration found</field>
	<field name="open_date">1228607430</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">Throw ex instead of silently taking the last global config found</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1229492958</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1228673434</field>
		<field name="entrydate">1229492958</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1228673434</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1228673434</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1982256</field>
	<field user_id="2105487" name="submitted_by">flushdia</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Global Configuration is Ignored</field>
	<field name="open_date">1212419695</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">Hello,

I've ran into problems while setting up global configuration XML file. I use Dozer 4.2 and configure DozerBeanMapper in Spring, like this:

...
    &#60;bean id=&#34;domainDtoMapper&#34; class=&#34;net.sf.dozer.util.mapping.DozerBeanMapper&#34;&#62;
        &#60;property name=&#34;customConverters&#34;&#62;
            &#60;list&#62;
                &#60;ref bean=&#34;fileDomainDtoConverter&#34; /&#62;
            &#60;/list&#62;
        &#60;/property&#62;
        &#60;property name=&#34;mappingFiles&#34;&#62;
            &#60;list&#62;
                &#60;value&#62;global.dozer.xml&#60;/value&#62;
                &#60;value&#62;Tour.dozer.xml&#60;/value&#62;
                &#60;value&#62;Map.dozer.xml&#60;/value&#62;
                &#60;value&#62;Point.dozer.xml&#60;/value&#62;
                &#60;value&#62;Link.dozer.xml&#60;/value&#62;
                &#60;value&#62;ImageAttachment.dozer.xml&#60;/value&#62;
                &#60;value&#62;Image.dozer.xml&#60;/value&#62;
            &#60;/list&#62;
        &#60;/property&#62;
    &#60;/bean&#62;
...

global.dozer.xml looks like this:

&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;!DOCTYPE mappings PUBLIC &#34;-//DOZER//DTD MAPPINGS//EN&#34; &#34;http://dozer.sourceforge.net/dtd/dozerbeanmapping.dtd&#34;&#62;
&#60;mappings&#62;
    &#60;configuration&#62;
        &#60;stop-on-errors&#62;true&#60;/stop-on-errors&#62;
        &#60;date-format&#62;yyyy-MM-dd HH:mm:ss&#60;/date-format&#62;
        &#60;wildcard&#62;true&#60;/wildcard&#62;

        &#60;custom-converters&#62;
            &#60;converter type=&#34;com.shiftlabs.imagestroll.portalfacebook.controller.service.impl.mapping.FileDomainDtoConverter&#34;&#62;
                &#60;class-a&#62;com.shiftlabs.imagestroll.model.File&#60;/class-a&#62;
                &#60;class-b&#62;com.shiftlabs.imagestroll.portalfacebook.controller.dto.FileDto&#60;/class-b&#62;
            &#60;/converter&#62;
        &#60;/custom-converters&#62;
    &#60;/configuration&#62;
&#60;/mappings&#62;

My custom converter simply didn't work when performing conversions. So I've started debugging the source and found out that global configuration is simply empty in runtime. Then I found the following piece of code in the method of CustomMappingsLoader class (inside the loop):

        // the last configuration is the 'global' configuration
        globalConfiguration = mappings.getConfiguration();

So all mapping files are loaded one by one, but exactly the last one is treated as global. I didn't find this particular feature in documentation of Dozer and found it a bit confusing. Now my global configuration XML file is listed the last one in Spring and works fine, like this:

    &#60;bean id=&#34;domainDtoMapper&#34; class=&#34;net.sf.dozer.util.mapping.DozerBeanMapper&#34;&#62;
        &#60;property name=&#34;customConverters&#34;&#62;
            &#60;list&#62;
                &#60;ref bean=&#34;fileDomainDtoConverter&#34; /&#62;
            &#60;/list&#62;
        &#60;/property&#62;
        &#60;property name=&#34;mappingFiles&#34;&#62;
            &#60;list&#62;
                &#60;value&#62;Tour.dozer.xml&#60;/value&#62;
                &#60;value&#62;Map.dozer.xml&#60;/value&#62;
                &#60;value&#62;Point.dozer.xml&#60;/value&#62;
                &#60;value&#62;Link.dozer.xml&#60;/value&#62;
                &#60;value&#62;ImageAttachment.dozer.xml&#60;/value&#62;
                &#60;value&#62;Image.dozer.xml&#60;/value&#62;
                &#60;value&#62;global.dozer.xml&#60;/value&#62;
            &#60;/list&#62;
        &#60;/property&#62;


To summarize, it is bad that the feature mentioned above is not documented, thus making the detection of the problem much painless. May be it is even more essential to change the rule for global configuration identification?

Thank you.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1228673619</field>
		<field name="user_name">mhtierney</field>
		<field name="body">We agree with your comments regarding the global config.  For the 4.4 release we will throw an exception if more than one global config is found instead of silently ignoring.  This should help with debugging and providing better clues as to the expected usage.  Thanks.

https://sourceforge.net/tracker/index.php?func=detail&#38;aid=2398621&#38;group_id=133517&#38;atid=727368</field>
</message>

<message>
		<field name="adddate">1217479487</field>
		<field name="user_name">jffmrk</field>
		<field name="body">Logged In: YES 
user_id=195862
Originator: NO

I moved the patch over here:
https://sourceforge.net/tracker/index.php?func=detail&#38;aid=2033478&#38;group_id=133517&#38;atid=727370

and have attached the patch file (rather than have it directly pasted in the comment section) to help with line breaks, etc.</field>
</message>

<message>
		<field name="adddate">1217464256</field>
		<field name="user_name">jffmrk</field>
		<field name="body">Logged In: YES 
user_id=195862
Originator: NO

This also took me quite a while to debug.  After digging through the code I applied a patch that might be useful and help others that run into this issue as well.  The patch will set the global configuration only if one has been included in the file.  This way the configuration definition can be included in any file (and any order) and will not be overwritten.  If multiple config files have a configuration section, a warning will be logged and the previous global configuration will be overwritten.  Hopefully this can help others save a day of debugging the problem like I did today.

Here's the patch:


diff -c -r dozer-4.2.1/pom.xml dozer-4.2.1_patch/pom.xml
*** dozer-4.2.1/pom.xml 2008-07-30 17:08:04.000000000 -0700
--- dozer-4.2.1_patch/pom.xml   2008-07-30 17:08:15.000000000 -0700
***************
*** 9,15 ****
      Dozer is a powerful, yet simple Java Bean to Java Bean mapper that recursively copies data from one object to
      another
    &#60;/description&#62;
!   &#60;version&#62;4.2.1&#60;/version&#62;
    &#60;name&#62;dozer&#60;/name&#62;
    &#60;dependencies&#62;
      &#60;dependency&#62;
--- 9,15 ----
      Dozer is a powerful, yet simple Java Bean to Java Bean mapper that recursively copies data from one object to
      another
    &#60;/description&#62;
!   &#60;version&#62;4.2.1_patch&#60;/version&#62;
    &#60;name&#62;dozer&#60;/name&#62;
    &#60;dependencies&#62;
      &#60;dependency&#62;
diff -c -r dozer-4.2.1/src/main/java/net/sf/dozer/util/mapping/classmap/Configuration.java dozer-4.2.1_patch/src/main/java/net/sf/dozer/util/mapping/classmap/Configuration.java
*** dozer-4.2.1/src/main/java/net/sf/dozer/util/mapping/classmap/Configuration.java     2007-12-15 22:48:58.000000000 -0800
--- dozer-4.2.1_patch/src/main/java/net/sf/dozer/util/mapping/classmap/Configuration.java       2008-07-30 16:58:22.000000000 -0700
***************
*** 32,37 ****
--- 32,38 ----
   */
  public class Configuration {

+   private boolean isParsed;
    private Boolean wildcard;
    private Boolean stopOnErrors;
    private Boolean trimStrings;
***************
*** 42,47 ****
--- 43,60 ----
    private CopyByReferenceContainer copyByReferences;
    private AllowedExceptionContainer allowedExceptions;

+   public Configuration() {
+     this(false);
+   }
+
+   public Configuration(boolean parsed) {
+     isParsed = parsed;
+   }
+
+   public boolean isParsed() {
+     return isParsed;
+   }
+
    public AllowedExceptionContainer getAllowedExceptions() {
      return allowedExceptions;
    }
diff -c -r dozer-4.2.1/src/main/java/net/sf/dozer/util/mapping/util/CustomMappingsLoader.java dozer-4.2.1_patch/src/main/java/net/sf/dozer/util/mapping/util/CustomMappingsLoader.java
*** dozer-4.2.1/src/main/java/net/sf/dozer/util/mapping/util/CustomMappingsLoader.java  2007-08-07 23:07:19.000000000 -0700
--- dozer-4.2.1_patch/src/main/java/net/sf/dozer/util/mapping/util/CustomMappingsLoader.java    2008-07-30 16:58:22.000000000 -0700
***************
*** 48,53 ****
--- 48,54 ----
      Map customMappings = new HashMap();
      ListOrderedSet customConverterDescriptions = new ListOrderedSet();
      Configuration globalConfiguration = new Configuration();
+     String globalConfigurationMappingFileName = new String();

      if (mappingFiles != null &#38;&#38; mappingFiles.size() &#62; 0) {
        InitLogger.log(log, &#34;Using the following xml files to load custom mappings for the bean mapper instance: &#34; + mappingFiles);
***************
*** 61,68 ****
          Mappings mappings = mappingFileReader.read();
          InitLogger.log(log, &#34;Successfully loaded custom xml mappings from URL: [&#34; + url + &#34;]&#34;);

!         // the last configuration is the 'global' configuration
!         globalConfiguration = mappings.getConfiguration();
          // build up the custom converters to make them global
          if (mappings.getConfiguration() != null &#38;&#38; mappings.getConfiguration().getCustomConverters() != null
              &#38;&#38; mappings.getConfiguration().getCustomConverters().getConverters() != null) {
--- 62,77 ----
          Mappings mappings = mappingFileReader.read();
          InitLogger.log(log, &#34;Successfully loaded custom xml mappings from URL: [&#34; + url + &#34;]&#34;);

!         // the last configuration is the 'global' configuration, warn the user if it is overwritten
!         if (mappings.getConfiguration() != null &#38;&#38; mappings.getConfiguration().isParsed()) {
!           if (globalConfiguration.isParsed()) {
!             log.warn(&#34;globalConfiguration from &#34; + globalConfigurationMappingFileName
!               + &#34; will be overwritten by globalConfiguration from &#34; + mappingFileName);
!           }
!           globalConfigurationMappingFileName = mappingFileName;
!           globalConfiguration = mappings.getConfiguration();
!         }
!
          // build up the custom converters to make them global
          if (mappings.getConfiguration() != null &#38;&#38; mappings.getConfiguration().getCustomConverters() != null
              &#38;&#38; mappings.getConfiguration().getCustomConverters().getConverters() != null) {
diff -c -r dozer-4.2.1/src/main/java/net/sf/dozer/util/mapping/util/XMLParser.java dozer-4.2.1_patch/src/main/java/net/sf/dozer/util/mapping/util/XMLParser.java
*** dozer-4.2.1/src/main/java/net/sf/dozer/util/mapping/util/XMLParser.java     2007-12-15 22:46:13.000000000 -0800
--- dozer-4.2.1_patch/src/main/java/net/sf/dozer/util/mapping/util/XMLParser.java       2008-07-30 16:58:22.000000000 -0700
***************
*** 410,416 ****
    }

    private void parseConfiguration(Element ele) {
!     Configuration config = new Configuration();
      mappings.setConfiguration(config);
      NodeList nl = ele.getChildNodes();
      for (int i = 0; i &#60; nl.getLength(); i++) {
--- 410,416 ----
    }

    private void parseConfiguration(Element ele) {
!     Configuration config = new Configuration(true);
      mappings.setConfiguration(config);
      NodeList nl = ele.getChildNodes();
      for (int i = 0; i &#60; nl.getLength(); i++) {
</field>
</message>

<message>
		<field name="adddate">1213631195</field>
		<field name="user_name">basti1302</field>
		<field name="body">Logged In: YES 
user_id=464596
Originator: NO

I'd like to second the OP's  opinion. This also took me quite a while... I didn't figure it out until I came here to and read this post. I think it would be good if this behaviour is at least documented very in the various places where examples are shown how to configure the mapper (Spring, programatically, ...)

That said, I really like this project. Good work :-)

Just my 2 cents
  Bastian</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1229492959</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1228673619</field>
		<field name="entrydate">1229492959</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1228673619</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228673619</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228673619</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1228673619</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2459076</field>
	<field user_id="2336251" name="submitted_by">roman_stumm</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Deep Mapping with custom setter method does not work</field>
	<field name="open_date">1229968108</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">See  attached reproducer.

I get this exception when calling:
 FlatClass clone = ...;
 ParentClass p2 = (ParentClass) mapper.map(clone, ParentClass.class);


2008-12-22 18:47:02,516 ERROR net.sf.dozer.util.mapping.MappingProcessor - Field mapping error --&#62;
  MapId: null
  Type: bi-directional
  Source parent class: com.agimatec.connecta.xfire.ParentClass
  Source field name: intermediate.details
  Source field type: class java.util.ArrayList
  Source field value: [com.agimatec.connecta.xfire.DetailClass@10bc49d]
  Dest parent class: com.agimatec.connecta.xfire.ParentClass
  Dest field name: intermediate.details
  Dest field type: java.util.List
java.lang.IllegalArgumentException: argument type mismatch
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at net.sf.dozer.util.mapping.util.ReflectionUtils.invoke(ReflectionUtils.java:256)
	at net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor.writeDeepDestinationValue(GetterSetterPropertyDescriptor.java:209)


Reason in net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor.writeDeepDestinationValue

 Method method = pd.getWriteMethod();
        try {
          if (method == null &#38;&#38; getSetMethodName() != null) {
            // lets see if we can find a custom method
            method = ReflectionUtils.findAMethod(parentObj.getClass(), getSetMethodName());
          }
        } catch (NoSuchMethodException e) {
          MappingUtils.throwMappingException(e);
        }

The custom setMethodName will only be used, when the default setter is NOT available. It should be used always when configured.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1230138495</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Fixed and will be released with 4.4 soon.  This use case was specific to when the default setter and custom setter are both available for the dest field</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230138495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888638</field>
		<field name="entrydate">1230138495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230138495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230138495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">306277: dozer-reproducer.zip</field>
		<field name="entrydate">1229968109</field>
		<field name="mod_by">roman_stumm</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2458137</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">4</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Improve Exception Handling</field>
	<field name="open_date">1229941340</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">Please improve the exceptions a bit. 
For example, if I get the following exception, I still have not idea which mapping it refers to, or which class it's mapping. I have to set a breakpoint to discover that information. 
 
Example: 
Caused by: net.sf.dozer.util.mapping.MappingException: java.lang.NoSuchFieldException: type 
at net.sf.dozer.util.mapping.util.MappingUtils.throwMappingException(MappingUtils.java:91) 
at net.sf.dozer.util.mapping.propertydescriptor.FieldPropertyDescriptor.&#60;init&#62;(FieldPropertyDescriptor.java:43) 
at net.sf.dozer.util.mapping.propertydescriptor.PropertyDescriptorFactory.getPropertyDescriptor(PropertyDescriptorFactory.java:57) 
at net.sf.dozer.util.mapping.fieldmap.FieldMap.getDestPropertyDescriptor(FieldMap.java:370) 
at net.sf.dozer.util.mapping.fieldmap.FieldMap.getDestFieldType(FieldMap.java:103) 
at net.sf.dozer.util.mapping.util.MappingsParser.processMappings(MappingsParser.java:97) 
at net.sf.dozer.util.mapping.util.CustomMappingsLoader.load(CustomMappingsLoader.java:77) 
at net.sf.dozer.util.mapping.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:149) 
at net.sf.dozer.util.mapping.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:132) 
at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:94)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1230142069</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230142069</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230142069</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230142069</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1920762</field>
	<field user_id="2034299" name="submitted_by">choss</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">DozerBeanMapper doesn't resolve graphs properly</field>
	<field name="open_date">1206002916</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">When Mapping complex object graphs, the DozerBeanMapper doesn't Honor the object identity. 
The Map which saves alread visited nodes uses the &#34;equals&#34;-Method to determine if two objects are the same. When Overriding the equals-Method in the object which are mapped there are many &#34;odd&#34; effects.

To solve the problem an IdentityHashMap should be used instead of a normal HashMap.

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1230865240</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Switched dozer's node mapped fields table to use IdentityHashMap</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230865240</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888638</field>
		<field name="entrydate">1230865240</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">2243056</field>
		<field name="entrydate">1230865240</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230865240</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224345744</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224345744</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2487499</field>
	<field user_id="2336251" name="submitted_by">roman_stumm</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Dozer should load classes using ContextClassLoader</field>
	<field name="open_date">1231150840</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4.1</field>
	<field name="details">Since Dozer4.3 dozer does not find classes in the context classloader, so that we get net.sf.dozer.util.mapping.MappingException: java.lang.ClassNotFoundException
when mapping classes located in the .war archive (dozer.jar is located in the parent classloader, e.g. in the lib directory of the appserver).

This worked correctly in previous versions of dozer, because it used the ContextClassLoader.

Class MappingUtils has been changed in Dozer4.3 (ff.) so that dozer only finds classes that are in the same classload as dozer itself:

New Code (since 4.3)
  public static Class loadClass(String name) {
    Class result = null;
    try {
      result = Class.forName(name);
    } catch (ClassNotFoundException e) {
      MappingUtils.throwMappingException(e);
    }
    return result;
  }

I suggest, that you revert the change and use the former code again, that fixes the bug:

Code in Dozer4.2 and before:

  public static Class loadClass(String name) {
    Class result = null;
    try {
      result = Thread.currentThread().getContextClassLoader().loadClass(name);
    } catch (ClassNotFoundException e) {
      MappingUtils.throwMappingException(e);
    }
    return result;
  }

Best regards,
Roman Stumm

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1231598700</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed, included in 4.4.1 release</field>
</message>

<message>
		<field name="adddate">1231158230</field>
		<field name="user_name">buzdin</field>
		<field name="body">Thank you for reporting this issue.
We will be preparing 4.4.1 release with this fix in the closest time.</field>
</message>

<message>
		<field name="adddate">1231151745</field>
		<field name="user_name">roman_stumm</field>
		<field name="body">Another suggestion: Dozer is already using commons-lang

So the simplest way to load a class would be: org.apache.commons.lang.ClassUtils.getClass(String name).

(org.apache.commons.lang.ClassUtils is also using the ContextClassLoader)</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1231598700</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1231598700</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1231598700</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1231598700</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2793207</field>
	<field user_id="2500198" name="submitted_by">titan44</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Works For Me</field>
	<field name="summary">out of memory error</field>
	<field name="open_date">1242630333</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">hi friends,
           I am using dozer4.0. i am having problem with custom dozer converter,its giving me out od memory error.
           This converter will convert set&#60;object1&#62; to vector&#60;object2&#62;.I couldnt convert set to vector.

public class BeanConverter implements CustomConverter {
public Object convert(Object destination, Object source, 
			Class destClass, Class sourceClass) {
		Vector a;
		Set b = (Set) source; 
 if (source == null) {
	      return null;
	    }
	    if(destination == null){
	    	a= new Vector();	
	    }
	    else{
	    	a= (Vector)destination; 
	    }
	    
for loop(){
getters and setters for the properties
}
return a(vector);


</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262452674</field>
		<field name="user_name">buzdin</field>
		<field name="body">Closed as it is impossible to reproduce using provided information</field>
</message>

<message>
		<field name="adddate">1244495332</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hello,

Converter source code you have posted is completely ok from safety and performance perspectives. The only way I see we can help is if you provide a Test Case with public static main() method producing an OutOfMemory exception with you data objects and fake (generated) data. Otherwise it is impossible to guess what have caused that. Another option is to you Profiler or take Heap Dump of JVM during the conversion process. In this way you will see numbers of allocated objects of each type and then you could say that it is Dozer internal objects or custom application classes.

Unless you provide more detail it is impossible to help, sorry.

Dmitry</field>
</message>

<message>
		<field name="adddate">1242631318</field>
		<field name="user_name">titan44</field>
		<field name="body"> 
hi,
Since i created one custom converter, i didnt add any mapping for this
set to vector conversion in my mapping file .Is it necessary that we have
to have mapping for this?
</field>
</message>

<message>
		<field name="adddate">1242631294</field>
		<field name="user_name">titan44</field>
		<field name="body"> 
hi,
Since i created one custom converter, i didnt add any mapping for this
set to vector conversion in my mapping file .Is it necessary that we have
to have mapping for this?
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262452675</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1262452675</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262452675</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244495349</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">2308193</field>
		<field name="entrydate">1244495349</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">8</field>
		<field name="entrydate">1244495333</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1242728026</field>
		<field name="mod_by">titan44</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1242630389</field>
		<field name="mod_by">titan44</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1242630374</field>
		<field name="mod_by">titan44</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1456513</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Wrong field mapped when an instance is passed in.</field>
	<field name="open_date">1143069285</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Problem:

    class A
    class B extends A
 
    S s = new S();
    s.setF(&#34;field3&#34;);
    A a = new A();
    mapper.map(s, a);

  &#60;mapping&#62;
      &#60;class-a&#62;simple.S&#60;/class-a&#62;
      &#60;class-b&#62;simple.B&#60;/class-b&#62;
          &#60;field&#62;
             &#60;a&#62;f&#60;/a&#62;
             &#60;b&#62;field1&#60;/b&#62;
          &#60;/field&#62;
  &#60;/mapping&#62;

With this situation we would pull the field mapping
from the mapping file even though Class A does not have
any fields that need to be mapped. The wrong mapping
was used. We need to verify that an instance is being
passed in and not look for and not walk down the
subclasses to find a mapping. 

Changed this code:

    if (mapping == null &#38;&#38; !isInstance) {
      mapping = walkDownSubclasses(destClass, sourceObj);
    }

</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1144820589</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1144785143</field>
		<field name="entrydate">1144820589</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1144785143</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1144785143</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1346342</field>
	<field user_id="774102" name="submitted_by">dr_dee</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">regression on finding most specific destination mapping</field>
	<field name="open_date">1130966313</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">the attached patch should fix this</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1130973969</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Fixed for 1.5.7. I have attached the patched file.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1130973969</field>
		<field name="entrydate">1132111197</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1132111197</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">154832: MappingProcessor.java</field>
		<field name="entrydate">1130973974</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1130973969</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1130973969</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1130973969</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">154814: MappingProcessor.java.diff</field>
		<field name="entrydate">1130966315</field>
		<field name="mod_by">dr_dee</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2290928</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">9</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">order of super class mapping is wrong</field>
	<field name="open_date">1226753925</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">I found a very nasty bug which took me a long time to isolate it well, as it didn't always maybe
itself visible.

The bug: The super classes, determined in MappingProcessor.checkForSuperTypeMapping are 
put in unordered hashset, such that processing of his content happens in an unpredictable order,
that can result in nasty bugs that happens when the super classes aren't prcoessed 
before his subclass isn't processed/mapped.

In my case it's important that the super class needs to be mapped first before his subclass is 
mapped because the values in the super class calculate the hashCode. 
Why? because the mapped class is put in a HashSet, and because the hasCode is still incorrect
because the super classes aren't mapped yet, the item will be placed in an incorrect position 
in the HashSet. That is: after it has been put in the HashSet, the super classes are mapped
such that the hashCode changes and as such the item can never be found anymore in the HashSet.
That is that HashSet.contains(item) returns false where as in the previous mapping it was put 
in the same HashSet. (reminder: a HashSet uses a HashMap and an key object in the map is located through his hasCode).

BTW: the patch below also solved bug 1865775

Let my explain this through an example which shows when this happens:
Suppose the following domain model: class Item implements an interface Inf and contains a collection
of child Items:

class Item extends Base implements Intf {
 private Item parent;
 private Set&#60;Intf&#62; childs
 
 //... getters and setters of child and parent
 
}

interface Intf {
 // ... getters and setters of childs and parent ...
}

The Base class: 
class Base {
 private String id
 // getters/setters for id...
 
  public int hashCode() {
   return this.id;
  }
  
  public boolean equals(Object other) {
   .....
  }
}

We will map this to an equivalent Dto object: ItemDto, which looks the same.
The dozer mappings contains an entry from Item to ItemDto with a hint for the types contained 
in the Set.
Note further in the above that the item is contained in the parent as a child such that: 
Item item;
item.getParent.getChilds().contains(item) == true...


If we map Item to ItemDto, the following happens in the current dozer code:
We map an instance A of Item to ItemDto.
When we start mapping A in MappingProcessor.map(...) we first create an instance of ItemDto, let's see B
and put that in the mappedFields field so we can reuse the same instance B latter. 
In the MappingProcessor.map(...) we determine the super class mappings through the 
method checkForSuperTypeMapping and store that in the local superClasses. Super classes then contains 
only the Base mapping. Then the interface mappings are added, such that superClasses contains
Base and Intf mapping (als if the Intf mapping isn't contained in the dozer mapping it will create a default
mapping and add it). It will then first map the content of superClasses before mapping the actual 
class. BTW: This is something I don't realy understand well, as I think this could be optmized 
as the superClasses will perform the same mapping, that of the interface Intf which does exactly the 
same as the mapping from Item to ItemDto.. But anyway, there are probably reasons for doing it this way, let
me continue. The superClasses local is a HashSet and it will now first map his content. If it then 
first map the Intf mapping it will goes wrong...If it first map the Base class and as such that the hashCode
returns the correct value, the mapping goes correct.
If it first map Intf, it will map the parent field of A and will then map the childs of the parent. The child contains A,
the one we started with. It will then map A again, but because it is stored in the mappedFields field, it will use 
instance B from there and store it directly in the childs Set. 
This all looks good not.... NO... it doesn't.... Note that Base class of instance A wasn't mapped yet, such that 
the id of B is null and such that the method hashCode returns the incorrect value and as such that it is stored 
incorrectly in the HashSet.
When we continue and map Base of A, the id field is filled. If I then call childs.contains(A) it will return false
for sure!!
I hope you can follow me here, otherwise, just email me...
It's a very nasty bug. 
What I did in the patch below: replaced the method checkForSuperTypeMapping by my own version which makes sure 
that the superClasses local always maps the super classes first (using an ArrayList and putting the super classes first). 
Like mention above, it also solves the other bug 1865775 that overcomed the mapping of more then one super class.

The patch works well for me, but you should add an extra junit test the present the above situation.

Then still there are a few open issues that I can't really understand well, but this cost me already way to much time, so 
please have a look at them closely:
1) Like mentioned above, I don't realy understand why the superClasses field will contain a mapping for the interface class
when mapping. It sames that it creates some duplicate mapping and as such does too much work.
2) Suppose that the dozer mapping doesn't contain a mapping for Intf but for Item to ItemDto instead. Like mentioned
above, the mapping is added to hint the content of the childs Set. In this case, when Dozer tries to map the field &#34;Intf parent&#34;
it will look  for mapping information of Intf, which it will not found, because we defined mapping information between Item and ItemDto.
It will then add a default mapping information to the field customMappings in the method getClassMap. I dont' realy understand this and this 
smells as we already definid this mapping in dozer between Item and ItemDto which should be the same... (my tests work however) 

I think the interface implementation/design needs a closer look because of the above and the other bugs(s) about interface that I reported
(maybe others as well).  For example: currently it's not possible to define field mappings with &#34;is-accessible=&#34;true&#34;&#34; 
(not through his getters/setters) between interface mapping definitions. To me, the interface mapping, is all a bit confusing :(..
    








 

 

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1227282838</field>
		<field name="user_name">edbras</field>
		<field name="body">He Dimitri,

Too bad.....   strange way of solving things... 

I was afraid of recursion but used it so much now that I love it... Probably I am just getting old ;)

You can't avoid recursion if you want to walk through trees/graphs and stuff like that efficiently... ... To bad you don't share the same experience as it's very powerful (my basic patch code is only about 10 lines and works well).

.. 
Ok then, I will keep using my own version of Dozer (merged with our changes) for the moment then and will keep monitoring the dozer release notes for performance improvements...

Maybe it's an idea to let somebody else of the Dozer team have a look at this, that have more experience with recursion and stuff ?
Maybe Franz, the previous lead developer, as Dozer is currently full of recursions... I am currious how you gonne deal with those...

Good luck,
Ed
</field>
</message>

<message>
		<field name="adddate">1227281110</field>
		<field name="user_name">buzdin</field>
		<field name="body">Then lets do the following, I am closing the bug and start evaluating the performance.
I am pretty sure that there are far more superior bottlenecks in Dozer than this particular call.

Premature Optimization stuff also comes to mind :)

I will make code profiling for a couple of our applications using the framework.
Yes I am afraid of recursion because it is complex and should be avoided to solve such simple task. I am thinking of caching Class metadata using DozerClass or something else. In this case we can simply go through precalculated set of hierarchy sorted in correct order and no recursion.

</field>
</message>

<message>
		<field name="adddate">1227279973</field>
		<field name="user_name">edbras</field>
		<field name="body">He Dimitri,

Good to hear.
I thought about the reverse() method as well (when I was solving the bug), but I don't think it's the correct option. Of course it fixes your bug, but it costs unnecessary performance which for me is important.

The reverse() method should be used to reverse the order of a &#34;received&#34; List. I mean: you receive the list from some third party component and then you want it in reverse order. 
You can't change the third party code to put it in the correct order so you have to do it like this (calling the reverse method).
In our case it's different and you are abusing the method to solve the bug.

This method shouldn't be used if you can do it correct at the first place. That is: we have the option to store the items in the correct order, so let's do that then, or are you afraid of a recursive method :)...( I already did all the work for you ;) )

Don't forget that there are developers out there that use Dozer to map dozens of objects with a few super classes. Such a reverse() call will certainly have an unnecessary, and unwanted performance impact...
Even do we talk only about a few super classes but the total super class mapping can be the permutation of the dto en not-dto super classes.

Just my 50 cents.... but I am happy that you constructed a test that reproduced the bug.
My advice: use the patch!

-- Ed

</field>
</message>

<message>
		<field name="adddate">1227277700</field>
		<field name="user_name">buzdin</field>
		<field name="body">I have finally got it failing :)

The test is in SVN. To fix I do Collection.reverse() at end of the method. Looks to me that it will fix the problem. I have also noticed that the same approach is employed in ClassMapFinder.findInterfaceMappings(). Not exactly as in your patch but seems to be working.

My guess is that we can close this ticket finally. What do you think?

P.S. Guess I can not really help you with your company business in return, but if you have any idea please let me know.</field>
</message>

<message>
		<field name="adddate">1227275482</field>
		<field name="user_name">edbras</field>
		<field name="body">He Dimitri,

Thanks for some explanation, now I understand  why you switched to an ArrayList (and that you already solve the other bug.. dammm your fast.. :) )...... 
Yep, your right, it's a good think such that you aren't dependent on Sun's hashCode.

My own test isn't usable as it contains about 3 super classes and because I use rich domain objects they contain refences like a Dao reference. Also dozer, is hidden behind a general Dto converter.. etc.. So it's not a copy/pase thing..

Still I think it's a good habbit to first map the root super classes first and then work your way down. Java also first creates first the super classes and then the subclasses... and not they other way around, whereas it would be correct in 90%.

Anyway: I was thinking about to fail your test and. Not so difficult on second thought.
The mapping processor will first (because of the ArrayList) map the super classes and then the ContentItemGroup. Just shift the contained Set and one-2-one mapping in the ContentGroup one level up to a new super class that is the parent of the ContentItemGroup and extends from EntityBase, that's it... Because of the wrong order it will first map the new super class EntityChildBase (and you get the same problem that we had without the ArrayList) that contains a parent EntityChildBase and a set with EntityCHildsBase objects, just that you get the same problem when the set is mapped and the root class isn't mapped yet.

It the same problem but we just shifted it to a super class as they are mapped first now.... 

You understand this?
Let me know how it goes and when the changes are in svn...?

Ed







BTW: I am working now for about 1 year around 6/7 days a week, 12 hours a day (my girlfriend is getting crazy). Why ?... I (we) have a  big delay setting up our new company.
</field>
</message>

<message>
		<field name="adddate">1227267875</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi,

Bug 1865775 is fixed by my previous modifications not this one, and I do have a test case to prove it. Switching to ArrayList was done purely to make the test case 100% reproducable, because then we can not blame Sun for HashSet algorithm or whatever. 

From my practice I am pretty sure that if we can not reproduce the bug and fix it just like that - it is a pretty bad thing. I think you will agree with me, because the same situation can happen again in the next release after refactoring, especially when there are more than one person working with the code.

I am very appreciating your involvement, but I need to double-check the stuff. I understand what you are telling me, and I realize that even if my test case succeeds, it does not mean anything, because the order in HashSet is undetermined and classes can have different hierarchies. I am not claiming that I fixed something with switching to ArrayList. All I say is that now problem is localized and could be reproduced in all cases, not just sometimes under certain JDK version.

I do also believe your patch fixes the problem and leaves all existing tests intact, but the point is that it is necessary to write an automated test before fixing something. Then I will look at your fix carefully and apply it, may be with some modifications. Now I will try to spend some time to reproduce that myself, because I thought you do have a good test case for that. I understand the direction where to dig so than you for explaining all this things.

And you are right, right now I am on my work, doing some other things in parallel. So I was hoping that someone would provide me with nice test case to analyze. I guess I will have some time on weekend. So I am sorry if my replies seemed not so clear. Hope we can collaborate on forthcoming bugs in a more pragmatic fashion :)

Regards,
Dmitry </field>
</message>

<message>
		<field name="adddate">1227266289</field>
		<field name="user_name">edbras</field>
		<field name="body">He Dimitri,

From your text below, I was afraid it would end up to changing this :).
But then I think you not completely understand the problems written in this bug and the other bug that was mentioned which is still there: 1865775.
I am getting the impression that you a very busy or something like that as it takes me a lotttt of &#34;words&#34; to make you understand what goes wrong.

Don't get me wrong, I am very happy that Dozer is picked up and not dead anymore. (I was debugging and patching Dozer for the last 2 years myself in the meantime). And Dozer code isn't very easy to understand (I don't like the code design).

Anyway:
- Like mentioned before the order of the super classes in the superclasses variabele is important, which is wrong still now in your code with the ArrayList. 
Why? Just add another super class that extends EntityBase and put something in it that dependends on a variable from the EntityBase, like the Id. 
Because the method checkForSuperTypeMapping add the super classes in the wrong order, it will always stay tricky and will fail depending on the dependency (the EntityChildBase will appear before the EntityBase and will be mapped first as such).
You have to add them in the reverse order, which is actualy what my patch does, nothing less, nothing more... that's it, and it's tested...

- Bug 1865775 isn't solved with your solution.

- Of course it's nice to be able to reproduce this mistake in a test, but that's not easy with this test. But many things in java are just common sense thinking. For example: a thead safe object is always hard to test, as you will have to fire at least two threads and then fire them just at the same time such that they will mix and you get rubisch... This is very hard to test, but is common sense if you look at it. Just like this, if you think about what I am writing in this post, it mustn't be so hard to see that it's incorrect:
1) Usage of HashSet (order not guaranteed)
2) Order in which the Collection is filled.
( 3) bug 1865775)

- Why not use the patch code that I submitted ? It's very easy to understand and it does so little, and as such his impact. At least it will safe us both time. Dozer contains many tests, so you can check the code by reviewing and then by testing it with the dozer tests...  

good luck,
Ed</field>
</message>

<message>
		<field name="adddate">1227258623</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi Ed,

I have modified superClass to be an ArrayList. I have also made all adjustments to the test case you have proposed.

Please take a look. Now the order is guaranteed and the test case is still passing.

Dmitry</field>
</message>

<message>
		<field name="adddate">1227197757</field>
		<field name="user_name">edbras</field>
		<field name="body">He Dimitri,

I looked at your test. A few notes:
1) Copy the hashCode from EntityBase to EntityDto.
2) Make the getId in the EntityDto protected.
3) Map the child and NOT the parent, so it must be:
   ContentItemGroupDTO result = (ContentItemGroupDTO) mapper.map(childItem, ContentItemGroupDTO.class);


4) Put your test in a loop, as it will not always be that the ContentItemGroup mapping appears before the EntityBase mapping. That depends on the hashCode calculation (the SUn mistery).

Anyway: I was a bit suprised that the test didn't fail, even when the ContentItemGroup mapping appeared before the EntityBase mapping. When I searched on I discovered that the id mapping is included in the ContentItemGroup mapping (Not in my test). That is strange and I thhink incorrect as it's already included in the EntityBase mapping, so you will get a duplicate mapping!! So the id FieldMap should be included in the ClassMap of ContentItemGroup. I don't understand how it get's there, as it wasn't in my own test. 
Anyway: I found out that it comes because of thet setId() in the EntityDto. I don't realy understand why this setId() results in an id mapping in the COntentItemGroup. You might want to have a look at that, as it smells. If you make the setId() protected it will disappear..

Anyway: when I made the setId protected like indicated in the note 2) I did get the bug (see below). Just sit and wait and run it several time. Like mentioned before, it highly depends on the assigned hashCode of the jvm. If you can't reproduce the bug, then just add an extra method to the ContentItemGroup or EntityBase/EntityDto and save it. The JVM uses the class bytecode for his hashCalculation so this works if you are lucky.... 
I also noticed that if I put a breakpoint in the hashCode method of ENtityDto is shows itself more often....so you might want to try that...

Let' me know if you see it ?

My EntityDto:
public class EntityDTO {

	private String id;

	public String getId() {
		return id;
	}

	protected void setId(String id) {
		this.id = id;
	}

	@Override
	public int hashCode() {
		if (this.id == null) {
			throw new IllegalStateException(&#34;Dto Id not mapped yet: BOEM.&#34;);
		}
		return this.id.hashCode();
	}

}


  Dest field type: net.sf.dozer.util.mapping.vo.direction.ContentItemGroupDTO
java.lang.IllegalStateException: Dto Id not mapped yet: BOEM.
	at net.sf.dozer.util.mapping.vo.direction.EntityDTO.hashCode(EntityDTO.java:21)
	at java.util.HashMap.getEntry(HashMap.java:344)
	at java.util.HashMap.containsKey(HashMap.java:335)
	at java.util.HashSet.contains(HashSet.java:184)
	at org.apache.commons.collections.set.ListOrderedSet.add(ListOrderedSet.java:173)
	at net.sf.dozer.util.mapping.MappingProcessor.addToSet(MappingProcessor.java:665)
	at net.sf.dozer.util.mapping.MappingProcessor.mapCollection(MappingProcessor.java:513)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:398)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:304)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:250)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:219)
	at ....................
................</field>
</message>

<message>
		<field name="adddate">1227185088</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi :)

Lets go on.

I have made a test, please make yourself familiar with that:

  public void testInheritanceDirection() {
    ContentItemGroupDefault parentItem = new ContentItemGroupDefault();
    parentItem.setId(&#34;A&#34;);

    ContentItemGroupDefault childItem = new ContentItemGroupDefault();
    childItem.setParentGroup(parentItem);
    childItem.setId(&#34;B&#34;);

    parentItem.addChildGroup(childItem);

    ContentItemGroupDTO result = (ContentItemGroupDTO) mapper.map(parentItem, ContentItemGroupDTO.class);
    
    assertNotNull(result);
    assertEquals(&#34;A&#34;, result.getId());
    assertEquals(1, result.getChildGroups().size());

    ContentItemGroupDTO childDTO = (ContentItemGroupDTO) result.getChildGroups().iterator().next();
    assertTrue(result.getChildGroups().contains(childDTO));

    assertEquals(&#34;B&#34;, childDTO.getId());
    assertEquals(result, childDTO.getParentGroup());
  }

eturn childGroups;
  }

  public void setChildGroups(Set childGroups) {
    this.childGroups = childGroups;
  }

}

I have changed your code so there would be setter for id too. But I tried it without setter too, with public field. The test is passing. In my case EntityBase is processed first, but superClasses Set contains both EntityBase and ContentItemGroup you are right.

Now I see that in theory ordering does matter and ordering will be different on different JVM versions. But still I would very like to reproduce it.

I have submitted InheritanceDirectionTest in Trunk, please take a look. I need to reproduce the problem before fixing.</field>
</message>

<message>
		<field name="adddate">1227112026</field>
		<field name="user_name">edbras</field>
		<field name="body">He Dimitri,

Don't worry and hang in there. We will get there and get the bug out of the shadow :)
I just came back from jogging and realized that I forgot a few things, sorry for that.
What I forgot:
- The hasCode() part  of the EntityBase, so I updloaded a new version of the code.txt file below.

- Some test code so you can see the bug...
First of all, please use my code (latter I will explain why). You could even commit your test in svn, such that I can see it and help you a bit.

We have to map an instance of the ContentItemGroup that itself also contains an ContentItem as parent. This parent contains the original ContentItemGroup also as child which is important!
So the test code should be something like this:

ContentItemGroup childItem = new ContentItemGroupDefault();
ContentItemGroup parentItem = new ContentItemGroupDefault();
childItem.setParentGroupt(parentItem);
Set&#60;ContentItemGroup&#62; childs = new HashSet&#60;ContentItemGroup&#62;();
childs.add(childItem);
parentItem.setChildGroups(childs);

Then map the childItem: map(childItem, childItemDto);

Okkkk, now we have this, let's continue where we left below, just after the breakpoint.
Just after the breakpoint you will will see that the superclasses variable contains two mapping: one of EntityBase (super class mapping) and one for ContentItemGroup (interface mapping).
It will then process this superclasses mappings FIRST before continuing mapping the childItem fields.
If it will then process first the ContentItemGroup mapping, your test will FAIL!... 

Why ?... quite simple: If it will first process the ContentItemGroup mapping, it will encounter the field parentGroup and will try to map this. This is again just another ContentItemGroup mapping which contains childGroups which it will try to map as well. When it maps the childs (of the parent) it will encounter the childItem again (the one we started with) and it will found this in the field mappedFields of MappingProcessor instance because it already mapped this instance. As such it will use this instance and add it to the childs Set: BOEM....... 
Why Boem?... Because the EntityBase mapping wasn't processed yet, and such the id wasn't set properly that is used in the hashCode....
Do you understand this ?

Note: ofcourse there is a little change that it will first process the EntityBase mapping in case your test will not fail... In that case, you are very lucky :)... But form the above you will understand that the order of processing is important.
Anyway: just make sure that the ContentItemGroup is processed first by making sure that his hasCode returned form the mapping object, results in a lower table index (in the HashSet) then the EntityBase mapping. ....But let's not get there... Let's hope that the ContentItemGroup mapping appears int the Map (of the HashSet) before the EntityBase mapping....

Let's me know how it goes please ?

-- Ed
 




BTW: The DTO can just be a copy of the orignal classes. Just copy them and rename them, just to make sure it's about the same as in my test case.



</field>
</message>

<message>
		<field name="adddate">1227107193</field>
		<field name="user_name">buzdin</field>
		<field name="body">In my example Item did have an interface Base with id attribute.
Please help me out to reproduce this. One question - what is on DTO side?

My guess is:
public class EntityDTO {
  private String id;
  // get/set methods
}

public class ContentItemGroupDTO extends EntityDTO {

  private ContentItemGroup parentGroup;
  private Set childGroups;
  // get/set methods
}</field>
</message>

<message>
		<field name="adddate">1227100492</field>
		<field name="user_name">edbras</field>
		<field name="body">Yep, like that it works just fine, but you forgetting the interface of Item (like in the pseudo code above) 
Because you aren't posting the the classes below, I can't see if Item also extends from a base class.

Let me help you a bit with some concrete code of mine where it goes wrong (i modified the code a bit, but this should produce the bug).
I added a file below with some classes:
ContentItemGroup:  interface.
ContentItemGroup: the implementation.
Entity: super interface
EntityBase: super class.

And some mapping snippets.
You only have put the correct mappigns packages in the mapping snippets and map an instance of ContentItemDefault to ContentItemDto.. or you could even use the same classes as DTO I quess (for the test)....

I also added the code I posted earlier in the another file.
BTW: I just noticed in the code that checkForSuperTypeMapping should never return null, otherwise it will result in a nullPointer exception... Maybe you could improve this a bit.

Anyway: 
when running the test, put a breakpoint at the following line in the method MappingProcessor.map(...):
      superClasses.addAll(ClassMapFinder.findInterfaceMappings(this.customMappings, srcClass, destClass));

Step over this and the content of the superclasses variable should contain at least two mappings, one for the interface ContentItemGroup and one for the EntityBase.
At least then you know you superClasses variable is filled with the correct possible-bug data.
Your test can now still run OK, which depends on how these mappings are processed (like explained above)...
If the ContentItemGroup mapping is prcoessed first, your test will fail. See above for further details.

Hope this helps.






</field>
</message>

<message>
		<field name="adddate">1227096624</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi,

I am trying to reproduce the problem with the following test case:

  public void testInheritanceDirection() {
    Item source = new Item();
    source.setId(&#34;A&#34;);

    HashSet children = new HashSet();
    Item child = new Item();
    child.setParent(source);
    child.setId(&#34;B&#34;);
    children.add(child);
    source.setChildren(children);
    
    ItemDTO dest = (ItemDTO) mapper.map(source, ItemDTO.class);
    assertNotNull(dest);
    assertEquals(&#34;A&#34;, dest.getId());
    assertEquals(1, dest.getChildren().size());

    ItemDTO resultingChild = (ItemDTO) dest.getChildren().iterator().next();
    assertEquals(&#34;B&#34;, resultingChild.getId());
    assertEquals(dest, resultingChild.getParent());
    assertTrue(dest.getChildren().contains(resultingChild));
  }

  &#60;mapping&#62;
    &#60;class-a&#62;net.sf.dozer.util.mapping.vo.direction.Item&#60;/class-a&#62;
    &#60;class-b&#62;net.sf.dozer.util.mapping.vo.direction.ItemDTO&#60;/class-b&#62;
    &#60;field&#62;
      &#60;a&#62;parent&#60;/a&#62;
      &#60;b&#62;parent&#60;/b&#62;
    &#60;/field&#62;
    &#60;field&#62;
      &#60;a&#62;id&#60;/a&#62;
      &#60;b&#62;id&#60;/b&#62;
    &#60;/field&#62;
    &#60;field&#62;
      &#60;a&#62;children&#60;/a&#62;
      &#60;b&#62;children&#60;/b&#62;
      &#60;a-hint&#62;net.sf.dozer.util.mapping.vo.direction.Item&#60;/a-hint&#62;
      &#60;b-hint&#62;net.sf.dozer.util.mapping.vo.direction.ItemDTO&#60;/b-hint&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;

Note that ItemDTO does not extend any BaseDTO and contains fields: id, children and parent.
Am I missing something? My test case works as expected. I tested it on the Trunk.

</field>
</message>

<message>
		<field name="adddate">1227089947</field>
		<field name="user_name">edbras</field>
		<field name="body">Hi Again,

Because I am working with a patached version I changed your pom a bit so it suits my needs.
Anyway, you want want to add the next piece of pom snippet, to make sure that the sources are packaged in a jar as well.

This is very convenient, especially when using the maven eclipse plugin and you run something like mvn eclipse:eclipse -DdownloadSources=true. It will then automatically create the eclipse .classpath files for you and attach the *-sources.jar, such that you can directly debug in to an attached library without eclipse giving the enoying message &#34;that it can't find the source, do you want to attache it?&#34;

Pom snippet (in your build/plugins section):
      &#60;plugin&#62;
        &#60;groupId&#62;org.apache.maven.plugins&#60;/groupId&#62;
        &#60;artifactId&#62;maven-source-plugin&#60;/artifactId&#62;
        &#60;executions&#62;
          &#60;execution&#62;
            &#60;id&#62;attach-sources&#60;/id&#62;
            &#60;phase&#62;verify&#60;/phase&#62;
            &#60;goals&#62;
              &#60;goal&#62;jar&#60;/goal&#62;
            &#60;/goals&#62;
          &#60;/execution&#62;
        &#60;/executions&#62;
      &#60;/plugin&#62;
</field>
</message>

<message>
		<field name="adddate">1227088032</field>
		<field name="user_name">edbras</field>
		<field name="body">Hi Dimitri,

I undestand that it's quite a big issue that I posted above, but please take your time to fully understand it. I did my best to explain it as good as possible which isn't very easy for this nasty bug.
I am sure you can easily merge it with your current changes if you fully understand it.

The short answer: No, it's not a matter of changing a set to a List. If you do that you will still have the deep interface bug, like mentioned above and posted in an earlier issue and you would still have the problem that the root super classes are located at the end of the list, whereas they should be located at the very beginning of the list (as they must be mapped first!). 

Sorry about the indentation, appearantly I pressed my format shortcut which I wasn't my intention :(...
To make it more easy, below you find the replacement of the method checkSuperTypeMapping and his helper methods (if you replace the method you also have a replace several method calls that expect a Set instead of an Collection but you will notice that automatically).

Let me know if this help, otherwise let me know your identation and will make a new patch.
-----------------------
	private List checkForSuperTypeMapping(Class srcClass, Class destClass) {
		// Check cache first
		Object cacheKey = CacheKeyFactory.createKey(new Object[] { destClass, srcClass });
		CacheEntry cacheEntry = superTypeCache.get(cacheKey);
		if (cacheEntry != null) {
			return (List) cacheEntry.getValue();
		}

		// If no existing cache entry is found, determine super type mappings.
		// Recursively walk the inheritance hierarchy.
		List superClasses = new ArrayList();
		// Need to call getRealSuperclass because proxied data objects will not return correct
		// superclass when using basic reflection
		Class superSrcClass = MappingUtils.getRealSuperclass(srcClass);
		Class superDestClass = MappingUtils.getRealSuperclass(destClass);
		if (superSrcClass != null &#38;&#38; superDestClass != null) {
			addSuperClassMapping(superSrcClass, superDestClass, superClasses);
		}

		if (superSrcClass != null) {
			addMapping(superSrcClass, destClass, superClasses);
		}
		if (superDestClass != null) {
			addMapping(srcClass, superDestClass, superClasses);
		}

		// Add result to cache
		cacheEntry = new CacheEntry(cacheKey, superClasses);
		superTypeCache.put(cacheEntry);

		return superClasses;
	}

	private void addSuperClassMapping(final Class srcClass, final Class destClass, final List superClasses) {
		addSuperClassMapping(srcClass, destClass, superClasses, true);
	}

	/**
	 * Recursive method that will walk through all super classes of the specified source and destination class to find a mapping between all
	 * combinations between the source and destination classes. The combinations are added to the specified super class list.
	 * When calling this method for the first time, call it with &#60;code&#62;changeDestination&#60;/code&#62; equals true such that all possible combinations between 
	 * the destination/source classes are determined. It will then walk up to the 
	 * root super destination class, followed to walking up all the way to the source root super class. Such that any mappings between the root/upper 
	 * classes are added first to the list of super classes. We will then walk down by changing the destination/source class, to search
	 * for any mapping between the source and destination classes.   
	 *  
	 * @param changeDestination if true it will determine the super class of the destination class and use that 
	 */
	private void addSuperClassMapping(final Class srcClass, final Class destClass, final List superClasses, final boolean changeDestination) {
		Class superClass = null;
		if (changeDestination) { // change destination
			superClass = getValidSuperClass(destClass);
			if (superClass != null) {
				addSuperClassMapping(srcClass, superClass, superClasses, true);

				superClass = getValidSuperClass(srcClass);
				if (superClass != null) {
					addSuperClassMapping(superClass, destClass, superClasses, false);
				}
			}
			else { // we are at the end, no iterate the the other
				superClass = getValidSuperClass(srcClass);
				if (superClass != null) {
					addSuperClassMapping(superClass, destClass, superClasses, false);
				}
			}
		}
		else { // change source
			superClass = getValidSuperClass(srcClass);
			if (superClass != null) {
				addSuperClassMapping(superClass, destClass, superClasses, false);
			}
		}

		// no further iteration, such that we check if we have to add a mapping between the source and target
		addMapping(srcClass, destClass, superClasses);
	}

	private void addMapping(Class srcClass, Class destClass, List superClasses) {
		ClassMap classMap = (ClassMap) customMappings.get(ClassMapKeyFactory.createKey(srcClass, destClass));
		if (classMap != null) {
			log.debug(&#34;Adding a mapping between source and target super classes, Source:  &#34; + srcClass + &#34;. Target: &#34; + destClass);
			superClasses.add(classMap);
		}
	}

	/**
	 * @return null if no valid super class was found
	 */
	private Class getValidSuperClass(Class cls) {
		if (cls == null) {
			return null;
		}

		Class superClass = MappingUtils.getRealSuperclass(cls);
		if (superClass == null || superClass.getName().equals(&#34;java.lang.Object&#34;)) {
			return null;
		}
		return superClass;
	}

</field>
</message>

<message>
		<field name="adddate">1227030323</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi,
First of all thanks for your help! It would be more difficult to evolve an open source project without guys like you :)

The reason I write is to ask whether switching from Set to List is the only change you had in you patch. MappingProcessor.checkForSuperTypeMapping method changed a little bit so it is difficult to apply patch as is. And your patch also seems to have indentation changes, which makes things even more scary. If List conversion is the only addition I will apply the change and include that in the upcoming release.

Regarding interface mapping, I think it is a separate topic and worth of opening a ticket to review the whole thing.</field>
</message>

<message>
		<field name="adddate">1226761736</field>
		<field name="user_name">edbras</field>
		<field name="body">Like already noted in the above text: please have a good look at the interface mapping and how that is used in the code.
I just noticed that I mapped an array with items that contains duplicates after mapping it, when I describe the mapping in the dozer mapping file as interfaces. However, if I describe the mapping between the items in the arrayList as concrete classes, no duplicates appear :(</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1227281122</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1227281122</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227281122</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227281122</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227281122</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">302089: code.txt</field>
		<field name="entrydate">1227112085</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">302058: </field>
		<field name="entrydate">1227112040</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">302061: patchCode.txt</field>
		<field name="entrydate">1227100634</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">302058: code.txt</field>
		<field name="entrydate">1227100523</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1226754012</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">301457: patch</field>
		<field name="entrydate">1226753925</field>
		<field name="mod_by">edbras</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2919389</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">DozerConverter does not work with Object fields</field>
	<field name="open_date">1261494333</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.1</field>
	<field name="details">When writing DozerConverter it throws an exception if type of property is higher in hierarchy then expected.
For example if mapping Person.class to Object.class typed field.
This should work fine and try to cast.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1270643253</field>
		<field name="user_name">buzdin</field>
		<field name="body">There were problems in determining sourceClass and properly resolving that. Fixed.</field>
</message>

<message>
		<field name="adddate">1266846378</field>
		<field name="user_name">buzdin</field>
		<field name="body">should check for instanceof runtime type as well.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1270643253</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1270643253</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1270643253</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1270643253</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1270643253</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1550275</field>
	<field user_id="180362" name="submitted_by">ozzieg</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">ConcurrentModificationException problem when running threads</field>
	<field name="open_date">1157078986</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I am having really big troubles with running multiple 
threads on a singleton Dozer mapper. I am getting 
ConcurrentModificationExceptions if I try to do the 
same mappings on different instances. 

Here is a snippet of the thread code:

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1159314659</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I have fixed the issue in the 2.4 code base.  I am 
attaching a 2.3 patch that you can use until the formal 
release of 2.4.  Thanks again for posting this defect.  It 
was a good find

The patch jar is named dozerpatch_23_001.jar</field>
</message>

<message>
		<field name="adddate">1159126510</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

reopening.  There is still a small bug.  The original fix 
reduced the chances of this rare exception from being 
thrown.  The following is the current code.  The remaining 
bug is that when creating a new map from an existing one, 
the underlying HashMap implementation iterates :) over the 
original map.  I believe I know what the &#34;real&#34; fix for 
this bug should be and will post a patch

    //Create a local copy of the custom mappings to avoid 
any rare thread synchronization issues while iterating
    //over the custom mappings.  See bug #1550275.
    Map localCustomMappings = new HashMap(customMappings);
    Iterator iter = localCustomMappings.keySet().iterator
();
</field>
</message>

<message>
		<field name="adddate">1157089132</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

reattaching beta jar</field>
</message>

<message>
		<field name="adddate">1157088493</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Ozzie,

I attached a beta version of the 2.3 release jar.  If you 
have time, can you try the new jar out and see if it 
resolves the ConcurrentModificationException you are 
seeing?</field>
</message>

<message>
		<field name="adddate">1157086856</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

The fix actually improved performance a VERY small 
amount:)  I imagine it's because the small overhead of 
managing synchronization while iterating over the custom 
mappings Map was eliminated.</field>
</message>

<message>
		<field name="adddate">1157086492</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Thanks for submitting a patch.  We really appreciate the 
contribution.  Your timing was great on submitting this 
bug as I am putting the finishing touches on the next 
Dozer release (2.3) tonight, so I was able to get this bug 
fix in the 2.3 code.  There was a good amount of general 
code cleanup in the 2.3 code base so I wasnt able to apply 
your patch &#34;as-is&#34;, but I believe I was able to resolve 
the ConcurrentModificationException in the 2.3 code base.  
I am planning on releasing 2.3 in the next couple days, 
but I may attach the pre release 2.3 jar to this bug and 
you can try it out if you have time.  Thanks again.</field>
</message>

<message>
		<field name="adddate">1157082137</field>
		<field name="user_name">ozzieg</field>
		<field name="body">Logged In: YES 
user_id=180362

I have found the problem in two locations of the 
MappingProcessor code. 

1. MappingProcessor.map() calls checkForSuperTypeMapping() 
and directly alters that list by calling addAll(). If 
another thread was ahead of it and iterates, you will get 
the exception. The list is cached and hence a shared 
resource

2. MappingProcessor.checkForSuperTypeMapping() is not 
synchronized, so it is possible that the cache element is 
recreated as many times for the same cache key with 
concurrent threads.

Attached is the file that fixes both issues.</field>
</message>

<message>
		<field name="adddate">1157081952</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Good find.  I think I know what is going on and you are 
the 1st to report this issue.  I think that is because the 
likelyhood of this exception being thrown is pretty low 
and the window it could happen during the lifecycle of an 
enterprise app is small.  We store the mapping meta data 
in a map that is synchronized via 
Collections.synchronizedMap().  This map is shared across 
calls to mapper.map().  The 1st time 2 particular types of 
data objects are mapped, the mapping meta data is loaded 
with default mappings that are reused in future mappings 
of the same 2 types of data objects.  The mapping meta 
data is also iterated over during the mapping process.  So 
there is a slight chance iterate is being called while a 
different thread is putting a new entry into the mapping 
meta data.  I don't think it will be hard to fix this 
issue and I will keep you posted.  Thanks for the unit 
test and good detail around the exception.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1159314659</field>
		<field name="entrydate">1161028885</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1161028885</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">195420: dozerpatch_23_001.jar</field>
		<field name="entrydate">1159314701</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1159314659</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1159314659</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1159126510</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1157162434</field>
		<field name="entrydate">1159126510</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162434</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1157086856</field>
		<field name="entrydate">1157162434</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">191554: dozer-2.3-beta.jar</field>
		<field name="entrydate">1157089191</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">191552: </field>
		<field name="entrydate">1157089065</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">191552: dozer-2.3-beta.jar</field>
		<field name="entrydate">1157088493</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1157086856</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1157086856</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1157086856</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">191544: MappingProcessor.java</field>
		<field name="entrydate">1157082137</field>
		<field name="mod_by">ozzieg</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">191543: Dozer-ConcurrentModificationException.txt</field>
		<field name="entrydate">1157079072</field>
		<field name="mod_by">ozzieg</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">191542: MultiThreadedMembershipTransformationTest.java</field>
		<field name="entrydate">1157078986</field>
		<field name="mod_by">ozzieg</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2792720</field>
	<field user_id="1777661" name="submitted_by">mthielen</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">MappingUtils.loadClass breaks in OSGi environment</field>
	<field name="open_date">1242488383</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">When using Dozer as OSGi-bundle the loadClass method of class MappingUtils breaks.

instead of
ClassUtils.getClass(name);   

this should be used
Class caller = Reflection.getCallerClass(3);
result = ClassUtils.getClass(caller.getClassLoader(), name);</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1249244105</field>
		<field name="user_name">buzdin</field>
		<field name="body">Framework now provides pluggable Class Loader approach. It is possible to replace default one using properties configuration. Will be described in documentation.</field>
</message>

<message>
		<field name="adddate">1243972738</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi Markus,

The existing fix for OSGi is only a temporary solution.
You have made a dependency to Sun JDK, which is not good.
We need a different way to address that. What if Dozer runs under WebSphere IBM JDK ?

Dmitry</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1249244109</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1249244109</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1249244109</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1249244109</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1249244109</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1249244109</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1953945</field>
	<field user_id="2051735" name="submitted_by">assafc49</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">stop-on-errors bug</field>
	<field name="open_date">1209456185</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">v1.0 (example)</field>
	<field name="details">Hi guys, 
 
I debugged your code (dozer 4.2) and found a bug (probably a copy paste mistake :).

In net.sf.dozer.util.mapping.fieldmap.FieldMap method isStopOnErrors looks like: 
 
public boolean isStopOnErrors() { 
return classMap.isTrimStrings(); 
}  
 
but it should be: 
 
public boolean isStopOnErrors() { 
return classMap.isStopOnErrors(); 
} 
 
Cheers, and keep up the good work 
Assaf</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1212417998</field>
		<field name="user_name">neilcannon</field>
		<field name="body">Logged In: YES 
user_id=2105474
Originator: NO

Hi,
Is there any update on when a release with this fix will be made available?
Thanks,
</field>
</message>

<message>
		<field name="adddate">1210715211</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I just came across this today.  I will try to put a small release out soon with this fix</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1214270558</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1214270558</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1214181867</field>
		<field name="entrydate">1214270558</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1214181867</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1214181867</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1907936</field>
	<field user_id="2027959" name="submitted_by">mschudel</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">stop-on-errors does not work (at least on class level)</field>
	<field name="open_date">1204720766</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">stop-on-errors does not work on the class mapping level, and possibly on global level as well. I found this issue when an Exception thrown by a custom converter never shows up and is ignored regardless of the stop-on-errors setting. 

In the class FieldMap, there is a method which has the following code (in 4.2):

 public boolean isStopOnErrors() {
    return classMap.isTrimStrings();
  }

This is a bug and should be:

 public boolean isStopOnErrors() {
    return classMap.isStopOnErrors();
  }</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1214270559</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1214270559</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1214181889</field>
		<field name="entrydate">1214270559</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1214181889</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1214181889</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1755978</field>
	<field user_id="52085" name="submitted_by">jiriki</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer should use context classloader for custom converters</field>
	<field name="open_date">1184750490</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">The MappingProcessor currenty uses Class.forName(...) to load custom converter classes. 
This causes problems, when dozer is loaded by a different classloader than the application code (e.g. http://saloon.javaranch.com/cgi-bin/ubb/ultimatebb.cgi?ubb=get_topic&#38;f=34&#38;t=007838 discusses this problem).

  345       Class sourceFieldClass = sourceFieldValue != null ? sourceFieldValue.getClass() : fieldMapping.getSourceFieldType(sourceObj.getClass());
  346       destFieldValue = mapUsingCustomConverter(Class.forName(fieldMapping.getCustomConverter()), sourceFieldClass, sourceFieldValue,
  347           destFieldType, null, fieldMapping, false);

This should be done using the context classloader: Thread.currentThread().getContextClassLoader().

&#60;18-Jul-2007 09:58:15 o'clock BST&#62; &#60;Error&#62; &#60;net.sf.dozer.util.mapping.MappingProcessor&#62; &#60;000000&#62; &#60;Field mapping error --&#62;
  MapId: null
  Type: bi-directional
  Source parent class: xxxxx
  Source field name: applicants
  Source field type: generic
  Source field value: null
  Dest parent class: xxxxx
  Dest field name: applicants
  Dest field type: java.util.List
java.lang.ClassNotFoundException: xxxxxx
        at weblogic.utils.classloaders.GenericClassLoader.findLocalClass(GenericClassLoader.java:286)
        at weblogic.utils.classloaders.GenericClassLoader.findClass(GenericClassLoader.java:259)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
        at weblogic.utils.classloaders.GenericClassLoader.loadClass(GenericClassLoader.java:158)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:164)
        at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:348)
        at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:299)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:237)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:171)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:147)
        at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:99)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1184926097</field>
		<field name="user_name">jiriki</field>
		<field name="body">Logged In: YES 
user_id=52085
Originator: YES

Confirming that this is resolved in 4.0.

Thank you!</field>
</message>

<message>
		<field name="adddate">1184818603</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

This was resolved in the 4.0 release.  Can you confirm that this error is happening with a release prior to 4.0?  If this is true, can you try 4.0 and let us know the results.

http://sourceforge.net/tracker/index.php?func=detail&#38;aid=1734163&#38;group_id=133517&#38;atid=727371</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1184891290</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1184891290</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1711580</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">NPE - Date --&#62; String when no date format specified</field>
	<field name="open_date">1178147636</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">StringConverter Lines 37 and 39</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178248676</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775444</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1179367176</field>
		<field name="entrydate">1179775444</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1179367176</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1179367176</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179367160</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">NPE Date --&#62; String when no date format specified</field>
		<field name="entrydate">1179367160</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178248676</field>
		<field name="entrydate">1179367160</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178248676</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178248676</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1305240</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">DTD has field-method and field-iterate methods</field>
	<field name="open_date">1127770456</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">fixed for 1.5.5 release.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1129244160</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1129071029</field>
		<field name="entrydate">1129244160</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1129071029</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1129071029</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1127770467</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2724920</field>
	<field user_id="1759155" name="submitted_by">grzegorzoledzki</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Map&#60;?, List&#60;?&#62;&#62; is mapped incorrectly</field>
	<field name="open_date">1238586056</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Imagine a class having a property with Map&#60;?, List&#60;?&#62;&#62; type. 
The values of the map (lists) are not mapped properly.
I attach a simple program showing the problem.

Tried with both 4.2 and 5.0 - the result is the same (of course needing to change the imports to run against 4.2).
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1244494845</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed. Tests are incorporated into the test suite.</field>
</message>

<message>
		<field name="adddate">1244109271</field>
		<field name="user_name">mariusz-pala</field>
		<field name="body">OK, my patch works, just for custom type, the hint is needed.</field>
</message>

<message>
		<field name="adddate">1244108367</field>
		<field name="user_name">mariusz-pala</field>
		<field name="body">Patch:
add these lines at the end of method MappingProcessor.mapCollection(Object srcObj, Object srcCollectionValue, FieldMap fieldMap, Object destObj);

// List to Map value
else if (CollectionUtils.isCollection(srcFieldType) &#38;&#38; MappingUtils.isSupportedMap(destCollectionType)) {
	result = mapListToList(srcObj, (List&#60;?&#62;) srcCollectionValue, fieldMap, destObj);
}

Unfortunately it works only for primitive types...</field>
</message>

<message>
		<field name="adddate">1244104676</field>
		<field name="user_name">mariusz-pala</field>
		<field name="body">I have also problem with mapping such a map. Map keys are OK, but all values are null.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1244494846</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244494846</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244494846</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1244494846</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244494846</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244494846</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">320648: Mapa.java</field>
		<field name="entrydate">1238586057</field>
		<field name="mod_by">grzegorzoledzki</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1692603</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove is-accessible from global config in DTD</field>
	<field name="open_date">1175469779</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">It has never been supported.  I will keep it at the field level</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175471232</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

is-accessible was removed from the configuration and mapping elements</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175649759</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175471232</field>
		<field name="entrydate">1175649759</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175471232</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175471232</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1944959</field>
	<field user_id="539237" name="submitted_by">insitedata</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">ClassNotFoundException w/ arrays due to Classloader approach</field>
	<field name="open_date">1208443353</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">
Dozer appears to be loading arrays via a non-recommended approach in the ClassLoader.

The ClassLoader.loadClass() method sometimes has problems loading array objects defined in the mapping file. The problem occurs when the class hasn&#226;&#8364;&#8482;t been loaded into the JVM prior to instantiation of the mapper. Per the forum entry below, dozer is using ClassLoader.loadClass(). Evidently, this is not the recommended approach by Sun with arrays (although it worked before due to a JDK bug). The dozer approach will work if the array has already been loaded. I found that it did fail with 1.4.2._15 when it doesn&#226;&#8364;&#8482;t. The workaround is to reference the class array before instanitating the mapper (sample is below). With the class loaded, Dozer works ok. I also failed with JDK 1.5.0_11.

Dozer workaround code for arrays:

// the next line is a Dozer workaround to load the array into the JVM
Class.forName(com.sample.test.SimpleObj[].class.getName());
// now instantiate the mapper
MapperIF mapper = new DozerBeanMapper(configFiles);

My mapping file:

      &#60;converter type=&#34;netx.sf.dozer.util.mapping.converters.StringAppendCustomConverter&#34;&#62;
        &#60;class-a&#62;[Lcom.sample.test.SimpleObj;&#60;/class-a&#62;
        &#60;class-b&#62;java.lang.String&#60;/class-b&#62;
      &#60;/converter&#62;


Per http://sourceforge.net/forum/message.php?msg_id=4134768:

&#60;&#60;Since the src object is an array, the mapping xml entry I added for the custom converter to get it to work looks strange. Dozer generically uses ClassLoader.loadClass() when parsing the mapping files. For arrays, java expects the class name in the following format.... &#62;&#62;

Sun discussion of the issue: http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6446627

&#60;&#60;[When you want to reflectively load a class by name initiated using a specific class loader, you should not invoke that loader's public loadClass method directly-- instead, you should always use the static three-argument Class.forName method.  The ClassLoader.loadClass instance method is more intended for delegation from one class loader to another within a class loading operation (although this is a common confusion and not well described in the documentation).  In other words, replace L.loadClass(N) with Class.forName(N,false,L).  The Class.forName invocation may eventually end up invoking loadClass on the specified loader, but only after taking care of some other aspects of the VM's standard symbolic class name resolution process-- the significant bit in this case being the support for loading/creation of array classes.]

The fact that the ClassLoader.loadClass usage sometimes worked with array class names in previous versions was considered a bug (unintentional behavior) that got fixed in Mustang-- and it did not previously actually &#34;work&#34; fully reliably anyway, which is part of the reason that this &#34;bug&#34; was fixed.  There is some related discussion in the text of CR 4976356, and for some further discussion related to serialization usage, see this JINI-USERS post:

	http://archives.java.sun.com/cgi-bin/wa?A2=ind0604&#38;L=jini-users&#38;P=1084
&#62;&#62;

Codehaus entry that led me to initially try the Class.forName() workaround:

http://jira.codehaus.org/browse/XSTR-185
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1225827488</field>
		<field name="user_name">buzdin</field>
		<field name="body">Could not reproduce the bug on my machine, but changed our implementation to use Class.forName(). It is less sophisticated and more portable way of doing the same thing. Tests are working fine with this change, so I am not worried.

Thank you for the report.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1225827402</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1225827402</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">2243056</field>
		<field name="entrydate">1225827402</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1225827402</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224345688</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224345688</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1225782</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Rejected</field>
	<field name="summary">Dozer does not copy values</field>
	<field name="open_date">1119470652</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When using Dozer values not copied from bean to bean.
Copies from Bean A to Bean B but not from B to A for 
different named properties called out in mapping file

Dozer 1.3.3 BEA JDK 1.4.2_04 </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1119499720</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

We are currently unable to reproduce this issue.  This is core 
functionality that is successfully tested by several unit tests.  
We will continue to investigate this particular use case before 
changing the status.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1119551665</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1119551665</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1119483695</field>
		<field name="mod_by">bgsesr</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1727717</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">mvn eclipse:eclipse does not get all dependencies</field>
	<field name="open_date">1180453590</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I did a mvn eclipse:eclipse on the 3.4 codebase, but still missing 2 dependencies, net.sf.dozer.util.mapping.vo.GetWeatherByZipCodeDocument and net.pmonks.xml.dozer.test.ChildType in the src/test/java tree 
 
I couldn't find a script in the directories to create these in my maven repo. 
Is there anything I'm missing? 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1184466006</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1180541190</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

Fixed on 3.x Branch.

      &#60;plugin&#62;
        &#60;groupId&#62;org.codehaus.mojo&#60;/groupId&#62;
        &#60;artifactId&#62;build-helper-maven-plugin&#60;/artifactId&#62;
        &#60;version&#62;1.0&#60;/version&#62;
        &#60;executions&#62;
          &#60;execution&#62;
            &#60;id&#62;add generated test sources&#60;/id&#62;
            &#60;phase&#62;generate-sources&#60;/phase&#62;
            &#60;goals&#62;
              &#60;goal&#62;add-test-source&#60;/goal&#62;
            &#60;/goals&#62;
            &#60;configuration&#62;
              &#60;sources&#62;
                &#60;source&#62;target/xmlbeans-source&#60;/source&#62;
              &#60;/sources&#62;
            &#60;/configuration&#62;
          &#60;/execution&#62;
        &#60;/executions&#62;
      &#60;/plugin&#62;</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184466006</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1180541190</field>
		<field name="entrydate">1184466006</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1180541190</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1180541190</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1214291</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">NullPointerException when no fields</field>
	<field name="open_date">1117807967</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">With this mapping:

&#60;mappings &#62; 
  &#60;mapping wildcard=&#34;true&#34;&#62;
    &#60;classA&#62;dozer.Persona&#60;/classA&#62;
    &#60;classB&#62;dozer.PersonaDTO&#60;/classB&#62;
  &#60;/mapping&#62; 
&#60;/mappings&#62;

I got this error:

Caused by: java.lang.RuntimeException: 
net.sf.dozer.util.mapping.MappingException: 
java.lang.NullPointerException
	at 
net.sf.dozer.util.mapping.Mapper.readMappingsFromFile
(Mapper.java:89)
	at net.sf.dozer.util.mapping.Mapper.&#60;clinit&#62;
(Mapper.java:114)
	... 1 more
Caused by: 
net.sf.dozer.util.mapping.MappingException: 
java.lang.NullPointerException
	at 
net.sf.dozer.util.mapping.util.MappingFileReader.read
(MappingFileReader.java:164)
	at 
net.sf.dozer.util.mapping.Mapper.readMappingsFromFile
(Mapper.java:84)
	... 2 more
Caused by: java.lang.NullPointerException
	at 
net.sf.dozer.util.mapping.util.MappingFileReader.read
(MappingFileReader.java:108)
	... 3 more

I think you should initialize ClassMap.fieldMaps with an 
empty List.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1117815458</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is kind of a bug... :) If you do not have any field
mappings you do not even need to map the classes. Dozer will
implicitly map the two classes for you without even having
them in the mapping file. I did fix the code so that if
there are no field mappings you will not get a NPE</field>
</message>

<message>
		<field name="adddate">1117808162</field>
		<field name="user_name">nobody</field>
		<field name="body">Logged In: NO 

Sorry, here is the correct exception:

java.lang.ExceptionInInitializerError
	at dozer.TestDozer.main(TestDozer.java:38)
Caused by: java.lang.RuntimeException: 
net.sf.dozer.util.mapping.MappingException: 
java.lang.NullPointerException
	at 
net.sf.dozer.util.mapping.Mapper.readMappingsFromFile
(Mapper.java:89)
	at net.sf.dozer.util.mapping.Mapper.&#60;clinit&#62;
(Mapper.java:114)
	... 1 more
Caused by: net.sf.dozer.util.mapping.MappingException: 
java.lang.NullPointerException
	at 
net.sf.dozer.util.mapping.util.MappingFileReader.read
(MappingFileReader.java:151)
	at 
net.sf.dozer.util.mapping.Mapper.readMappingsFromFile
(Mapper.java:84)
	... 2 more
Caused by: java.lang.NullPointerException
	at 
net.sf.dozer.util.mapping.util.MappingFileReader.read
(MappingFileReader.java:102)</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1117815459</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1117815458</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1117815458</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1117815458</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1386663</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Better error message for null top level src object</field>
	<field name="open_date">1135128272</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Received the following error message when the top 
level source object that is passed to the mapper.map() 
method is NULL.  The message was a little confusing 
and something along the lines of source object was 
null may be better. 


com.level3.sldb.common.SLDBException: Failed to map 
LNPGateway objets to (3)Flow 
objects.net.sf.dozer.util.mapping.MappingException: 
source object must be specified
	at 
net.sf.dozer.util.mapping.MappingProcessor.validateMapp
ingRequest(MappingProcessor.java:938)
	at 
net.sf.dozer.util.mapping.MappingProcessor.map
(MappingProcessor.java:77)
	at net.sf.dozer.util.mapping.Mapper.map
(Mapper.java:52)
	at 
com.level3.sldb.service.manager.lnpgateway.LnpGatewayMa
nager.callLNPOrderRequest(LnpGatewayManager.java:146)
	at 
com.level3.sldb.service.manager.lnpgateway.LnpGatewayMa
nagerTest.testCallLNPOrderRequest
(LnpGatewayManagerTest.java:84)
	at sun.reflect.NativeMethodAccessorImpl.invoke0
(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
	at 
sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke
(Method.java:324)
	at junit.framework.TestCase.runTest
(TestCase.java:154)
	at com.level3.voicecommon.test.TestBase.runBare
(TestBase.java:27)
	at junit.framework.TestResult$1.protect
(TestResult.java:106)
	at junit.framework.TestResult.runProtected
(TestResult.java:124)
	at junit.framework.TestResult.run
(TestResult.java:109)
	at junit.framework.TestCase.run
(TestCase.java:118)
	at junit.framework.TestSuite.runTest
(TestSuite.java:208)
	at junit.framework.TestSuite.run
(TestSuite.java:203)
	at junit.textui.TestRunner.doRun
(TestRunner.java:116)
	at 
com.intellij.rt.execution.junit2.IdeaJUnitAgent.doRun
(IdeaJUnitAgent.java:57)
	at junit.textui.TestRunner.start
(TestRunner.java:172)
	at 
com.intellij.rt.execution.junit.TextTestRunner2.startRu
nnerWithArgs(TextTestRunner2.java:23)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1137468024</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 14 days (the time period specified by
the administrator of this Tracker).</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1137468024</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1135921709</field>
		<field name="entrydate">1137468024</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1135921709</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1135921709</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1256049</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">field-deep error indicates it may not be supported by 1.4</field>
	<field name="open_date">1123694303</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Interface (example)</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I get the following error while using dozer

10 Aug 2005 10:31:11,843 ERROR Mapper          []: 
Error in loading dozer mapping 
file: /dozerBeanMapping.xml : 
org.xml.sax.SAXException: Parsing Error
Line:    114
URI:     null
Message: cvc-complex-type.2.4.a: Invalid content was 
found starting with element 'field-deep'. One 
of '{&#34;&#34;:field, &#34;&#34;:field-dehydrate, &#34;&#34;:field-method, &#34;&#34;:field-
iterate-method}' is expected.


My dozer xml file where the only place I use field-deep 
is:

&#60;field-deep&#62;
      &#60;A&#62;hierarchyLevel&#60;/A&#62;
      &#60;B&#62;itemType.tradeItemUnitDescriptor&#60;/B&#62;  
    &#60;/field-deep&#62;

Why would I get this message? Is not field-deep 
supported in 1.4?

Thanks
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1124142511</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

dozer 1.4.3 fixes this problem. We no longer use XSD because
of its limitations. I have moved dozer to DTD validation.</field>
</message>

<message>
		<field name="adddate">1123920049</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I tracked it down to the xsd &#60;sequence&#62; tag:

Sequence Indicator:

The &#60;sequence&#62; indicator specifies that the child elements
must appear in a specific order:

Unfortunately, our &#60;field-xx&#62; tags are not in a certain
order. There is an XSD &#60;any&#62; tag but you can only have 0 -1
objects.

I will try to find a work-around in the xsd. If I can't we
will have to turn off xsd validation since we can not
enforce the order of &#60;field&#62; tags in the mappings.</field>
</message>

<message>
		<field name="adddate">1123918426</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

There is a bug with the XSD. It appears there is no ryhme
nor reason to when this appears. It has to do with the
ordering of the elements in your xml file. I am trying to
track this down...</field>
</message>

<message>
		<field name="adddate">1123712516</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

field-deep is supported in 1.4 We have a suite of unit tests
built around that functionality. Someone else was having
this exact error and I could not reproduce it. Just curious
what JDK you are using?</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1124142511</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1124142511</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1123918426</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1123861982</field>
		<field name="entrydate">1123918426</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1123861982</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1123861981</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1123712390</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1260415</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer uses 1.7.0 Bean Utils which has interesting bug </field>
	<field name="open_date">1124148606</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When Using Dozer I was getting NPE when reading 
Mapping File (MappingFileReader.read()).

Using Maven was able to narrow problem down to when 
an class has an array of another class in it the 
BeanUtils 1.7.0 gives incorrect name of class. Simple 
Example below.

In Main:

PropertyDescriptor[] descriptors = 
PropertyUtils.getPropertyDescriptors(foo.class);
		
		for(int i = 0; i&#60;descriptors.length; 
i++) {
			Class latestClass = 
descriptors[i].getPropertyType();
			System.out.println
(&#34;latestClass.getName():&#34; + latestClass.getName());
		}

there is an array of class foobar in foo. The output from 
main is:

latestClass.getName():java.lang.Class
latestClass.getName():[Lfoobar;

When dozer does this it throws (Since it is recursively 
getting class info) an NPE when trying to use a 
descriptor object for class [Lfoobar since it can not be 
found.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1124738737</field>
		<field name="user_name">nobody</field>
		<field name="body">Logged In: NO 

Thanks for looking into it. From other groups looking into 
reflection the issue is environment related. In other words 
reflection may be working properly for some OS's but not 
others.

Thanks,
-Tony</field>
</message>

<message>
		<field name="adddate">1124405584</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Thanks for sending me your files.  I was able to reproduce 
your issue.  Dozer does not support deep field mappings 
where you are trying to map a String field into another field 
contained within an array of custom data objects and vice 
versa.  I cant think of a good way of doing this that would 
work generically for everyones different use cases.
I am going to try to change the code so that it doesn't throw a 
NPE and provide a better error msg that indicates the 
functionality is unsupported.  Thanks </field>
</message>

<message>
		<field name="adddate">1124254835</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Thanks for submitting this bug.  I am having a hard time 
reproducing this issue, but it is probably due to me not 
understanding the issue.  Could you send me your dozer 
mapping file along with the particular data objects that you 
are trying to map when receiving this error?  My email is 
mhtierney@comcast.net.  Or if you prefer, you can just 
attach these files to this thread.  Once I get these, I should 
be able to reproduce your issue and will investigate what the 
fix options are.  Thanks in advance.</field>
</message>

<message>
		<field name="adddate">1124251758</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Thank you for tracking this down. We will investigate and
get a fix out ASAP.

Franz</field>
</message>

<message>
		<field name="adddate">1124232409</field>
		<field name="user_name">nobody</field>
		<field name="body">Logged In: NO 

Traced down issue from BeanUtils to BeanInfo or Introspector 
provided by jvm vendor. Sun &#38; BEA jvms and Spring Bean 
Utils have this issue. I logged the issue with Sun and Apache 
Commons groups. I do not exepect a solution anytime soon 
from either group. I am not sure if there is an alternative 
solution to this issue.</field>
</message>

<message>
		<field name="adddate">1124214928</field>
		<field name="user_name">nobody</field>
		<field name="body">Logged In: NO 

A work around may not be possible since Dozer uses 
PropertyDescriptor.getPropertyType() and the class returned 
is incorrect (has [L in front of the name).

This is done at lease in:

MappingUtils.getDeepFieldHierarchy().

latestClass = propDescriptor.getPropertyType();

Please advise on fix.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1124405584</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1124405584</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1124251758</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">145781: BeanUtilArrayTest.java</field>
		<field name="entrydate">1124148607</field>
		<field name="mod_by">nobody</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1441190</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">wildcard false and attribute with second letter upper case</field>
	<field name="open_date">1141238602</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Each time I have an attribute with the first letter in
lower case, and the second one in upper case, I have
this error : 
 
net.sf.dozer.util.mapping.MappingException: Unable to
determine read method for field: aNom class: class
otd.FermierOTD 
at
net.sf.dozer.util.mapping.util.MappingUtils.getReadMethod(MappingUtils.java:418)

at
net.sf.dozer.util.mapping.fieldmap.FieldMap.getDestFieldReadMethod(FieldMap.java:90)

at
net.sf.dozer.util.mapping.util.MappingUtils.parseMappings(MappingUtils.java:213)

at
net.sf.dozer.util.mapping.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:130)

at
net.sf.dozer.util.mapping.DozerBeanMapper.getCustomMappings(DozerBeanMapper.java:96)

at
net.sf.dozer.util.mapping.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:90)

at
net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:70)

at Test.test4(Test.java:40) 
at Test.main(Test.java:21) 
Exception in thread &#34;main&#34;  
 
And it appears only when wildcard is set to false ...
any idea ? </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1141249574</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This doesn't seem to be a bug in dozer. If I have an
attribute 'aName' The property descriptor name is 'AName'.

So in my mapping I define:

    &#60;field&#62;
      &#60;a&#62;AName&#60;/a&#62;
      &#60;b&#62;AName&#60;/b&#62;
    &#60;/field&#62;

The wildcard value is meaningless. It fails whether it is
'true' or false if you have 

    &#60;field&#62;
      &#60;a&#62;aName&#60;/a&#62;
      &#60;b&#62;aName&#60;/b&#62;
    &#60;/field&#62;

franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1141249575</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1141249574</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1263159</field>
	<field user_id="1330585" name="submitted_by">m_wells</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Classloader not loading classes in WebApp deployed in EAR</field>
	<field name="open_date">1124380047</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">WinXP
Weblogic Server 8.1

THE PROBLEM 
-----------------------
Classes inside a WAR deployed in my EAR are failing 
to load when the Dozer Mapper.map() method is called. 

I have tried every permutation of classpath locations for  
placing Dozer jar and config files (i.e. inside the WAR + 
EAR) but without success.

WORKAROUND
------------------------
Extract the classes that need to be mapped by Dozer 
from the WAR into a seperate JAR file and place this jar 
file in the APP-INF/lib folder inside the EAR.

OTHER INFO THAT MAY BE HELPFUL
----------------------------------------------------------

I am able to load these classes using Class.forname() 
in the same class that is calling Mapper.map() so it 
appears that the issue is in Dozer.

Further investigation revealed that 
MappingFileReader.read() throws a MarshalException 
when attempting to unmarshal these particular objects.

The classes classes exist in the 
package &#34;com\nr\dm\sm\pres\ui\ws\model\wlgenerated\s
ession\&#34; which is located inside a WAR deployed in the 
EAR.

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1124729761</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I am closing this bug. I think the classloading issues have
been resolved for now.</field>
</message>

<message>
		<field name="adddate">1124473079</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Here are the scenarios that I have tested:

Scenario1 : Does not work - Dozer classloader can not see
classes in webapp.

EAR
  -- APP/INF-LIB
       dozer-full.jar
  -- APP/INF-CLASSES

  WAR 1
    --WEB-INF/LIB
      mymappedclasses.jar
    -- WEB-INF/CLASSES
      dozerMappingFile.xml

 WAR 2
    --WEB-INF/LIB
      mymappedclasses2.jar
    -- WEB-INF/CLASSES
      dozerMappingFile2.xml

Scenario2 : Does work - Fixed Castor classloader..

EAR
  -- APP/INF-LIB
  -- APP/INF-CLASSES

  WAR 1
    --WEB-INF/LIB
      mymappedclasses.jar
      dozer-full.jar

    -- WEB-INF/CLASSES
      dozerMappingFile.xml

 WAR 2
    --WEB-INF/LIB
      mymappedclasses2.jar
      dozer-full.jar

    -- WEB-INF/CLASSES
      dozerMappingFile2.xml

Scenario3 : Always Worked - 

EAR
  -- APP/INF-LIB
      dozer-full.jar
      mymappedclasses.jar
      mymappedclasses2.jar
  -- APP/INF-CLASSES
     oneDozerMappingFileForEverything.xml

  WAR 1
    --WEB-INF/LIB
    -- WEB-INF/CLASSES

 WAR 2
    --WEB-INF/LIB
    -- WEB-INF/CLASSES

Is this adequate? I will check these changes in today...</field>
</message>

<message>
		<field name="adddate">1124468415</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I have successfully reproduced this. Fix will be in today.</field>
</message>

<message>
		<field name="adddate">1124465895</field>
		<field name="user_name">m_wells</field>
		<field name="body">Logged In: YES 
user_id=1330585

Hi Franz, I'm afraid this fix does not work for me, the original 
problem persists :-( 

Test 1) 
dozer jar in the APP-INF/lib, the classes to be mapped in the 
WebApp are not loaded.

Test 2)
dozer jar in the WEB-INF/lib, the classes to be mapped in 
the WebApp are not loaded.


NOTES
=====
The classloader associated with the current thread contains 
the CORRECT classes.  However, it seems the unmarshaller 
is using the parent classloader of the current thread which 
does not contain the required classes (see code snippet 
below).

Thread.currentThread().getContextClassLoader().getParent()
==unmarshaller.getClass().getClassLoader() 
{TRUE}


CLASS LOADER DEBUG INFO
=======================

Thread.currentThread().getContextClassLoader()
----------------------------------------------
weblogic.utils.classloaders.ChangeAwareClassLoader@8509
7d finder: 
weblogic.utils.classloaders.MultiClassFinder@1f42679 
annotation: DebtManagementEAR@smwebservice

unmarshaller.getClass().getClassLoader()
----------------------------------------
weblogic.utils.classloaders.GenericClassLoader@9133f6 
finder: 
weblogic.utils.classloaders.MultiClassFinder@154b574 
annotation: DebtManagementEAR@

castorMapping.getClass().getClassLoader()
-----------------------------------------
weblogic.utils.classloaders.GenericClassLoader@f49ac3 
finder: weblogic.utils.classloaders.MultiClassFinder@ea9cf1 
annotation: DebtManagementEAR@
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1124729762</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1124729761</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1124395071</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">146132: StackTrace.txt</field>
		<field name="entrydate">1124380048</field>
		<field name="mod_by">m_wells</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1572949</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Runtime Proxy/Hibernate LazyInit Issues</field>
	<field name="open_date">1160261036</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Fix occasional problems with certain proxy classes 
and Hibernate Lazy init DTO's.  </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1164438634</field>
		<field name="user_name">nhsoft_yhw</field>
		<field name="body">Logged In: YES 
user_id=1653562
Originator: NO

i found the bug not fixed.

i using version 2.4, setting hibernate set collection &#60;&#60; lazy=&#34;true&#34; &#62;&#62;, when using dozer copy the properties from Model&#239;&#188;&#710;hibernate's&#239;&#188;&#8240; to DTO, the hibernate did not load proxy object,but when change to using spring Beanutils util class copy model's properties to DTO it work well, the hibernate will load lazy proxy object from DB.

when dozer copy proxy object, the hibernate will load object from DB, 
</field>
</message>

<message>
		<field name="adddate">1160261302</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

This has been a tough issue to fix across the board.  It 
is hard to reproduce and the different strange use cases 
seems to never end.

So, I removed reflection caching we were doing in the guts 
of Dozer.  My hope is that this will fix most, if not all, 
of the issues once and for all. 

After this has been verified by our testing organization
(Bruce inc.), we will be ready for the 2.4 release</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1161028884</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1160261302</field>
		<field name="entrydate">1161028884</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1160261302</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1160261302</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1276963</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping Inheritance</field>
	<field name="open_date">1125438077</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">This post has *more* than enough information :)

http://sourceforge.net/forum/forum.php?thread_id=1340715&#38;forum_id=452530
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1127755886</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1126728326</field>
		<field name="entrydate">1127755886</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1126728326</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1126728326</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1232046</field>
		<field name="entrydate">1126728293</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1384887</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Default ClassMap not getting CustomConverters</field>
	<field name="open_date">1134967953</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When a defualt ClassMap was created the
GlobalConfiguration was not set() on it. The
GlobalConfiguration has a reference to CustomConverters
among other things.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1134968257</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This has been fixed and checked into CVS on v15branch. I
have also attached the file to this issue.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1137468370</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1137021281</field>
		<field name="entrydate">1137468370</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137021281</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137021281</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">160341: MappingProcessor.java</field>
		<field name="entrydate">1134968259</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1705525</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">When adding default field mappings, skip getter\'s w/params</field>
	<field name="open_date">1177301485</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">http://sourceforge.net/forum/forum.php?thread_id=1720423&#38;forum_id=452530</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1177385249</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

This has been implemented in the 3.3 code base</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177645495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">When adding default field mappings, skip getter's w/params</field>
		<field name="entrydate">1177645495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177385249</field>
		<field name="entrydate">1177645495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177385249</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1177385249</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177385249</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1264347</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">ListToArray and ArrayToArray bug when mapping by reference</field>
	<field name="open_date">1124482993</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">This has been fixed for ListToList. When you map by
reference: 

ObjPrime prime = Mapper.map(myObj, ObjPrime.class);

// do things to prime...

Mapper.map(primej, myobj);


We always instantiate a new array on the class being
mapped to, regardless if it has an array or not.

Easy fix...similar to the ListToList fix.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1126664422</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 14 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1125438125</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Fixed in 1.5.0 release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1126664422</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1125438125</field>
		<field name="entrydate">1126664422</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1125438125</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1125438125</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1124483019</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1413451</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Context Nested Mapping Does Not Work</field>
	<field name="open_date">1138079439</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">In this use case:

&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;!DOCTYPE mappings PUBLIC &#34;-//DOZER//DTD MAPPINGS//EN&#34;
   &#34;http://dozer.sourceforge.net/dtd/dozerbeanmapping.dtd&#34;&#62;
&#60;mappings&#62;

&#60;mapping map-id=&#34;caseA&#34;&#62;
   &#60;class-a&#62;com.FormA&#60;/class-a&#62;
   &#60;class-b&#62;com.FormB&#60;/class-b&#62;
   &#60;field-exclude&#62;
     &#60;a&#62;loanNo&#60;/a&#62;
     &#60;b&#62;loanNo&#60;/b&#62;
   &#60;/field-exclude&#62;
   &#60;field map-id=&#34;caseC&#34;&#62;
     &#60;a&#62;forms&#60;/a&#62;
     &#60;b&#62;forms&#60;/b&#62;
   &#60;/field&#62;
&#60;/mapping&#62;

&#60;mapping map-id=&#34;caseB&#34;&#62;
  &#60;class-a&#62;com.FormA&#60;/class-a&#62;
  &#60;class-b&#62;com.FormB&#60;/class-b&#62;
&#60;/mapping&#62;

&#60;mapping map-id=&#34;caseC&#34;&#62;
  &#60;class-a&#62;com.FormC&#60;/class-a&#62;
  &#60;class-b&#62;com.FormD&#60;/class-b&#62;
   &#60;field-exclude&#62;
     &#60;a&#62;loanNo&#60;/a&#62;
     &#60;b&#62;loanNo&#60;/b&#62;
   &#60;/field-exclude&#62;
&#60;/mapping&#62;

&#60;mapping map-id=&#34;caseD&#34;&#62;
  &#60;class-a&#62;com.FormC&#60;/class-a&#62;
  &#60;class-b&#62;com.FormD&#60;/class-b&#62;
&#60;/mapping&#62;
	
&#60;/mappings&#62;

Dozer get confused on :

   &#60;field map-id=&#34;caseC&#34;&#62;
     &#60;a&#62;forms&#60;/a&#62;
     &#60;b&#62;forms&#60;/b&#62;
   &#60;/field&#62;

and thinks the 'name' field in the forms is an ArrayList.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1138695594</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is fixed and in v20 branch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1138923387</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1138923387</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1292080</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Blank string conversion</field>
	<field name="open_date">1126797087</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I was using it to convert my action forms to the dto. 
In this I am having a date field say registeredDate
which has to be converted into date using a given format. 
Now whenever the registeredDate is blank(&#34;&#34;)... the
dozer tries to convert it and throws parseexception error. 
 
For action forms those fields which are not fileed are
blank string by default not NULL. So how to approach this
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1126852016</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I fixed the bug by adding this to the DateConverter.java
class. I added if(sourceObj.equals(&#34;&#34;) return null.

    //String to Date
    } else if (dateFormat != null &#38;&#38;
String.class.isAssignableFrom(sourceObj.getClass())) {
        try {
          if(sourceObj.equals(&#34;&#34;)){
            return null;
          }
          time = dateFormat.parse( (String)
sourceObj).getTime();
        } catch (ParseException e) {
          throw new ConversionException(&#34;Unable to parse
source object using specified date format&#34;, e);
        }

This will be in the 1.5.3 release...or you can patch if you
like.

Thanks.

Franz</field>
</message>

<message>
		<field name="adddate">1126798698</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I could not reproduce this error. 

Here is my mapping:

    &#60;field&#62;
      &#60;A dateFormat=&#34;MM/dd/yyyy HH:mm:ss:SS&#34;&#62;blankDate&#60;/A&#62;
      &#60;B&#62;blankDate&#60;/B&#62;
    &#60;/field&#62;

Here is the test:

    TestObject testObject = new TestObject();
    testObject.setBlankDate(&#34;&#34;);
    TestObjectPrime prime = (TestObjectPrime)
Mapper.map(testObject, TestObjectPrime.class);

The prime object has a blankDate which is NULL.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1126852187</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1126852187</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1126852016</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1126798698</field>
		<field name="entrydate">1126852016</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1126798698</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1126798698</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1404944</field>
	<field user_id="321397" name="submitted_by">ebolwidt</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">exclude-field doesn't work on an indexed property</field>
	<field name="open_date">1137169661</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">If you have an indexed property in your class, and a
getter for one element of it, but not a getter for the
whole array/collection, it is not possible to exclude
it with &#60;exclude-field&#62;.

Instead, it fails with this error:

net.sf.dozer.util.mapping.MappingException: Unable to
determine read method for field: emailAdres class:
class nl.wehkamp.trc.services.klant.KlantVO

The case is: the source class contains the methods

getEmailAdres(int i)
getEmailAdressen()

(It's dutch, hence the weird spelling, but
emailAdressen is the plural of emailAdres)
This source class is wrong in JavaBeans terms, the
first getter should have been named

getEmailAdressen(int i)

But it's a legacy class and I can't change it. So I
want to exclude the field emailAdres, but that gives
the above exception.

It seems that even if I ignore a field, it still
requires a (non-indexed) read method for it.


</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1137194997</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This should be the actual code:

    // Iterate through destination object and get
destination field values
    for (int i = 0; i &#60; fieldMaps.size(); i++) {
      FieldMap fieldMapping = (FieldMap) fieldMaps.get(i);
      Object sourceFieldValue = null;
      try {
        // these maps are special cases which do not fall
under what we are looking for
        if ((!isGenericFieldMap(fieldMapping) &#38;&#38;
!(fieldMapping instanceof MapFieldMap))) {
          // then do no validation 
        } else if (fieldMapping instanceof ExcludeFieldMap) {
          // then do no validation           
        } else {
          sourceFieldValue =
fieldMapping.getSrcFieldValue(sourceObj);
          // check for super class names
</field>
</message>

<message>
		<field name="adddate">1137192512</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is fixed in the v20 branch which will be released in a
couple days. To fix in v15 branch modify
MappingProccessor.java around line 234 - 245 with this code.
I would normally patch from v15 to v20 but we are so close
to the release.

    // Iterate through destination object and get
destination field values
    for (int i = 0; i &#60; fieldMaps.size(); i++) {
      FieldMap fieldMapping = (FieldMap) fieldMaps.get(i);
      Object sourceFieldValue = null;
      try {
        // these maps are special cases which do not fall
under what we are looking for
        if ((!isGenericFieldMap(fieldMapping) ||
!(fieldMapping instanceof ExcludeFieldMap))
            &#38;&#38; !(fieldMapping instanceof MapFieldMap)) {
          // then do no validation
        } else {
          sourceFieldValue =
fieldMapping.getSrcFieldValue(sourceObj);
          // check for super class names
</field>
</message>

<message>
		<field name="adddate">1137170207</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I will verify and fix this for the 2.0 release this week.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137468370</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137468370</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1137194997</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1137192512</field>
		<field name="entrydate">1137194997</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137192512</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137192512</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1137170207</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1391777</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">OO domain objs to flat VO obj w/ interface</field>
	<field name="open_date">1135755108</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I'm trying to map an OO structure in my domain to a
flat VO structure 
used by
the client. One issue I am having is the use of
Interfaces in my domain 
model.
For instance I have this mapping structure:

Field
    A: do.objInterface.stringAttribute
Field
    B: vo.stringAttribute

Since I'm mapping an attribute of an interface in my
source class, I 
don't see
a way to provide a hint as to what concrete class the
objInterface will 
be at
runtime.  I'd have no problem if I were mapping it this
way:

Field
    A: do.objInterface
Field
    B: vo.obj

because then I could put a hint on Field A. But since
I'm mapping a 
specific
attribute in the interface, rather then the entire
class, I see no way 
to provide
the hint.  Hopefully there is something that I'm
missing logically.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1135755175</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This has been fixed in 1.5.8.1 and checked into CVS. I have
attached the patched file.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1137468370</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1137021281</field>
		<field name="entrydate">1137468370</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137021281</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137021281</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">161267: FieldMap.java</field>
		<field name="entrydate">1135755175</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1560403</field>
	<field user_id="1600370" name="submitted_by">michaelstr</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">ClassCastExceptions w/Hibernate POJOs</field>
	<field name="open_date">1158537855</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We've been getting our butts kicked over some
intermittent problems with our use of dozer to marshall
Hibernate POJOs into Biz Layer Data Value Objects and
back again.

The problem seems to be with some (not all) of the
&#34;Spring AOP instrumented&#34;, lazily loading members. 
It's as though the Spring proxy object is snagged
rather than it firing off to go get the real, lazily
loaded object.  Consequently, the proxy object is not
of the expected type and dozer throws a rod.

We would not expect you to concern yourself with
dozer-Spring-Hibernate interplay issues were it not for
the fact that it would seem many users and would-be
users of dozer would be wanting to do the same thing
with dozer.  So, you might be at least indirectly
iterested.  

Regrettably, we've slipped a release and are scrambling
to work around this problem.  So, I apologize for not
giving you more helpful information; however, I'd be
glad to supply you with more if you want to pursue
this.  Tell me what additional deteails you want from
us, and I will try to supply them.

Regards,

Mike S.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1174677391</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

We are doing a release soon...anymore information?</field>
</message>

<message>
		<field name="adddate">1174674688</field>
		<field name="user_name">pmonks</field>
		<field name="body">Logged In: YES 
user_id=7747
Originator: NO

I should also mention that we're on the latest and greatest version (Dozer 3.0).</field>
</message>

<message>
		<field name="adddate">1174674620</field>
		<field name="user_name">pmonks</field>
		<field name="body">Logged In: YES 
user_id=7747
Originator: NO

FWIW we're seeing intermittent ClassCastExceptions here with Hibernate POJOs too, although I haven't isolated a clean unit test yet either.</field>
</message>

<message>
		<field name="adddate">1159328396</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I have corresponded with Mike via email on this one.  This 
may or may not be able to be fixed within dozer.  I am 
going to close the bug until we are able to get a 
repeatable unit test.  We can easily reopen this bug if 
need be.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1159328396</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1159328396</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1159328396</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1372000</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Deep property mapping and Inheritance</field>
	<field name="open_date">1133559661</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Since 1.5.6 I have gotten rid of &#60;field-deep&#62; tag. In
the code you now miss the if and fall into the else
statement if you have deep properties. Basically it
becomes a problem with inheritance since we think you
already mapped the field. I have added the field name
(i.e. field.deepProperty) to the key so we are unique.

        // these maps are special cases which do not
fall under what we are looking for
        if (!isGenericFieldMap(fieldMapping) &#38;&#38;
!(fieldMapping instanceof ExcludeFieldMap)
            &#38;&#38; !(fieldMapping instanceof MapFieldMap)) {
          // then do no validation
        } else {

          // move this to method - corresponds to exact
same code in checkForSupertypeMapping()
          String key = parentSourceField +
System.identityHashCode(sourceObj) + sourceClass.getName()
              + sourceMethodName + methodName +
fieldMapping.getSourceField().getName()
              + fieldMapping.getDestField().getName();
          if (parentClassMap != null) {
            if (superListOfFieldNames.contains(key)) {
              continue;
            } else {
              superListOfFieldNames.add(key);
            }
          }

Fixed for 1.5.8+ release and in CVS at v15 branch. I
have attached the patched file.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1134108322</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133559755</field>
		<field name="entrydate">1134108322</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133559755</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133559755</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">158433: MappingProcessor.java</field>
		<field name="entrydate">1133559662</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1352438</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Configuration Overrides Not Working</field>
	<field name="open_date">1131560152</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">&#60;configuration&#62;
     &#60;stopOnErrors&#62;true&#60;/stopOnErrors&#62;
     &#60;wildcard&#62;true&#60;/wildcard&#62; &#60;!-- default wildcard
policy that will apply to all class maps unless the
class mapping explicitly overrides it --&#62;
&#60;/configuration&#62;

These overrides were not working. It was due to the DTD
having default values. We always thought that the
values were being overriden. 

This has been fixed for 1.5.7.
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1132111196</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1131560950</field>
		<field name="entrydate">1132111196</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1131560950</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1131560949</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1324277</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">incorrect set mapping for existing destination set</field>
	<field name="open_date">1129071443</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">  private Set mapSetToSet(...) {
    ...
    Object field = doesFieldExist(fieldMap, destObj);
    Set result = null;
    if (field == null) {
      ...
    } else {
      result = new LinkedHashSet((Collection)
sourceCollectionValue);

-----------------------------------------------
This creates the destination set from the source
without mapping which causes errors when the classes
being mapped aren't comparable (I'm using a custom
converter).

Wouldn't it be better for result to just be the
destination set?  ie.

  result = (Set) field;
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1129175693</field>
		<field name="user_name">nobody</field>
		<field name="body">Logged In: NO 

Sorry, this is closed source code.

Rohan</field>
</message>

<message>
		<field name="adddate">1129147544</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Can you send me your test case so I can add this to our unit
tests?

Thanks.

Franz

fgarsombke@yahoo.com</field>
</message>

<message>
		<field name="adddate">1129147481</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is fixed for 1.5.5. 

Thanks for the bug!</field>
</message>

<message>
		<field name="adddate">1129073365</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Let me look into this one.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1129244160</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1129147545</field>
		<field name="entrydate">1129244160</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1129147545</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1129147544</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1129073365</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1305239</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Hydrate and Non-cumulative Problem</field>
	<field name="open_date">1127770394</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">But there's still a problem...it's not a simple one and
it took me a 
long time
to understand the failure.

The problem :
    when you parse the mapping file, every mapping is
cloned and 
reversed (in
order to make the mapping bidirectional), but when you
clone a 
genericfieldmap
the RELATIONSHIPTYPE property is not cloned, therefore
update of a list 
is not
working from classB to classA.

The solution would be :
   - MappingFileReader (line 163), add the code :
&#34;((GenericFieldMap)fm).setRelationshipType(((GenericFieldMap)field).getRelations
hipType());&#34;
   - or to overload the method &#34;clone()&#34; in the class
GenericFieldMap 

c what I mean ? </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1127770417</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

fixed for 1.5.5 release</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1129244160</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1129070995</field>
		<field name="entrydate">1129244160</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1129070995</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1129070995</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1364373</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Iterator to Array/List Problem</field>
	<field name="open_date">1132722775</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Dozer supports the ability to have a method:

  public Iterator getPersonnes() {
    return myListe.iterator();
  }


This was working if we were mapping and destination
type was using type=&#34;iterate&#34;. It was not working if
the destination type did not have an iterate method.

This is fixed and the two patches are attached</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1133362382</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133021690</field>
		<field name="entrydate">1133362382</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133021690</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133021690</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">157272: MappingUtils.zip</field>
		<field name="entrydate">1132722910</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1324220</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Use of Default ClassMap with date formatting</field>
	<field name="open_date">1129064472</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I am facing this problem. I have following two classes
public class DataForm {
	private String currentDate;
	private String amount;
	private String name;
}

public class DataParam {
	private Date currentDate;
	private Long amount;
	private String name;
}

And my mapping file has 
&#60;mappings&#62;
	&#60;configuration&#62;
		&#60;dateFormat&#62;dd/MM/yyyy&#60;/dateFormat&#62;
	&#60;/configuration&#62;
&#60;/mappings&#62;

Now when I try to convert the date it throws an
exception that time not 
specified
in millis. Now when I put a dummy mapping (which I
think should not be 
required
unless you have collection ... or beans are different)

	&#60;mapping&#62;
&#60;classA&#62;com.tavant.homer.dto.DataForm&#60;/classA&#62;
&#60;classB&#62;com.tavant.homer.dto.DataParam&#60;/classB&#62;
	&#60;/mapping&#62;

Then it works!! 
When I debug the code I found that when the Dozer is
not able to find a 
mapping
for the given conversion it generates a default
classmap ... but in 
doing so
it ignores the configuration level mapping of
Convertors and dateformat 
(actually
the ConvertorContainer is null and specified dateformat
is not 
registered for
conversion)

I think it should at least you the configuration level
formats when 
generating
default class map</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1129137603</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This has been fixed for 1.5.5.

If there are multiple config files each with a global
configuration... the rule is that we will use the last
mapping file that we parse.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1129244160</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1129137603</field>
		<field name="entrydate">1129244160</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1129137603</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1129137603</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1305033</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Field-Deep String to List Error</field>
	<field name="open_date">1127755865</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">i faced with such difficulty: 
 
&#60;mapping&#62;
&#60;classA&#62;ru.rbc.mediastream.model.cusomers.Client&#60;/classA&#62;
&#60;classB&#62;ru.rbc.mediastream.web.controls.model.table.DozerToRowBuffer&#60;/classB&#62;

&#60;field&#62; 
&#60;A&#62;fullName&#60;/A&#62; 
&#60;B theSetMethod=&#34;addValue&#34;&#62;values&#60;/B&#62; 
&#60;/field&#62; 
&#60;field&#62; 
&#60;A&#62;name&#60;/A&#62; 
&#60;B theSetMethod=&#34;addValue&#34;&#62;values&#60;/B&#62; 
&#60;/field&#62; 
&#60;/mapping&#62; 
 
and this is ok. but when i add 
&#60;field-deep&#62; 
&#60;A&#62;manager.lastname&#60;/A&#62; 
&#60;B theSetMethod=&#34;addValue&#34;&#62;values&#60;/B&#62; 
&#60;/field-deep&#62; 
 
exception is thrown:
net.sf.dozer.util.mapping.MappingException:
net.sf.dozer.util.mapping.converters.ConversionException:
String constructor does not exist in destination class:
interface java.util.List </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1127770219</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Let's try that again.</field>
</message>

<message>
		<field name="adddate">1127770177</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I have attached the source that was changed.</field>
</message>

<message>
		<field name="adddate">1127769769</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Fixed for next release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1129070668</field>
		<field name="entrydate">1129244160</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1129244160</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1129070668</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1129070667</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">150470: bug1305033.zip</field>
		<field name="entrydate">1127770220</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1127769769</field>
		<field name="entrydate">1127770177</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1127770177</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1127769769</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1127769769</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1361105</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Array to Array mapping issue</field>
	<field name="open_date">1132386661</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I believe in the following use case Dozer req's a hint 
when it should be able to do the mapping without 
having to specify a hint in the mapping file.


SourceObj
     NameValueDO[] nameValues

DestObj
    NameValueVO[]  nameValuePairs

The NameValueDO and NameValueVO are simple and both 
have String props named: field1, field2
 

Dozer mapping......

  &#60;mapping&#62;
    &#60;classA&#62;SourceObj&#60;/classA&#62;
    &#60;classB&#62;DestObj&#60;/classB&#62;
    &#60;field&#62;
      &#60;A&#62;nameValue&#60;/A&#62;
      &#60;B&#62;nameValuesPairs&#60;/B&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;
 

If the SourceObj contains only 1 element in the array 
all is good.


If the SourceObj contains more than 1 element in the 
array an exception is thrown.  I think it is because 
in the addOrUpdateToList method, the destEntry is set 
to null for the 2 element(if you debug this you will 
see what I mean).  I think Dozer should be able to 
handle this scenario without having to specifiy a 
destination type hint&#226;&#8364;&#166;.

The following is what I think is the problem code in 
the addOrUpdateToList method....

  // reset dest type
  destEntryType = null;

Exception:
Caused by: java.lang.IllegalArgumentException: array 
element type mismatch
            at java.lang.reflect.Array.set(Native 
Method)
            at 
net.sf.dozer.util.mapping.MappingProcessor.convertListT
oArray(MappingProcessor.java:746)
            at 
net.sf.dozer.util.mapping.MappingProcessor.mapArrayToAr
ray(MappingProcessor.java:697)
            at 
net.sf.dozer.util.mapping.MappingProcessor.mapCollectio
n(MappingProcessor.java:548)
            at 
net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurse
Object(MappingProcessor.java:444)
            at 
net.sf.dozer.util.mapping.MappingProcessor.mapFromField
Map(MappingProcessor.java:298)
            at 
net.sf.dozer.util.mapping.MappingProcessor.map
(MappingProcessor.java:272)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1133015012</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is fixed and in CVS branch v15. Files touched were
Hint.java. and MappingProcessor.java.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1133362382</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133021690</field>
		<field name="entrydate">1133362382</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133021690</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133021690</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1236069</field>
		<field name="entrydate">1133015012</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1132386709</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1563130</field>
	<field user_id="1603668" name="submitted_by">nhatvo</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">need ability to load mapping files from outside of classpath</field>
	<field name="open_date">1158869641</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Currently, the net.sf.dozer.util.mapping.util.Loader
uses the context class loader to load the mapping
files. This requires the mapping files to be under the
classpath. Some applications perfer to put their
configuration files in an external location that allows
reloading, for example WEB-INF. You cannot reload the
resources that loaded by context class loader. 

The suggested patch is to check to see if the resource
starts with 'file:', and if so, load from the file.
Otherwise load from the classloader.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1159319745</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Hi Nhat,

I applied your patch to the 2.4 code base.  All appears to 
be ok with the code.  The following is how I implemented 
the patch.  Let me know if you see any issues.  Thanks for 
submitting.

  public URL getResource(String resource) {
    URL result = Thread.currentThread
().getContextClassLoader().getResource(resource);
    
    // Could not find resource. Try with the classloader 
that loaded this class.
    if (result == null) {
      ClassLoader classLoader = Loader.class.getClassLoader
(); 
      if(classLoader != null) {
        result = classLoader.getResource(resource);
      }
    }
    
    // Last ditch attempt searching classpath
    if (result == null) {
      result = ClassLoader.getSystemResource(resource);
    }
    
    //Patch to load mapping file from outside of classpath.
    if (resource.startsWith(FILE)) {
      try {
        return new File(resource.substring(FILE.length
())).toURL();
      } catch (MalformedURLException e) {
        throw new MappingException(e);
      }
    }
    
    return result;
  }</field>
</message>

<message>
		<field name="adddate">1158951613</field>
		<field name="user_name">nhatvo</field>
		<field name="body">Logged In: YES 
user_id=1603668

Thank you for the attention. It's pretty embarassing to say
that the patch I posted doesn't work, because I only tested
the class by itself. I posted another patch, and yes, I
tested it again in the desired environment and It's working. </field>
</message>

<message>
		<field name="adddate">1158896914</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Thanks for the patch.  We appreciate when patches are 
submitted along with the bug.  I will take a look at this 
and if everything looks good, I will include it in the 
next release.  I don't have a date for the next release 
but should be 4 - 8 weeks.  Let me know if this is 
critical and you would need a formal release prior to 
that.  I am guessing that your patch will get you by until 
the next release</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1159319745</field>
		<field name="entrydate">1161028884</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1161028884</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1159319745</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1159319745</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1159314162</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">194755: Loader.java</field>
		<field name="entrydate">1158951614</field>
		<field name="mod_by">nhatvo</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">194592: Loader.java</field>
		<field name="entrydate">1158869641</field>
		<field name="mod_by">nhatvo</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1339074</field>
	<field user_id="774102" name="submitted_by">dr_dee</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">one-way overriden by default field mappings</field>
	<field name="open_date">1130375785</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When the beans to be mapped have an identically named
field any one-way mapping is overridden by
MappingUtils.addDefaultFieldMappings

These defaults need to be populated during the custom
mapping stage  or use the do-nothing field mapping
suggestion from the &#34;parent field mapping&#34; RFE

Rohan
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1130655429</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Ok. After finally figuring out what was going on this was an
easy fix. Basically, for every one-way field map we now make
a corresponding ExcludeFieldMap on the other direction.

This will be in the 1.5.6 release. I will still take your
suggestion for figuring out default mappings once at
initialization and remove all the superclass complexity.

Franz</field>
</message>

<message>
		<field name="adddate">1130470815</field>
		<field name="user_name">dr_dee</field>
		<field name="body">Logged In: YES 
user_id=774102

Sorry, haven't got a test together but it'd look like...

mapping from A to B
  field (one-way) mapping from foo to foo

now make A.setFoo private

As for the do nothing field mapper, see attached example
(hacked together just now so handle with care)

cheers
Rohan</field>
</message>

<message>
		<field name="adddate">1130390923</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Rohan -

Can you show me your test data and your mapping xml? I want
to write a unit test case so I can reproduce and fix. I
might be able to fix this for the 1.5.6 release...the RFE
will be in 1.5.7...I will refactor all of the default
mapping stuff at that time.

Can you also give me a little more info on the do-nothing
field (class?) mapping you are suggesting? The more info the
better. We can then get all of this worked out.

thanks,

franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1130740061</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1130655429</field>
		<field name="entrydate">1130740061</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1130655429</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1130655429</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">154085: NonMappingFieldMap.java</field>
		<field name="entrydate">1130470867</field>
		<field name="mod_by">dr_dee</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1130390923</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1342611</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Empty String value is getting lost during mapping</field>
	<field name="open_date">1130693822</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">A source field value of &#34;&#34; results in the dest field being 
null.  The dest field should be an empty string</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1130710883</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

This has been resolved and will be included in the 1.5.6 
release</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1130740060</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1130719061</field>
		<field name="entrydate">1130740060</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1130719061</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1130719061</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1130710855</field>
		<field name="entrydate">1130710883</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1130710883</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1130710855</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1130710855</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1342127</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Using an Interface for a Custom Converter Class</field>
	<field name="open_date">1130643159</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details"> Hello, 
 
im working with version 1.5.5 for a couple of days.
Yesterday we must change a class to a interface.  
This produces
&#34;net.sf.dozer.util.mapping.MappingException:
java.lang.InstantiationException: BDT_Geldbetrag&#34;. 
 
After implementing BDT_GeldbetragCustomConverter (see
below) i got now
&#34;net.sf.dozer.util.mapping.converters.ConversionException:
String constructor does not exist in destination class:
interface BDT_Geldbetrag&#34; 
 
public interface BDT_Geldbetrag { 
public static final String DEFAULT_WAEHRUNG = &#34;EUR&#34;; 
 
/** 
* @return Returns the betrag. 
*/ 
public BigDecimal getBetrag(); 
 
/** 
* @param p_betrag 
* The betrag to set. 
*/ 
public void setBetrag(BigDecimal p_betrag); 
 
/** 
* @return Returns the waehrung. 
*/ 
public String getWaehrung(); 
 
/** 
* @param p_waehrung 
* The waehrung to set. 
*/ 
public void setWaehrung(String p_waehrung); 
} 
 
 
public class BDT_GeldbetragCustomConverter implements
CustomConverter { 
 
/* 
* (non-Javadoc) 
*  
* @see
net.sf.dozer.util.mapping.converters.CustomConverter#convert(java.lang.Object,

* java.lang.Object, java.lang.Class, java.lang.Class) 
*/ 
public Object convert(Object destination, Object
source, Class destClass, Class sourceClass) { 
BDT_GeldbetragImpl dest = null; 
//BigDecimal -&#62; BDT_GeldbetragImpl 
if (source instanceof BigDecimal) { 
// check to see if the object already exists 
if (destination == null) { 
dest = new BDT_GeldbetragImpl(); 
} else { 
dest = (BDT_GeldbetragImpl) destination; 
} 
dest.setBetrag( (BigDecimal)source); 
return dest; 
//BDT_GeldbetragImpl -&#62; BigDecimal 
} else if (source instanceof BDT_GeldbetragImpl) { 
return ((BDT_GeldbetragImpl) source).getBetrag(); 
} else { 
throw new MappingException( 
&#34;Converter BDT_GeldbetragCustomConverter used
incorrectly. Arguments passed in were:&#34; 
+ destination + &#34; and &#34; + source); 
} 
} 
} 
 
 
&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62; 
&#60;!DOCTYPE mappings PUBLIC &#34;-//DOZER//DTD MAPPINGS//EN&#34; 
&#34;http://dozer.sourceforge.net/dtd/dozerbeanmapping.dtd&#34;&#62; 
/&#62;&#60;mappings&#62; 
&#60;configuration&#62; 
&#60;stopOnErrors&#62;false&#60;/stopOnErrors&#62; 
&#60;dateFormat&#62;dd.MM.yyyy&#60;/dateFormat&#62; 
&#60;wildcard&#62;false&#60;/wildcard&#62; 
&#60;customConverters&#62; &#60;!-- these are always bi-directional
--&#62; 
&#60;!-- BDT_Geldbetrag --&#62; 
&#60;converter type=&#34;BDT_GeldbetragCustomConverter&#34; &#62; 
&#60;classA&#62;BDT_Geldbetrag&#60;/classA&#62; 
&#60;classB&#62;java.lang.BigDecimal&#60;/classB&#62; 
&#60;/converter&#62; 
&#60;/customConverters&#62;  
&#60;/configuration&#62; 
&#60;mapping&#62; 
&#60;classA&#62;SiO_ImmobilieImpl&#60;/classA&#62; 
&#60;classB&#62;OImmobilie&#60;/classB&#62; 
&#60;field&#62; 
&#60;!-- BDT_Geldbetrag --&#62; 
&#60;A&#62;bewertungsBetragPersonalEuroIndividuell&#60;/A&#62; 
&#60;!-- java.lang.BigDecimal --&#62; 
&#60;B&#62;belhGrenzewert&#60;/B&#62; 
&#60;/field&#62; 
&#60;/mapping&#62; 
&#60;/mappings&#62; 
 
My Question: What went wrong with the Converter, or how
can i specify a &#34;concreteClass&#34; ? Will the annonced
&#34;Bean Factory Injection&#34; in 1.5.6 help me ? 
 
Regards 
 
Matthias </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1130645592</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Fixed for 1.5.6</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1130740061</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1130645592</field>
		<field name="entrydate">1130740061</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1130645592</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1130645592</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1332606</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">wrong destination object for list of custom converted object</field>
	<field name="open_date">1129757827</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When mapping from list to list and the contents of
those lists use a custom converter than the destination
object passed to that converter is the parent list
rather than the element.  The destination class is correct.

When using an iterated mapping all the converter's
parameters are correct.  One immediate difference is
that mapUsingCustomConverter is being called with
toplevel=true in this case and false in the invalid case.

Because the path is somewhat different in those cases I
haven't been able to narrow down the problem.

When destination is wrong the call stack looks like:

mapUsingCustomConverter(Class, Object, Class, ClassMap,
Object, FieldMap, boolean)
mapOrRecurseObject(Object, Class, ClassMap, FieldMap,
Object)
addOrUpdateToList(FieldMap, Collection, ClassMap, Object)
mapListToList(List, ClassMap, FieldMap, Object)
mapCollection(Object, ClassMap, FieldMap, Object)
mapOrRecurseObject(Object, Class, ClassMap, FieldMap,
Object)
mapFromMethodFieldMap(Object, Object, ClassMap, FieldMap)
map(Object, Object, ClassMap, FieldMap)
map(Object, Class, FieldMap)

And when iterating (destination correct) it looks like:

mapUsingCustomConverter(Class, Object, Class, ClassMap,
Object, FieldMap, boolean)
map(Object, Object, ClassMap, FieldMap)
map(Object, Object, ClassMap)
map(Object, Class)
mapFromIterateMethodFieldMap(Object, Object, ClassMap,
FieldMap)
map(Object, Object, ClassMap, FieldMap)
map(Object, Object, ClassMap)
map(Object, Class)


Rohan
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1129871012</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Nice catch. I have fixed and will be available in 1.5.6. I
have attached the patched MappingProcessor.java.

Thanks.

Franz</field>
</message>

<message>
		<field name="adddate">1129864826</field>
		<field name="user_name">nobody</field>
		<field name="body">Logged In: NO 

testCustomConverterMapping needs to be extended to trigger
this bug.

1) ensure that the collection in the mapped to object is not
null, eg.
          public Collection names = new ArrayList();

2) add a list of Double in the back mapping from objp to
TestCustomConverterObject as the converter only checks for
the existence of a destination object in that case (note
that that is quite valid as in the other direction the
object is a Double)

The result is that the destination will be the list rather
than null and...
java.lang.ClassCastException: java.util.ArrayList</field>
</message>

<message>
		<field name="adddate">1129838843</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I have tested List to List with converter (our test case
testCustomConverterMapping on MapperTest.java)
and it seems to work fine. Can you give me your test
objects, test data, and mapping config file? Or some more
information...

Thanks.

Franz</field>
</message>

<message>
		<field name="adddate">1129837466</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This looks fun...! I will try to reproduce this. Any test
data I can have to reproduce the problem?

Thanks.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1130740061</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1129871012</field>
		<field name="entrydate">1130740061</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1129871012</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1129871012</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">153289: MappingProcessor.java</field>
		<field name="entrydate">1129871012</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1129837466</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1321647</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">custom convertor not associated with hints</field>
	<field name="open_date">1128913635</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">// this configuration won't be attached to the
collection &#34;names&#34; hints

&#60;configuration&#62;
  &#60;customConverters&#62;
    &#60;converter type=&#34;NameConvertor&#34; &#62;
        &#60;classA&#62;org.test.Name&#60;/classA&#62;
        &#60;classB&#62;java.lang.String&#60;/classB&#62;
    &#60;/converter&#62;
  &#60;/customConverters&#62;     
&#60;/configuration&#62;

&#60;mapping&#62;
    &#60;classA&#62;org.test.Outer&#60;/classA&#62;
    &#60;classB&#62;org.test.OuterTO&#60;/classB&#62;
    &#60;field&#62;
        &#60;A&#62;names&#60;/A&#62;
        &#60;B&#62;names&#60;/B&#62;
        &#60;sourceTypeHint&#62;org.test.Name&#60;/sourceTypeHint&#62;
       
&#60;destinationTypeHint&#62;java.lang.String&#60;/destinationTypeHint&#62;
    &#60;/field&#62;
&#60;/mapping&#62;
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1129874301</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Thanks for all of that information. This has been fixed for
1.5.6. I have attached the patched MappingProccessor.java. I
have also incorporated your tests into our test suite.

Thanks.

Franz</field>
</message>

<message>
		<field name="adddate">1129861168</field>
		<field name="user_name">dr_dee</field>
		<field name="body">Logged In: YES 
user_id=774102

I'll mail you a unit test as it seems that files can't be
added to open bugs.

The problem looks like it's triggered by iterated lists</field>
</message>

<message>
		<field name="adddate">1129221565</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I wrote a unit test and this seems to work. Every class map
gets all of the custom converters defined in the mapping
file. So when we reach the mapOrRecurseObject() method all
of these conditions hold true:

    if (classMap.getConfiguration().getCustomConverters() !=
null
        &#38;&#38;
classMap.getConfiguration().getCustomConverters().getConverterByDestinationType(destFieldType.getName(),
            sourceFieldClass.getName()) != null) {


What behavior are you seeing?

--------------------------------

  private Object mapOrRecurseObject(Object sourceFieldValue,
Class destFieldType, ClassMap classMap, FieldMap fieldMap,
      Object destObj) {
    if (sourceFieldValue == null) {
      return null;
    }

    Object rvalue = null;
    Class sourceFieldClass = sourceFieldValue.getClass();

    if (classMap.getConfiguration().getCustomConverters() !=
null
        &#38;&#38;
classMap.getConfiguration().getCustomConverters().getConverterByDestinationType(destFieldType.getName(),
            sourceFieldClass.getName()) != null) {
      rvalue = mapUsingCustomConverter(sourceFieldClass,
sourceFieldValue, destFieldType, classMap, destObj, fieldMap,
</field>
</message>

<message>
		<field name="adddate">1129217427</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I will fix this for the 1.5.5 release</field>
</message>

<message>
		<field name="adddate">1128957809</field>
		<field name="user_name">bgsesr</field>
		<field name="body">Logged In: YES 
user_id=1232046

thats a good one.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1129874302</field>
		<field name="entrydate">1130740061</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1130740061</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">153295: MappingProcessor.java</field>
		<field name="entrydate">1129874303</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1129874302</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1129874301</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1232046</field>
		<field name="entrydate">1129217427</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1128957809</field>
		<field name="mod_by">bgsesr</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1561837</field>
	<field user_id="7747" name="submitted_by">pmonks</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">RuntimeExceptions should not be wrapped in MappingException</field>
	<field name="open_date">1158715399</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">RuntimeExceptions thrown from custom code called by
Dozer during mapping (eg. custom converters) should not
be wrapped with MappingException, since it makes it
difficult to differentiate different types of mapping
error from outside the call to MapperIF.map.

My use case is a custom converter that throws a variety
of different exceptions (all sub-classes of
RuntimeException) and I need to be able to respond to
each type of exception differently.  Because all of my
exceptions get wrapped in a MappingException I'm forced
to catch all MappingExceptions (even the ones I'm not
interested in), &#34;unwrap&#34; it to get the underlying
exception type and then execute a bluddy great if /
then / else statement for each different type.  It
would more elegant to be able to use Java's native
support for multiple catch clauses instead.

It may even make sense to change MapperIF.map to throw
java.lang.Exception so that checked exceptions don't
have to be wrapped either.

Cheers,
Peter
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1159762631</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

putting back to pending status</field>
</message>

<message>
		<field name="adddate">1159551344</field>
		<field name="user_name">pmonks</field>
		<field name="body">Logged In: YES 
user_id=7747

G'day,

That works for me - the comment about not wrapping checked
exceptions was more of a thought experiment than an actual
need on my part.

And while I agree about the difficulties of recovering from
exceptions, there are cases where a developer needs to catch
exceptions for reasons other than recovery.  For example I'm
catching the various different types of exception and
converting each one to an equivalent SOAP Fault.

Cheers,
Peter
</field>
</message>

<message>
		<field name="adddate">1159317439</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I have made the changes to the 2.4 code base.  I only 
tackled RuntimeExceptions, so checked exceptions will 
still get wrapped in a MappingException.  But any 
RuntimeExceptions will get passed out of the Mapper 
without getting wrapped in a MappingException.  With 
something as generic as an object mapper, I think it will 
be tough for a client to recover from any exception
(checked or runtime) thrown from the mapper.  But passing 
the RuntimeEx straight out will wrapping will provide a 
bit more flexibility and will make the the exception a 
little more readable.  One use case I can think of that 
will benefit from not wrapping runtime exceptions is when 
you are mapping a DTO that is lazy loaded.  If you need, 
you will be able to handle the LazyInitializationException 
w/o digging into the MappingException.  Thanks for the 
feature post.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1161028885</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1159762631</field>
		<field name="entrydate">1161028885</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1159762631</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1159762631</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1159317439</field>
		<field name="entrydate">1159551344</field>
		<field name="mod_by">pmonks</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1159551344</field>
		<field name="mod_by">pmonks</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1159317439</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1159317439</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1159314184</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1373824</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Null Value in String Array causes NPE</field>
	<field name="open_date">1133814116</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I was using Dozer to map String arrays (String []) to a
List. When doing so if the first element of the String
array is null that causes a null pointer exception
within the dozer code of the succeeding elements. The
exception occurs in method: 
 
MappingProcessor.addOrUpdateToList(FieldMap fieldMap,
Collection sourceCollectionValue, ClassMap classMap, 
Object destObj, Class destEntryType) at approximately
line 250.  
 
The original code in that area looks like: 
 
Object destValue = null; 
Iterator iter = sourceCollectionValue.iterator(); 
Object sourceValue = null; 
while (iter.hasNext()) { 
sourceValue = iter.next(); 
if (destEntryType == null) { 
destEntryType =
fieldMap.getDestHintType(sourceValue.getClass()); 
} 
 
Here is a snippet of some code which shows the example: 
 
 
System.out.println(&#34;Null Array Test&#34;); 
ObjectG og = new ObjectG(); 
ObjectGPrime ogprime = new ObjectGPrime(); 
og.getStrarray()[0]=null; 
og.getStrarray()[1]=null; 
og.getStrarray()[3]=&#34;abcdefg&#34;; 
Mapper.map(og,ogprime); 
System.out.println(&#34;ogprime.abc: &#34;+ogprime.getAbc()); 
System.out.println(&#34;ogprime.list:
&#34;+ogprime.getSomelist()); 
 
Here is the mapping entry: 
 
&#60;mapping&#62; 
&#60;classA&#62;pkg.code.ObjectG&#60;/classA&#62; 
&#60;classB&#62;pkg.code.ObjectGPrime&#60;/classB&#62; 
&#60;field&#62; 
&#60;A&#62;strarray&#60;/A&#62; 
&#60;B&#62;somelist&#60;/B&#62; 
&#60;destinationTypeHint&#62;java.lang.String&#60;/destinationTypeHint&#62;

&#60;/field&#62; 
&#60;/mapping&#62;  
 
Here is ObjectG: 
 
package pkg.code; 
public class ObjectG { 
private String abc = &#34;ABCD&#34;; 
private String[] strarray = new String[4]; 
public static void main(String[] args) { 
} 
/** 
* @return Returns the abc. 
*/ 
public String getAbc() { 
return abc; 
} 
/** 
* @param abc The abc to set. 
*/ 
public void setAbc(String abc) { 
this.abc = abc; 
} 
/** 
* @return Returns the starray. 
*/ 
public String[] getStrarray() { 
return strarray; 
} 
/** 
* @param starray The starray to set. 
*/ 
public void setStrarray(String[] strarray) { 
this.strarray = strarray; 
} 
} 
 
Here is ObjectGPrime: 
 
package pkg.code; 
import java.util.List; 
 
public class ObjectGPrime { 
private String abc; 
private List somelist; 
private String[] somearray; 
 
/** 
* @return Returns the somearray. 
*/ 
public String[] getSomearray() { 
return somearray; 
} 
/** 
* @param somearray The somearray to set. 
*/ 
public void setSomearray(String[] somearray) { 
this.somearray = somearray; 
} 
public static void main(String[] args) { 
} 
/** 
* @return Returns the abc. 
*/ 
public String getAbc() { 
return abc; 
} 
/** 
* @param abc The abc to set. 
*/ 
public void setAbc(String abc) { 
this.abc = abc; 
} 
/** 
* @return Returns the somelist. 
*/ 
public List getSomelist() { 
return somelist; 
} 
/** 
* @param somelist The somelist to set. 
*/ 
public void setSomelist(List somelist) { 
this.somelist = somelist; 
} 
} 
 
 
I modified your code for a fix we need in our situation: 
 
Object destValue = null; 
Iterator iter = sourceCollectionValue.iterator(); 
Object sourceValue = null; 
// Fix for code RM112805 
Class prevDestEntryType = null; 
while (iter.hasNext()) { 
sourceValue = iter.next(); 
if (destEntryType == null) { 
if (sourceValue == null)  
destEntryType = prevDestEntryType; 
else 
destEntryType =
fieldMap.getDestHintType(sourceValue.getClass()); 
} 
// end fix code RM 112805 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1133823019</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Code is fixed and in CVS under v15 branch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1134108322</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133823019</field>
		<field name="entrydate">1134108322</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133823019</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133823019</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1561184</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">primitive array --&#62; List issue</field>
	<field name="open_date">1158643023</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Post:

 have two classes, each with one field named 
*values*. In the source class the field is an int[] 
on the second class the field is of List type. 
 
How do I tell dozer (2.2) to convert from int[] -&#62; 
List&#60;Integer&#62;? I have tried to use hints, but I can't 
get it right. 
 


Comments: mht  I have reproduced this issue.  See 
KnownFailures.testPrimitiveArrayToList_UsingHint() 
unit test.
 
Appears to be a problem with the following code in 
the MappingProcessor....

return addOrUpdateToList(fieldMap, Arrays.asList
((Object[]) sourceCollectionValue), classMap, 
destObj, 
destEntryType); 


It assumes object array for src value</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1159325705</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

This has been fixed.  The suspected code turned out to be 
the issue.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1161028885</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1159325705</field>
		<field name="entrydate">1161028885</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1159325705</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1159325705</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1345816</field>
	<field user_id="774102" name="submitted_by">dr_dee</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">ExcludeFieldMap not inherited</field>
	<field name="open_date">1130927419</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">exclusion was happening a little to early (see attached
patch)

ExcludeFieldMap must also be a subclass of
GenericFieldMap so the parent field name is recorded</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1130964372</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Fixed for the 1.5.7. I have attached the modified files.
These are also in CVS.

Thanks.

Franz</field>
</message>

<message>
		<field name="adddate">1130960628</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Thanks again Rohan nice catch. The reason I moved the
exclusion up was for our deep property mapping. I will fix
that and move the exclusion back down. I also understand the
second part...we can do this smarter...not necessarily
having ExcludeFieldMap subclass.

        if (!isGenericFieldMap(fieldMapping)) {
          // then do no validation
        } else {

As always thanks for your help.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1132111198</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1130964372</field>
		<field name="entrydate">1132111198</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">154807: ExcludeFix.zip</field>
		<field name="entrydate">1130964374</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1130964372</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1130964372</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1130960628</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">154740: MappingProcessor.java.diff</field>
		<field name="entrydate">1130927419</field>
		<field name="mod_by">dr_dee</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1346370</field>
	<field user_id="774102" name="submitted_by">dr_dee</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">multiple levels of custom mapping processed in wrong order</field>
	<field name="open_date">1130968601</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">a simple reverse of the super class list seems to do
the trick for me - see patch</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1130979441</field>
		<field name="user_name">dr_dee</field>
		<field name="body">Logged In: YES 
user_id=774102

what happens is that a GenericFieldMap (from foo to foo) is
used rather than the grandparent's custom mapping

cheers
Rohan
</field>
</message>

<message>
		<field name="adddate">1130974889</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

fixed for 1.5.7 in CVS. I also found another place where we
needed to check the instance of field mapping for exclude in
the super type checking...

Just curious how this bug manifests itself? I would like to
write a unit test for it...

Thanks.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1131119836</field>
		<field name="entrydate">1132111197</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1132111197</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1131119836</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1131119836</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1130974889</field>
		<field name="entrydate">1130979441</field>
		<field name="mod_by">dr_dee</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1130979441</field>
		<field name="mod_by">dr_dee</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1130974889</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1130974889</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1130974889</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">154818: MappingProcessor.java.diff2</field>
		<field name="entrydate">1130968602</field>
		<field name="mod_by">dr_dee</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1365701</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">InterFace isAssignableFrom Class</field>
	<field name="open_date">1132851487</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Found by 'amare':

http://sourceforge.net/forum/message.php?msg_id=3442658

We make use of the BeanFactoryIF Iterface to create a
Custom Bean 
Factory. The issue is that the object that the factory
creates is assigned to an Interface that the object
implements. The
net.sf.dozer.util.mapping.util.MappingUtils class
recieve this object and test if the object it recieved 
isAssignableFrom the destination data object. (Line 616 
net.sf.dozer.util.mapping.util.MappingUtils). This will
not be true as a object can never be assignable from a
Interface, even though the object implements the
interface. According to me this will work if the
current code:

(if 
(!rvalue.getClass().isAssignableFrom(classMap.getDestClass().getClassToMap()))
{)is swapped around to if
(!classMap.getDestClass().getClassToMap().isAssignableFrom(rvalue.getClass()))

{

I have tested this one my side and it seems to solve my
issue of assigning the destination object to an interface.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1132871317</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is fixed and in CVS.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1133362381</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1133021690</field>
		<field name="entrydate">1133362381</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1133021690</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1133021690</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1398242</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Rejected</field>
	<field name="summary">Deep field mapping IF issue</field>
	<field name="open_date">1136517812</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Here is the unit test scenario that reproduces this 
issue.....

  public void testInheritance3() throws Exception {
    SrcObj srcObj = new SrcObj();
    SrcObj2 nestedObj = new SrcObj2();
    String fieldValue = &#34;some test value&#34;;
    nestedObj.setSrcObj2Field(fieldValue);
    srcObj.setNestedObj(nestedObj);

    DestObj destObj = (DestObj) mapper.map(srcObj, 
DestObj.class);

    assertEquals(&#34;invalid dest obj field value&#34;, 
fieldValue, destObj.getDestObjField());
  }


Mapping file entry.....

  &#60;mapping&#62;
    
&#60;classA&#62;net.sf.dozer.util.mapping.vo.inheritance.SrcObj
&#60;/classA&#62;
    
&#60;classB&#62;net.sf.dozer.util.mapping.vo.inheritance.DestOb
j&#60;/classB&#62;    
    &#60;field&#62;
      &#60;a&#62;nestedObj.srcObj2Field&#60;/a&#62;
      &#60;b&#62;destObjField&#60;/b&#62;
      &#60;a-
hint&#62;net.sf.dozer.util.mapping.vo.inheritance.SrcObj2&#60;/
a-hint&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;   


See attached files for VO's...</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1137041081</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

After further research and analysis I don't think this is a 
defect.  I dont think there is a good way to implement this 
without introducing other negative issues.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137041081</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137041081</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1137041081</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1137021280</field>
		<field name="entrydate">1137021393</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1137021393</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137021280</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137021280</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1136517902</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">162350: SrcObj.java</field>
		<field name="entrydate">1136517883</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">162349: SrcObj2IF.java</field>
		<field name="entrydate">1136517866</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">162348: SrcObj2.java</field>
		<field name="entrydate">1136517837</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">162347: DestObj.java</field>
		<field name="entrydate">1136517813</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1415908</field>
	<field user_id="1434435" name="submitted_by">nicolas-elineau</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">NullPointerException and \&#34;field-deep\&#34;</field>
	<field name="open_date">1138325839</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi Franz,

I&#226;&#8364;&#8482;m sorry to bother you, but we still have trouble with
Dozer when our &#194;&#171; deep-field &#194;&#187; source(s) attribute(s)
is(are) null :
Exactly, when the source &#226;&#8364;&#732;deep-field&#226;&#8364;&#8482; value don&#226;&#8364;&#8482;t exist
in database, 
Even if I recognize that the first reason of my problem
is du to our &#226;&#8364;&#339;pretty&#226;&#8364; bad database&#226;&#8364;&#8482;s integrity (Cf. 1),
we still have critical &#226;&#8364;&#339;NullPointerException&#226;&#8364; when the
&#60;a&#62;x.y&#60;/a&#62; is map with a z attribute

Of course, if I &#226;&#8364;&#732;m asking for you help, it&#226;&#8364;&#8482;s because
Dozer is now the critical phase of our project.
my project is a very big project (Arch. SOA, ihm =
JSF/Struts, Spring (for IOC, AOP, etc features SOA
etc), JDO 2.0 for mapping O/DB,
and Dozer for a direct communication between JDO_Layer,
whit its POJO Bean (PRIVATE LAYER) and POJO Bean
PUBLIC, that are able to be manipulated by services&#226;&#8364;&#8482;s
consumer (here, ihm, but it can be easily be for Web
Services, or Rich-Client ap&#195;&#174;).

So, now, I&#226;&#8364;&#8482;ll try to explain better my problem :

&#226;&#8364;&#162;	Description of our &#226;&#8364;&#339;env.&#226;&#8364; &#239;&#402;&#168;

3 projects : 
1.	service_layer project =&#62; Beans Publics POJO and IF
Services
2.	Service&#226;&#8364;&#8482;s Implementation =&#62; ImplServices, with the
use of Dozer =&#62; IF DAO, DAOImpl with JDO)
3.	JDO_Layer =&#62; Beans Privates POJOs, a mirroring of
the Data in Oracle (Linux), and JDO&#226;&#8364;&#8482;s metadata and
mapping xml&#226;&#8364;&#8482;s files

Ours sources Bean come form JDO layer, and our
Destination are the Service / Public layer, with its Beans

Here is a case that throws a Dozer&#226;&#8364;&#8482;s NullPointerException &#239;&#402;&#168;

*** Private Layer : JDO&#226;&#8364;&#8482;s Pojo&#226;&#8364;&#8482;s Beans

I take 2 classes :

	- Client.java {

		Private String iDPk;
		Private Devise devise; // this attribut is map on
Devise&#226;&#8364;&#8482;s id
		&#226;&#8364;&#166;
		Get/Set
	}
	
- Devise.java {

Private String id;
Private String Libel;
		&#226;&#8364;&#166;
		Get/Set
	}


***  Service Layer : JDO&#226;&#8364;&#8482;s Pojo&#226;&#8364;&#8482;s Beans

- ClientPublic.java {
	
	Private String pkPUB;
	Private String deviseLibel;
&#226;&#8364;&#166;&#226;&#8364;&#166;&#226;&#8364;&#166;.
		Get/Set
	}

- DevisePublic.java {

Private String id;
Private String Libel;
		&#226;&#8364;&#166;
		Get/Set
	}


*** Dozer Mapping (Client &#60;-&#62; Client :

		&#60;field&#62;
			&#60;a&#62;devise.libel&#60;/a&#62;
			&#60;b&#62; Libel&#60;/b&#62;
		&#60;/field&#62;

&#226;&#8364;&#162;	If in database, the Devise&#226;&#8364;&#8482;s id is corresponding with
the Client&#226;&#8364;&#8482;s &#226;&#8364;&#339;devise&#226;&#8364;, it&#226;&#8364;&#8482;s OK =&#62; It always must be
like this ! Imagine that this application, a Client can
not be stored without Devise&#226;&#8364;&#8482;s reference !!
It&#226;&#8364;&#8482;s the reason why I spoke about the bad integrity of
Datas

&#226;&#8364;&#162;	When devise (from Client) is &#226;&#8364;&#339;call&#226;&#8364; and in the
physical table that represent Client&#226;&#8364;&#8482;s class, and we
have an id (from Devise), BUT IN TABLE OF DEVISE NO ID
CORRESPONDING, OR A ZERO (eg: pkPUB=0), we always have
a dozer &#226;&#8364;&#732;s NullPointerException


Thank you for you helps

Nicolas


you&#226;&#8364;&#8482;ll find a piece of my logs &#239;&#402;&#168;

net.sf.dozer.util.mapping.MappingException:
java.lang.NullPointerException
      at
net.sf.dozer.util.mapping.util.MappingUtils.throwMappingException(MappingUtils.java:792)
      at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:110)
      at
net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:75)
      at
com.bnppa.echo.services.prevoyance.impl.PrevoyanceServicesImpl.getContratsPrevoyanceParClient(PrevoyanceServicesImpl.java:72)
      at
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
      at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
      at java.lang.reflect.Method.invoke(Method.java:324)
      at
org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:335)
      at
org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:181)
      at
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:148)
      at
org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
      at
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:170)
      at
org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:176)
      at $Proxy1.getContratsPrevoyanceParClient(Unknown
Source)
      at
com.bnppa.echo.services.test.prevoyance.PrevoyanceServicesTest.testGetContratsPrevoyanceParClient(PrevoyanceServicesTest.java:41)
      at
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
      at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
      at java.lang.reflect.Method.invoke(Method.java:324)
      at
junit.framework.TestCase.runTest(TestCase.java:154)
      at
junit.framework.TestCase.runBare(TestCase.java:127)
      at
junit.framework.TestResult$1.protect(TestResult.java:106)
      at
junit.framework.TestResult.runProtected(TestResult.java:124)
      at
junit.framework.TestResult.run(TestResult.java:109)
      at junit.framework.TestCase.run(TestCase.java:118)
      at
junit.framework.TestSuite.runTest(TestSuite.java:208)
      at junit.framework.TestSuite.run(TestSuite.java:203)
      at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:436)
      at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:311)
      at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.lang.NullPointerException
      at
net.sf.dozer.util.mapping.MappingProcessor.logFieldMappingError(MappingProcessor.java:1235)
      at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:341)
      at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:108)

Source &#239;&#402;&#168;

public class Client {
	
	/**
	  * Primary key de la table
	  */
	private String idProspUnique;
	
	private Devise devise ; 
	private Adresse adressePostale ;


Destination &#239;&#402;&#168;

package com.bnppa.echo.dataobjects.external.client;


import
com.bnppa.echo.dataobjects.external.client.reference.
ClientPublic;

/**
 * This class represents a public domain &#60;i&#62;Client&#60;/i&#62;.
 * It contains &#60;b&#62;principals&#60;/b&#62; information relative
to &#60;i&#62;client&#60;/i&#62; specification.&#60;br&#62;
*    
 * @author elineauni
 */

public class ClientPublic {
	
	private String idProspUnique;
	private Long idAttacheCommercial;
&#226;&#8364;&#166;&#226;&#8364;&#166;&#226;&#8364;&#166;.

	private String Libel;	


Impl&#195;&#169;mentation du service &#226;&#8364;&#8220; utilisation de Dozer &#239;&#402;&#168;

/**
 * This class is the ClientServices interface
implementation.
 * It contains reference to : &#60;br&#62;
 * &#60;ul&#62;
 * &#60;li&#62;The corresponding Client DAO&#60;/li&#62;
 * &#60;li&#62;The functional domain contract services&#60;/li&#62;
 * &#60;li&#62;The dozer mapper, in order to map JDO object to
corresponding public domain object&#60;/li&#62;
 * &#60;/ul&#62;
 * @author elineauni
 */
public class ClientServicesImpl implements ClientServices {


	/** Dozer mapper reference */
	private MapperIF mapper;
	
	/** Corresponding Client DAO */
	private ClientDAO clientDAO;

	/**  Client Services reference */
	private ClientServices clientServices;
	
	/**
	 * Return the ClientPublic given its id
	 * Client basic information are retrieved through the
use of the Client DAO
	 * Client contracts are retrieved through the specific
ContractServices
	 * @param id : identifiant du client
	 * @return The corresponding ClientPublic  
	 */ 
	public Collection getClientById(String id) {

		Collection clientsPublic = (Collection)
getMapper().map(getClientDAO().getClientById(id),
ClientPublic.class);
		return clientsPublic ;
	}

OU :

    public ClientPublic getClientById (String id) {
        return (ClientPublic)
getMapper().map(getClientDAO().getClientById(id),
ClientPublic.class);
    }

ps: &#226;&#8364;&#339;Notice I do not set the attribute label on
InsideTestObject&#226;&#8364; : maybe, you might ?
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1138581954</field>
		<field name="user_name">nicolas-elineau</field>
		<field name="body">Logged In: YES 
user_id=1434435

Dear Franz,

Ok, tomorrow, at the office, I&#226;&#8364;&#8482;ll make a set of Tests for you.
We also use Eclipse,.

But, I&#226;&#8364;&#8482;m sure that our jdo layer (Lido) is ok (its request
send us the &#226;&#8364;&#339;correct&#226;&#8364; database value).
It&#226;&#8364;&#8482;s only when the dozer map() method is call that with have
a dozer&#226;&#8364;&#8482;s NPE.

Please, Have you test this case :

    &#60;field&#62;
      &#60;a&#62;srcNestedObj.src1&#60;/a&#62;
      &#60;b&#62;dest1&#60;/b&#62;
    &#60;/field&#62;

    &#60;field&#62;
      &#60;a&#62;srcNestedObj.Libel1&#60;/a&#62;
      &#60;b&#62;Libel1&#60;/b&#62;
    &#60;/field&#62;

If mapping for &#226;&#8364;&#339;srcNestedObj.src1&#226;&#8364; is OK, but at a second
level, just after, we do a &#226;&#8364;&#339;srcNestedObj.Libel1&#226;&#8364; and the
&#226;&#8364;&#339;Libel1&#226;&#8364; has no corresponding &#226;&#8364;&#339;srcNestedObj. src1&#226;&#8364; ?

Please, try this case :

-         1&#194;&#176; : first, we find good &#226;&#8364;&#339;dest1&#226;&#8364;&#226;&#8364;&#8482;s value
(destination) provide by dozer mapping

-         2&#194;&#176; : But, for the &#226;&#8364;&#339;srcNestedObj&#226;&#8364;(the same object
uses in the first mapping for &#226;&#8364;&#339;dest1&#226;&#8364;) there is NO libel (no
corresponding in database), we have a NPE
 

Thank your for your tests (Cf. 2&#194;&#176; :).
 

Best regards and thank you &#226;&#8364;&#339;for Dozer&#226;&#8364;

Nicolas

</field>
</message>

<message>
		<field name="adddate">1138565698</field>
		<field name="user_name">nicolas-elineau</field>
		<field name="body">Logged In: YES 
user_id=1434435

Franz,

I recognize that I&#226;&#8364;&#8482;ve send a maybe too &#226;&#8364;&#732;big&#226;&#8364;&#8482; set of  data.
But it&#226;&#8364;&#8482;s hard cause if you want to reproduce this
&#226;&#8364;&#339;NullPointer&#226;&#8364;, you have to change data&#226;&#8364;&#8482;s value in database.

Anyway, I&#226;&#8364;&#8482;ll try to give you more information (or lighter J
), but you still have them (and more &#226;&#8364;&#166;)  :

You first point :
As you can see, it&#226;&#8364;&#8482;s &#195;&#168;

            &#60;field&#62;

                &#60;a&#62;attacheCommercial.IdAttacheCommercial&#60;/a&#62;

                  &#60;b&#62;idAttacheCommercial&#60;/b&#62;

            &#60;/field&#62;

            &#60;field&#62;

                  &#60;a&#62;attacheCommercial.NomIntdis&#60;/a&#62;

                  &#60;b&#62;nomCommercial&#60;/b&#62;

            &#60;/field&#62;

 

Mapping &#226;&#8364;&#339;attacheCommercial.IdAttacheCommercial&#226;&#8364; &#195;&#168;


   attacheCommercial is an Object reference of
AttacheCommercial class use in Client bean.

It&#226;&#8364;&#8482;s represent the ID attribute&#226;&#8364;&#8482;s value of AttacheCommercial
table expected (find in &#226;&#8364;&#339;AttacheCommercial&#226;&#8364; table in database)

For example, if this ID value in Client bean is equal to
Zero (0), so there is no corresponding value in
&#226;&#8364;&#339;AttacheCommercial&#226;&#8364; table, and we have this MappingException.

But, if we have a good ID, that exist in &#226;&#8364;&#339;AttacheCommercial&#226;&#8364;
table, with its libel, all is OK

This example is the same if you use &#226;&#8364;&#339;apporteur&#226;&#8364; instance
from Apporteur class (and table with Id and corresponding
Libel values)

As you can see, we have try to avoid this problem with the
use of &#226;&#8364;&#339;customs setter/getter&#226;&#8364;, with &#226;&#8364;&#339;apporteur&#226;&#8364; object and
no results L

1. Your mapping file with the mapping that gives you the
exception


      &#60;!-- Define mapping rules beetwen a JDO Client and a
ClientBDT --&#62;
      &#60;mapping wildcard=&#34;true&#34; type=&#34;one-way&#34;
stop-on-errors=&#34;false&#34; &#62;
          
&#60;class-a&#62;com.bnppa.echo.dataobjects.internal.client.Client&#60;/class-a&#62;
   
&#60;class-b&#62;com.bnppa.echo.dataobjects.external.client.ClientBDT&#60;/class-b&#62;

            &#60;field&#62;

                  &#60;a&#62;idProspUnique&#60;/a&#62;

                  &#60;b&#62;idProspUnique&#60;/b&#62;

            &#60;/field&#62;

            &#60;field&#62;

                  &#60;a&#62;adresseFiscale&#60;/a&#62;

                  &#60;b&#62;adresseFiscaleBDT&#60;/b&#62;

            &#60;/field&#62;

            &#60;field&#62;

                  &#60;a&#62;adressePostale&#60;/a&#62;

                  &#60;b&#62;adressePostaleBDT&#60;/b&#62;

            &#60;/field&#62;

            &#60;field&#62;

                  &#60;a&#62;chaineGestionClient&#60;/a&#62;

                  &#60;b&#62;chaineGestionClientBDT&#60;/b&#62;

            &#60;/field&#62;

 

            &#60;field&#62;

                  &#60;a&#62;personnePhysique&#60;/a&#62;

                  &#60;b&#62;personnePhysiqueBDT&#60;/b&#62;

            &#60;/field&#62;

&#60;!--

            &#60;field&#62;

                  &#60;a&#62;attacheCommercial.IdAttacheCommercial&#60;/a&#62;

                  &#60;b&#62;idAttacheCommercial&#60;/b&#62;

            &#60;/field&#62;

            &#60;field&#62;

                  &#60;a&#62;attacheCommercial.NomIntdis&#60;/a&#62;

                  &#60;b&#62;nomCommercial&#60;/b&#62;

            &#60;/field&#62;

            &#60;field&#62;

                  &#60;a&#62;apporteur.IdIntdis&#60;/a&#62;

                  &#60;b&#62;idIntervenant&#60;/b&#62;

            &#60;/field&#62;

            &#60;field&#62;

                  &#60;a&#62;apporteur.Adresse1&#60;/a&#62;

                  &#60;b&#62;nomIntervenant&#60;/b&#62;

            &#60;/field&#62;

 

            

            &#60;field&#62;

                  &#60;a get-method=&#34;apporteurIdIntdis&#34;&#62;idIntdis&#60;/a&#62;

                  &#60;b&#62;idIntervenant&#60;/b&#62;

            &#60;/field&#62;

            &#60;field&#62;

                  &#60;a get-method=&#34;apporteurAdresse1&#34;&#62;adresse1&#60;/a&#62;

                  &#60;b&#62;nomIntervenant&#60;/b&#62;

            &#60;/field&#62;

--&#62;

 

      &#60;/mapping&#62;

3. A simple unit test that throws the NPE. If you can only
produce this at runtime with all of your other layers (i.e.
JDO, etc) it will be extremely difficult to fix this bug &#195;&#168;

When the attacheCommercial &#226;&#8364;&#732;s ID in Client&#226;&#8364;&#8482;s Table is = 0,
then &#226;&#8364;&#339;field-deep&#226;&#8364;  

            &#60;field&#62;
                &#60;a&#62;attacheCommercial.IdAttacheCommercial&#60;/a&#62;
                  &#60;b&#62;idAttacheCommercial&#60;/b&#62;
            &#60;/field&#62;

            &#60;field&#62;
                 &#60;a&#62;attacheCommercial.NomIntdis&#60;/a&#62;
                  &#60;b&#62;nomCommercial&#60;/b&#62;
            &#60;/field&#62;

 throw a MappinException :

package com.bnppa.echo.services.client.impl;

import java.util.Collection;

import com.bnppa.echo.dataobjects.external.client.ClientBDT;

import com.bnppa.echo.dataobjects.external.client.ClientInfoBDT;

import
com.bnppa.echo.dataobjects.internal.apporteur.AttacheCommercial;

import com.bnppa.echo.dataobjects.internal.client.Client;

import com.bnppa.echo.service.client.ClientServices;

import com.bnppa.echo.service.epargne.EpargneServices;

import com.bnppa.echo.service.prevoyance.PrevoyanceServices;

import com.bnppa.echo.services.client.dao.ClientDAO;

 

import net.sf.dozer.util.mapping.MapperIF;

import net.sf.dozer.util.mapping.MappingException;

/**

 * This class is the ClientServices interface implementation.

 * It contains reference to : &#60;br&#62;

 * &#60;ul&#62;

 * &#60;li&#62;The corresponding Client DAO&#60;/li&#62;

 * &#60;li&#62;The functional domain contract services&#60;/li&#62;

 * &#60;li&#62;The dozer mapper, in order to map JDO object to
corresponding public domain object&#60;/li&#62;

 * &#60;/ul&#62;

 * @author elineauni

 */

public class ClientServicesImpl implements ClientServices {

 

 

            /** Dozer mapper reference */

            private MapperIF mapper;

            

            /** Corresponding Client DAO */

            private ClientDAO clientDAO;

 

            /**  Client Services reference */

            private ClientServices clientServices;

            

            /**  Contract Services reference */

            private EpargneServices epargneServices;

            private PrevoyanceServices prevoyanceServices; 

    

            /**

             * Return the ClientBDT given its id

             * Client basic information are retrieved
through the use of the Client DAO

             * Client contracts are retrieved through the
specific ContractServices

             * @param id : identifiant du client

             * @return The corresponding ClientBDT  

             */ 

            public Collection getClientParId(String id) {

 

                        

            Client source = getClientDAO().getClientParId(id);

                

               

                

                Collection clientsBDT = null;

        try {

            clientsBDT = (Collection)
getMapper().map(source, ClientBDT.class);

        } catch (MappingException e) {

            

            System.out.println(&#34; Dans CATCH MappingException&#34;);

            // TODO Bloc catch auto-g&#195;&#169;n&#195;&#169;r&#195;&#169;

            e.printStackTrace();

        }

        catch(Exception e)

        {

            System.out.println(&#34; Dans CATCH Exception&#34;);

            // TODO Bloc catch auto-g&#195;&#169;n&#195;&#169;r&#195;&#169;

            e.printStackTrace();

        }

        return clientsBDT;

 

 

 

 

I really hope that it&#226;&#8364;&#8482;s enough to fixed this Exception when
data don&#226;&#8364;&#8482;t deal with good integrity

As you know, it&#226;&#8364;&#8482;s important for me (us), and urgent

 

Nicolas</field>
</message>

<message>
		<field name="adddate">1138475866</field>
		<field name="user_name">nicolas-elineau</field>
		<field name="body">Logged In: YES 
user_id=1434435

Hello Franz,

I&#226;&#8364;&#8482;m glad to have news from you.

Last Friday, we have made a lot  of tests for working with
this MappingException :

We can catch it when the dozer&#226;&#8364;&#8482;s mapping is call
(map(source, destination.class) ).

Of course, I&#226;&#8364;&#8482;m agree with one thing: it&#226;&#8364;&#8482;s not a really bug
from Dozer, cause when you try that with datas
well-organized (integrity of SGBD is ok), we have no
troubles and Dozer do its work correctly.

We have this problem only when datas are not organized as a
&#226;&#8364;&#339;Java developer&#226;&#8364; or sgbd&#226;&#8364;&#8482;s &#226;&#8364;&#339;best-practices&#226;&#8364; can expect
(about data&#226;&#8364;&#8482;s INTEGRITY) : 

For the business (and honestly, we have to do with them,
because we create application for them. I&#226;&#8364;&#8482;m sure that you
understand me J). 

Anyway, I&#226;&#8364;&#8482;m agree with them when they says that datas
mustn&#226;&#8364;&#8482;t be store with 100% percent of integrity. The
application must not fall in error when, for example, a
libel doesn&#226;&#8364;&#8482;t exist in database, even if we found an id in
the primary class ( = Tables in our Oracle SGBD, one for the
&#226;&#8364;&#732;primary class&#226;&#8364;&#8482;, eg: Client, and the others for reference&#226;&#8364;&#8482;s
tables providing a libel from ours ID) ).

Our project depends now mostly in DOZER. If the next week we
can&#226;&#8364;&#8482;t fixed this problem, we would be obliged to do &#226;&#8364;&#732;DTO&#226;&#8364;&#8482;
ourselves, and give up Dozer L.

For me, it would be very bad : I&#226;&#8364;&#8482;ve already say you what I
think about Dozer J

So, I&#226;&#8364;&#8482;m trying to send some classes &#226;&#8364;&#166;, even if I think that
ours troubles depends of data&#226;&#8364;&#8482;s organisation in database (
data acces).

Thanks

Nicolas</field>
</message>

<message>
		<field name="adddate">1138384097</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

If you can attach a zip file with your VOs, mapping file, 
and unit test a fix will be much easier to provide.

franz</field>
</message>

<message>
		<field name="adddate">1138339231</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I am travelling tomorrow so I will reproduce and fix/provide
a patch this weekend for you.

Take care.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1138923387</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">NullPointerException and &#34;field-deep&#34;</field>
		<field name="entrydate">1138923387</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1138923387</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1138475866</field>
		<field name="mod_by">nicolas-elineau</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1138339231</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1413429</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Hint is not used for Array to List</field>
	<field name="open_date">1138075689</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">public class KarthikTestObject extends BaseTestObject {
    private Integer[] one;
    public Integer[] getOne() {
        return one;
    }
    public void setOne(Integer[] one) {
        this.one = one;
    }
}

public class KarthikTestObjectPrime extends
BaseTestObject {
    private List one;
    public List getOne() {
        return one;
    }
    public void setOne(List one) {
        this.one = one;
        System.out.println( &#34;Class of first object in
List is &#34; +
this.one.get(0).getClass() );
    }
}


Test Case:

public class AKarthikMapperTest extends DozerTestBase {
    
    public void testGeneralMapping() throws Exception {
        	KarthikTestObject testObj = new
KarthikTestObject();
        	Integer[] intArr = { new Integer(1), new
Integer(2) };
        	testObj.setOne(intArr);
        	KarthikTestObjectPrime testObjPrime = 
        	    ( KarthikTestObjectPrime ) mapper.map(
testObj,
KarthikTestObjectPrime.class );
        	
        	assertEquals( testObj, testObj );
    }

}

Mapping:

  &#60;mapping&#62;
   
&#60;class-a&#62;net.sf.dozer.util.mapping.vo.KarthikTestObject&#60;/class-a&#62;
    
&#60;class-b&#62;net.sf.dozer.util.mapping.vo.KarthikTestObjectPrime&#60;/class-b&#62;
    

    &#60;field&#62;
      &#60;a&#62;one&#60;/a&#62;
      &#60;b&#62;one&#60;/b&#62;
      &#60;b-hint&#62;java.lang.String&#60;/b-hint&#62; 
    &#60;/field&#62;        
   
        
  &#60;/mapping&#62; 


Inspite of giving a hint for java.lang.String,
KarthikTestObjectPrime 
still
prints the class at java.lang.Integer.  Is this the
expected behavior?</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1138075851</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is fixed and in the v20 branch. I have attached the
patched file to this ticket.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1138923387</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1138923387</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">164637: MappingProcessor.java</field>
		<field name="entrydate">1138075853</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1413443</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Context Based Mapping does not work unless Map</field>
	<field name="open_date">1138077696</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Unless you are mapping a Map, Context Based Mapping
does not work.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1138079364</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is fixed on the v20 Branch. I have also attached the
patched class.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1138923387</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1138923387</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">164641: MappingUtils.java</field>
		<field name="entrydate">1138079365</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1419357</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">LinkedHashMap not compatible with JDK 1.3</field>
	<field name="open_date">1138663442</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Caching in 2.0 uses a LinkedHashMap. Need to replace
this for JDK 1.3 compatibility.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1138663555</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is fixed. Modified Cache.java. File is attached.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1138923386</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1138923386</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">165571: Cache.java</field>
		<field name="entrydate">1138663555</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1427982</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">CGLIB Source Class - object not instance of declaring class</field>
	<field name="open_date">1139442137</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When mapping Hibernate DTOs we would experience that
the source class is sometimes proxied. We cache the
read method and would have class compatibility issues.
Namely - object not instance of declaring class. The
fix is to verify that the declaring class on the Method
is the same as the source object coming in.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1139443064</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is fixed and checked into CVS under v20 branch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1144820590</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1144789943</field>
		<field name="entrydate">1144820590</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1144789943</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1144789943</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1431086</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">No tranformation from a Map attribute to source value</field>
	<field name="open_date">1139870187</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When a Map contains an object we were simply copying
that object and not doing a transformation. This is a
problem if say the map value is a Integer and the
destination object is a String. We would get an
IllegalArgumentException.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1139870227</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is fixed and in the v20 branch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1144820589</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1144785183</field>
		<field name="entrydate">1144820589</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1144785183</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1144785183</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1445376</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Not logging field mapping error when stop on errors = true</field>
	<field name="open_date">1141794738</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Doesnt look like field mapping details are being 
logged when an error happens and stop on errors is 
true.  


</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1143256919</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 14 days (the time period specified by
the administrator of this Tracker).</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1143256919</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1141961140</field>
		<field name="entrydate">1143256919</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1141961140</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1141961140</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1477786</field>
	<field user_id="1368792" name="submitted_by">ms-w</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Duplicate Class Mapping Found</field>
	<field name="open_date">1146153583</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hello,

it seems I am affected of Issue 1427982, so I give
2.1.1 a try.

My first Testresult:
net.sf.dozer.util.mapping.MappingException:
java.lang.IllegalArgumentException: Duplicate Class
Mapping Found. Source: SiO_EdelmetallImpl Destination:
OEdelmetall

Extract of BeanMapping.xml

	&#60;mapping type=&#34;one-way&#34;
bean-factory=&#34;de.subito.transfer.project.sms.common.services.ExportBeanFactory&#34;&#62;
		&#60;class-a&#62;OEdelmetall&#60;/class-a&#62;
		&#60;class-b&#62;SiO_EdelmetallImpl&#60;/class-b&#62;
	&#60;/mapping&#62;

	&#60;mapping type=&#34;one-way&#34;
bean-factory=&#34;de.subito.transfer.project.sms.common.services.ImportBeanFactory&#34;&#62;
		&#60;class-a&#62;SiO_EdelmetallImpl&#60;/class-a&#62;
		&#60;class-b&#62;OEdelmetall&#60;/class-b&#62;
	&#60;/mapping&#62;

	&#60;mapping type=&#34;one-way&#34;
bean-factory=&#34;de.subito.transfer.project.sms.common.services.ExportBeanFactory&#34;&#62;
		&#60;class-a&#62;OEdelmetall&#60;/class-a&#62;
		&#60;class-b&#62;SMSSicherungsobjektImpl&#60;/class-b&#62;
	&#60;/mapping&#62;

	&#60;mapping type=&#34;one-way&#34;
bean-factory=&#34;de.subito.transfer.project.sms.common.services.ImportBeanFactory&#34;&#62;
		&#60;class-a&#62;SMSSicherungsobjektImpl&#60;/class-a&#62;
		&#60;class-b&#62;OEdelmetall&#60;/class-b&#62;
	&#60;/mapping&#62;

Declaration of Classes

public class SiO_EdelmetallImpl extends
SMSSicherungsobjektImpl implements SiO_Edelmetall
public class SMSSicherungsobjektImpl extends
TransformHelperImpl implements SMSSicherungsobjekt
public class TransformHelperImpl implements TransformHelper


public class OEdelmetall extends OMobilie implements
java.io.Serializable
public class OMobilie extends Objekt
public class Objekt implements java.io.Serializable

Because Version 2.0.1 works fine at this point and im
not seeing a duplication I think it is a error.

If not, please give me some hint for solving my problem.

Thanks.

Matthias
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1147284492</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

or even better:

  protected Method getReadMethod(Class bean) {
    if (readMethod == null ||
!readMethod.getDeclaringClass().isAssignableFrom(bean)) {
      if (field.getTheGetMethod() == null) {
        readMethod = getReadMethod(bean.getClass(),
field.getName());
      } else {
        try {
          readMethod = findAMethod(bean.getClass(),
field.getTheGetMethod());
        } catch (Exception e) {
          throw new MappingException(e);
        }
      }
    }
    return readMethod;
  }
</field>
</message>

<message>
		<field name="adddate">1147284438</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I should really open my eyes. I think I might know what the
problem is.

Try changing this:
  protected Method getReadMethod(Class bean) {
    if (readMethod == null ||
!readMethod.getDeclaringClass().isAssignableFrom(bean)) {
      if (field.getTheGetMethod() == null) {
        readMethod = getReadMethod(clazz, field.getName());
      } else {
        try {
          readMethod = findAMethod(clazz,
field.getTheGetMethod());
        } catch (Exception e) {
          throw new MappingException(e);
        }
      }
    }
    return readMethod;
  }

to this:

  protected Method getReadMethod(Class bean) {
    if (readMethod == null ||
!readMethod.getDeclaringClass().isAssignableFrom(bean)) {
      if (field.getTheGetMethod() == null) {
        readMethod = getReadMethod(clazz, field.getName());
      } else {
        try {
          readMethod = findAMethod(bean.getClass(),
field.getTheGetMethod());
        } catch (Exception e) {
          throw new MappingException(e);
        }
      }
    }
    return readMethod;
  }

Let me know if that works.</field>
</message>

<message>
		<field name="adddate">1147242282</field>
		<field name="user_name">ms-w</field>
		<field name="body">Logged In: YES 
user_id=1368792

Hello Franz,

did you miss the stacktrace in my note from &#34;2006-05-03 15:58&#34; ?
If I got the time I will try to step through to gather more
information...

Matthias</field>
</message>

<message>
		<field name="adddate">1147154196</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

It shouldn't matter that you don't have any fields. On
mappings that are flat we store the Read and Write Method
from the mapped class. Sometimes this changes during mapping
(i.e. CGLIB) but we do validate the class we are mapping is
the same class by running an isAssignable check. I have no
idea why your stuff would fail. We do cache deep hierarchy
information and do not validate that the class we found in
the deep tree is the same one that is trying to be mapped. 

hope this helps.

You could step through my code in your container. I would
also be curious to see a stacktrace so i can see what line #
it is blowing up on.

thanks,

franz</field>
</message>

<message>
		<field name="adddate">1147081946</field>
		<field name="user_name">ms-w</field>
		<field name="body">Logged In: YES 
user_id=1368792

Hello Franz,

in the Mapping SicherheitK to SMSSicherheitImpl I use no
deep-mapping. Only one field has two hints.
But in other Mappings I use also deep-Mapping.
Is it a problem to have Mappings without fields (for Example
SicherheitK to Si_GrundpfandrechtImpl which is the one with
the Problem) ?

Matthias</field>
</message>

<message>
		<field name="adddate">1146806699</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

It was definitely a sporadic thing. It was difficult to
reproduce in a container and impossible to reproduce out of
a container. Are you using deep mappings?

Franz</field>
</message>

<message>
		<field name="adddate">1146755789</field>
		<field name="user_name">ms-w</field>
		<field name="body">Logged In: YES 
user_id=1368792

It would be difficult to extract all you need. My Code runs
on Tomcat and uses Spring with Hibernate (on a Oracle-DB) to
map SicherheitK.

So it might be better to move this discussion to Issue
1427982...

I hope to get around this problem by setting lazy=&#34;false&#34; in
the Hibernate-Mapping.
In addition the Problem seems to be sporadic.

Was the situation you seen this behaviour also sporadic or
could you reproduce it ?</field>
</message>

<message>
		<field name="adddate">1146691361</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Can you attach your value objects, mapping file, and unit
test and I will be able to reproduce and (possibly) give you
a fix. The only other time I have seen that error is when
CGLIB was used and the class defined in the mapping file
actually got proxied at runtime so it was not *truly* the
same class as the one in the mapping file.

Thanks,

Franz</field>
</message>

<message>
		<field name="adddate">1146664713</field>
		<field name="user_name">ms-w</field>
		<field name="body">Logged In: YES 
user_id=1368792

With Dozer 2.2 I got

  MapId: null
  Type: bi-directional
  Source parent class: SicherheitK
  Source field name: smsID
  Source field type: generic
  Source field value: null
  Dest parent class: Si_GrundpfandrechtImpl
  Dest field name: ID
  Dest field type: java.lang.Integer
net.sf.dozer.util.mapping.MappingException:
java.lang.IllegalArgumentException: object is not an
instance of declaring class
	at
net.sf.dozer.util.mapping.propertydescriptor.BruteForcePropertyDescriptor.getPropertyValue(BruteForcePropertyDescriptor.java:112)
	at
net.sf.dozer.util.mapping.fieldmap.FieldMap.getSrcFieldValue(FieldMap.java:109)
	at
net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:258)
	at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:242)
	at
net.sf.dozer.util.mapping.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:1073)
	at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:233)
	at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:157)
	at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:140)
	at
net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:104)
Caused by: java.lang.IllegalArgumentException: object is not
an instance of declaring class
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at
net.sf.dozer.util.mapping.propertydescriptor.BruteForcePropertyDescriptor.getPropertyValue(BruteForcePropertyDescriptor.java:102)
	... 66 more

Declaration of Classes

SicherheitK
  public void setSmsID(String smsID)
  public String getSmsID()


public class Si_GrundpfandrechtImpl extends
Si_PfandrechtImpl implements Si_Grundpfandrecht

public class Si_PfandrechtImpl extends SMSSicherheitImpl
implements Si_Pfandrecht

public class SMSSicherheitImpl implements SMSSicherheit
  private Integer m_ID;
  public Integer getID()
  public void setID(Integer p_ID)


Extract of BeanMapping.xml

	&#60;mapping type=&#34;one-way&#34;
bean-factory=&#34;de.subito.transfer.project.sms.common.services.ExportBeanFactory&#34;&#62;
	
&#60;class-a&#62;de.subito.transfer.project.sms.common.domain.model.SicherheitKrebis&#60;/class-a&#62;
	
&#60;class-b&#62;de.subito.transfer.project.sms.common.domain.fitbean.Si_GrundpfandrechtImpl&#60;/class-b&#62;
	&#60;/mapping&#62;


	&#60;mapping type=&#34;one-way&#34; bean-factory=&#34;ExportBeanFactory&#34;&#62;
		&#60;class-a&#62;SicherheitK&#60;/class-a&#62;
		&#60;class-b&#62;SMSSicherheitImpl&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;smsID&#60;/a&#62;
			&#60;b&#62;ID&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;

	&#60;mapping type=&#34;one-way&#34; bean-factory=&#34;ImportBeanFactory&#34;&#62;
		&#60;class-a&#62;SMSSicherheitImpl&#60;/class-a&#62;
		&#60;class-b&#62;SicherheitK&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;ID&#60;/a&#62;
			&#60;b&#62;smsID&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;

What went wrong and what meens &#34;Source field type: generic&#34; ?

Thanks.

Matthias</field>
</message>

<message>
		<field name="adddate">1146237183</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Issue 1427982 was taken out for 2.1.1. I thought it was a
severe performance hit...but after studying it some more I
think I will put it back into the 2.1.2 release this week. 

The bug fix was to add to BruteForcePropertyDescriptor.java was:

  protected Method getReadMethod(Class bean) {
    if (readMethod == null ||
!readMethod.getDeclaringClass().isAssignableFrom(bean)) {

vs. 

  protected Method getReadMethod(Class bean) {
    if (readMethod == null) {

This should also be done for   public Method getWriteMethod() {.

Now...your duplicate class mapping does look like a bug. We
create maps bi-directionally...so the class map key was
added bi-directionally for your one way map. This will be
fixed for 2.1.2 released this week.

Thanks for the help!

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146347629</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1146346144</field>
		<field name="entrydate">1146347629</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1146346144</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1146346144</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1146237183</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1474216</field>
	<field user_id="1098203" name="submitted_by">bhickey</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">custom converter(s) and primitive matching</field>
	<field name="open_date">1145627799</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Attempting bi-directional custom conversion. toString 
on TestCustomConverterObject is being employed rather 
then the custom conversion. conversion from 
TestCustomConverterObjectPrime to 
TestCustomConverterObject works okay, but conversion 
other way fails:


net.sf.dozer.util.mapping.converters.ConversionExcepti
on: org.apache.commons.beanutils.ConversionException: 
For input 
string: &#34;net.sf.dozer.util.mapping.vo.CustomDoubleObje
ct@1a1c887[
  theDouble=25.0
  name=&#60;null&#62;
]&#34;
	at 
net.sf.dozer.util.mapping.util.MappingUtils.convertPri
mitiveOrWrapper(MappingUtils.java:486)
	at 
net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurs
eObject(MappingProcessor.java:523)
	at 
net.sf.dozer.util.mapping.MappingProcessor.mapFromFiel
dMap(MappingProcessor.java:359)
	at 
net.sf.dozer.util.mapping.MappingProcessor.map
(MappingProcessor.java:334)
	at 
net.sf.dozer.util.mapping.MappingProcessor.map
(MappingProcessor.java:108)
	at 
net.sf.dozer.util.mapping.DozerBeanMapper.map
(DozerBeanMapper.java:75)
	at DozerBeanMapperTest.testCustomConverter
(DozerBeanMapperTest.java:69)
	at 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native 
Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke
(NativeMethodAccessorImpl.java:39)
	at 
sun.reflect.DelegatingMethodAccessorImpl.invoke
(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke
(Method.java:585)
	at junit.framework.TestCase.runTest
(TestCase.java:154)
	at junit.framework.TestCase.runBare
(TestCase.java:127)
	at junit.framework.TestResult$1.protect
(TestResult.java:106)
	at junit.framework.TestResult.runProtected
(TestResult.java:124)
	at junit.framework.TestResult.run
(TestResult.java:109)
	at junit.framework.TestCase.run
(TestCase.java:118)
	at junit.framework.TestSuite.runTest
(TestSuite.java:208)
	at junit.framework.TestSuite.run
(TestSuite.java:203)
	at 
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner
.runTests(RemoteTestRunner.java:392)
	at 
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner
.run(RemoteTestRunner.java:276)
	at 
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner
.main(RemoteTestRunner.java:167)
Caused by: 
org.apache.commons.beanutils.ConversionException: For 
input 
string: &#34;net.sf.dozer.util.mapping.vo.CustomDoubleObje
ct@1a1c887[
  theDouble=25.0
  name=&#60;null&#62;
]&#34;
	at 
org.apache.commons.beanutils.converters.DoubleConverte
r.convert(DoubleConverter.java:164)
	at 
net.sf.dozer.util.mapping.util.MappingUtils.convertPri
mitiveOrWrapper(MappingUtils.java:484)
	... 21 more
Caused by: java.lang.NumberFormatException: For input 
string: &#34;net.sf.dozer.util.mapping.vo.CustomDoubleObje
ct@1a1c887[
  theDouble=25.0
  name=&#60;null&#62;
]&#34;
	at 
sun.misc.FloatingDecimal.readJavaFormatString
(FloatingDecimal.java:1224)
	at java.lang.Double.valueOf(Double.java:447)
	at java.lang.Double.&#60;init&#62;(Double.java:539)
	at 
org.apache.commons.beanutils.converters.DoubleConverte
r.convert(DoubleConverter.java:159)
	... 22 more

Here is the source code for junit test case:

TestCustomConverterObjectPrime prime = new 
TestCustomConverterObjectPrime();
		prime.setDoubleAttribute(25.00);
		TestCustomConverterObject obj = 
(TestCustomConverterObject)mapper.map(prime, 
TestCustomConverterObject.class);
		CustomDoubleObject customDouble = 
obj.getAttribute();
		assertNotNull(customDouble);
		assertTrue(prime.getDoubleAttribute()
==obj.getAttribute().getTheDouble());
		
		// test conversion in the other 
direction
		try {
			prime = 
(TestCustomConverterObjectPrime)mapper.map(obj, 
TestCustomConverterObjectPrime.class);
		} catch (Exception e) {
			// TODO Auto-generated catch 
block
			e.printStackTrace();
			throw e;
		}
		assertTrue(prime.getDoubleAttribute()
==obj.getAttribute().getTheDouble());

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1145646488</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I fixed this and it is in v21Branch. Wasn't really a
bug...we did not look at primitives in the custom converter
code when trying to find a destination custom converter. I
have attached the fix. Please let me know if this fixes the
problem. This will be in the next release scheduled for next
week.

thanks

franz</field>
</message>

<message>
		<field name="adddate">1145638245</field>
		<field name="user_name">bhickey</field>
		<field name="body">Logged In: YES 
user_id=1098203

have added the requested files and my associated 
dozerMapper.xml</field>
</message>

<message>
		<field name="adddate">1145638187</field>
		<field name="user_name">bhickey</field>
		<field name="body">Logged In: YES 
user_id=1098203

chief difference I see is the usage of the double 
primitive vs. the java.lang.Double. Should this make
a difference?</field>
</message>

<message>
		<field name="adddate">1145635920</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Using the v21Branch I ran this test successfully:

  public void testCustomConverterBiDirectional() throws
Exception {
    TestCustomConverterObjectPrime prime = new
TestCustomConverterObjectPrime();
    prime.setDoubleAttribute(new Double(25.00));
    TestCustomConverterObject obj =
(TestCustomConverterObject) mapper.map(prime,
TestCustomConverterObject.class);
    CustomDoubleObjectIF customDouble = obj.getAttribute();
    assertNotNull(customDouble);
    assertTrue(prime.getDoubleAttribute().doubleValue() ==
obj.getAttribute().getTheDouble());

    // test conversion in the other direction
    try {
      prime = (TestCustomConverterObjectPrime)
mapper.map(obj, TestCustomConverterObjectPrime.class);
    } catch (Exception e) {
      e.printStackTrace();
      throw e;
    }
    assertTrue(prime.getDoubleAttribute().doubleValue() ==
obj.getAttribute().getTheDouble());
  }

Notice I had to change a couple lines to align it with our
current test objects. Can you attach the test objects you
were using?

Thanks,

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1146347630</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1145646519</field>
		<field name="entrydate">1146347630</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1145646519</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">custom converter(s)</field>
		<field name="entrydate">1145646519</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1145646519</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">175384: CustomConverterContainer.java</field>
		<field name="entrydate">1145646490</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">175374: TestCustomConverter.java</field>
		<field name="entrydate">1145638042</field>
		<field name="mod_by">bhickey</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">175373: dozerBeanMapping.xml</field>
		<field name="entrydate">1145637475</field>
		<field name="mod_by">bhickey</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">175372: TestCustomConverterObjectPrime.java</field>
		<field name="entrydate">1145637431</field>
		<field name="mod_by">bhickey</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">175371: CustomDoubleObject.java</field>
		<field name="entrydate">1145637399</field>
		<field name="mod_by">bhickey</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">175370: BaseTestObject.java</field>
		<field name="entrydate">1145637344</field>
		<field name="mod_by">bhickey</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">175368: TestCustomConverterObject.java</field>
		<field name="entrydate">1145636070</field>
		<field name="mod_by">bhickey</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1145635920</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">175350: DozerBeanMapperTest.java</field>
		<field name="entrydate">1145627800</field>
		<field name="mod_by">bhickey</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1543202</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">String to Set w/ Dest Type Hint not working</field>
	<field name="open_date">1156014473</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Currently the dest set contains a set within a Set.  
It should contain a Set with dest type entries.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1156026283</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

fixed</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1156026283</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1156026283</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1156026283</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1156014485</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1538441</field>
	<field user_id="7747" name="submitted_by">pmonks</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Unable to map to SortedSet</field>
	<field name="open_date">1155271272</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">If the target of a collection mapping is a
java.util.SortedSet Dozer fails with the following
exception:

net.sf.dozer.util.mapping.MappingException:
java.lang.IllegalArgumentException: argument type mismatch
	at
net.sf.dozer.util.mapping.propertydescriptor.BruteForcePropertyDescriptor.setPropertyValue(BruteForcePropertyDescriptor.java:94)
	at
net.sf.dozer.util.mapping.fieldmap.FieldMap.writeDestinationValue(FieldMap.java:119)
	at
net.sf.dozer.util.mapping.MappingProcessor.writeDestinationValue(MappingProcessor.java:936)
	at
net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:349)
	at
net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:299)
	at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:242)
	at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:129)
	at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:108)
	at
net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:100)
	at
net.pmonks.dozer.test.DozerTest.testArrayToSortedSet(DozerTest.java:32)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown
Source)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown
Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at junit.framework.TestCase.runTest(TestCase.java:164)
	at junit.framework.TestCase.runBare(TestCase.java:130)
	at
junit.framework.TestResult$1.protect(TestResult.java:106)
	at
junit.framework.TestResult.runProtected(TestResult.java:124)
	at junit.framework.TestResult.run(TestResult.java:109)
	at junit.framework.TestCase.run(TestCase.java:120)
	at junit.framework.TestSuite.runTest(TestSuite.java:230)
	at junit.framework.TestSuite.run(TestSuite.java:225)
	at
org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:128)
	at
org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
	at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
	at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
	at
org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)
Caused by: java.lang.IllegalArgumentException: argument
type mismatch
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native
Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown
Source)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown
Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at
net.sf.dozer.util.mapping.propertydescriptor.BruteForcePropertyDescriptor.setPropertyValue(BruteForcePropertyDescriptor.java:85)
	... 27 more



Dozer should support SortedSets since they're used
quite frequently in Hibernate POJOs.

The attached JUnit test case demonstrates this behaviour.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155364970</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Added support for SortedSet subinterface</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155420235</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1155420235</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155364970</field>
		<field name="entrydate">1155420235</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1155364970</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155364970</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155364970</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">188616: DozerTestSortedSet.zip</field>
		<field name="entrydate">1155271273</field>
		<field name="mod_by">pmonks</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1537668</field>
	<field user_id="937427" name="submitted_by">netdpb</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">FieldMap source descriptor caching broken</field>
	<field name="open_date">1155156514</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">FieldMap.getSourcePropertyDescriptor(Class) improperly
caches the source property descriptor from its first
call. It assumes that the concrete class of the object
returned from all invocations of the field map will
match the concrete class of the object returned from
the first invocation. That is not necessarily true, and
when it is not it can lead to an
IllegalArgumentException thrown from line 102 of
BruteForcePropertyDescriptor.

The exception case is this:

class Foo { public Bar getBar() {...} }

class Bar { public Long getId() {...} }

class SubBar extends Bar { public Long getId() {...} }

The first time the fieldmap for Foo that includes Bar
as a source field is called, getBar() returns an object
of class SubBar.

A BruteForcePropertyDescriptor is created whose clazz
property is SubBar. When getting the id property, the
readMethod property is generated to be SubBar.getId()
and cached. The propertydescriptor is cached too. So
far so good.

The next time the Foo fieldmap is called, getBar()
returns an object of class Bar. Because the
propertydescriptor for the &#34;bar&#34; property is cached, we
use that to get the Bar's &#34;id&#34; property. But the read
method is declared on SubBar and cannot be invoked on
Bar -- hence the exception.

It looks like there was some attempt to address this
issue (line 317 of
BruteForcePropertyDescriptor.getReadMethod(Class)). But
this fails for several reasons:

1. getReadMethod(Class) is called (from line 102 of
BruteForcePropertyDescriptor.getPropertyValue(Object))
with the cached class, not the actual class of the bean
being accessed.
2. Even if (1) were fixed, when resetting the read
method (line 319) the cached class is again used
instead of the argument.

I've attached a patch to FieldMap that represents a
different solution to this problem: one that trades off
the speed hit of repeatedly using reflection to change
the read method for a small space hit of caching the
source property descriptors in a Map with the
sourceClass as a key, in getSourcePropertyDescriptor.
This way each concrete class represented by objects
returned by a get method will have its own source
property descriptor, so there will never be confusion
as to what class declares the read method. Please take
a look. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155445735</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

David,
Forgot to ask if you have a unit test that you could 
provide that reproduces the original issue.  If so, please 
attach that to the bug and I can test it prior to 
releasing the code.</field>
</message>

<message>
		<field name="adddate">1155445612</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

David, 
The patch worked great.  After applying the patch code, 
the unit tests ran 100% green.  I also tested performance 
impacts against our baseline and I did not notice any 
significant differences.  I will check in your patch 
code.  I am also going to investigate whether we can apply 
the same concept to other code that caches property 
descriptors.  Thanks!</field>
</message>

<message>
		<field name="adddate">1155244048</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Thanks for the patch David. When (If?) we have another
release I will be sure to get this in.

Thanks for looking.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155445640</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1157091856</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155445640</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155445640</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">188423: FieldMap.patch</field>
		<field name="entrydate">1155156514</field>
		<field name="mod_by">netdpb</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1503670</field>
	<field user_id="302" name="submitted_by">jherico</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">in place collection mapping not supported</field>
	<field name="open_date">1149880352</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">given the following classes...

class Foo {
  private List&#60;Long&#62; categories = null;

  public List&#60;Long&#62; getCategories() {
    return this.categories;
  }

  public void setCategories(List&#60;Long&#62; list) {
    return this.categories = list;
  }
}

class FooPrime {
  private List&#60;Long&#62; categories = null;

  public List&#60;Long&#62; getCategories() {
    if (categories == null) {
      categories = new ArrayList&#60;Long&#62;();
    }
    return this.categories;
  }
}

There is no way to map an instance of class FooPrime as
a destination class, because it contains no setter. 
However, the design pattern of a list that can't be
replaced, but must be modfied in place is common in
both Hibernate and Jaxb generated classes.  </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155420207</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I fixed this issue via Field.setAccessible().
    field = bean.getDeclaredField(fieldName);
    //Allow access to private instance var's that dont 
have public setter.  &#34;is-accessible=true&#34; must be 
explicitly specified in 
    //mapping file to allow this access.  setAccessible 
indicates intent to bypass field protections.
    field.setAccessible(isAccessible);
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155420207</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155420207</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1155420207</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155420207</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1480666</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Index Mapping with a Set</field>
	<field name="open_date">1146602545</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We could not map mySet[0] to a property. This is fixed
for next release on v21XBranch.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155493996</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Is the code checked into v21XBranch and we can move this 
defect to pending?</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1156118909</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1156118909</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1156118909</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1468980</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Superclass reflection issue</field>
	<field name="open_date">1144812052</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I've got a bidirectional mapping defined on a
collection property with 
custom
get-method &#38; set-method definitions.  When I pass in an
instance of a 
subclass
for mapping, I'm getting a reflection error when it's
trying to look up 
the
getter method from the subclass.  Looking in the
FieldMap code 
(findMethodWithParam
line 256), the Class.getDeclaredMethod is used on the
subclass 
instance, which
fails to find the appropriate getter method in the
superclass.  When I 
changed
the line to Class.getMethod, it found the getter in the
superclass.  
Did I miss
something in the mapping?  Or is this a possible bug?</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1144820589</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1144817833</field>
		<field name="entrydate">1144820589</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1144817833</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1144817833</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1539461</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add validation that map-id\'s are unique</field>
	<field name="open_date">1155454586</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Error if dup map=ids are found</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155499852</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Add validation that map-id's are unique</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1155499852</field>
		<field name="entrydate">1157162435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155499852</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155499852</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1700448</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Global Bean Factory not used for default mappings</field>
	<field name="open_date">1176517617</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">For mappings w/o any mapping xml entry, the global bean factory is not being applied

http://sourceforge.net/forum/forum.php?thread_id=1714185&#38;forum_id=452530</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1176701706</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

fixed.  this will be included in the next release</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177645496</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177463500</field>
		<field name="entrydate">1177645496</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177463500</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177463500</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1176701706</field>
		<field name="entrydate">1177463457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177463457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1177463457</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1176701706</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1176701706</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1644966</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Custom Converter Cache Not Being Used</field>
	<field name="open_date">1169786144</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I found this bug while profiling a performance test that was recently submitted.  It appears the CustomConverterContainer class is not always correctly putting cache entries into the cache.  Thus, the cache is not being used for certain use cases.  For the perf test I am profiling, correcting this issue improved perf by 24%</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1169860105</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

fixed and checked in</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1169860105</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1169860105</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1169860105</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1637106</field>
	<field user_id="7747" name="submitted_by">pmonks</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Regression: inherited setters not found in XMLBeans classes</field>
	<field name="open_date">1168979975</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Following on from defect 1636354 I've isolated the problem I'm seeing in my real code, and this problem is a regression in Dozer 2.4 (the same unit tests pass with Dozer 2.2 and 2.3).

Basically what's happening is that Dozer is unable to find the setters for the &#34;inherited&#34; fields - it throws the following exception:

net.sf.dozer.util.mapping.MappingException: Unable to determine write method for field: id class: interface net.pmonks.xml.dozer.test.ChildType
	at net.sf.dozer.util.mapping.propertydescriptor.BruteForcePropertyDescriptor.getWriteMethod(BruteForcePropertyDescriptor.java:142)
	at net.sf.dozer.util.mapping.propertydescriptor.BruteForcePropertyDescriptor.getWriteMethod(BruteForcePropertyDescriptor.java:260)
	at net.sf.dozer.util.mapping.propertydescriptor.BruteForcePropertyDescriptor.getPropertyType(BruteForcePropertyDescriptor.java:63)
	at net.sf.dozer.util.mapping.fieldmap.FieldMap.getDestFieldType(FieldMap.java:78)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:313)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:277)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:230)
	at net.sf.dozer.util.mapping.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:1026)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:222)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:136)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:110)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:108)
	at net.pmonks.dozer.test.DozerTest.testPojoToXmlBean(DozerTest.java:43)


I've attached a JUnit test that demonstrates this problem - it's virtually identical to the test case attached to defect 1636354, but with one change: the &#34;inherited&#34; fields are explicitly listed in the mappings file to workaround the (broken) wildcard mapping problem described in that defect report.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1170031011</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I have a fix for this defect, but not for #1636354 which is caused by the same root problem with Introspector.

To resolve this defect, I modified the dozer code to use the actual runtime class when introspecting to find read/write methods.  Before it was using the class specified in the mapping file.  So if class specified in the xml file was an IF, at runtime dozer would use the IF class for introspection.  Using the runtime implementation may be a good thing anyways and may resolve some of the strange &#34;could not determine read/write&#34; runtime errors that have been reported.  I wonder if these use cases had interface inheritance??  This may also resolve some of the other strange errors with proxied classes that have been reported in the past, but it's hard to say for sure.  After making these changes, all regression tests ran green and performance numbers didn't change.</field>
</message>

<message>
		<field name="adddate">1170028138</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

PropertyUtils.getPropertyDescriptors() just calls Introspector.getBeanInfo(), so this is where the root cause seems to be.  I believe the interface inheritance issue with Introspector is a known issue.  I am looking for alternatives</field>
</message>

<message>
		<field name="adddate">1170027009</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I was able to recreate the issue using your test case.  I think both bugs(this and 1636354) are caused by the same root cause.  I don't think it is specific to XMLBean objects.  The problem appears to be with apache commons bean utils PropertyUtils.getPropertyDescriptors().  Dozer uses this api internally to introspect data objects via reflection.  The getPropertyDescriptors doesn't return the correct results when you have interface inheritance.  If you run the following you will see the problem.  It does not return the properties in the super interface.  This is not a problem with concrete classes though.  I am investigating alternatives.

PropertyDescriptor[] pds = PropertyUtils.getPropertyDescriptors(net.pmonks.xml.dozer.test.ChildType.class);</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1170031011</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1170041676</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1170031011</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1170031011</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Regression: setters not found in XMLBeans classes</field>
		<field name="entrydate">1168979995</field>
		<field name="mod_by">pmonks</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">211585: DozerTestXMLBeans-2.zip</field>
		<field name="entrydate">1168979975</field>
		<field name="mod_by">pmonks</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1636354</field>
	<field user_id="7747" name="submitted_by">pmonks</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Wildcard mapping not working with XMLBeans</field>
	<field name="open_date">1168907839</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I'm currently running Dozer 2.2 but have run into problems with ConcurrentModificationExceptions.  Seeing that some of these have been fixed I'm attempting to upgrade to Dozer 2.4, but have run into some regressions.  Specifically, wildcard mapping no longer seems to pick up attributes that are &#34;inherited&#34; in the XML Schema (XML Beans converts this into a hierarchy of interfaces in the generated code).

The attached JUnit test demonstrates this behaviour: the &#34;Fu&#34; and &#34;Bar&#34; attributes of the generated &#34;ChildType&#34; class are mapped correctly, while the &#34;Id&#34; and &#34;Name&#34; attributes (inherited from &#34;ParentType&#34;) are not mapped at all.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1170054811</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I fixed this issue in the 2.5 code base w/o much trouble.  We have a reflection utils class that encapsulates the use of the problem PropertyUtils, so I was able to just add some logic to that class to handle the interface inheritance scenario.  The logic added just recursively walks the inheritance hierarchy for interfaces looking for all property descriptors.  All unit tests pass after making the change.  I googled for Introspector.getBeanInfo issues for interface inheritance and it looks as if it's been a problem for a long time.

Peter, thanks for letting us know about the issue!</field>
</message>

<message>
		<field name="adddate">1170031387</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I was able to recreate the issue using your test case.  Thanks again for submitting the test case.  It saved me a bunch of time.  

After looking at the code, I think this issue has been around forever and I don't think it
is specific to XMLBean objects.  The problem appears to be specific to interface inheritance.  Dozer uses apache commons bean util's PropertyUtils.getPropertyDescriptors() introspect data objects via reflection.  Unfortunately the getPropertyDescriptors doesn't return super class properties when you have interface inheritance.  If you dig deeper, the real problem appears to be in Introspector.getBeanInfo() which PropertyUtils uses.

PropertyDescriptor[] pds =
PropertyUtils.getPropertyDescriptors(net.pmonks.xml.dozer.test.ChildType.class);


</field>
</message>

<message>
		<field name="adddate">1169013761</field>
		<field name="user_name">pmonks</field>
		<field name="body">Logged In: YES 
user_id=7747
Originator: YES

Thanks Matt - one of things I like about Dozer is how responsive you guys are.  The least I can do is provide unit tests to help you troubleshoot things!  ;-)</field>
</message>

<message>
		<field name="adddate">1168990584</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Thanks for the addt'l information.  This will help diagnosing the issue.  I probably wont get a chance to work on this before the weekend/early next week.  I am going to be working on the release next week so that is when I will probably look deeper into the issue.  Thanks again for the unit tests.  I can't tell you how much easier that makes it for me to diagnose.  In the meantime, just let me know if you find any more clues.</field>
</message>

<message>
		<field name="adddate">1168979251</field>
		<field name="user_name">pmonks</field>
		<field name="body">Logged In: YES 
user_id=7747
Originator: YES

I just ran the unit tests against both 2.3 and 2.2, and they fail the same way on all three versions (2.2, 2.3 and 2.4).  This suggests that either it's a new problem rather than a regression, or I've done something wrong in the unit test (which seems unlikely given how simple it is).  Perhaps you could give the test scenario a quick once over to make sure I didn't do anything silly?

I'm also going to dive back into my real code and work out why 2.2 is working whereas 2.4 isn't - it must be something else that's causing problems.</field>
</message>

<message>
		<field name="adddate">1168969585</field>
		<field name="user_name">pmonks</field>
		<field name="body">Logged In: YES 
user_id=7747
Originator: YES

G'day Matt,

I'll give Dozer 2.3 a spin later on today and report back with the results.  I've also updated the JUnit test slightly to more clearly demonstrate the problem (I moved the failing assertions for &#34;Id&#34; and &#34;Name&#34; to the end, to show that &#34;Fu&#34; and &#34;Bar&#34; are being mapped correctly).

Cheers,
Peter
File Added: DozerTestXMLBeans.zip</field>
</message>

<message>
		<field name="adddate">1168969260</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Thanks for the submission and including a junit test.  I will look at this very soon.  We are planning the next release towards the end of this month so I will do everything I can to resolve this in that release.

Did you happen to try it with the 2.3 jar.  I am trying to narrow down whether the issue showed up in 2.3 or the latest 2.4</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1170054811</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1170054811</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1170054811</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1170041650</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Wilcard mapping not working with XMLBeans</field>
		<field name="entrydate">1168989801</field>
		<field name="mod_by">pmonks</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Regression: wilcard mapping not working with XMLBeans</field>
		<field name="entrydate">1168979251</field>
		<field name="mod_by">pmonks</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">211464: </field>
		<field name="entrydate">1168969586</field>
		<field name="mod_by">pmonks</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">211555: DozerTestXMLBeans.zip</field>
		<field name="entrydate">1168969585</field>
		<field name="mod_by">pmonks</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">211464: DozerTestXMLBeans.zip</field>
		<field name="entrydate">1168907839</field>
		<field name="mod_by">pmonks</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2738516</field>
	<field user_id="1011684" name="submitted_by">craigandrews</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Keep DTD available for those who haven't upgraded yet</field>
	<field name="open_date">1239048825</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">http://dozer.sourceforge.net/dtd/dozerbeanmapping.dtd no longer works. So projects that rely on this DTD being available at that URL do not break, can you make the old DTD available there? Thanks!</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1240320771</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1240320772</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240320772</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1240320772</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1240320772</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1657562</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Test Cases section not diplaying correctly in web site docs</field>
	<field name="open_date">1171233836</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">For each Test it is showing all the tests across test files</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1187580850</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

This magically resolved itself.  Not quite sure which change did it.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917454</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1187580850</field>
		<field name="entrydate">1190917454</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177469868</field>
		<field name="entrydate">1187580850</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1187580850</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">3</field>
		<field name="entrydate">1187580850</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177469868</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177469868</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1616229</field>
	<field user_id="1662760" name="submitted_by">jarlesa</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping from object to array</field>
	<field name="open_date">1166172503</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I've submitted a post on the developer forum. Does not seem to be much activity there, and this place is probably the right place to submit it.

Given the two classes (with appropriate get'ers and set'ers): 
 
public class Source { 
String a; 
String b; 
// get'ers and set'ers follows 
} 
 
public class Destination { 
String a; 
String b[]; 
// get'ers and set'ers follows 
} 
 
The mapping looks like this: 
 
&#60;mappings&#62; 
&#60;configuration&#62; 
&#60;stop-on-errors&#62;true&#60;/stop-on-errors&#62; 
&#60;/configuration&#62; 
&#60;mapping map-null=&#34;false&#34;&#62; 
&#60;class-a&#62;Source&#60;/class-a&#62; 
&#60;class-b&#62;Destination&#60;/class-b&#62; 
&#60;field&#62; 
&#60;a&#62;a&#60;/a&#62; 
&#60;b&#62;a&#60;/b&#62; 
&#60;/field&#62; 
&#60;field&#62; 
&#60;a&#62;b&#60;/a&#62; 
&#60;b&#62;b[0]&#60;/b&#62; 
&#60;b-hint&#62;java.lang.String&#60;/b-hint&#62; 
&#60;/field&#62; 
&#60;/mapping&#62; 
&#60;/mappings&#62; 
 
If an object of class Source is: 
 
Source.a = &#34;This is a&#34; 
Source.b = &#34;This is b&#34; 
 
one would assume that the resulting destination was:

Destination.a = &#34;This is a&#34; 
Destination.b = { &#34;This is b&#34; } 
 
while it in fact becomes
 
Destination.a = &#34;This is a&#34; 
Destination.b = { &#34;This is b&#34;, null } 
 
The mapping works if the destination mapping is &#60;b&#62;b[i]&#60;/b&#62; where i is greater than 0. 
 
The reason for this behavior seems to be the class net.sf.dozer.util.mapping.propertydescriptor.BruteForcePropertyDescriptor. The method writeIndexedValue has the following code snippet: 
 
if (returnType.isArray()) { 
o = Array.newInstance(returnType.getComponentType(), 1); 
} else if (collectionUtils.isSet(returnType)) { 
o = new HashSet(); 
} else { // default 
o = new ArrayList(); 
} 
 
It creates either an empty ArrayList, an empty HashSet or an array containing a null object. By changing it to call Array.newInstance( returnType.getComponentType(), 0) instead, the above mapping works as one would assume. As far as I have been able to test none of the unit tests breaks by doing this.

The patched source file is attached for inclusion if found appropriate.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1170541653</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Patch applied and all tests work.</field>
</message>

<message>
		<field name="adddate">1166215671</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Thanks for the patch. I will test and apply to the 2.5 codebase.

Thanks for your help and time.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1170541653</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1170541653</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1170541653</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1166215671</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">207304: BruteForcePropertyDescriptor.java</field>
		<field name="entrydate">1166172503</field>
		<field name="mod_by">jarlesa</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1615377</field>
	<field user_id="418413" name="submitted_by">cmathrusse</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">ClassMapFinder does not find ClassMap for interfaces</field>
	<field name="open_date">1166055789</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Environment: Spring 2.0
Dozer: 2.4

IN Dozer 2.2, my mappings were defined specifying interfaces. Everything worked well.

Upgrading to 2.4, and this happens in 2.3 as well, causes mappings to break when a field has a map-id defined and the class mappings within that map are specified as interfaces.

 In 2.2, the MappingProcessor would try to determine the ClassMap based upon map-id, if one was provided. 
 
MappingProcessor: line 1214: determineClassMap(Object sourceObj, Class destClass, String mapId, boolean isInstance)
 
But in 2.4, the determineClassMap method was replaced with getClassMap, which utilizes the ClassMapFinder class. This class performs a lookup based upon a generated key rather than relying upon only the map-id.
 
When executing my app, the keys that resided within the customerMappings were as follows:
[com.sybase.it.rosettanet.pip3A4.purchaseorder.ShipTocom.sybase.it.cosmos.domain.ShipToShipTo, com.sybase.it.rosettanet.pip3A4.purchaseorder.PhysicalAddress01com.sybase.it.cosmos.domain.PhysicalLocationPhysicalAddress, com.sybase.it.cosmos.domain.PhysicalLocationcom.sybase.it.rosettanet.pip3A4.purchaseorder.PhysicalAddress01PhysicalAddress, com.sybase.it.cosmos.domain.ShipTocom.sybase.it.rosettanet.pip3A4.purchaseorder.ShipToShipTo, com.sybase.it.rosettanet.pip3A4.purchaseorder.Pip3A4PurchaseOrderRequestcom.sybase.it.cosmos.domain.ShipToCBSS, com.sybase.it.cosmos.domain.ShipTocom.sybase.it.rosettanet.pip3A4.purchaseorder.Pip3A4PurchaseOrderRequestCBSS]

But the generated key was as follows:
com.sybase.it.rosettanet.pip3A4.purchaseorder.impl.ShipToImplcom.sybase.it.cosmos.domain.ShipToShipTo

The newly generated key utilizes the passed in source class and destination class to generate a key. The problem is that my mappings for my source object are based upon interfaces rather than on implementations, so the lookup fails. The lookup would have succeeded had the key been as follows:
com.sybase.it.rosettanet.pip3A4.purchaseorder.ShipTocom.sybase.it.cosmos.domain.ShipToShipTo
rather than
com.sybase.it.rosettanet.pip3A4.purchaseorder.impl.ShipToImplcom.sybase.it.cosmos.domain.ShipToShipTo
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1169019362</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

I have applied this change into the 2.5 branch...

I think that we can avoid this bug in adding the follow test :
( mapId == null || ((String)keys[i]).endsWith(mapId) ) to determine the
class map (see previous comment)</field>
</message>

<message>
		<field name="adddate">1168875615</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

I will test this and apply for the 2.5 release.</field>
</message>

<message>
		<field name="adddate">1168849363</field>
		<field name="user_name">bilousme</field>
		<field name="body">Logged In: YES 
user_id=1686499
Originator: NO

I tested this morning your patch but it doesn't resolve my bug.
I think that I didn't explain correctly my problem.

I have one class with two differents mappings. To differentiate the two mappings, I use thus the &#34;map-id&#34; property in my xml file. 

&#60;mappings&#62;          
  &#60;!-- mapping used in case of getCampaign ... All attributes are mapped --&#62;
  &#60;mapping map-id=&#34;fullMapping&#34;&#62; 
    &#60;class-a&#62;mypackage.crm.dim.domain.Campaign&#60;/class-a&#62;
    &#60;class-b&#62;mypackage.crm.dim.to.CampaignTO&#60;/class-b&#62;   
    ...   
  &#60;/mapping&#62;  
  
   &#60;!-- mapping used in case of listCampaign ... For performance reason, only attribute displayed are mapped !--&#62;
  &#60;mapping map-id=&#34;softMapping&#34;&#62; 
    &#60;class-a&#62;mypackage.crm.dim.domain.Campaign&#60;/class-a&#62;
    &#60;class-b&#62;mypackage.crm.dim.to.CampaignTO&#60;/class-b&#62;   
    ...
  &#60;/mapping&#62;  
&#60;/mappings&#62;

As I use Hibernate, proxies are used in place of mypackage.crm.dim.domain.Campaign and Dozer uses thus the method &#34;findInterfaceOrAbstractMapping(Map customMappings, Class destClass, Object sourceObj, String mapId)&#34; to determine the ClassMap.

But in this method, you don't use the parameter &#34;String mapId&#34; to determine the class map. And thus when Dozer calls this method with differents map-id, it returns always the same mapping !!

I think that we can avoid this bug in adding the follow test :
( mapId == null || ((String)keys[i]).endsWith(mapId) ) to determine the class map (see previous comment)


I would like to thank you for your fast support. 


</field>
</message>

<message>
		<field name="adddate">1168835892</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Change has been added to 2.5 branch.</field>
</message>

<message>
		<field name="adddate">1168409754</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Let me talk with the other developer. I hope to release before then.

Thanks,

Franz</field>
</message>

<message>
		<field name="adddate">1168325863</field>
		<field name="user_name">bilousme</field>
		<field name="body">Logged In: YES 
user_id=1686499
Originator: NO

Do you have an idea on the date of the release 2.5 ?
I'm working on an important application who must be finished at the february's beginning. Can I hope that the release 2.5 will be released at this date ?
This bug is blocking for me but I can find a workaround if the release 2.5 arrives after february.

Thks.

Julien</field>
</message>

<message>
		<field name="adddate">1168286425</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

I actually have a patch for this. I just need to apply it to the 2.5 codebase. I will update this ticket when I have done that.

Franz</field>
</message>

<message>
		<field name="adddate">1168268978</field>
		<field name="user_name">bilousme</field>
		<field name="body">Logged In: YES 
user_id=1686499
Originator: NO

I have the same problem.
Context :
I use Dozer to map my Domain Object to my transfert Object. The persistence in domain object model is managed by Hibernate. Hibernate use proxy in place of my real class. Dozer use thus the method 
&#34;public ClassMap findInterfaceOrAbstractMapping(Map customMappings, Class destClass, Object sourceObj, String mapId)&#34;
to determine the ClassMap.

There is a bug in this method because you use never the parameter &#34;String mapId&#34;.

The resolution is simple (that work for my use cases), in the test done, we must add a test on mapId : 
&#38;&#38; ( mapId == null || ((String)keys[i]).endsWith(mapId))

The (possible) corrected method :

public ClassMap findInterfaceOrAbstractMapping(Map customMappings, Class destClass, Object sourceObj, String mapId) {
    ClassMap newClassMap = null;
    Class newClass = null;
    //Use object array for keys to avoid any rare thread synchronization issues while iterating
    //over the custom mappings.  See bug #1550275.
    Object[] keys = customMappings.keySet().toArray();
    for (int i = 0; i &#60; keys.length; i++) {
      ClassMap map = (ClassMap) customMappings.get(keys[i]);
      Class dest = map.getDestClass().getClassToMap();
      
      // is Assignable?
      // now that we have the a sub class for the abstract class or interface we need to
      // verify that the source class in the map IS a super class of the source object...or the source object            itself.
      if (destClass.isAssignableFrom(dest)
          &#38;&#38; (map.getSourceClass().getClassToMap().isAssignableFrom(sourceObj.getClass()) || map.getSourceClass()
              .getClassToMap().isInstance(sourceObj))
          // look for most specific mapping
          &#38;&#38; (newClass == null || newClass.isAssignableFrom(dest))
          &#38;&#38; ( mapId == null || ((String)keys[i]).endsWith(mapId))) {
        newClassMap = map;
        newClass = dest;        
      }
    }
    return  newClassMap;
  } 

</field>
</message>

<message>
		<field name="adddate">1166117633</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

We should be covering that with:

 public ClassMap findInterfaceOrAbstractMapping(Map customMappings, Class destClass, Object sourceObj, String mapId) {

But apparently we are not in this specific use case...it looks like we can fix this bug since there is another method:

  public List findInterfaceMappings(Map customMappings, Class sourceClass, Class destClass) {


that looks better suited for what we need done. I just need to reproduce this use case...</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1168835892</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1168835892</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1168835892</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1166115955</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1613791</field>
	<field user_id="1077915" name="submitted_by">jacktc</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Spring FactoryBean</field>
	<field name="open_date">1165915095</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi.

I wanted to use Dozer in a Spring-based project. Although the current integration already works nice, I'd like to have an integration based on Springs FactoryBean.

The main advantage of this would be, that mapping-files could be located by Springs Resource-abstraction.

I attached a simple file, that does this. Maybe you would like to integrate it into the ditribution?

Regards,
S&#195;&#182;ren Chittka</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1171103022</field>
		<field name="user_name">jacktc</field>
		<field name="body">Logged In: YES 
user_id=1077915
Originator: YES

Hi,
sorry, currently there is just too much work, but I'll try to look at the code again and remove the &#34;file:&#34;-prefix.
I'll also also look at implementing a small testcase, but at this time I really cannot see when I will be able to finish this task.

Bye,
S&#195;&#182;ren</field>
</message>

<message>
		<field name="adddate">1170646490</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

moving back to pending</field>
</message>

<message>
		<field name="adddate">1170645603</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1169609725</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

touch</field>
</message>

<message>
		<field name="adddate">1166658930</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Hi Soren,

Thanks for submitting the code.  I looked at it and would like to include it in the 2.5 release.  But I would like to have a simple unit test for the class.  Can you submit a simple junit test case for the DozerBeanMapperFactoryBean.  Also, is it neccessary to use the explicit &#34;file:&#34; prepending in the implementation of the java class you submitted?  Is there any way to avoid that?  Thanks!</field>
</message>

<message>
		<field name="adddate">1165946035</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Thank you for the contribution. We will try to get this into the 2.5 release.

Thanks for looking.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1170646490</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1170646490</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1170645603</field>
		<field name="entrydate">1170646490</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1166733633</field>
		<field name="entrydate">1170645603</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170645603</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1166733633</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1166733633</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1165946035</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">206819: DozerBeanMapperFactoryBean.java</field>
		<field name="entrydate">1165915095</field>
		<field name="mod_by">jacktc</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1599457</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Is-Accessible problem w/ abstract super classes</field>
	<field name="open_date">1163989127</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi, 
when specifying is-accessible = true for fields without setters, we are finding that these fields are not being mapped if they are declared in a superclass and not in subclasses. 
 
We traced this to a problem/feature in the FieldPropertyDescriptor constructor: 
field = bean.getDeclaredField(fieldName); 
 
My colleague, Luke Robinson, added a method to the same FieldPropertyDescriptor which recursively finds the field from the superclass if it is not in the child class: 
 
private Field getFieldFromBean(Class clazz, String fieldName) throws NoSuchFieldException { 
try { 
return clazz.getDeclaredField(fieldName); 
} catch (NoSuchFieldException e) { 
if (clazz.getSuperclass() != null) { 
return getFieldFromBean(clazz.getSuperclass(), fieldName); 
} 
throw e; 
} 
} 
 
and changed the constructor line above to call this method, and this fixed our problem. All your unit tests passed as well. 
 
I can provide this as a patch? 
Regards 
Alan 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1169609630</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

reassign to pending status</field>
</message>

<message>
		<field name="adddate">1169608802</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1165641232</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Thanks Alan and Luke for submitting this patch.  I applied it to the 2.5 code base w/o any problems.  Do you happen to have a simple unit test that I could also add to the code base?  Thanks again</field>
</message>

<message>
		<field name="adddate">1163989159</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Thanks to Alan for submitting a patch.  I will apply to the 2.5 code base</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1169609630</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1169608802</field>
		<field name="entrydate">1169609630</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1169609630</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1165641232</field>
		<field name="entrydate">1169608802</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1169608802</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1165641232</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1165641232</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">203542: dozer-2.4-is-accessible-patch.zip</field>
		<field name="entrydate">1163989127</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1563795</field>
	<field user_id="7747" name="submitted_by">pmonks</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Custom Converters should be invoked for null</field>
	<field name="open_date">1158967852</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Currently a custom converter isn't invoked if the
source data is null.  This should be enabled (perhaps
via a configuration option) so that a default value can
be synthesised if the incoming data is null.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1169940044</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

This has been implemented in 2.5.  We will need to document this change good in the release notes, as folks currently using custom converters may not be explicitly be handling null src values.  They will need to after this change.  

</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1169940044</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1169940044</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1169940044</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1169940044</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1554793</field>
	<field user_id="1593586" name="submitted_by">rvolden</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">ClassMap not found for interface mapping</field>
	<field name="open_date">1157727111</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I have a mapping defined where class-a is an 
interface and class-b is a concrete class:

&#60;mapping wildcard=&#34;false&#34;&#62;
    &#60;class-a&#62;com.xxx.SubscriberIF&#60;/class-a&#62;
    &#60;class-b&#62;com.xxx.UpdateMember&#60;/class-b&#62;
    &#60;field&#62;
        &#60;a&#62;subscriberNumber&#60;/a&#62;
        &#60;b&#62;subscriberKey.subscriberNumber&#60;/b&#62;
    &#60;/field&#62;
    ...
&#60;/mapping&#62;

This mapping works fine if I use the mapping method 
mapper.map(source, UpdateMember.class), but if I use 
mapper.map(source, updateMember), passing an existing 
UpdateMember object, the mapping is not found in 
ClassMapFinder.findClassMap().

It seems like we shouldn't be checking the isInstance 
flag in ClassMapFinder.findClassMap().</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1169609669</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

reassign to pending status</field>
</message>

<message>
		<field name="adddate">1169608802</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1165637374</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Rob,

Thanks for the unit tests.  Everything worked great and I made the code change.  This will be included in the 2.5 release.</field>
</message>

<message>
		<field name="adddate">1161789828</field>
		<field name="user_name">rvolden</field>
		<field name="body">Logged In: YES 
user_id=1593586

Attaching example test case which shows this bug.  On further analysis, the 
bug occurs when the source object (ApplicationUser in my example) extends a 
class (Subscriber in my example) which implements the interface specified in 
the mapping file (SubscriberIF in my example).</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1169609669</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991620</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1169609669</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1169608802</field>
		<field name="entrydate">1169609669</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1165637374</field>
		<field name="entrydate">1169608802</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1169608802</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1165637374</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1165637374</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1165637374</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">199993: 1554793.zip</field>
		<field name="entrydate">1161789828</field>
		<field name="mod_by">rvolden</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1841448</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Trim Strings issue with data type conversion</field>
	<field name="open_date">1196399801</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">See..... http://sourceforge.net/forum/forum.php?thread_id=1877765&#38;forum_id=452530</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1197768577</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1197768577</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1197768577</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1197768577</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1679996</field>
	<field user_id="52085" name="submitted_by">jiriki</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">destValue always null in CustomConverter</field>
	<field name="open_date">1173802479</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">In the MappingProcessor line 347 of method mapFromFieldMap():

Class sourceFieldClass = sourceFieldValue != null ? sourceFieldValue.getClass() : fieldMapping.getSourceFieldType(sourceObj.getClass());
  destFieldValue = mapUsingCustomConverter(Class.forName(fieldMapping.getCustomConverter()), sourceFieldClass, sourceFieldValue,
  destFieldType, null, fieldMapping, false);


null is passed to mapUsingCustomConverter() as value of destObj.
Because of this the custom converter always gets a null destination object.

This should be changed to destObj:

destFieldValue = mapUsingCustomConverter(Class.forName(fieldMapping.getCustomConverter()), sourceFieldClass, sourceFieldValue, 
          destFieldType, destObj, fieldMapping, false);

Apart from that: Congratulations for this great project.

regards,
  Niklas




</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175387435</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I applied this to the 3.2 code base</field>
</message>

<message>
		<field name="adddate">1173808711</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Thanks. I will be sure to get this into the next release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175649759</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175387435</field>
		<field name="entrydate">1175649759</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1175387453</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175387435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175387435</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1173808711</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1673152</field>
	<field user_id="890916" name="submitted_by">sguillory</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Indexed mapping broken when is-accessible is true</field>
	<field name="open_date">1172958138</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Interface (example)</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I need to map several strings in one bean to a string array in another bean. The issue is that the &#34;other&#34; bean with the string array does not have a setter method for the string array. It is a publicly accessible string array (think CORBA mapping). I have tested indexed mapping to an array does work if there is a setter for the array. The problems seems to be that the &#34;is_accessible&#34; attribute seems to break Dozer's understanding of the field as an indexed property. I am looking into it, but thought I would log it as a bug.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175464731</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

This has been fixed and will be included with the 3.2 release.  The is-accessible logic was missing index support.  Nice find and we appreciate the bug submission.  Thanks!</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175649759</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175464731</field>
		<field name="entrydate">1175649759</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175464731</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1175464731</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175464731</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1717547</field>
	<field user_id="1791307" name="submitted_by">artur_zabronski</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Incorrectly recognizing JDK 6.0</field>
	<field name="open_date">1178933812</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Dozer incorrectly recognizing JDK version greater than 5.0.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178979722</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Got it. Thanks.</field>
</message>

<message>
		<field name="adddate">1178971950</field>
		<field name="user_name">artur_zabronski</field>
		<field name="body">Logged In: YES 
user_id=1791307
Originator: YES

In bug #1715819 was changed way to recognize JDK version (from java.vm.version to java.version). Mine previous patch (from Dozer version 3.3.1) was using old bad method.</field>
</message>

<message>
		<field name="adddate">1178945608</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

fixed in 3.x branch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178979824</field>
		<field name="entrydate">1179775443</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775443</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178979824</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178979824</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178945608</field>
		<field name="entrydate">1178971725</field>
		<field name="mod_by">artur_zabronski</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1178971725</field>
		<field name="mod_by">artur_zabronski</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178945608</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1178945608</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178945608</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">228873: dozer-3.3.1-jdk6-vmver.patch</field>
		<field name="entrydate">1178933812</field>
		<field name="mod_by">artur_zabronski</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1684237</field>
	<field user_id="306614" name="submitted_by">ov3rdriv3</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Dramatic Performance Degradation  with Interfaces</field>
	<field name="open_date">1174386670</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Setting:

SourceClass implements IF

If mapping is done with Class, 1000 invocations take 344ms, if Mapping is done with Interface 1000 invocations take 8282ms.

The processing time cumulates with each invocation.

Problem: (All Applies to Dozer 3.0)

In Mappingprocessor line 224, the class-mapping is determined:

    //Now check for super class mappings as a convenience -assuming for now that super class mappings are at the same level
    List parentFieldNames = null;
    if (parentClassMap == null) {
      // check for super classes
      List superClasses = checkForSuperTypeMapping(sourceClass, destClass);
      // check for interfaces
      superClasses.addAll(classMapFinder.findInterfaceMappings(this.customMappings, sourceClass, destClass));
      if (superClasses != null &#38;&#38; superClasses.size() &#62; 0) {
        parentFieldNames = processSuperTypeMapping(superClasses, sourceObj, destObj, sourceClass, parentFieldMap);
      }
    }

superClasses is taken from cache (line 228) and Interfaces are added in line 230. As this is a List and the cached value is not copied, in every invocation the same Interface-Mapping is added again (would not occur with a HastSet instead of an ArrayList). As this is a reference to the cached List, the cached value grows as well.

Solution:

Change Type of superClasses to Set (so duplicates aren't added) if this is possible, or do a defense copying of the cached value.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1174447381</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

I changed this to a HashSet and it seems to have fixed the problem. Will be in next release. Checked in.</field>
</message>

<message>
		<field name="adddate">1174442961</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Mika,

Thanks for submitting the detailed use case along with a unit test attached.  That really helps us diagnosing issues.</field>
</message>

<message>
		<field name="adddate">1174395978</field>
		<field name="user_name">ov3rdriv3</field>
		<field name="body">Logged In: YES 
user_id=306614
Originator: YES

(Quick)Fix: 

MappingProcessor line 961, exchange

  private List checkForSuperTypeMapping(Class sourceClass, Class destClass) {
    // Check cache first
    Object cacheKey = CacheKeyFactory.createKey(new Object[] { destClass, sourceClass });
    CacheEntry cacheEntry = superTypeCache.get(cacheKey);
    if (cacheEntry != null) {
      return (List) cacheEntry.getValue();
    }

with defensive copy:

  private List checkForSuperTypeMapping(Class sourceClass, Class destClass) {
    // Check cache first
    Object cacheKey = CacheKeyFactory.createKey(new Object[] { destClass, sourceClass });
    CacheEntry cacheEntry = superTypeCache.get(cacheKey);
    if (cacheEntry != null) {
    	List result = new ArrayList();
    	Collections.copy((List)cacheEntry.getValue(), result);
      return result;
    }

</field>
</message>

<message>
		<field name="adddate">1174395594</field>
		<field name="user_name">ov3rdriv3</field>
		<field name="body">Logged In: YES 
user_id=306614
Originator: YES

The Problem only occurs if the object has got a parent object (Like ApplicationUser &#60;- Subscriber in Dozer tests)
Here's a performance comparison (see Testcase attached)

20.03.2007 13:55:53 net.sf.dozer.util.mapping.InterfacePerformanceTest testInterface
INFO: Execution of 1 iterations times ApplicationUser = 0 Subscriber = 0
20.03.2007 13:55:53 net.sf.dozer.util.mapping.InterfacePerformanceTest testInterface
INFO: Execution of 2 iterations times ApplicationUser = 0 Subscriber = 0
20.03.2007 13:55:53 net.sf.dozer.util.mapping.InterfacePerformanceTest testInterface
INFO: Execution of 4 iterations times ApplicationUser = 0 Subscriber = 0
20.03.2007 13:55:53 net.sf.dozer.util.mapping.InterfacePerformanceTest testInterface
INFO: Execution of 8 iterations times ApplicationUser = 16 Subscriber = 16
20.03.2007 13:55:53 net.sf.dozer.util.mapping.InterfacePerformanceTest testInterface
INFO: Execution of 16 iterations times ApplicationUser = 0 Subscriber = 31
20.03.2007 13:55:53 net.sf.dozer.util.mapping.InterfacePerformanceTest testInterface
INFO: Execution of 32 iterations times ApplicationUser = 16 Subscriber = 46
20.03.2007 13:55:53 net.sf.dozer.util.mapping.InterfacePerformanceTest testInterface
INFO: Execution of 64 iterations times ApplicationUser = 0 Subscriber = 94
20.03.2007 13:55:53 net.sf.dozer.util.mapping.InterfacePerformanceTest testInterface
INFO: Execution of 128 iterations times ApplicationUser = 16 Subscriber = 359
20.03.2007 13:55:55 net.sf.dozer.util.mapping.InterfacePerformanceTest testInterface
INFO: Execution of 256 iterations times ApplicationUser = 16 Subscriber = 1406
20.03.2007 13:56:00 net.sf.dozer.util.mapping.InterfacePerformanceTest testInterface
INFO: Execution of 512 iterations times ApplicationUser = 47 Subscriber = 5500
20.03.2007 13:56:22 net.sf.dozer.util.mapping.InterfacePerformanceTest testInterface
INFO: Execution of 1024 iterations times ApplicationUser = 16 Subscriber = 22046



File Added: InterfacePerformanceTest.java</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1174882704</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1174447381</field>
		<field name="entrydate">1174882704</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1174447381</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1174447381</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1174419520</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1174395627</field>
		<field name="mod_by">ov3rdriv3</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">221386: InterfacePerformanceTest.java</field>
		<field name="entrydate">1174395594</field>
		<field name="mod_by">ov3rdriv3</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1658569</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">allowed-exceptions not working for default mappings</field>
	<field name="open_date">1171335062</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi Matt, 
I was able to verify that the allowed-exceptions still works for me provided a supply a mapping in the dozerBeanMapping file. My domain object that throws the business runtime exception seems to require a mapping between it and the data transfer object it represents. That is, if I don't specify this mapping explicitly, the 2 classes get mapped OK (all the fields get copied) but the allowed-exceptions are ignored. I traced through and could see that without a mapping, the classMap containing the allowed-exceptions is empty (at line 314 of the 3.0 MappingProcessor) and thus the exception is not getting thrown. I didn't go beyond this to see why though. 
 
Is this meant to be a feature, that one has to supply a mapping between 2 classes to get allowed exceptions thrown ?  
 
Great work on 3.0, and thanks for including our patches! 
 
Cheers 
Alan 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175389573</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

I fixed this.  Nice find!</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175649759</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175389573</field>
		<field name="entrydate">1175649759</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175389573</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1175389573</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175389573</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1549738</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Set mapping problem</field>
	<field name="open_date">1157007199</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I created a unit test that reproduces the issue --&#62; 
KnownFailures.testSetMapping()

Appears to be a problem with the xml field mapping 
starting in upper case</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175491786</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

If field was specified in the dozer mapping file starting in a capital letter, the field was getting double mapped.  For collections, this was causing double entries.  Add case check to the code to prevent this.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175649759</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175491786</field>
		<field name="entrydate">1175649759</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175491786</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175491786</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1841449</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Update spring custom converter documentation</field>
	<field name="open_date">1196399965</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">http://sourceforge.net/forum/forum.php?thread_id=1856288&#38;forum_id=452530</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1197760604</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1197760604</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1197760604</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1197760604</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1692620</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer 3.1 only supports JDK 1.5</field>
	<field name="open_date">1175475926</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Make code backwards compatible with older jdks</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175577876</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Use reflection for any jdk1.5 classes so that Dozer can be compiled with 1.4</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1175649759</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1175577876</field>
		<field name="entrydate">1175649759</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175577876</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175577876</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2848457</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Possible ClassLoader Leaks on WebSphere</field>
	<field name="open_date">1251813876</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">On WebSphere container and IBM JDK objects of type Method should not be cached. This is currently done in property descriptors (MapPropertyDescriptor for example). This results in extensive amount of ClassLoaders being created and not garbage collected as each method.invoke() reflective accessor results in new ClassLoader creation on given environment. Then classloaders gets attached to Dozer context.

Workaround is to increase Perm Size of JVM and perform &#34;hard&#34; restart from time to time. Issue is reproducible after several redeployments of the application.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262636297</field>
		<field name="user_name">buzdin</field>
		<field name="body">Using java.lang.SoftReference to keep Methods cached. Should solve ClassLoader leak problem</field>
</message>

<message>
		<field name="adddate">1252592924</field>
		<field name="user_name">buzdin</field>
		<field name="body">You have run on this issue if you are getting OutOfMemory exception for Perm Space in your WebSphere. Like said it happens after several redeployments. Otherwise latest Dozer version works fine in WebSphere.</field>
</message>

<message>
		<field name="adddate">1252592444</field>
		<field name="user_name">tjg184</field>
		<field name="body">Can you please explain further?  We indirectly use JavaBeanPropertyDescriptor and seem to have some weird issues with Dozer and Websphere.  We get errors almost like it's sharing data between two different objects.    </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262636298</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262636298</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262636298</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262636298</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1262636298</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1709117</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Remove Spring runtime dependency</field>
	<field name="open_date">1177744340</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Revert back to using apache commons PropertyUtils to getPropertyDescriptors()</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1177748124</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

fixed.  Released to prod 3.3.1</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177748141</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177748124</field>
		<field name="entrydate">1177748141</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177748124</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177748124</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1706291</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Throw exception if map-id cannot be resolved</field>
	<field name="open_date">1177385859</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi, 
 
We have recently tried to upgrade from version 2.2 of Dozer to 3.2. We are 
experiancing problems when calling 
 
DozerBeanMapper.map( source, target, mapid ) 
 
In version 2.2 of Dozer, if the map-id could not be resolved it would throw 
a MappingException. However, this no longer seems to be the case. Instead 
it logs a warning and attempts a generic transformation. We have inspected 
the source code and this is confirmed. Is there any way of making dozer 
3.2 follow the same scemantics as 2.2?  
 
Thanks 
 
Steve 
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1177460200</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

fixed</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177645495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177460200</field>
		<field name="entrydate">1177645495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177460200</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177460200</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1704085</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">When discovering default field mappings require corr get/set</field>
	<field name="open_date">1177046562</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When adding default field mappings via reflectionUtils.getPropertyDescriptors() make sure that a getReadMethodName and getWriteMethodName exists in the PropertyDescriptor before adding the field to be mapped.

Currently all property descriptors that are discovered are added.  The underlying implementation Introspector.getBeanInfo(class) returns a property descriptor even if there isn't an actual field and doesnt check that there is both a getter and setter.  In the following example, Instrospector.getBeanInfo would return a property descriptor for field1.  This is a problem problem for bi-directional mappings via Dozer.

public class SomeObject {
  public String getField1() {
    return &#34;&#34;;
  }
}
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1177462600</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Adding patch jar that includes use cases where src class type does not match dest class type
File Added: dozer-3.2.1_1704085.jar</field>
</message>

<message>
		<field name="adddate">1177383419</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Applied to all cases.  Not just when src class is the same type as the dest class</field>
</message>

<message>
		<field name="adddate">1177302144</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

After further investigation, I think the logic should apply to all class mapping and not just mapping where the src class is the same as the dest class.</field>
</message>

<message>
		<field name="adddate">1177121777</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Attaching patch
File Added: dozer-3.2.1_1704085.jar</field>
</message>

<message>
		<field name="adddate">1177117595</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

NOTE:  This logic should only apply in the case that the src class is the same type as the dest class.  SomeObj --&#62; SomeObj</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177645495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177462633</field>
		<field name="entrydate">1177645495</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177462633</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177462633</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">226496: dozer-3.2.1_1704085.jar</field>
		<field name="entrydate">1177462600</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">225912: </field>
		<field name="entrydate">1177462523</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177462522</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177460302</field>
		<field name="entrydate">1177462522</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177460302</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177460302</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177460283</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">When discovering default field mappings require both get/set</field>
		<field name="entrydate">1177460283</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177383419</field>
		<field name="entrydate">1177460283</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177383419</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177383419</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1177383419</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177302144</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177121777</field>
		<field name="entrydate">1177302144</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">225912: dozer-3.2.1_1704085.jar</field>
		<field name="entrydate">1177121777</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177121777</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177121777</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1698069</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Non-Cumulative Set issue</field>
	<field name="open_date">1176256221</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">See thread --&#62; http://sourceforge.net/forum/forum.php?thread_id=171198&#38;forum_id=452530

In the addToSet methods, should the code be.....

if (!obj.getClass().isAssignableFrom(String.class)) { 
map(null, destValue, obj, null, fieldMap); 
} 
result.add(obj); 


Add more unit tests around non-cumulative mapping</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1177456618</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

changed the code to read.....

map(null, sourceValue, obj, null, fieldMap)

This is related to #1482749</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177645496</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177456618</field>
		<field name="entrydate">1177645496</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177456618</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1177456618</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177456618</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1697575</field>
	<field user_id="1765729" name="submitted_by">stevepb_uk</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Calling map on DozerBeanMapper with a context( map-id )</field>
	<field name="open_date">1176208446</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,

We have recently tried to upgrade from version 2.2 of Dozer to 3.2.  We are experiancing problems when calling

DozerBeanMapper.map( source, target, mapid )

In version 2.2 of Dozer, if the map-id could not be resolved it would throw a MappingException.  However, this no longer seems to be the case.  Instead it logs a warning and attempts a generic transformation.  We have inspected the source code and this is confirmed.  Is there any way of making dozer 3.2 follow the same scemantics as 2.2?  

Thanks

Steve</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1177460332</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

fixed</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177645496</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177460332</field>
		<field name="entrydate">1177645496</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1177463471</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177460332</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177460332</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1560407</field>
	<field user_id="1600370" name="submitted_by">michaelstr</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Double Calls of Custom Translators With Hints</field>
	<field name="open_date">1158538084</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We've had a lot of problems when we tried to use hints
after introducing a custom converter into the mix.

When hints are provided, our custom converter is called
twice when it should only be called once.  As we track
it, the first call is perfect, and does the mapping
perfectly; however, the second call is called with a
null source object.  Dozer also seems to confuse the
parent object with the member, at this then throws a rod.

We've isolated the double call problem to the following
code, which humorously bears a comment in the code
asking, &#34;Why was this code added?&#34;!  Ha!  We have to
ask the same question.

It's lines 308 thru 316 in the MappingProcessor in
Dozer 2.3.  The same problem exists for us when using
Dozer 2.2.

Here is some of the code we have concerns us, but there
are a couple of other places that puzzle us as well,
and we frankly don't understand the dozer code well
enough yet to know exactly what's wrong.

    // check for custom converters
    // TODO why was this code added?
    CustomConverterContainer customConverters =
classMap.getConfiguration().getCustomConverters();
    Class converterClass = null;
    if ((customConverters != null) &#38;&#38;
(fieldMapping.getDestinationTypeHint() != null) &#38;&#38;
(destFieldValue != null) 
        &#38;&#38;
fieldMapping.getDestinationTypeHint().getHints().size()
== 1) {// we don't support complicated hints
      converterClass =
customConverters.getConverterByDestinationType(Thread.currentThread().getContextClassLoader()
       
.loadClass(fieldMapping.getDestinationTypeHint().getHintName()),
destFieldValue.getClass(), cacheMgr);
    }

Suffice it to say that there is a problem with DOUBLE
CALLS in the case of custom converters when hints are
used, and we'd appreciate your thoughts on it.

Respectfully,

Mike Strong
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1177470615</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I believe this issue has been resolved.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1177645496</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1177470615</field>
		<field name="entrydate">1177645496</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177470615</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1177470615</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177470615</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1749982</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Field custom converter bug with Map data types</field>
	<field name="open_date">1183919668</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When using Map backed property feature, custom field converter not functioning correctly.

https://sourceforge.net/forum/forum.php?thread_id=1747506&#38;forum_id=452530</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1183939640</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

This was resolved as part of the map backed property refactoring</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540123</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1183939640</field>
		<field name="entrydate">1184540123</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1183939640</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1183939640</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1717318</field>
	<field user_id="819455" name="submitted_by">ryanrich</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Null pointer on MappingProcessor at Line 282</field>
	<field name="open_date">1178901059</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">On occassion I am getting a null pointer exception from the MappingProcessor class in dozer.  For now I have modified line 281 to add an extra null check:

      if (parentClassMap != null &#38;&#38; superListOfFieldNames != null) {

to avoid the exception, but haven't had time to step through the code to see if this is a valid thing to do.


Partial Stack trace:

java.lang.NullPointerException
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:282)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:255)
	at net.sf.dozer.util.mapping.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:1095)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:245)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:185)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:159)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:103)

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1179280811</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

fixed in 3.x branch</field>
</message>

<message>
		<field name="adddate">1179207529</field>
		<field name="user_name">pluimpje</field>
		<field name="body">Logged In: YES 
user_id=1792692
Originator: NO

I patched it like this to be able to continue (in MappingProcessor)

line 84
private Stack superListOfFieldNamesStack = new Stack();

+- line 244
        if(superListOfFieldNames!=null){
          //save for futher use (because overwritten if recursed
          superListOfFieldNamesStack.push(superListOfFieldNames);
        }
        superListOfFieldNames = new ArrayList();
        parentFieldNames = processSuperTypeMapping(superClasses, sourceObj, destObj, sourceClass, parentFieldMap);
        superListOfFieldNames = null;
        if(!superListOfFieldNamesStack.isEmpty()){
            superListOfFieldNames = (List)superListOfFieldNamesStack.pop();
        }
</field>
</message>

<message>
		<field name="adddate">1179161927</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

That should be enough to go on. This will be fixed for the next release.</field>
</message>

<message>
		<field name="adddate">1179140216</field>
		<field name="user_name">pluimpje</field>
		<field name="body">Logged In: YES 
user_id=1792692
Originator: NO

I have encountered the same problem. after some research I found that it came from the following problem:

lines 244 - 246 of MappingProcessor
 superListOfFieldNames = new ArrayList();
 parentFieldNames = processSuperTypeMapping(superClasses, sourceObj, destObj, sourceClass, parentFieldMap);
 superListOfFieldNames = null;

In case I have the following class structure.
C extends B
B extends A

Z extends Y
Y extends X

when I want to convert Z to C (or the other way around) the lines 244 - 246 are called ones for the extends between C and B, and in the recursion a second time for the extends between B and A.
when the dozer has done with B/A it sets the global variable to null, and continues with the extends between C and B. and at this point it encounters the error mentioned above.

I hope this explenation is clear enough.</field>
</message>

<message>
		<field name="adddate">1178906708</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Can you attach a mapping and unit test that produces this? We need a unit test so we can apply this fix.

Thanks for your help!

Franz</field>
</message>

<message>
		<field name="adddate">1178901108</field>
		<field name="user_name">ryanrich</field>
		<field name="body">Logged In: YES 
user_id=819455
Originator: YES

I see this behavior in Dozer 3.3 and 3.3.1</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775443</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1179280811</field>
		<field name="entrydate">1179775443</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1179280811</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1179280811</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Null pointer</field>
		<field name="entrydate">1179162520</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1178906708</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1715819</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Change the way we determine JDK Version</field>
	<field name="open_date">1178725078</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details"> 
Have done some debugging and found the cause of our problem - it's due to our use of the BEA JRockit90_150_04 JRE rather than the Sun JRE.  
In the Dozer class net.sf.dozer.util.mapping.config.GlobalSettings the 'isJdk5' boolean is being set on the basis of the &#34;java.vm.version&#34; system property starting with &#34;1.5&#34;, but in the case of the JRockit JRE this isn't the case. 
 
Switching to either of &#34;java.specification.version&#34; or &#34;java.version&#34; would appear to fix things? ... 
 
Sun JRE JRockit 
java.vm.version : 1.5.0_07-b03 R26.0.0-189_CR269406-59389-1.5.0_04-20060322-1120-win-ia32 
java.vm.specification.version : 1.0 1.0 
java.specification.version : 1.5 1.5 
java.version : 1.5.0_07 1.5.0_04 
 </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178726420</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

Fixed on the 3.x branch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775443</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178726420</field>
		<field name="entrydate">1179775443</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178726420</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178726420</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1715496</field>
	<field user_id="1788058" name="submitted_by">korittky</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Lost and Duplicated Objects</field>
	<field name="open_date">1178695521</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">
When mapping many objects (with one recursion), some can get lost and others duplicated.
This arises from the use of system.identityHashCode for identifying already mapped fields. (Bugfix 1596766)
This Hashcode is not unique, see
http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6321873

The attached files demonstrate the issue with an array of 20000 beans where 5 (in my environment) are lost after the mapping because they have identical hascodes to already mapped ones.

Perhaps you should use a HashSet for remembering the already mapped fields:

MappingProcessor.java
line 97:
  private final Set mappedFields = new HashSet();

line 204:
  mappedFields.add(sourceObj);

line 408:
    // 1596766 - Recursive object mapping issue. Prevent recursive mapping infinite loop
	if (mappedFields.contains(sourceFieldValue)) {
	  if (sourceFieldValue.getClass().equals(destFieldType)) {
        // Source value has already been mapped to the required destFieldType.
		return sourceFieldValue;
      }
      
      // 1658168 - Recursive mapping issue for interfaces 
	  if (destFieldType.isInterface() &#38;&#38; destFieldType.isAssignableFrom(sourceFieldValue.getClass())) {
        // Source value has already been mapped to the required destFieldType.
		return sourceFieldValue;
      } 
    }

Please check if this works or find another solution.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178852257</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

The patch has been applied to the 3.4 code base.  The underlying implementation to prevent infinite loops for bi-directional mappings was modified to resolve this issue.  Thanks!</field>
</message>

<message>
		<field name="adddate">1178764773</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Thanks for submitting this bug and the excellent test case.  I have added the test case to the src and was able to reproduce the issue.  I will work on fixing this and do the best I can to get this in the next release.

FYI.....

I quickly tried to apply your suggest patch and it resolved your test case.  But it broke an existing test for infinite loop mappings.  Any ideas on what the best solution to this issue would be?</field>
</message>

<message>
		<field name="adddate">1178697879</field>
		<field name="user_name">korittky</field>
		<field name="body">Logged In: YES 
user_id=1788058
Originator: YES

Oh, I was too fast without thingking enough.
My suggestion with HashSet is nonsense, but using the source object as key for mappefFields should work (but prevent the source objects from being garbage collected).</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775443</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178852257</field>
		<field name="entrydate">1179775443</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178852257</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1178852257</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178852257</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">228461: DozerIdentityHashCodeTest.zip</field>
		<field name="entrydate">1178695522</field>
		<field name="mod_by">korittky</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1713550</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Fix Map &#60;--&#62; VO with no custom mappings</field>
	<field name="open_date">1178391384</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When mapping a HashMap to VO, implicit default field mappings are not used.  It results in an empty dest object w/ no fields actually mapped.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178408891</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775443</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178408891</field>
		<field name="entrydate">1179775443</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178408891</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178408891</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1713242</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Propagate exceptions while parsing allowed-exceptions xml</field>
	<field name="open_date">1178336316</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Propagate exceptions that occur while parsing allowed-exceptions xml.  Possible exceptions are ClassNotFoundException and MappingException if the allowed exception specifed in xml does not extend RuntimeException</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178337471</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

done</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775444</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178337471</field>
		<field name="entrydate">1179775444</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178337471</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178337471</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Propagate exceptions while parsing allowed exceptions xml</field>
		<field name="entrydate">1178336352</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1674199</field>
	<field user_id="430214" name="submitted_by">alewando</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">inappropriate subclass mappings applied</field>
	<field name="open_date">1173111806</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Dozer is attempting to apply a mapping for a destination subclass when processing an instance of it's parent class as the destination.
Example:
Take the class heirarchy: Child -&#62; Parent  ( Child extends Parent). Class child has a property (childProp) that is not present in the Parent class.

The mapping file contains a one-way mapping from class SourceData to class Child. 
Calling dozerMapper.map(sourceData, destination) results in a MappingException:
net.sf.dozer.util.mapping.MappingException: Unable to determine write method for field: childProp class: class dozer.test.Parent

Some debugging has turned up that Dozer is trying to apply the SourceData -&#62; Child mapping when mapping to an instance of Parent. It does this because ClassMapFinder.findClassMap() does not find a direct mapping so it calls findInterfaceOrAbstractMapping() to search for one in the list of custom mappings. The logic in findInterfaceOrAbstractMapping() checks that the class of the destination object (Parent) is assignable from the mapping's destination class (Child), which it is so it selects this custom mapping (SourceData -&#62; Child), which is clearly not going to work. 

I found a workaround by declaring an empty mapping for SourceData -&#62; Parent, but this doesn't seem like the right thing to do. Is there another solution?

I'm attaching some source code with a unit test to illustrate the problem.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178503559</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

This seems to be the same issue as 1486105. I have fixed this and will be in the next release.

Franz</field>
</message>

<message>
		<field name="adddate">1178142280</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

I will research and get this into the next release.</field>
</message>

<message>
		<field name="adddate">1173755937</field>
		<field name="user_name">tvelkoff</field>
		<field name="body">Logged In: YES 
user_id=769604
Originator: NO

I've also seen this.  There are problems with MappingProcessor and CustomConverterContainer.  I will follow up with code and tests that illustrate the problem.</field>
</message>

<message>
		<field name="adddate">1173111891</field>
		<field name="user_name">alewando</field>
		<field name="body">Logged In: YES 
user_id=430214
Originator: YES

File Added: SourceData.java</field>
</message>

<message>
		<field name="adddate">1173111869</field>
		<field name="user_name">alewando</field>
		<field name="body">Logged In: YES 
user_id=430214
Originator: YES

File Added: Parent.java</field>
</message>

<message>
		<field name="adddate">1173111859</field>
		<field name="user_name">alewando</field>
		<field name="body">Logged In: YES 
user_id=430214
Originator: YES

File Added: Child.java</field>
</message>

<message>
		<field name="adddate">1173111834</field>
		<field name="user_name">alewando</field>
		<field name="body">Logged In: YES 
user_id=430214
Originator: YES

File Added: DozerSubclassMappingTest.xml</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178503559</field>
		<field name="entrydate">1179775444</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775444</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178503559</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178503559</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1178142280</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">218921: SourceData.java</field>
		<field name="entrydate">1173111891</field>
		<field name="mod_by">alewando</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">218920: Parent.java</field>
		<field name="entrydate">1173111869</field>
		<field name="mod_by">alewando</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">218919: Child.java</field>
		<field name="entrydate">1173111859</field>
		<field name="mod_by">alewando</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">218918: DozerSubclassMappingTest.xml</field>
		<field name="entrydate">1173111834</field>
		<field name="mod_by">alewando</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">218917: DozerSubclassMappingTest.java</field>
		<field name="entrydate">1173111806</field>
		<field name="mod_by">alewando</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1664984</field>
	<field user_id="820529" name="submitted_by">rouadec</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">bi-directionnal mapping with sets &#38; subclasse</field>
	<field name="open_date">1172047732</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Since the recursivity issue has been fixed in 3.0 I stumbled on another issue with : 
 
class ParentA 
class A extends ParentA { 
Set&#60;B&#62; subs 
} 
 
class B { 
owner A 
} 
 
and their corresponding *Prime classes to map to. 
 
mappings are : 
&#60;mapping wildcard=&#34;true&#34;&#62; 
&#60;class-a&#62;A&#60;/class-a&#62; 
&#60;class-b&#62;APrime&#60;/class-b&#62; 
&#60;field&#62; 
&#60;a&#62;subs&#60;/a&#62; 
&#60;b&#62;subs&#60;/b&#62; 
&#60;a-hint&#62;B&#60;/a-hint&#62; 
&#60;b-hint&#62;BPrime&#60;/b-hint&#62; 
&#60;/field&#62; 
&#60;/mapping&#62; 
&#60;mapping wildcard=&#34;true&#34;&#62; 
&#60;class-a&#62;ParentA&#60;/class-a&#62; 
&#60;class-b&#62;ParentAPrime&#60;/class-b&#62; 
&#60;/mapping&#62; 
&#60;mapping wildcard=&#34;true&#34;&#62; 
&#60;class-a&#62;B&#60;/class-a&#62; 
&#60;class-b&#62;BPrime&#60;/class-b&#62; 
&#60;field&#62; 
&#60;a&#62;owner &#60;/a&#62; 
&#60;b&#62;owner &#60;/b&#62; 
&#60;a-hint&#62;A&#60;/a-hint&#62;  
&#60;b-hint&#62;APrime&#60;/b-hint&#62;  
&#60;/field&#62; 
&#60;/mapping&#62; 
 
 
When dozer does the mapping it sort of mess up the references in this way : 
 
before mapping (the @ denote the java object id) we have: 
ParentA@1 { 
subs { 
B@2 { 
owner ParentA@1 { recursion correct from here... } 
} 
} 
} 
 
after mapping we get: 
ParentAPrime@3 { 
subs { 
BPrime@4 { 
owner ParentAPrime@5 { 
subs { 
BPrime@4 { 
owner ParentAPrime@5 { recursion correct from here.... } 
} 
} 
} 
} 
} 
 
I was expecting the owner to be ParentAPrime@3 and not ParentAPrime@5 which is a different instance. 
 </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1179452831</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

fixed in 3.x branch</field>
</message>

<message>
		<field name="adddate">1179377505</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

I will get this into the next release.</field>
</message>

<message>
		<field name="adddate">1179221712</field>
		<field name="user_name">pluimpje</field>
		<field name="body">Logged In: YES 
user_id=1792692
Originator: NO

probable sollution:

in MappingProcessor.java

a few lines below the following comment
  // 1596766 - Recursive object mapping issue. Prevent recursive mapping infinite loop
  
changed
    if (value.getClass().equals(destFieldType)) {
with 
    if(destFieldType.isAssignableFrom(value.getClass())){


This resolves the problem in my test case.
reason is that the destFieldType was of the type of the superClass and thus the equals did give the wanted result.


  </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775444</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1179452831</field>
		<field name="entrydate">1179775444</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1179452831</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1179452831</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1179333673</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">216983: dozerUnitTest.zip</field>
		<field name="entrydate">1172047733</field>
		<field name="mod_by">rouadec</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1486105</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Inheritance mapping not working correctly</field>
	<field name="open_date">1147314459</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Does not function properly when the subclass mapping
(s) arent explicit.  Problem appears to be in 
determineClassMap.  Logic walks inheritance tree prior 
to using default mapping of top level.  Thus, the 
super class mapping and none of the subclass attr's 
are mapped.  A unit test was submitted that reproduces 
the problem.  Those files are attached.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1184939455</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

This sounds like a bug...I created defect 1757573 to track this. We will get this fixed for the next release.

Thanks for looking.

Franz</field>
</message>

<message>
		<field name="adddate">1184831741</field>
		<field name="user_name">berserk81</field>
		<field name="body">Logged In: YES 
user_id=1848652
Originator: NO

It seems that the fixation of this introduced another bug. As far as I know, to fix this bug, a default class map is created if one of the destination or source classes given in the mapping defininiton is different from the actual object classes (as in the case of mapping subclasses using a mapping for super classes). However this default mapping causes an override effect. For example if there is such a declaration in the mapping:
&#60;field&#62;
  &#60;a&#62;propA.realProp&#60;/a&#62;
  &#60;b&#62;propA&#60;/b&#62;
&#60;/field&#62;
MappingProcessor also maps propA to propA because of the default mapping, causing an override effect. Is there any way to bypass this, or should this be reported as a new bug?</field>
</message>

<message>
		<field name="adddate">1178344281</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Fixed. I think... :). Checked into 3.x branch.</field>
</message>

<message>
		<field name="adddate">1178206335</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

This looks like a good one. Let me see what I can come up with.</field>
</message>

<message>
		<field name="adddate">1153150683</field>
		<field name="user_name">fluetm</field>
		<field name="body">Logged In: YES 
user_id=1101499

We've hit this one too...it's a pretty critical issue in 
our case.  Our particular problem involves subclass mapping 
for a bean produced by a bean factory.  Here's what I've 
been able to figure out.  We're following this type of 
pattern:

Case #1 - This works

public abstract class sourceA
public class sourceB extends sourceA

public abstract class destA
public class destB extends destA

public class factoryA implements BeanFactoryIF (createBean 
produces an instance of destB)

Mappings: bidirectional mappings exist for sourceA to destA 
(bean-factory=factoryA attached to sourceA), sourceB to 
destB.

This scenario works perfectly for the following mappings:

DozerBeanMapperSingletonWrapper.getInstance().map
(sourceB,destA.class);

Case #2 - The problem

Now we introduce another class C that we want to map in the 
following fashion

public class sourceC

Mappings: bidirectional mappings exist for sourceC to destA 
(bean-factory=factoryA attached to sourceC), sourceC to 
destB

This scenario produces an instance of sourceB (which we 
expect), but only populated with the superclass (sourceC to 
destA) mappings:

DozerBeanMapperSingletonWrapper.getInstance().map
(sourceC,destA.class);

What I found is that in MappingProcessor.map(Object 
sourceObj, Class destClass, String mapId), the 
determineClassMap method is executed before the call to 
MappingUtils.createDestBean, so the mapping that you're 
working with may not match the actual instances you end up 
with (it all depends on whether or not your source is an 
abstract class or interface, forcing an invocation of 
walkDownSubclasses).  

When I injected the following code directly after the call 
to createDestBean to redetermine the map based on what the 
factory actually produced, things seemed to sort themselves 
out:

if (destObj.getClass() != destClass) {
  classMap = determineClassMap(sourceObj, destObj.getClass
(), mapId, false);
}

I had hoped to maybe use a listener to get this done in our 
code for now, but determineClassMap is a private method.

If anyone really wants to see code samples behind this, I 
can put it together.

- Matt
</field>
</message>

<message>
		<field name="adddate">1147314629</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Unit tests.....

  public void testKM1() {
    SomeVo request = new SomeVo();
    request.setUserName(&#34;yo&#34;);
    request.setAge(&#34;2&#34;);
    request.setColor(&#34;blue&#34;);
    
    MapperIF mapper = getNewMapper(new String[] 
{&#34;kmmapping.xml&#34;});
    
    Super afterMapping = (Super) mapper.map(request, 
Super.class);
    
    assertNotNull(&#34;login name should not be null&#34;, 
afterMapping.getLoginName());
    assertNotNull(&#34;age should not be null&#34;, 
afterMapping.getAge());
    assertEquals(&#34;should map SuperClass.name to 
SubClassPrime userName.&#34;,request.getUserName(), 
afterMapping.getLoginName());
    assertEquals(request.getAge(), afterMapping.getAge());
  }
  
    
  public void testKM2() {
    Sub request = new Sub();
    request.setAge(&#34;2&#34;);
    request.setColor(&#34;blue&#34;);
    request.setLoginName(&#34;fred&#34;);
        
    MapperIF mapper = getNewMapper(new String[] 
{&#34;kmmapping.xml&#34;});
      
    SomeVo afterMapping = (SomeVo) mapper.map(request, 
SomeVo.class);
       
    assertNotNull(&#34;un should not be null&#34;, 
afterMapping.getUserName());
    assertNotNull(&#34;color should not be null&#34;, 
afterMapping.getColor());
    assertNotNull(&#34;age should not be null&#34;, 
afterMapping.getAge());
    assertEquals(&#34;should map SuperClass.name to 
SubClassPrime userName.&#34;,request.getLoginName(), 
afterMapping.getUserName());
    assertEquals(request.getColor(),afterMapping.getColor
());
    assertEquals(request.getAge(), afterMapping.getAge());
  }
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1178344281</field>
		<field name="entrydate">1179775444</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1179775444</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178344281</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178344281</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1178206335</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1236069</field>
		<field name="entrydate">1177469833</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1163381163</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">177534: Super.java</field>
		<field name="entrydate">1147314566</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">177533: Sub.java</field>
		<field name="entrydate">1147314547</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">177532: kmmapping.xml</field>
		<field name="entrydate">1147314522</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">177531: SomeVo.java</field>
		<field name="entrydate">1147314460</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1733793</field>
	<field user_id="1777661" name="submitted_by">mthielen</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Prob w/ map-get-method and date-format (patch included)</field>
	<field name="open_date">1181335330</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,
Again I found something. I would call it a bug, because it doesnt work with my usecase:
http://sourceforge.net/forum/forum.php?thread_id=1721912&#38;forum_id=452530

I think the whole map-get-method-thing isnt meant to be the way I want. Today I wanted to use the nice date-format attribute with a german date string:

&#60;a map-get-method=&#34;getColByName&#34; key=&#34;fieldNameA&#34; date-format=&#34;dd.MM.yyyy&#34;&#62;this&#60;/a&#62;

This didnt work, because all the nice things which were added to dozer like the date-format attribute were thought for the simple way of getting a value from the source object. In combination with map-get-method it is simply ignored.
As I browsed through the code i noticed that all the different features are not developed in a hierarchical way. There must be something like getRealValueFromSourceObject() and something like processRealValue() which must be called afterwards (in every case). Unfortunatly the value-getting and the value-processing tasks are mixed, so I might get some more problems in the future. :(

So again here is my patch, hope someone will benefit from this.
with Dozer version 3.4,
in MappingProcessor.java,
in function mapOrRecurseObject,
at line 435,
I added:
//instead of directly returning the result,
//check if next condition will be true. 
//If it is, the result will be the source
//which will get wrapped through the //primitiveOrWrapperConverter
Object result = mapCustomMapToProperty(sourceFieldValue, sourceFieldClass, fieldMap, destObj, destFieldType);
if (!MappingUtils.isPrimitiveOrWrapper(sourceFieldClass) &#38;&#38; !MappingUtils.isPrimitiveOrWrapper(destFieldType))
        	return result;
        else
        	sourceFieldValue = result;

One thing to say: I still appreciate all the work that has been done and im still happy with dozer. But you may should think about a refactoring. Ok, I dont have the time to do that either :)

Thanks so far!
Markus
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1183936044</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

This has been resolved.  I just finished up the large refactoring of map backed property support and this was resolved with that effort.  I added a unit test to verify that this use case now works.  The unit test is MapTypeTest.testDateFormat_CustomMapType() and the dozer mapping looks like......

&#60;mapping&#62;
  &#60;class-a&#62;net.sf.dozer.util.mapping.vo.map.CustomMap&#60;/class-a&#62;
  &#60;class-b&#62;net.sf.dozer.util.mapping.vo.SimpleObj&#60;/class-b&#62;    
  &#60;field&#62;
    &#60;a map-get-method=&#34;getValue&#34; map-set-method=&#34;putValue&#34; key=&#34;fieldA&#34; date-format=&#34;MM/dd/yyyy&#34;&#62;this&#60;/a&#62;
    &#60;b&#62;field5&#60;/b&#62;
    &#60;a-hint&#62;java.lang.String&#60;/a-hint&#62;
  &#60;/field&#62;
&#60;/mapping&#62;   
</field>
</message>

<message>
		<field name="adddate">1181350186</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Thanks for taking the time to submit this.  I agree with you that there are still some warts that should be refactored out.  I think you are running into one of those areas.  A generic mapping framework is very difficult from a coding perspective because it is so recursive in nature and has to handle what seems like an endless # of possible use cases.  We are always agressively refactoring known pain points and will continue to do so.  </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540123</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1183936044</field>
		<field name="entrydate">1184540123</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1183936044</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1183936044</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1181350186</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">232336: MappingProcessor.java</field>
		<field name="entrydate">1181335333</field>
		<field name="mod_by">mthielen</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1728385</field>
	<field user_id="1717313" name="submitted_by">goeldner</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Global custom converters missing in default ClassMap</field>
	<field name="open_date">1180537384</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi, I have some serious problems with my global custom converters since Dozer 3.4. 

I found out that Dozer now creates a default ClassMap in MappingProcessor.checkForSuperTypeMapping() due to bug #1486105. That might be ok, but ClassMapBuilder.createDefaultClassMap() does not copy the  custom converters from global configuration into the default ClassMap. (And it seems that copy-by-references are missing, too.)

I'm not able to reproduce this with a unit test yet, but perhaps you simply forgot to copy these values?

Greetings,
Christoph
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1180844620</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

CopyByReference is fixed as well.</field>
</message>

<message>
		<field name="adddate">1180791226</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

fixed in 3.x branch. i will fix the copy-by-reference next...which correlates to the previous bug.</field>
</message>

<message>
		<field name="adddate">1180588122</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Forgot to mention I checked in the unit test in KnownFailures.java
</field>
</message>

<message>
		<field name="adddate">1180587877</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Good find indeed.  I was really surprised that this issue hasn't been raised before so I created a unit test for it to see for myself.  It was easy to reproduce.  I think it has been an issue prior to the 3.4 release for simple implicit mapping, but with the changes to checkForSuperTypeMapping(), you may just be seeing it for the first time in the latest release.  Thanks for submitting the bug</field>
</message>

<message>
		<field name="adddate">1180539253</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Nice find. This fix will be in the next release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540123</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1180791226</field>
		<field name="entrydate">1184540123</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1180791226</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1180791226</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1180539253</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1728159</field>
	<field user_id="1804484" name="submitted_by">harveybm</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Copy Reference mapping instructions ignored for subclasses</field>
	<field name="open_date">1180518477</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,

In dozer 3.4, copy-by-reference directives in mapping files are ignored unless the source object is the same class as specified in the mapping - subclasses, anonymous subclasses, dynamic proxies etc will not work.

It does appear to work in 3.3.1.

I'll attach some unit tests illustrating the problem.  

Using a simple mapping with one field name change and one copy by reference specified:

  &#60;mapping&#62; 
    &#60;class-a&#62;example.TestA&#60;/class-a&#62;
    &#60;class-b&#62;example.TestB&#60;/class-b&#62;   
    &#60;field&#62;
      &#60;a&#62;oneA&#60;/a&#62;
      &#60;b&#62;oneB&#60;/b&#62;
    &#60;/field&#62;
    &#60;field copy-by-reference=&#34;true&#34;&#62;
    	&#60;a&#62;testReference&#60;/a&#62;
    	&#60;b&#62;testReference&#60;/b&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;


SubclassReferenceTest

#testBase passes, just a sanity check
#testSubclassSource passes - the oneA &#60;-&#62; oneB mapping is still detected for an anonymous subclass of TestA.
#testReference passes - the copy-by-reference is fine for TestA itself.
#testReferenceSubclassSource fails - net.sf.dozer.util.mapping.MappingException: java.lang.InstantiationException: example.TestReference

example.TestReference has a private constructor to force an error if copy by reference isn't used.

I'm also completely unable to make the global configuration for copy-by-reference work, the GlobalReferenceTest illustrates this.  This does not appear to be new to dozer 3.4, and may well be me doing something wrong - please point it out!

Regards,
Brad.

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1180844574</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

fixed in 3.x branch.</field>
</message>

<message>
		<field name="adddate">1180540890</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

This sounds like it is related to:

[ dozer-Bugs-1728385 ] Global custom converters missing in default ClassMap

This will be fixed in the next release.

Franz</field>
</message>

<message>
		<field name="adddate">1180524352</field>
		<field name="user_name">harveybm</field>
		<field name="body">Logged In: YES 
user_id=1804484
Originator: YES

Some further info - testReferenceSubclassSource passes under jdk1.4 but not jdk1.5.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540123</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1180844574</field>
		<field name="entrydate">1184540123</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1180844574</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1180844574</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1180540904</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">231069: CopyRef.zip</field>
		<field name="entrydate">1180518477</field>
		<field name="mod_by">harveybm</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1724104</field>
	<field user_id="1777661" name="submitted_by">mthielen</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Prob w/ map-get-method and CustomConverter (patch included)</field>
	<field name="open_date">1179919930</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi again,
This time I think i found a bug.

In my previous post: http://sourceforge.net/forum/forum.php?thread_id=1721912&#38;forum_id=452530
I had a problem with mapping map-backed properties (as it finally turns out).
Since then I'm using the solution that Matt found for me and I'm quite happy with that:

&#60;field&#62;
&#60;a map-get-method=&#34;getValue&#34; key=&#34;fieldA&#34;&#62;this&#60;/a&#62; 
&#60;b&#62;fieldA&#60;/b&#62; 
&#60;/field&#62; 

(notice the &#34;this&#34;)
But... when I do this together with a custom-converter:

&#60;field custom-converter=&#34;MyCustomConverter&#34;&#62;
&#60;a map-get-method=&#34;getValue&#34; key=&#34;fieldA&#34;&#62;this&#60;/a&#62;
&#60;b&#62;fieldA&#60;/b&#62;
&#60;/field&#62;

the nice map-get-method/this thing does not work. Within MyCustomConverter I always get the whole
class-a object as the sourceObject argument (due to the &#34;this&#34; in my mapping.xml). The map-get-method is completly ignored.
Don't know whether this is intended. Anyway i patched Dozer to work the way I want to:

with Dozer version 3.4,
in MappingProcessor.java,
in function mapUsingCustomConverter,
at line 1000,
I added:

if (MappingUtils.isCustomMapMethod(fieldMap)) {
	String key = fieldMap.getSourceKey();
	Method resultMethod = ReflectionUtils.getMethod(srcFieldValue, fieldMap.getSourceField().getMapGetMethod());
	srcFieldValue = resultMethod.invoke(srcFieldValue, new Object[] { key });
}

and it works.
Would be nice to see this getting included in Dozer.

Thanks!
Markus</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1181512879</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

While investigating this issue, it was quickly apparent that the map-get-method logic was in need of some refactoring.  Your patch worked and I understand that was your only option given the current code base, but I decided it was better to take a step back and see what refactoring was needed rather than applying the patch as-is.  Submitting the patch was very valuable thought as it prompted me to take a closer look at this code that hasnt been vistited in quite awhile.  I completed part 1 of n refactoring and fixed this particular issue, but there is additional work that needs to be done in this area to shore up the feature.  I am actively working on this.</field>
</message>

<message>
		<field name="adddate">1179984178</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Hi Markus,

Thanks for submitting this bug and the patch.  We really appreciate you taking the time to include the code that resolves the issue.  I think you found a legitimate bug and it's probably a gap in the existing field custom converter logic.  I will take a closer look and we should be able to include this in the next release.  Do you happen to already have a simple unit test that reproduces the issue?  If so, please submit that as well.  If not, I can create one.  Thanks again.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184540123</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1181512879</field>
		<field name="entrydate">1184540123</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1181512879</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1181512879</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1181010698</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">230236: MappingProcessor.java</field>
		<field name="entrydate">1179919933</field>
		<field name="mod_by">mthielen</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1768660</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping Started Event Not firing on mapping</field>
	<field name="open_date">1186418304</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We don't have any code to fire a mapping started event on  a map call to map(Object srcObj, Class destClass).</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1190341202</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1186418492</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

Fixed on current_release branch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917454</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1190343755</field>
		<field name="entrydate">1190917454</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1190343755</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1190341202</field>
		<field name="entrydate">1190343755</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190341202</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1186418492</field>
		<field name="entrydate">1190341202</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1186418492</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1186418492</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1822421</field>
	<field user_id="1565762" name="submitted_by">lukerobinson</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Orphans not removed from Sets</field>
	<field name="open_date">1193700285</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Orphans are not being removed from Sets due to the result  being added back into the original field (thus keeping all removed items).

See http://sourceforge.net/forum/message.php?msg_id=4589384</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1197767405</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I applied the patches as-is and everything worked great.  Thanks for submitting and your patience with us applying it to the code base.  </field>
</message>

<message>
		<field name="adddate">1193724565</field>
		<field name="user_name">lukerobinson</field>
		<field name="body">Logged In: YES 
user_id=1565762
Originator: YES

To avoid relying on Obj.equals(ObjPrime) returning true, we now hold all mapped fields in a Set and return the contents this set if removeOrphans = true
File Added: dozer-orphan-fix-2.patch</field>
</message>

<message>
		<field name="adddate">1193700597</field>
		<field name="user_name">lukerobinson</field>
		<field name="body">Logged In: YES 
user_id=1565762
Originator: YES

Clears 'field' before adding all items from 'result' and then returning.
File Added: dozer-orphan-fix.patch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1197767405</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1197767405</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1197767405</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1197767405</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">251922: dozer-orphan-fix-2.patch</field>
		<field name="entrydate">1193724565</field>
		<field name="mod_by">lukerobinson</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">251880: dozer-orphan-fix.patch</field>
		<field name="entrydate">1193700597</field>
		<field name="mod_by">lukerobinson</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1803172</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Investigate index mapping issue</field>
	<field name="open_date">1190859428</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">http://sourceforge.net/forum/forum.php?thread_id=1830381&#38;forum_id=452530</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1230135315</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Fixed.  We werent resizing collections(if needed) during deep mapping</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1230135315</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230135315</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1230135315</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1230135315</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1777357</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Inheritance issue(s) with proxied data objects</field>
	<field name="open_date">1187566576</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Refer to the unit tests that are failing in the net.sf.dozer.functional_tests.proxied package.  It appears some mapping defs are being lost and is specified to CGLIB(or other) proxied data objects.  I think checkForSuperTypeMappings() may contain the problem and is a good place to start.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1187671797</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

Required refactoring to existing inheritance logic.  Doc's need to be updated to account for changes in inheritance behavior.  

**NOTE** Folks using inheritance mappings will need to regression test thoroughly after upgrading to 4.1</field>
</message>

<message>
		<field name="adddate">1187590767</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

I applied some more fixes.  85% of failures have been resolved.  I am guessing that the remaining ones will be tricky</field>
</message>

<message>
		<field name="adddate">1187580270</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

I fixed one of the issues in ClassMapFinder, but there are still failures</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917454</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1187671797</field>
		<field name="entrydate">1190917454</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1187671797</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1187671797</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1187590767</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1773425</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Array mapping with XMLBeans throws NoSuchMehtod exception</field>
	<field name="open_date">1187031611</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hello, 
 
I am trying to make use of dozer to map my domain objects to XmlBeans. I ran into an issue when dealing with collections... 
 
In cases where I map properties on my domain object its XmlBeans array cousin, I get a java.lang.NoSuchMethodException. It seems as if Dozer is having a hard time finding constructors on my target? 
 
My mappings are straightforward: 
 
&#60;mapping wildcard=&#34;false&#34;&#62; 
&#60;class-a&#62;ordering.core.domain.Order&#60;/class-a&#62; 
&#60;class-b bean-factory=&#34;net.sf.dozer.util.mapping.factory.XMLBeanFactory&#34;&#62;schemas.ordering.OrderDocument&#60;/class-b&#62; 
&#60;/mapping&#62; 
 
The field mapping that dozer blows up on is: 
&#60;field &#62; 
&#60;a&#62;orderLines&#60;/a&#62; 
&#60;b&#62;Order.LineItemArray&#60;/b&#62;  
&#60;b-hint&#62;schemas.ordering.LineItemType&#60;/b-hint&#62;  
&#60;/field&#62; 
 
Using a hint seems to have no effect. Is there something special that I need to do in order to get this to work properly with XmlBeans? I am not having much success with this and would like to avoid creating builders for all of my collection based properties if possible. 
 
The stacktrace follows: 
 
MapId: null 
Type: bi-directional 
Source parent class: ordering.core.domain.Order 
Source field name: orderLines 
Source field type: class java.util.HashSet 
Source field value: [ordering.core.domain.OrderLine@20b4879] 
Dest parent class: schemas.ordering.impl.OrderDocumentImpl 
Dest field name: Order.LineItemArray 
Dest field type: [Lschemas.ordering.LineItemType; 
net.sf.dozer.util.mapping.MappingException: java.lang.NoSuchMethodException: &#60;init&#62; 
at net.sf.dozer.util.mapping.util.MappingUtils.throwMappingException(MappingUtils.java:91) 
at net.sf.dozer.util.mapping.util.DestBeanCreator.newInstance(DestBeanCreator.java:125) 
at net.sf.dozer.util.mapping.util.DestBeanCreator.create(DestBeanCreator.java:83) 
at net.sf.dozer.util.mapping.MappingProcessor.mapCustomObject(MappingProcessor.java:432) 
at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:404) 
at net.sf.dozer.util.mapping.MappingProcessor.addOrUpdateToList(MappingProcessor.java:703) 
at net.sf.dozer.util.mapping.MappingProcessor.mapListToArray(MappingProcessor.java:616) 
at net.sf.dozer.util.mapping.MappingProcessor.mapSetToArray(MappingProcessor.java:729) 
at net.sf.dozer.util.mapping.MappingProcessor.mapCollection(MappingProcessor.java:491) 
at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:395) 
at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:313) 
at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:274) 
at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:216) 
at net.sf.dozer.util.mapping.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:886) 
at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:206) 
at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:132) 
at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:108) 
at jrockit.reflect.VirtualNativeMethodInvoker.invoke(Ljava.lang.Object;[Ljava.lang.Object;)Ljava.lang.Object;(Unknown Source) 
at java.lang.reflect.Method.invoke(Ljava.lang.Object;[Ljava.lang.Object;I)Ljava.lang.Object;(Unknown Source) 
at net.sf.dozer.util.mapping.interceptor.StatisticsInterceptor.invoke(StatisticsInterceptor.java:44) 
at $Proxy0.map(Ljava.lang.Object;Ljava.lang.Class;)Ljava.lang.Object;(Unknown Source) 
at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:93) 
at ordering.webservice.util.OMSBeanMapperTest.testDomainToXmlBeans(OMSBeanMapperTest.java:37) 
at jrockit.reflect.VirtualNativeMethodInvoker.invoke(Ljava.lang.Object;[Ljava.lang.Object;)Ljava.lang.Object;(Unknown Source) 
at java.lang.reflect.Method.invoke(Ljava.lang.Object;[Ljava.lang.Object;I)Ljava.lang.Object;(Unknown Source) 
at junit.framework.TestCase.runTest(TestCase.java:154) 
Caused by: java.lang.NoSuchMethodException: &#60;init&#62; 
at java.lang.Class.getDeclaredConstructor([Ljava.lang.Class;I)Ljava.lang.reflect.Constructor;(Unknown Source) 
at net.sf.dozer.util.mapping.util.DestBeanCreator.newInstance(DestBeanCreator.java:121) 
... 24 more </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1189996557</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

Fixed on current_release branch. Look at the xmlBeansMapping.xml file for an example.</field>
</message>

<message>
		<field name="adddate">1189919928</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

Disregard last comment. Looks like it is another issue.</field>
</message>

<message>
		<field name="adddate">1189917334</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

Changing the destination bean creator was easy to use the XMLBeanFactory. There is a larger problem in the way XMLBeans deals with Arrays. When you define something as an Array in XMLBeans it creates a wrapper class and an interface. A concrete example would be ArrayOfWeatherDataImpl which implements ArrayOfWeatherData. Methods on this interface are things like:

    public net.sf.dozer.util.mapping.vo.WeatherData[] getWeatherDataArray()

and

    public void setWeatherDataArray(net.sf.dozer.util.mapping.vo.WeatherData[] weatherDataArray)

This creates a huge problem in how me map and determine collections. Our logic  would  never  know that ArrayOfWeatherData  is  a  way to wrap a collection. Even  if  it  did  there  we would still have to get the actual array off of the wrapper class...manipulate it...and then put it back. Do you think this rabbit hole is worth going down?
</field>
</message>

<message>
		<field name="adddate">1187043608</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

The root of the problem is this:

After adding the bug I found out more...I will put this conversation on the bug.

Basically, when we do nested mappings with XMLBean objects we don't use the bean factory defined at the class level...which is typically the XMLBeanFactory. XMLBeans has a custom way to create objects. So the top level objects are created fine...but any time we drill deeper we fail to use the XMLBeanFactory and just use the generic DestBeanCreator...which has no idea how to create XMLBeans.

As soon as I define the field level classes as class mappings with the XMLBeanFactory as factory...it behaves correctly.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917454</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1189996557</field>
		<field name="entrydate">1190917454</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1189996557</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1189996557</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1757573</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Inheritance mapping not working correctly - Part Deux</field>
	<field name="open_date">1184939388</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Bug fix 1486105 introduced a new bug:

It seems that the fixation of this introduced another bug. As far as I
know, to fix this bug, a default class map is created if one of the
destination or source classes given in the mapping defininiton is different
from the actual object classes (as in the case of mapping subclasses using
a mapping for super classes). However this default mapping causes an
override effect. For example if there is such a declaration in the
mapping:
&#60;field&#62;
  &#60;a&#62;propA.realProp&#60;/a&#62;
  &#60;b&#62;propA&#60;/b&#62;
&#60;/field&#62;
MappingProcessor also maps propA to propA because of the default mapping,
causing an override effect. Is there any way to bypass this, or should this
be reported as a new bug?
				</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1189822802</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1185915588</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

Fixed in the current_release branch. Will go out on 4.1 release.</field>
</message>

<message>
		<field name="adddate">1185146973</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

This will be fixed in the 4.x branch and will go out in the next release.

Franz</field>
</message>

<message>
		<field name="adddate">1185143855</field>
		<field name="user_name">jacqueline-1</field>
		<field name="body">Logged In: YES 
user_id=1849340
Originator: NO

I have also encountered this bug.  It's causing me problems as I have a custom converter on the field mapping, which is being overridden (and thus ignored) due to it applying the default mapping.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190917454</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1189830826</field>
		<field name="entrydate">1190917454</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1189830826</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1189822803</field>
		<field name="entrydate">1189830826</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1189822803</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1185915588</field>
		<field name="entrydate">1189822803</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1185915588</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1185915588</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1809955</field>
	<field user_id="1908920" name="submitted_by">fred_barnes</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">List to array mapping problem</field>
	<field name="open_date">1191910943</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi Guys,

I am experiencing a problem mapping between java.util.List and an array.

The following object hierarchy exists:

StandardAddress extends Address
POBoxAddress extends Address

The source list an contain StandardAddress or POBoxAddress types or both.

The destination object contains an Address array propery.  After mapping completes the destination array only contain objects of type Address and not of the specific sub-type.

The error only surfaced after upgrading the version 4.1.  It appear as if Dozer is not consulting my mapping file when determining which type of object to instantiate. I have attached a unit test to demonstrate this scenario.  If you execute the unit test using release 4.0 it will pass.  Changing the dependency to 4.1 results in the unit test failing.

Thank you in advance

Kind regards
Fred</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1192157833</field>
		<field name="user_name">fred_barnes</field>
		<field name="body">Logged In: YES 
user_id=1908920
Originator: YES

Hi,

I have managed to find a solution the this problem on the Help forum.  The solution is to specify multiple comma separated hints on the collection field.

e.g.

&#60;mapping&#62;
  &#60;class-a&#62;example.dozer.bean.src.Person&#60;/class-a&#62;
  &#60;class-b&#62;example.dozer.bean.dest.Person&#60;/class-b&#62;
  &#60;field&#62;
    &#60;a&#62;addresses&#60;/a&#62;
    &#60;b&#62;addresses&#60;/b&#62;
    &#60;a-hint&#62;example.dozer.bean.src.StandardAddress,example.dozer.bean.src.POBoxAddress&#60;/a-hint&#62;
    &#60;b-hint&#62;example.dozer.bean.dest.StandardAddress,example.dozer.bean.dest.POBoxAddress&#60;/b-hint&#62;
  &#60;/field&#62;
&#60;/mapping&#62;

Regards
Fred

</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1192157884</field>
		<field name="mod_by">fred_barnes</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1192157884</field>
		<field name="mod_by">fred_barnes</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">248831: list-to-array-mapping.zip</field>
		<field name="entrydate">1191910944</field>
		<field name="mod_by">fred_barnes</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1852121</field>
	<field user_id="1011684" name="submitted_by">craigandrews</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Add Dozer 4.1 to Maven</field>
	<field name="open_date">1197869548</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Can someone please complete the task of adding Dozer 4.1 to Maven?

The maven ticket is at: http://jira.codehaus.org/browse/MAVENUPLOAD-1792

I have successfully adding the package to my company's local artifactory repository, but, for obvious reasons, it would be great to get 4.1 in Maven. Is there anything I could do to help?

Thanks!</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1197870714</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

We have a ticket open for 4.2. Hopefully this one will make it through in the next day or two. Matt fixed the issue they had with the last release.

Thanks for looking.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1197870714</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1197870714</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1815199</field>
	<field user_id="1147455" name="submitted_by">aymericalibert</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">TimeZone not copied when mapping Calendar</field>
	<field name="open_date">1192637670</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">The current CalendarConverter does not copy the TimeZone when mapping a Calendar object. The new object is valid, but the underlying TimeZone will be changed to the local machine TimeZone.

Current code:
    // Convert from Calendar to Calendar
    else if (Calendar.class.isAssignableFrom(srcFieldClass)) {
      Calendar c = (Calendar) srcObj;
      result.setTime(c.getTime());
    }

Should be:

    // Convert from Calendar to Calendar
    else if (Calendar.class.isAssignableFrom(srcFieldClass)) {
      Calendar c = (Calendar) srcObj;
      result.setTime(c.getTime());
      result.setTimeZone(c.getTimeZone());
    }
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1196652003</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1192743878</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Fixed in current_release branch will got out in next release. Thanks for the find!

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1196660486</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1196652003</field>
		<field name="entrydate">1196660486</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1196660486</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1196652003</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1192743878</field>
		<field name="entrydate">1196652003</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1192743878</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1192743878</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1192743530</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1814758</field>
	<field user_id="1061853" name="submitted_by">jhampton</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Problem when getters and setters are on different interfaces</field>
	<field name="open_date">1192575210</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Wildcard mapping is breaking if I declare the getter and setters of the source object on different interfaces.

For example:

public interface PersonProfile {
    String getName();
}


public interface Person extends PersonProfile {
    Long getId();

    void setName(String name);
}

The wildcard mapping works fine if the mapping is not declared at all in the mapping file.  As soon as I declare the mapping in the mapping file, wildcard mapping no longer works.

Attached is a project that reproduces the problem.  Just run com.cleanoffer.DozerTest.

This is causing us major problems as we upgrade to 4.1.  We did not encounter this particular problem in version 3.2.1.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1197781011</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

fixed.  This was a good one.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1197781011</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1197781011</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1197781011</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1197781011</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">250067: dozerbug.tgz</field>
		<field name="entrydate">1192575210</field>
		<field name="mod_by">jhampton</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1797808</field>
	<field user_id="1717313" name="submitted_by">goeldner</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Unexpected exception in LogMsgFactory</field>
	<field name="open_date">1190203540</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">The LogMsgFactory method &#34;createFieldMappingErrorMsg&#34; fails during assembling the message string, if an exception occurs inside implicit call of toString() on variable &#34;destFieldValue&#34;.

(BTW: Why is the variable name &#34;destFieldValue&#34; when it is labelled in log message with &#34;Source field value&#34;?)

In my case a Hibernate LazyInitializationException is thrown during implicit toString() of PersistentSet.

Please resolve the string value in a separate try/catch block.

Thanx
Christoph
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1339507354</field>
		<field name="user_name">metatechbe</field>
		<field name="body">Sorry, this fix does not work because because it calls &#34;hashCode()&#34;, which re-throws the same Exception (LazyInitializationException).</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1197765376</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1197765376</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1197765376</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1197765376</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1796344</field>
	<field user_id="1892469" name="submitted_by">dancruz919</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Map-backed mapping with map-id</field>
	<field name="open_date">1190049711</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I've recently updated from Dozer 2.4 to 4.0.  I have a one-way mapping from a java.util.Map to a JavaBean with a map-id defined that no longer works without modification.  I've traced the issue to the ClassMapFinder.findInterfaceMappings() use of ClassMapKeyFactory.createKey(Class, Class) without specifying the mapId.

As an example, using the following mapping:

&#60;mappings&#62;
  &#60;mapping map-id=&#34;testMap&#34; map-null=&#34;false&#34; type=&#34;one-way&#34;&#62;
    &#60;class-a&#62;java.util.Map&#60;/class-a&#62;
    &#60;class-b&#62;TestBean&#60;/class-b&#62;
    &#60;field&#62;
      &#60;a key=&#34;aStringValue&#34;&#62;this&#60;/a&#62;
      &#60;b&#62;stringValue&#60;/b&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;
&#60;/mappings&#62;

where class A is a java.util.Hashtable and TestBean is a simple JavaBean with a single stringValue property, and MapperIF.map(testHashTable, TestBean.class, &#34;testMap&#34;) is called, the mapping will not occur since the cache key used to find the ClassMap is &#34;SOURCE CLASS--&#62;java.util.Map DEST CLASS--&#62;TestBean&#34;, which differs from the existing cache key of &#34;SOURCE CLASS--&#62;java.util.Map DEST CLASS--&#62;TestBean MAP ID--&#62;testMap&#34;.  If you change the class-a element to java.util.Hashtable, the mapping will occur.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1197782300</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I create a unit test for this use case in the 4.2 code base and it ran green.  I don't see any noticeable differences, so this may have been indirectly resolved by another fix.  I checked in the unit test --&#62;  MapTypeTest.testMapToVoUsingMapInterface()</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1197782300</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1197782300</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1197782300</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1197782300</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1792048</field>
	<field user_id="1885834" name="submitted_by">sguillory6</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Custom converter called on null source field</field>
	<field name="open_date">1189466985</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I am not sure if this is a bug or not, but it bit me and I had to modify my custom converter to work around it. Here is the issue:

1) I have a field in the source class that has a custom converter

2) The field may be null, so I set map-null to false

3) My mapping would fail because the custom converter was called with a null source object reference

My expectation was that if map-null was false and the source reference was null, the mapping was bypassed, including not calling the custom converter.

I can see where this might not be a bug, since the custom converter could map a default value when the source is null.

I worked around it by modifying my custom converter to return null when the source reference was null. Things worked as expected then, with the setter on the destination object not being called when the source field was null.

Thought I'd bring it to your attention and let you guys decide.

Stan
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1197763981</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

fixed and unit tested</field>
</message>

<message>
		<field name="adddate">1197761929</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I think you have raised a good point.  Right now, the map-null controls whether the destination value is written to the destination value, but as you mentioned the custom converter is still called to determine the destination value.  I am going to research adding a check not to call the custom converter when map-null = false and the src value is null</field>
</message>

<message>
		<field name="adddate">1189484881</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Thanks for the post.  Your analysis is correct and currently the map-null is ignored for custom converters.  I will take a look at the custom converter docs and make sure that the behavior is documented.  There was a feature request awhile ago for adding the functionality to invoke custom converters for null values.  I can see arguments both way and I don't feel strongly either way.  I think your solution is workable and we can think more about if the map-null should override the default behavior.  

http://sourceforge.net/tracker/index.php?func=detail&#38;aid=1563795&#38;group_id=133517&#38;atid=727368

</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1197763981</field>
		<field name="entrydate">1197797710</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1197763981</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1197763981</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1197761929</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2855016</field>
	<field user_id="2492595" name="submitted_by">martypitt</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Cannot convert directly from Date &#60;-&#62; Calendar</field>
	<field name="open_date">1252484171</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">The following test fails:

@Test
    public void testConversion()
    {
        GregorianCalendar cal = new GregorianCalendar(2009, 2, 3);
        Date sourceValue = cal.getTime();
        DozerBeanMapper mapper = new DozerBeanMapper();
        Object result = mapper.map(sourceValue, Calendar.class);
    }</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1255554992</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed in trunk. Will be shipped in 5.2.
Thanks for the report!</field>
</message>

<message>
		<field name="adddate">1255552199</field>
		<field name="user_name">buzdin</field>
		<field name="body">Workaround is to use create-method in Xml

  &#60;mapping&#62;
    &#60;class-a&#62;java.util.Date&#60;/class-a&#62;
    &#60;class-b create-method=&#34;getInstance&#34;&#62;java.util.Calendar&#60;/class-b&#62;
  &#60;/mapping&#62;</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1255554995</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1255554995</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1255554995</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1255554995</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1255554995</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1854905</field>
	<field user_id="1964246" name="submitted_by">picadelli</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Error in stopOnErrors</field>
	<field name="open_date">1198160498</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi there.

Me and a collegue came across a bug in FieldMap.isStopOnErrors(). It reads the isTrimStrings() value..

But not to worry. We created a patch. See attached.

Hope to see the correction soon.

Kind Regards 
Stefan</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1206152413</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1202181608</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1198210008</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Fixed on current_release branch. Will go out on 4.3 release of dozer. Thanks for finding the bug! We like patches :)</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1214270559</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1214270559</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1214181917</field>
		<field name="entrydate">1214270559</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1206152413</field>
		<field name="entrydate">1214181917</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1214181917</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1202181665</field>
		<field name="entrydate">1206152413</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1206152413</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1202181608</field>
		<field name="entrydate">1202181665</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1202181665</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1198210008</field>
		<field name="entrydate">1202181608</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1202181608</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1198210008</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1198210008</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1198209802</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">259274: dozer.patch.txt</field>
		<field name="entrydate">1198160498</field>
		<field name="mod_by">picadelli</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1797827</field>
	<field user_id="1717313" name="submitted_by">goeldner</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Collections are mapped twice, entries get duplicated</field>
	<field name="open_date">1190205119</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi, I have got a strange behaviour when using beans with interfaces:

If I specify my beans in mapping.xml with interfaces only instead of concrete classes, all its collections are mapped two times and all entries are duplicated inside destination bean after mapping!

(Even if I define relationship-type=&#34;non-cumulative&#34; for the collection it does not work in all cases.)

If only concrete classes are defined in mapping.xml the same mapping works fine. 

Please take a look at the attached test case. It demonstrates both scenarios.

Greetings
Christoph</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1207707620</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1203736808</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 45 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1199811314</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

ok. fixed and checked into dozer_current branch.</field>
</message>

<message>
		<field name="adddate">1199781420</field>
		<field name="user_name">goeldner</field>
		<field name="body">Logged In: YES 
user_id=1717313
Originator: YES

Seems that Dozer tries to instantiate the UserGroup interface in your case. Did you change something inside the testcase? Do you use JDK 1.5 (for collection hints)? The attached testcase runs fine for me with Dozer 4.2 and JDK 1.5 ...</field>
</message>

<message>
		<field name="adddate">1199727297</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Well that is strange. I tried to run this test and got:

-------------------------------------------------------------------------------
Test set: net.sf.dozer.util.mapping.collections.TestCumulativeCollectionMapping
-------------------------------------------------------------------------------
Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 0.056 sec &#60;&#60;&#60; FAILURE!
testMappingInterface(net.sf.dozer.util.mapping.collections.TestCumulativeCollectionMapping)  Time elapsed: 0.031 sec  &#60;&#60;&#60; ERROR!
net.sf.dozer.util.mapping.MappingException: java.lang.NoSuchMethodException: net.sf.dozer.util.mapping.vo.collections.UserGroup.&#60;init&#62;()
	at net.sf.dozer.util.mapping.util.MappingUtils.throwMappingException(MappingUtils.java:91)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.newInstance(DestBeanCreator.java:142)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.create(DestBeanCreator.java:85)
	at net.sf.dozer.util.mapping.MappingProcessor.mapCustomObject(MappingProcessor.java:445)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:414)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:309)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:255)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:224)
	at net.sf.dozer.util.mapping.MappingProcessor.mapCustomObject(MappingProcessor.java:451)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:414)
	at net.sf.dozer.util.mapping.MappingProcessor.addOrUpdateToList(MappingProcessor.java:741)
	at net.sf.dozer.util.mapping.MappingProcessor.addOrUpdateToList(MappingProcessor.java:774)
	at net.sf.dozer.util.mapping.MappingProcessor.mapListToList(MappingProcessor.java:643)
	at net.sf.dozer.util.mapping.MappingProcessor.mapCollection(MappingProcessor.java:516)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:405)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:309)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:255)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:224)
	at net.sf.dozer.util.mapping.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:938)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:208)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:136)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:110)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:94)
	at net.sf.dozer.util.mapping.collections.TestCumulativeCollectionMapping.testMappingInterface(TestCumulativeCollectionMapping.java:57)
Caused by: java.lang.NoSuchMethodException: net.sf.dozer.util.mapping.vo.collections.UserGroup.&#60;init&#62;()
	at java.lang.Class.getConstructor0(Class.java:2647)
	at java.lang.Class.getDeclaredConstructor(Class.java:1953)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.newInstance(DestBeanCreator.java:138)
	... 47 more

testMappingConcrete(net.sf.dozer.util.mapping.collections.TestCumulativeCollectionMapping)  Time elapsed: 0.019 sec  &#60;&#60;&#60; ERROR!
net.sf.dozer.util.mapping.MappingException: java.lang.NoSuchMethodException: net.sf.dozer.util.mapping.vo.collections.UserGroup.&#60;init&#62;()
	at net.sf.dozer.util.mapping.util.MappingUtils.throwMappingException(MappingUtils.java:91)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.newInstance(DestBeanCreator.java:142)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.create(DestBeanCreator.java:85)
	at net.sf.dozer.util.mapping.MappingProcessor.mapCustomObject(MappingProcessor.java:445)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:414)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:309)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:255)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:224)
	at net.sf.dozer.util.mapping.MappingProcessor.mapCustomObject(MappingProcessor.java:451)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:414)
	at net.sf.dozer.util.mapping.MappingProcessor.addOrUpdateToList(MappingProcessor.java:741)
	at net.sf.dozer.util.mapping.MappingProcessor.addOrUpdateToList(MappingProcessor.java:774)
	at net.sf.dozer.util.mapping.MappingProcessor.mapListToList(MappingProcessor.java:643)
	at net.sf.dozer.util.mapping.MappingProcessor.mapCollection(MappingProcessor.java:516)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:405)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:309)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:255)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:224)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:136)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:110)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:94)
	at net.sf.dozer.util.mapping.collections.TestCumulativeCollectionMapping.testMappingConcrete(TestCumulativeCollectionMapping.java:89)
Caused by: java.lang.NoSuchMethodException: net.sf.dozer.util.mapping.vo.collections.UserGroup.&#60;init&#62;()
	at java.lang.Class.getConstructor0(Class.java:2647)
	at java.lang.Class.getDeclaredConstructor(Class.java:1953)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.newInstance(DestBeanCreator.java:138)
	... 45 more



Thoughts?</field>
</message>

<message>
		<field name="adddate">1199716995</field>
		<field name="user_name">goeldner</field>
		<field name="body">Logged In: YES 
user_id=1717313
Originator: YES

Hi,

I retested this in 4.2 and the testcase works fine. You may close this issue now, but please integrate the attached testcase in your testsuite.

Christoph</field>
</message>

<message>
		<field name="adddate">1196415946</field>
		<field name="user_name">a_gorg</field>
		<field name="body">Logged In: YES 
user_id=1948377
Originator: NO

Hello..

I've got a similar problem to yours and I've tried the patch &#34;update initialised array from index 0 &#34;
and the collections stayed without repeated elements. 

Greetings
a_gorg</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1203739034</field>
		<field name="entrydate">1207707620</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1207707620</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1203739034</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1203736809</field>
		<field name="entrydate">1203739034</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1199811314</field>
		<field name="entrydate">1203736809</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1203736809</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1199811314</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1199811314</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1199725562</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">246308: dozer-collection-cumulation-test.zip</field>
		<field name="entrydate">1190205119</field>
		<field name="mod_by">goeldner</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1873566</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">isStopOnError bug in FieldMap, version 4.2</field>
	<field name="open_date">1200565432</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">The following method in FieldMap contains a bug:

  public boolean isStopOnErrors() {
    return classMap.isTrimStrings();
  }


It should be:
  public boolean isStopOnErrors() {
    return classMap.isStopOnErrors();
  }


When will this be fixed ?</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1200588274</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Duplicate with bug 1854905.</field>
</message>

<message>
		<field name="adddate">1200588216</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

this is fixed in dozer current_branch.

it will go out in the next release :)

franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1214270559</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1214181904</field>
		<field name="entrydate">1214270559</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1214270559</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1214181904</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1200588274</field>
		<field name="entrydate">1214181904</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1200588274</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1200588216</field>
		<field name="entrydate">1200588274</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1200588216</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1200588216</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1200588216</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2786647</field>
	<field user_id="2498268" name="submitted_by">spointk</field>
	<field user_id="2418250" name="assigned_to">vadeg</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Non-Standard getter/setter names and deep-mapping issue</field>
	<field name="open_date">1241448696</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">When using the following mapping, the objects are mapped properly, but an exception is thrown.

The getter / setter methods in the objects to map don't use standard naming. If the fieldname is explicitly excluded (see below), everything works fine.

Is that the expectd behaviour or a bug?

I'm looking forward to reading your replies ;-)

Kind regards

S.K.

&#60;mapping stop-on-errors=&#34;false&#34;&#62;
&#60;class-a&#62;dataObjects.DeepMappingTest&#60;/class-a&#62;
&#60;class-b&#62;dataObjects.sampleBO&#60;/class-b&#62;

&#60;field&#62;
&#60;a&#62;theStringValue.theValue&#60;/a&#62;
&#60;b&#62;theStringValue&#60;/b&#62;
&#60;/field&#62;
&#60;!-- 
&#60;field-exclude&#62;
&#60;a&#62;theStringValue&#60;/a&#62;
&#60;b&#62;theStringValue&#60;/b&#62;
&#60;/field-exclude&#62;
 --&#62;
&#60;/mapping&#62;

Field mapping error --&#62;
  MapId: null
  Type: null
  Source parent class: dataObjects.sampleBO
  Source field name: theStringValue
  Source field type: class java.lang.String
  Source field value: String for testing purpose...
  Dest parent class: dataObjects.DeepMappingTest
  Dest field name: theStringValue
  Dest field type: dataObjects.WrapperObject
java.lang.IllegalArgumentException: argument type mismatch
.
.
.

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1261330423</field>
		<field name="user_name">buzdin</field>
		<field name="body">closing this issue. this was an intended behaviour. correction was made to source code to make error message look more meaningful.</field>
</message>

<message>
		<field name="adddate">1256242854</field>
		<field name="user_name">vadeg</field>
		<field name="body">I've added more detailed message, when argument type mismatch occurs.</field>
</message>

<message>
		<field name="adddate">1256156780</field>
		<field name="user_name">vadeg</field>
		<field name="body">By default, Dozer builds mappings between fields with the same name. In your example, dozer builds mapings:
1. between theStringValue.theValue and theStringValue
2. between theStringValue and theStringValue of the DeepMappingTest object.

The second mapping cause an exception, because field types do not match. You need set wildcard=&#34;false&#34; to your mapping and it will work fine, but in this case you'll need ti write mappings between all the rest fields by yourself. Dozer won't build mapping between attributes with the same name.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">897300</field>
		<field name="entrydate">1261330423</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1261330423</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1261330423</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1261330423</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1261330423</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1241448785</field>
		<field name="mod_by">spointk</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">325692: src.rar</field>
		<field name="entrydate">1241448696</field>
		<field name="mod_by">spointk</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2750813</field>
	<field user_id="1796161" name="submitted_by">tbessie</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">NullPointerException when missing mapping entry</field>
	<field name="open_date">1239390377</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">In a mapping entry, I purposefully left out class-a, as a test, and I got the following NPE.  Invalid XML should not cause NPEs, but trigger other error types.

     [java] Exception in thread &#34;main&#34; java.lang.NullPointerException
     [java]     at org.dozer.classmap.ClassMap.getSrcClassToMap(ClassMap.java:195)
     [java]     at org.dozer.loader.MappingsParser.processMappings(MappingsParser.java:70)
     [java]     at org.dozer.loader.CustomMappingsLoader.load(CustomMappingsLoader.java:91)
     [java]     at org.dozer.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:149)
     [java]     at org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:132)
     [java]     at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:94)
     [java]     at dozertest.DozerTest.runTest2(DozerTest.java:62)
     [java]     at dozertest.DozerTest.main(DozerTest.java:14)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1240476408</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed, thank you for reporting.
Will be included in next release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1240476408</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240476408</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1240476408</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1240476408</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240476408</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240476408</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240476408</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1239390410</field>
		<field name="mod_by">tbessie</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">322227: dozer-test2-createBigThings.xml</field>
		<field name="entrydate">1239390377</field>
		<field name="mod_by">tbessie</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2788225</field>
	<field user_id="2500198" name="submitted_by">titan44</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">9</field>
	<field name="status">Closed</field>
	<field name="resolution">Duplicate</field>
	<field name="summary">out of memory error</field>
	<field name="open_date">1241677161</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">Hi am using dozer mapping tool for my project. One of the methods in my project will return 456 objects and i want to map all these 456 objects to another object. Both have some common fields. In my case, dozer.map() is able to map only around 270 objects,beyond that am getting 'out of memory error'.
NOTE: I am using eclipse IDE.I even tried by increasing eclipse memory also.
Is this the limitation of dozer? can someone help me.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1244495112</field>
		<field name="user_name">buzdin</field>
		<field name="body">This report is duplicate of 2793207</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244495113</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244495113</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1244495113</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244495113</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">2308193</field>
		<field name="entrydate">1244495113</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1241687229</field>
		<field name="mod_by">titan44</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1241687229</field>
		<field name="mod_by">titan44</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2746147</field>
	<field user_id="2469580" name="submitted_by">enderdwt</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Maven2 repo</field>
	<field name="open_date">1239243915</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">I want to use dozer 5.0 in a maven2 project. Currently I have this dependency in my pom file: 
 
&#60;dependency&#62; 
&#60;groupId&#62;org.dozer&#60;/groupId&#62; 
&#60;artifactId&#62;dozer&#60;/artifactId&#62; 
&#60;version&#62;5.0&#60;/version&#62; 
&#60;/dependency&#62; 
 
but I am getting this error when I try to build: 
 
Downloading: http://repository.jboss.org/maven2/org/dozer/dozer/5.0/dozer-5.0.pom 
Downloading: http://gwt-maven.googlecode.com/svn/trunk/mavenrepo//org/dozer/dozer/5.0/dozer-5.0.pom 
Downloading: http://snapshots.jboss.org/maven2/org/dozer/dozer/5.0/dozer-5.0.pom 
Downloading: http://repo1.maven.org/maven2/org/dozer/dozer/5.0/dozer-5.0.pom 
Downloading: http://repository.jboss.org/maven2/org/dozer/dozer/5.0/dozer-5.0.jar 
Downloading: http://gwt-maven.googlecode.com/svn/trunk/mavenrepo//org/dozer/dozer/5.0/dozer-5.0.jar 
Downloading: http://snapshots.jboss.org/maven2/org/dozer/dozer/5.0/dozer-5.0.jar 
Downloading: http://repo1.maven.org/maven2/org/dozer/dozer/5.0/dozer-5.0.jar 
[INFO] ------------------------------------------------------------------------ 
[ERROR] BUILD ERROR 
[INFO] ------------------------------------------------------------------------ 
[INFO] Failed to resolve artifact. 
 
Missing: 
---------- 
1) org.dozer:dozer:jar:5.0 
 
Try downloading the file manually from the project website. 
 
Then, install it using the command:  
mvn install:install-file -DgroupId=org.dozer -DartifactId=dozer -Dversion=5.0 -Dpackaging=jar -Dfile=/path/to/file 
 
Alternatively, if you host your own repository you can deploy the file there:  
mvn deploy:deploy-file -DgroupId=org.dozer -DartifactId=dozer -Dversion=5.0 -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id] 
 
Path to dependency:  
1) com.soylent.green.gwt:task-server:jar:1.0-SNAPSHOT 
2) org.dozer:dozer:jar:5.0 
 
---------- 
1 required artifact is missing. 
 
for artifact:  
com.soylent.green.gwt:task-server:jar:1.0-SNAPSHOT 
 
from the specified remote repositories: 
central (http://repo1.maven.org/maven2), 
gwt-maven (http://gwt-maven.googlecode.com/svn/trunk/mavenrepo/), 
jboss-snapshot (http://snapshots.jboss.org/maven2), 
jboss (http://repository.jboss.org/maven2) 

It looks like dozer 5.0 has not been added to maven2 repo. Can you deploy this or let me know what I am doing wrong

Thanks </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1247122920</field>
		<field name="user_name">buzdin</field>
		<field name="body">Uploaded.
Do use net.sf.dozer group id as previously </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1247122920</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1247122920</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1247122920</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1247122920</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1247122920</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2048382</field>
	<field user_id="1571484" name="submitted_by">eldimo</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">orphan should call remove()</field>
	<field name="open_date">1218567752</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">In MappingProcessor.addOrUpdateToList(), if orphan exists the list is resetted by calling:

1. clear()
2. addAll()

Instead, the code should check for orphan and call remove() (as stated in the documentation!).

Since &#34;mappedElement&#34; is a HashSet, result does not have the correct ordering after the mapping is done.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1227100048</field>
		<field name="user_name">buzdin</field>
		<field name="body">Sorry for misunderstanding. This was actually a bug. And the good news that it is now fixed and will be shipped in next release pretty soon.</field>
</message>

<message>
		<field name="adddate">1223845004</field>
		<field name="user_name">buzdin</field>
		<field name="body">A HashSet is not guaranteed to maintain its ordering. It varies between JDK Versions and vendors.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227100003</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">2243056</field>
		<field name="entrydate">1227100003</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1227100003</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1227100003</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227100003</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224345751</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224345751</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2133584</field>
	<field user_id="2230420" name="submitted_by">coolsubhasis</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Map back properties to POJO Deep Mapping</field>
	<field name="open_date">1222583462</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">I have found a bug where Map backed properties (Source)are not being copied to nested level (Deep Mapping)Properties of POJO Bean (Destination). The following mapping &#38; class structure I am using:

 &#60;mapping map-id=&#34;TM1&#34; type=&#34;one-way&#34;&#62;
  &#60;class-a&#62;java.util.Map&#60;/class-a&#62;
  &#60;class-b&#62;com.test.TestObject&#60;/class-b&#62;
  &#60;field&#62;
   &#60;a key=&#34;data1&#34;&#62;this&#60;/a&#62;
   &#60;b&#62;name1.firstname&#60;/b&#62;
   &#60;a-hint&#62;java.lang.String&#60;/a-hint&#62;
  &#60;/field&#62;
 &#60;/mapping&#62;

public class TestObject {
 
 private Name name1 = null;
 public Name getName1() {return name1;}
 public void setName1(Name name1) {
  this.name1 = name1;
 }
}

public class Name {
 private String firstname= null;
 public String getFirstName() {
  return firstname;
 }
 public void setFirstName(String str) {
  this.firstname= str;
 }
}

Thanks &#38; Regards,
-Subhasis Sanyal
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1224658971</field>
		<field name="user_name">buzdin</field>
		<field name="body">Like I wrote in a previous comment workaround is to use wildcard=&#34;false&#34; for the map-backed properties. In your case looks like the following:

&#60;mapping map-id=&#34;TM1&#34; type=&#34;one-way&#34; wildcard=&#34;false&#34;&#62;
&#60;class-a&#62;java.util.Map&#60;/class-a&#62;
&#60;class-b&#62;com.test.TestObject&#60;/class-b&#62;
&#60;field&#62;
&#60;a key=&#34;data1&#34;&#62;this&#60;/a&#62;
&#60;b&#62;name1.firstname&#60;/b&#62;
&#60;a-hint&#62;java.lang.String&#60;/a-hint&#62;
&#60;/field&#62;
&#60;/mapping&#62;

Next release is planned in November.</field>
</message>

<message>
		<field name="adddate">1224648634</field>
		<field name="user_name">coolsubhasis</field>
		<field name="body">May I get a Patch or something workaround for this bug prior to next release? Also, when is the planned next released please?</field>
</message>

<message>
		<field name="adddate">1224430275</field>
		<field name="user_name">buzdin</field>
		<field name="body">Reimplemented and fixed. Should work now. Will be included in next release.</field>
</message>

<message>
		<field name="adddate">1224365310</field>
		<field name="user_name">buzdin</field>
		<field name="body">Using wildcard=&#34;false&#34; option for such mapping is a current known workaround.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1224430287</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224430287</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224430287</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1224430287</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224160389</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2013632</field>
	<field user_id="1418311" name="submitted_by">chrisahn</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Bug in ReflectionUtils.getInterfacePropertyDescriptors()</field>
	<field name="open_date">1215534718</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">I have no clue what the method does, but Eclipse tells me that the variable j declared in the following line is never used:

for (int j = 0; i &#60; superInterfacePropertyDescriptors.size(); i++)

Something got mixed up with i and j.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1224697229</field>
		<field name="user_name">buzdin</field>
		<field name="body">Looks like a bug to me. Fixed, will be included in 4.3 release soon.</field>
</message>

<message>
		<field name="adddate">1216721504</field>
		<field name="user_name">bjoernkueng</field>
		<field name="body">Logged In: YES 
user_id=2154996
Originator: NO

This loop should actually use the 'j' variable for iteration and not 'i' from the outer loop. To fix this also correct the variable name on the next line:

PropertyDescriptor superPropDescriptor = (PropertyDescriptor) superInterfacePropertyDescriptors.get(j); 

The problem now is that if an interface extends more than one interface, you don't get all PropertyDescriptors of the second interface. The first one is skipped because 'i' already has the value 1 and ignores the PropertyDescriptor on index 0.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1224697180</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224697180</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224697180</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1224697180</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1224696243</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2634266</field>
	<field user_id="2082444" name="submitted_by">mdiskin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Invalid</field>
	<field name="summary">field-exclude not working</field>
	<field name="open_date">1235495013</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">I  have a field I cannot map with dozer (maybe a feature request two fields into one). I tried to exclude it but still get a type mismatch error, is there a chance it's doing this prior to checking to see if it needs to map the field?

Thanks
Mark
	
&#60;mapping&#62;
	&#60;class-a&#62;com.arccorp.database.invoicing.domain.HotelInvoice&#60;/class-a&#62;
	&#60;class-b&#62;com.arccorp.settleinv.dto.HotelInvoiceDTO&#60;/class-b&#62;
		&#60;field-exclude&#62;
			&#60;a&#62;balanceDue&#60;/a&#62;
			&#60;b&#62;balanceDue&#60;/b&#62;
		&#60;/field-exclude&#62;
&#60;/mapping&#62;


2009-02-24 11:49:38,527 ERROR [net.sf.dozer.util.mapping.MappingProcessor] - Field mapping error --&#62;
  MapId: null
  Type: null
  Source parent class: com.arccorp.database.invoicing.domain.HotelInvoice
  Source field name: balanceDue
  Source field type: class java.math.BigDecimal
  Source field value: 500
  Dest parent class: com.arccorp.settleinv.dto.HotelInvoiceDTO
  Dest field name: balanceDue
  Dest field type: com.arccorp.database.domain.MonetaryAmount
java.lang.IllegalArgumentException: argument type mismatch
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at net.sf.dozer.util.mapping.util.ReflectionUtils.invoke(ReflectionUtils.java:256)
	at net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor.invokeWriteMethod(GetterSetterPropertyDescriptor.java:242)
	at net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor.setPropertyValue(GetterSetterPropertyDescriptor.java:91)
	at net.sf.dozer.util.mapping.fieldmap.FieldMap.writeDestValue(FieldMap.java:92)
	at net.sf.dozer.util.mapping.MappingProcessor.writeDestinationValue(MappingProcessor.java:823)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:308)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:247)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:216)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:155)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:122)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:117)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:98)</field>
	<field name="artifact_history">
<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240923606</field>
		<field name="mod_by">mdiskin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1240923606</field>
		<field name="mod_by">mdiskin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1240923606</field>
		<field name="mod_by">mdiskin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1240923605</field>
		<field name="mod_by">mdiskin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2589532</field>
	<field user_id="2397678" name="submitted_by">conclusio</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Inheritance + Map-Id</field>
	<field name="open_date">1234366791</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">When mapping 2 independent class hierarchies by using
  - top-level class types as destination mapping types   AND
  - using a map-id as &#34;hierarchy-identifier&#34;
dozer is only able to map in one direction.

Although i don't know if i am using dozer in the way it was designed for, this is still a bug.

I solved the issue for myself by editing net.sf.dozer.util.mapping.util.ClassMapFinder:

BEFORE:

...
57: ClassMap classMap = null;
      while (iter.hasNext()) {
        Map.Entry entry = (Entry) iter.next();
        classMap = (ClassMap) entry.getValue();
        if (StringUtils.equals(classMap.getMapId(), mapId)) {
          return classMap;
        }
      }
      log.info(&#34;No ClassMap found for mapId:&#34; + mapId);
...

AFTER:

...
57: ClassMap classMap = null;
      ClassMap anySuitableMap = null;
      while (iter.hasNext()) {
        Map.Entry entry = (Entry) iter.next();
        classMap = (ClassMap) entry.getValue();
        if (StringUtils.equals(classMap.getMapId(), mapId)) { // this is not enough, there are probably two maps with this id
        	anySuitableMap = classMap;
        	// check the direction of the mapping
        	if (srcClass.equals(classMap.getSrcClassToMap())) {
        		return classMap;
        	}
        }
      }
      if (anySuitableMap != null) return anySuitableMap;
      log.info(&#34;No ClassMap found for mapId:&#34; + mapId);
...

see the attached file for more information.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234931443</field>
		<field name="user_name">mhtierney</field>
		<field name="body">I believe a patch was recently submitted that is the same issue as you are seeing.  I applied the patch tonight and will be included in the next dozer production release(5.0).  Thanks.

https://sourceforge.net/tracker/index.php?func=detail&#38;aid=2592492&#38;group_id=133517&#38;atid=727370</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234931443</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">897300</field>
		<field name="entrydate">1234931443</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234931443</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234931443</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1234931443</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">313045: net.sf.dozer.test.zip</field>
		<field name="entrydate">1234366794</field>
		<field name="mod_by">conclusio</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1884714</field>
	<field user_id="1027170" name="submitted_by">kurtwesterfeld</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">NullPointerException in mapMap (mapping a map)</field>
	<field name="open_date">1201887904</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">I am trying to use dozer to map a hibernate model to a DTO model.  The hibernate mappings use dynamic-component, which creates a java.util.Map that contains name=value pairs--but many of the values are null.  The source for mapMap is incorrectly doing a .getClass() on the value while iterating the map--assuming the value is not null.  In this case, dozer should simply insert a null value in the target map.

Stacktrace is here:

java.lang.NullPointerException
	at net.sf.dozer.util.mapping.MappingProcessor.mapMap(MappingProcessor.java:540)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:367)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:309)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:255)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:224)
	at net.sf.dozer.util.mapping.MappingProcessor.mapCustomObject(MappingProcessor.java:451)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:414)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:309)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:255)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:224)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:136)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:110)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:94)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1223911520</field>
		<field name="user_name">buzdin</field>
		<field name="body">Sorry, the comment was unintentionally lost. Bug is reproduced and fixed. Fix will be included in the next release.

Thank you for the bug report!</field>
</message>

<message>
		<field name="adddate">1223906647</field>
		<field name="user_name">maxxyme</field>
		<field name="body">Why has this bug been closed without any explanation/notice..??</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1225360491</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1225360491</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1223844093</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1223844093</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1223840375</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1865775</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">parent-child not work</field>
	<field name="open_date">1199700609</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">Hellu,

Like stated in my forum post:
http://sourceforge.net/forum/forum.php?thread_id=1864420&#38;forum_id=452530
the parent-child relation still not work properly.

That is: suppose I have class child, parent and grandparent.
The grandparent contains a field id with accessors.
This field id will not be mapped in a child mapping. Even not when it's contained in the xml mapping file

However, it will be properly mapped when the id mapping definition is contained in the parent mapping definition.
I had the same for other fields.

So the problem is that only xml field mapping definitions from the direct parent are inherited and not from the grand parent... (only one level deep).

Hope this is enough information.
This bug was produced aleardy in 4.1 and not solved in 4.2

Cheers,
Ed</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1227031255</field>
		<field name="user_name">buzdin</field>
		<field name="body">Bug is fixed. Fix will be included in release 4.3.
Thank you for your comments. It helped to solve the issue.</field>
</message>

<message>
		<field name="adddate">1226668157</field>
		<field name="user_name">edbras</field>
		<field name="body">Hi,

The probleem is indeed in the method checkForSuperTypeMapping:
It contains 2 while loop: the outer one loops through the superSrcClass and the inner one through the superDestClass.
When the inner loop is finished and the superSrcClass is changed, the superDestClass isn't reset such that it won't go through the inner loop again, such that it only does it one time (just like I mention in the above text).
Simple adding one line of code that give resets this value at the beginning of the outer while will work just fine:

    Class superDestClassOrg = MappingUtils.getRealSuperclass(destClass); // CHANGED
    Class superDestClass = superDestClassOrg; // NEW
    boolean stillHasSuperClasses = true;
    while (stillHasSuperClasses) {
      if ((superSrcClass != null &#38;&#38; !superSrcClass.getName().equals(&#34;java.lang.Object&#34;))
          || (superDestClass != null &#38;&#38; !superDestClass.getName().equals(&#34;java.lang.Object&#34;))) {
    	    superDestClass = superDestClassOrg; // NEW



This does the trick.
I just bounced in to this as I am busy solving another nasty bug that I still have to post: the bug will be solved when (in the same method as above):
Set superClasses = new HashSet();
will be replaced by an ArrayList as the order need to be fixed and the parent classes MUST be MAPPED completely first.  A set don't have this fix order such that the order is random that can give verryyyyy nasty bugs that only show them self sometimes.
I want to rewrite his whole function to a recursive version.
Let's see how far I get...
See the bug that I still have to post (including a patch probably).....

</field>
</message>

<message>
		<field name="adddate">1226668133</field>
		<field name="user_name">edbras</field>
		<field name="body">Hi,

The probleem is indeed in the method checkForSuperTypeMapping:
It contains 2 while loop: the outer one loops through the superSrcClass and the inner one through the superDestClass.
When the inner loop is finished and the superSrcClass is changed, the superDestClass isn't reset such that it won't go through the inner loop again, such that it only does it one time (just like I mention in the above text).
Simple adding one line of code that give resets this value at the beginning of the outer while will work just fine:

    Class superDestClassOrg = MappingUtils.getRealSuperclass(destClass); // CHANGED
    Class superDestClass = superDestClassOrg; // NEW
    boolean stillHasSuperClasses = true;
    while (stillHasSuperClasses) {
      if ((superSrcClass != null &#38;&#38; !superSrcClass.getName().equals(&#34;java.lang.Object&#34;))
          || (superDestClass != null &#38;&#38; !superDestClass.getName().equals(&#34;java.lang.Object&#34;))) {
    	    superDestClass = superDestClassOrg; // NEW



This does the trick.
I just bounced in to this as I am busy solving another nasty bug that I still have to post: the bug will be solved when (in the same method as above):
Set superClasses = new HashSet();
will be replaced by an ArrayList as the order need to be fixed and the parent classes MUST be MAPPED completely first.  A set don't have this fix order such that the order is random that can give verryyyyy nasty bugs that only show them self sometimes.
I want to rewrite his whole function to a recursive version.
Let's see how far I get...
See the bug that I still have to post (including a patch probably).....

</field>
</message>

<message>
		<field name="adddate">1224773194</field>
		<field name="user_name">xtrabet</field>
		<field name="body">Hi,

we're also facing this problem here.

grand parent mapping for not simple types (String, Integer...) does not work.

in method checkForSuperTypeMapping there's a loop nested in another one and just before running into the nested one, superDestClass variable should be reinitialized.
</field>
</message>

<message>
		<field name="adddate">1206457807</field>
		<field name="user_name">farin_cz</field>
		<field name="body">Logged In: YES 
user_id=2045378
Originator: NO

I have same problem. Deep hierarchy mapping (more then direct parent) doesn't work.
Probably bug in MappingProcessor.checkForSuperTypeMapping() method (and maybe in another place)


</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1227031200</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227031200</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227031200</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227031200</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227031200</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1227031200</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2057899</field>
	<field user_id="2185096" name="submitted_by">kb181029</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Mapping with remove-orphans changes the list order</field>
	<field name="open_date">1219077256</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">To reproduce:
1. Setup a mapping of a field of type List to another List field
2. Select remove-orphans=&#34;true&#34;
3. Add a few elements to the source list
4. Compare the order of the target list with the source list

MappingProcessor#addOrUpdateToList() puts the elements into the mappedElements HashSet. If the source list contains a few elements the hashCode() method reorders the elements in mappedElements. This makes the result order different than the source order. 

See the attachment for a working example.

The fix is to change mappedElements to ArrayList.

It seems that MappingProcessor#addToSet() could use HashSet for its mappedElements instead of ArrayList. It looks like the types of mappedElements in addOrUpdateToList() and addToSet() are swapped.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1227099823</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi,

You are completely right. I have changed both Set and List methods. Now original element ordering will be retained. If you have source &#34;A,B,C&#34; and destination &#34;B,C,D&#34; result will be &#34;B,C,A&#34; regardless of hashCode() values.

Fix will be included in next release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227099987</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1227099987</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227099987</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1227099987</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227099987</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227099987</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">289202: dozertest.zip</field>
		<field name="entrydate">1219077257</field>
		<field name="mod_by">kb181029</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1865945</field>
	<field user_id="1717313" name="submitted_by">goeldner</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Subclasses are not recognized, even if defined in mapping.xm</field>
	<field name="open_date">1199719584</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">Hello,

I found following problem (in Dozer 4.2) and created a simple testcase to demonstrate it. It seems that Dozer does not check the runtime type of the source field when determining the dest field type.

There are User, UserGroup and SpecialUserGroup classes defined. Additionally for each of those there exist a similar UserPrime, UserGroupPrime and SpecialUserGroupPrime class. SpecialUserGroup is a subclass of UserGroup (same for primes). All mappings are defined in XML, even those of the specialized classes.

User is defined as follows:

public class User {

    private UserGroup userGroup;
	
    public UserGroup getUserGroup() {
        return userGroup;
    }

    public void setUserGroup(UserGroup aUserGroup) {
        userGroup = aUserGroup;
    }
}

When I create a User and inject a SpecialUserGroup into it, I expect (after mapping the User to UserPrime) that UserPrime contains an instance of SpecialUserGroupPrime, but it only contains a UserGroupPrime!

Hope you get that fixed ;)

Greetings,
Christoph
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1227646929</field>
		<field name="user_name">buzdin</field>
		<field name="body">This issue has been fixed. But to use this approach you need to use multiple hints. This feature is not yet documented, but will be after short time. Working test case looks like the following:

  &#60;!-- Mapping between User and UserPrime --&#62;
	&#60;mapping&#62;
		&#60;class-a&#62;net.sf.dozer.util.mapping.vo.runtimesubclass.User&#60;/class-a&#62;
		&#60;class-b&#62;net.sf.dozer.util.mapping.vo.runtimesubclass.UserPrime&#60;/class-b&#62;
    &#60;field&#62;
      &#60;a&#62;userGroup&#60;/a&#62;
      &#60;b&#62;userGroup&#60;/b&#62;
      &#60;a-hint&#62;net.sf.dozer.util.mapping.vo.runtimesubclass.UserGroup,net.sf.dozer.util.mapping.vo.runtimesubclass.SpecialUserGroup&#60;/a-hint&#62;
      &#60;b-hint&#62;net.sf.dozer.util.mapping.vo.runtimesubclass.UserGroupPrime,net.sf.dozer.util.mapping.vo.runtimesubclass.SpecialUserGroupPrime&#60;/b-hint&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;

    &#60;!-- Mapping between basic UserGroup and UserGroupPrime --&#62;
	&#60;mapping&#62;
		&#60;class-a&#62;net.sf.dozer.util.mapping.vo.runtimesubclass.UserGroup&#60;/class-a&#62;
		&#60;class-b&#62;net.sf.dozer.util.mapping.vo.runtimesubclass.UserGroupPrime&#60;/class-b&#62;
	&#60;/mapping&#62;

    &#60;!-- Mapping between specialized SpecialUserGroup and SpecialUserGroupPrime --&#62;
	&#60;mapping&#62;
		&#60;class-a&#62;net.sf.dozer.util.mapping.vo.runtimesubclass.SpecialUserGroup&#60;/class-a&#62;
		&#60;class-b&#62;net.sf.dozer.util.mapping.vo.runtimesubclass.SpecialUserGroupPrime&#60;/class-b&#62;
	&#60;/mapping&#62;</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227646960</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227646960</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1227646960</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1227646960</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227646960</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227036107</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">261198: dozer-subclass-recognition-test.zip</field>
		<field name="entrydate">1199719584</field>
		<field name="mod_by">goeldner</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2813164</field>
	<field user_id="484267" name="submitted_by">baron_roberts</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Cannot access Eclipse plug-in site</field>
	<field name="open_date">1246091827</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Eclipse reports that http://dozer.sourceforge.net/eclipse-plugin is not a plugin site.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1246392944</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed, Eclipse plugin should be available on expected location.</field>
</message>

<message>
		<field name="adddate">1246101690</field>
		<field name="user_name">buzdin</field>
		<field name="body">Will check today. Seems that it is Maven build scripts problem</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1246392944</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1246392944</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1246392944</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1246392944</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1246101690</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1246101690</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2542694</field>
	<field user_id="1287959" name="submitted_by">buzdin</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Map method lookup</field>
	<field name="open_date">1233137635</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Map get/set method lookup fails in case overloading is present.
Fails when working with this kind of Map.

public class Model {

public set(String id, Object value);
public set(String id, Object value, String someParam);

}

Should check for exactly two parameters where first is String or fail with *informative* exception not JDK Illegal Argument Count.
Warning! Behaviour is non-deterministic and exception occurrence is dependant on the order of Methods provided by JDK.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1233862751</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1233862752</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1233862752</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1233862752</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1233862752</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1233862752</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1233862752</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2569088</field>
	<field user_id="2389186" name="submitted_by">sergeysergeev</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Null values in the destination HashMap</field>
	<field name="open_date">1233855210</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">I try to map my simple POJO-class to java.util.HashMap. Dozer copies each property from the source object to the destination HashMap except
properties with a null value. I tried to put map-null=&#34;true&#34; wherever it is possible but it does not helps.
I need that null values in my result map.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1237325148</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed, thank you for reporting the issue!
Will be shipped together with 5.1 release</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1237325148</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1237325148</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">721231</field>
		<field name="entrydate">1237325148</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888639</field>
		<field name="entrydate">1237325148</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1237325148</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1237325148</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1237325148</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2587665</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Test classes showing up in the dist jar</field>
	<field name="open_date">1234326534</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Test classes should not be included in the dozer runtime jar.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234926222</field>
		<field name="user_name">mhtierney</field>
		<field name="body">This has been resolved in 5.0</field>
</message>

<message>
		<field name="adddate">1234926200</field>
		<field name="user_name">mhtierney</field>
		<field name="body">This has been resolved in 5.0</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234926200</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234926200</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234926200</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1234926200</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2545113</field>
	<field user_id="1311553" name="submitted_by">sonicaaaa</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Timestamp mapping broken</field>
	<field name="open_date">1233222555</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Hi

Mapping with java.sql.Timestamp is broken because nanoseconds aren't mapped.

The problem is that java.sql.Timestamp is a java.util.Date but as stated on the API docs it shouldn't considered properly as a subclass.

I've seen other libraries distinguish subclasses inside a java.util.Date instance of.

this is a JUnit3 test to show the problem.



thanks again for your job

paolo antinori &#38; daniele sabaini</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1233866581</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed, Calendar is now supported as resulting object as well as Timestamp.
Will be included in 5.0 release.</field>
</message>

<message>
		<field name="adddate">1233431564</field>
		<field name="user_name">sonicaaaa</field>
		<field name="body">hi. at first we added the test without T class that was in a different file, then i included without actually recheck it, sorry.

thanks for tip about copy by ref. we're not sure we can use it without side effects but we'll try!</field>
</message>

<message>
		<field name="adddate">1233398105</field>
		<field name="user_name">edbras</field>
		<field name="body">Appearantly I don't seem to be able to attach a file as I am not the creator of this bug :(..

Anyway, the bug test is attached below.

BTW: another thing, you might want to  copy-by-reference these kind of primitive objects (String, Date, Timestampt, etc...). In my case I don't need to convert these kind of objects, but that's just me... (you configure this the mapping xml, see doc's)

-- Ed



public class TestTimestamp extends TestCase {

	public void testNanos() {
		DozerBeanMapper mapper = new DozerBeanMapper();

		T t = new T() {
			{
				timestamp = new java.sql.Timestamp(1L);
				timestamp.setNanos(12345);
			}
		};

		T t2 = mapper.map(t, T.class);
		
		assertEquals(t.timestamp, t2.timestamp);
	}

	public static class T {
		java.sql.Timestamp timestamp;

		public java.sql.Timestamp getTimestamp() {
			return timestamp;
		}

		public void setTimestamp(java.sql.Timestamp timestamp) {
			this.timestamp = timestamp;
		}

	}

}
</field>
</message>

<message>
		<field name="adddate">1233397865</field>
		<field name="user_name">edbras</field>
		<field name="body">Thanks,

Well spotted. The bug is in the DateConverter that threats it as a simple Date object with miliseconds and simple ignored the timestamp.

Btw: thanks for the test case, but it doesn't work as your methods are package protected so Dozer won't map them unless you map on field level.


I have added a modified version of your test that works.

-- Ed</field>
</message>

<message>
		<field name="adddate">1233222905</field>
		<field name="user_name">sonicaaaa</field>
		<field name="body">File Added: TestTimestamp.java</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1233866581</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1233866581</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">897300</field>
		<field name="entrydate">1233866581</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1233866581</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1233866581</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">311095: TestTimestamp.java</field>
		<field name="entrydate">1233222905</field>
		<field name="mod_by">sonicaaaa</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">311094: </field>
		<field name="entrydate">1233222869</field>
		<field name="mod_by">sonicaaaa</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">311094: TestTimestamp.java</field>
		<field name="entrydate">1233222556</field>
		<field name="mod_by">sonicaaaa</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2605660</field>
	<field user_id="1989737" name="submitted_by">astefan</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">DozerResolver should resolve the DTD using class classLoader</field>
	<field name="open_date">1234792926</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">net.sf.dozer.util.mapping.util.DozerResolver should resolve the DTD file using getClass().getClassLoader(), or at least try both approaches (the current one or the classLoader that loaded the class).

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234931245</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Andrei,

This has been fixed in the 5.0 code.  Thanks for submitting this bug.

Thanks,
Matt</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234931245</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888639</field>
		<field name="entrydate">1234931245</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234931245</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234931245</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1234931245</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2750478</field>
	<field user_id="562080" name="submitted_by">frozen4time</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Invalid</field>
	<field name="summary">Class Name Wrong in Spring Example</field>
	<field name="open_date">1239375960</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Documentation Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">In the online documentation here:  http://dozer.sourceforge.net/documentation/usage.html there is a section on spring config that is as follows:

&#60;bean id=&#34;mapper&#34; class=&#34;org.dozer.DozerBeanMapper&#34;&#62;
  &#60;property name=&#34;mappingFiles&#34;&#62;
    &#60;list&#62;
      &#60;value&#62;dozer-global-configuration.xml&#60;/value&#62;			   
      &#60;value&#62;dozer-bean-mappings.xml&#60;/value&#62;
      &#60;value&#62;more-dozer-bean-mappings.xml&#60;/value&#62;
    &#60;/list&#62;
  &#60;/property&#62;
&#60;/bean&#62;
          
The class name is incorrect in the example.  It should be: net.sf.dozer.util.mapping.DozerBeanMapper. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1243972379</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hello Michael,

We have released Dozer 5.0 where radical packaging changes were introduced. You are seeing a mismatch between 4.x naming and 5.x. 
The documentation is now targeting a newer release. To get documentation for previous releases it is necessary to generate it with maven locally.

Dmitry </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1243972379</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1243972379</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1243972379</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1243972379</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1243972379</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1243972379</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2861861</field>
	<field user_id="2634755" name="submitted_by">ryarlagadda</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Invalid</field>
	<field name="summary">date type  custom conversion </field>
	<field name="open_date">1253316488</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">hi ,
              i am using the below mappiing  to get the date  to get the required format

                     &#60;field &#62; 
	      &#60;a date-format=&#34;MM/dd/yyyy&#34;&#62;recalledDate&#60;/a&#62;
	      &#60;b&#62;RecallInfo.RecalledDate&#60;/b&#62;
	    &#60;/field&#62;


               but i dont get the required format it still has -7:00 attached to the date 


 so please help me out in this</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1268940259</field>
		<field name="user_name">buzdin</field>
		<field name="body">test case was not provided for the ticket</field>
</message>

<message>
		<field name="adddate">1255003429</field>
		<field name="user_name">vadeg</field>
		<field name="body">Hello!

Can you provide class structure, which you try to convert?</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1268940259</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1268940259</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1268940259</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1268940259</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1268940259</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2668378</field>
	<field user_id="1669958" name="submitted_by">yoannperrin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Errors in the new Dozer 5.0 XSD</field>
	<field name="open_date">1236348390</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">All Eclipse WTP plugin and W3C XSD schema validator.
Checkat this URL: http://www.w3.org/2001/03/webdata/xsv?docAddrs=http%3A%2F%2Fdozer.sourceforge.net+http%3A%2F%2Fdozer.sourceforge.net%2Fschema%2Fbeanmapping.xsd&#38;warnings=on&#38;style=xsl#

The fix I found is to omit the schema declaration in my mapping file ... ugly !</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1238160974</field>
		<field name="user_name">yoannperrin</field>
		<field name="body">Since I re-installed Eclipse ... the error disappeared.
Thanks for answers.</field>
</message>

<message>
		<field name="adddate">1238152798</field>
		<field name="user_name">smittel</field>
		<field name="body">You should update the documentation as Myron suggested.

Regards,

Sebastian</field>
</message>

<message>
		<field name="adddate">1237290142</field>
		<field name="user_name">wmtuang</field>
		<field name="body">Apparently, the way to fix it is to use the following heading in the xml file:

&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;mappings
        xmlns=&#34;http://dozer.sourceforge.net&#34;
        xsi:schemaLocation=&#34;http://dozer.sourceforge.net http://dozer.sourceforge.net/schema/beanmapping.xsd&#34;
        xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;&#62;

instead of:

&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
  &#60;!DOCTYPE mappings PUBLIC &#34;-//DOZER//DTD MAPPINGS//EN&#34;
    &#34;http://dozer.sourceforge.net/schema/beanmapping.xsd&#34;&#62;
&#60;mappings&#62;

Myron
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1238160974</field>
		<field name="mod_by">yoannperrin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1238160974</field>
		<field name="mod_by">yoannperrin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1238160974</field>
		<field name="mod_by">yoannperrin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2714863</field>
	<field user_id="2454715" name="submitted_by">ukkr</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Hints doesn't work with inherited classes</field>
	<field name="open_date">1238085597</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Hi Guys.
I've recently updated my Dozer distribution from v4.3 to 5.0. And now, I'm facing strange problem with inherited classes.
Preconditions:
We have class A and 4 derived classes:
1) B extends A
2) C extends A
3) D extends A
4) E extends A
 
Furthemore, we have a container class
class F{
int suka;
....
Set&#60;A&#62; ass;
}
As far as you understand, F.ass can contain any of the B,C,D,E typed objects.
Also, I have corresponding DTO classes, say:
Adto
1)Bdto extends Adto
2)Cdto extends Adto
3)Ddto extends Adto
4)Edto extends Adto
And class Fdto{
int suka;
....
Set&#60;Adto&#62; ass;
}

With Dozer 4.3 to convert F to Fdto I had such mapping:

&#60;mapping&#62;
    	&#60;class-a&#62;com.hriu.entity.F&#60;/class-a&#62;
    	&#60;class-b&#62;com.hriu.dto.Fdto&#60;/class-b&#62;
    	&#60;field&#62;
    		&#60;a&#62;ass&#60;/a&#62;
    		&#60;b&#62;ass&#60;/b&#62;
			&#60;a-hint&#62;
    		com.hriu.entity.B,
    		com.hriu.entity.C,
    		com.hriu.entity.D,
    		com.hriu.entity.E
    		&#60;/a-hint&#62;
    		&#60;b-hint&#62;
    		com.hriu.dto.Bdto,
    		com.hriu.dto.Cdto,
    		com.hriu.dto.Ddto,
    		com.hriu.dto.Edto
    		&#60;/b-hint&#62;
    	&#60;/field&#62;
    &#60;/mapping&#62;

It was working great, but since update to the v5.0 it doesn't work:
instead of Fdto.ass to be Set of the Bdto/Cdto/Ddto/Edto I always have it as Set of the Adto( parent) class.
How could it be fixed?

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1238181795</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk</field>
</message>

<message>
		<field name="adddate">1238160983</field>
		<field name="user_name">ukkr</field>
		<field name="body">Guys, I've found the reason. It's critical bug in the Dozer!!!

Prior to the version 5 in the method of the class 
net.sf.dozer.util.mapping.MappingProcessor 

private Object mapCollection(Object srcObj, Object srcCollectionValue, FieldMap fieldMap, Object destObj) {

you had the following piece of code
 // since we are mapping some sort of collection now is a good time to decide
    // if they provided hints
    // if no hint is provided then we will check to see if we can use JDK 1.5
    // generics to determine the mapping type
    // this will only happen once on the dest hint. the next mapping will
    // already have the hint
    if (fieldMap.getDestHintContainer() == null &#38;&#38; GlobalSettings.getInstance().isJava5()) {
      Class genericType = null;
      try {
        Method method = fieldMap.getDestFieldWriteMethod(destObj.getClass());
        genericType = ReflectionUtils.determineGenericsType(method, false);
      } catch (Throwable e) {
        log.info(&#34;The destObj:&#34; + destObj + &#34; does not have a write method&#34;);
      }
      if (genericType != null) {
        HintContainer destHintContainer = new HintContainer();
        destHintContainer.setHintName(genericType.getName());
        fieldMap.setDestHintContainer(destHintContainer);
      }
    }

But now, in the version 5, the first line
    if (fieldMap.getDestHintContainer() == null) disappeared from this method, so this method always looks the generic class from the signature of the method to use as destination hint, despite any users setupped hints.

Please, put this condition back ASAP.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1238181795</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1238181795</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1238181795</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1238181795</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">9</field>
		<field name="entrydate">1238181795</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1238181795</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1238181795</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1238161050</field>
		<field name="mod_by">ukkr</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2793919</field>
	<field user_id="2508196" name="submitted_by">olegych</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">date-format not honored for collection element</field>
	<field name="open_date">1242746845</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">        &#60;field&#62;
            &#60;a&#62;
                publishDate
            &#60;/a&#62;
            &#60;b date-format=&#34;yyyy-MM-dd HH:mm:ss&#34;&#62;
                newsML.newsItem[0].newsComponent.newsLines.dateLines[0].content[0]
            &#60;/b&#62;
        &#60;/field&#62;

This mapping works as if there were no date-format specified.

        &#60;field&#62;
            &#60;a&#62;
                publishDate
            &#60;/a&#62;
            &#60;b date-format=&#34;yyyy-MM-dd HH:mm:ss&#34;&#62;
                newsML.newsItem[0].newsComponent.newsLines.dateLines[0].dateString
            &#60;/b&#62;
        &#60;/field&#62;
This works fine.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1244489757</field>
		<field name="user_name">buzdin</field>
		<field name="body">resolved in trunk</field>
</message>

<message>
		<field name="adddate">1244045269</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi, 

The workaround is to define b-hint telling Dozer that you want String object explicitly. In this way conversion does happen. Working on a better solution for your problem.

Thanks for the report,
Dmitry</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244489770</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244489757</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244489757</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1244489757</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244045269</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244045269</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1242746860</field>
		<field name="mod_by">olegych</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2794243</field>
	<field user_id="328291" name="submitted_by">warrenc5</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">who uses DOCTYPE mapping for schemas??</field>
	<field name="open_date">1242804676</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Documentation Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">use this instead.. (welcome to the 21C =)

&#60;mappings xmlns=&#34;http://dozer.sourceforge.net&#34; xmlns:xs=&#34;http://www.w3.org/2001/XMLSchema&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
       xsi:schemaLocation=&#34;http://dozer.sourceforge.net http://dozer.sourceforge.net/schema/beanmapping.xsd&#34;&#62;

see stacktrace with jboss 4.2

  [CustomMappingsLoader] Using the following xml files to load custom mappings for the bean mapper instance: [dozerBeanMapping.xml]
14:34:19,636 INFO  [CustomMappingsLoader] Trying to find xml mapping file: dozerBeanMapping.xml
14:
14:34:19,639 ERROR [MappingFileReader] Error while loading dozer mapping file url: [jar:file:/opt/jboss-4.2.3.GA/server/default/tmp/deploy/tmp3073709680932941017ewka-akp-ws-1.0.3-SNAPSHOT-exp.war/WEB-INF/lib/ewka-backend-1.0.3-SNAPSHOT.jar!/dozerBeanMapping.xml] : org.xml.sax.SAXException: Parsing Fatal Error
Line:    2
URI:     http://dozer.sourceforge.net/schema/beanmapping.xsd
Message: The markup declarations contained or pointed to by the document type declaration must be well-formed.
14:34:19,639 ERROR [OrderInterfaceImpl] EnterOrderError...
org.dozer.MappingException: org.xml.sax.SAXException: Parsing Fatal Error
Line:    2
URI:     http://dozer.sourceforge.net/schema/beanmapping.xsd
Message: The markup declarations contained or pointed to by the document type declaration must be well-formed.
        at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:88)
        at org.dozer.loader.xml.MappingFileReader.read(MappingFileReader.java:64)
        at org.dozer.loader.CustomMappingsLoader.load(CustomMappingsLoader.java:67)
        at org.dozer.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:149)
        at org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:132)
        at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:94)
        at pl.touk.framework.util.convert.DTODozerConverter.convert(DTODozerConverter.java:43)
        at pl.touk.ewka.services.akp.OrderInterfaceImpl.enterOrder(OrderInterfaceImpl.java:62)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
        at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:50)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:160)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
        at $Proxy337.enterOrder(Unknown Source)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:166)
        at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:82)
        at org.apache.cxf.jaxws.JAXWSMethodInvoker.invoke(JAXWSMethodInvoker.java:55)
        at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:68)
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:57)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:95)
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:89)
        at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:99)
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:337)
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:182)
        at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:163)
        at org.apache.cxf.transport.servlet.AbstractCXFServlet.doPost(AbstractCXFServlet.java:141)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:112)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
        at java.lang.Thread.run(Thread.java:619)
Caused by: org.xml.sax.SAXException: Parsing Fatal Error
Line:    2
URI:     http://dozer.sourceforge.net/schema/beanmapping.xsd
Message: The markup declarations contained or pointed to by the document type declaration must be well-formed.
        at org.dozer.loader.xml.XMLParserFactory$DozerDefaultHandler.fatalError(XMLParserFactory.java:99)
        at org.apache.xerces.util.ErrorHandlerWrapper.fatalError(Unknown Source)
        at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
        at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
        at org.apache.xerces.impl.XMLScanner.reportFatalError(Unknown Source)
        at org.apache.xerces.impl.XMLDTDScannerImpl.scanDecls(Unknown Source)
        at org.apache.xerces.impl.XMLDTDScannerImpl.scanDTDExternalSubset(Unknown Source)
        at org.apache.xerces.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(Unknown Source)
        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:124)
        at org.dozer.loader.xml.MappingFileReader.read(MappingFileReader.java:58)
        ... 68 more
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1244038017</field>
		<field name="user_name">buzdin</field>
		<field name="body">This is a documentation bug with hybrid XML approac both of DTD and XSD style.
I have fixed examples in trunk. It should appear on the web site together with the next release.
Thank you for pointing that out.

Dmitry</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244038017</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244038017</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244038017</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244038017</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244038017</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244038017</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1244038017</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2780613</field>
	<field user_id="1748069" name="submitted_by">metaphysis</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Memory Leak on reload in web container caused by JMX bean</field>
	<field name="open_date">1240590922</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">When dozer (5.0) is used in a web container (tomcat 6) the autoregistered JMX bean causes a memory leak on reload. While the JMX bean is still registered after application shutdown, there is a reference between the bean and the webapp classloader. This reference keeps the webapp classloader from being garbage collected. So with autoregistered JMX bean after a couple of redeployments of a WAR in tomcat, an out of memory error will be caused by this memory leak.
Simple workaround is to disable the JMX bean with the dozer config property.

I use dozer in a webapp with spring, configured, as mentioned in the docs, as spring singleton.
A solution to the problem without disabling the JMX bean could be the following:
- org.dozer.DozerBeanMapper could implement springs DisposableBean interface and clean up the bean at shutdown. To prevent any dependency to spring dozer could just have a shutdown / destroy method, that could be explicitly configured in spring as shutdown method with &#60;... destroy-method=&#34;&#34;/&#62;.
- A finalizer to the central org.dozer.DozerBeanMapper to unregister the bean may be another, not so preferrable way to solve this.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1243967592</field>
		<field name="user_name">buzdin</field>
		<field name="body">Dozer has a special class for Spring integration called DozerBeanMapperFactoryBean.
It does implement both DisposableBean and InitializingBean interfaces. Disposable behaviou releases all JMX resources. It can be done manually as well by using DozerBeanMapper.destroy() method.</field>
</message>

<message>
		<field name="adddate">1240993159</field>
		<field name="user_name">buzdin</field>
		<field name="body">Thank you for this report and detailed explanation. I will address it with high priority.
I think DisposableBean for Spring integration makes sense.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1243967592</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1243967592</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1243967592</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1243967592</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240993159</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240993159</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2800476</field>
	<field user_id="2520297" name="submitted_by">mariusz-pala</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Mapping a map with a null value fails</field>
	<field name="open_date">1244032382</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Hi, I have a simple class with just one field: HashMap.
Mapping works when there is no null values. But when there is one, all other values are missing.

I found the cause of this issue (return statement):
Class MappingProcessor (revision 924) line 528 (method mapMap)

There is:

      if (srcEntryValue == null) { // overwrites with null in any case
        result.put(srcEntry.getKey(), null);
        return result;
      }

Should be:

      if (srcEntryValue == null) { // overwrites with null in any case
        result.put(srcEntry.getKey(), null);
        continue;
      }

So &#34;continue&#34; instead of &#34;return result&#34;.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1244492309</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed by a submitted patch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244492309</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244492309</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1244492309</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244492309</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1244492309</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2827699</field>
	<field user_id="2580579" name="submitted_by">paruljain</field>
	<field user_id="1777661" name="assigned_to">mthielen</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Not able to install eclipse plugin for dozer</field>
	<field name="open_date">1248691169</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Eclipse Plugin Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Pls help! I get the following when trying to install dozer plugin for eclipse. The correct versions of WTP and Spring IDE are installed as mentioned on the Installation home page.

Cannot complete the install because one or more required items could not be found.
  Software being installed: Dozer Plugin Feature 0.8.0 (net.sf.dozer.eclipse.feature.feature.group 0.8.0)
  Missing requirement: Dozer Plugin Feature 0.8.0 (net.sf.dozer.eclipse.feature.feature.group 0.8.0) requires 'org.springframework.bundle.spring 2.5.6' but it could not be found

Thanks,
Parul</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1248759130</field>
		<field name="user_name">paruljain</field>
		<field name="body">I am able to install now.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1248759130</field>
		<field name="mod_by">paruljain</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1248759130</field>
		<field name="mod_by">paruljain</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1248759130</field>
		<field name="mod_by">paruljain</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2556896</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">mapping of super interfaces is ignored</field>
	<field name="open_date">1233580131</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Hellu,

I know that interface mapping is a bit fragil at the moment and is to be re-designed, but still I encountered the following bug in the current trunc.
I have an interface Taxer that extends Member. Also:  a TaxerDefault that implements Taxer and extends MemberDefault and that implements Member.

In the dozer mappigng file I have custom bean creator that returns the TaxerDefault when mapping a Taxer instance.
The dozer mapping file contains a mapping between Taxer and TaxerDto and Member and MemberDto.
This latter mapping is however ignored by Dozer when mapping a Taxer instance to TaxerDto.
BTW: the TaxerDto extends MemberDto and are concrete classes.

In the method ClassMappings.findInterfaceMappings only the direct interfaces of TaxerDefault are used and not their super interfaces to determine the interface mappings. So the classMapping Member to MemberDto is never created.

-- Ed</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1245958820</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed by a patch submitted.
Test case has been incorporated into Dozer test suite.</field>
</message>

<message>
		<field name="adddate">1245957561</field>
		<field name="user_name">buzdin</field>
		<field name="body">not yet fixed</field>
</message>

<message>
		<field name="adddate">1235251724</field>
		<field name="user_name">mhtierney</field>
		<field name="body">I had already added your unit test for this to our regression suite as a known failing use case that should be fixed.  So it is accounted for as a defect.  Lets get the proxy resolver feature request implemented and then readdress this one with a clear ticket as the patch implementation code would most likely change.  

The large amount of verbiage and back/forth in this ticket would make it inefficient/confusing to work once the prereq's are in place.  Also, the attached patch broke existing tests, so dont want that to add to the confusion.  When working tickets with pages and pages of history/details it is difficult and inefficient to try and make sense out of it to determine what in the world was the original issue.  

So I think it will be most efficient to open a new clear and concise ticket for this bug once the proxy resolver Feature Request is implemented. 
https://sourceforge.net/tracker/index.php?func=detail&#38;aid=2624921&#38;group_id=133517&#38;atid=727371

Going forward I will put these types to some other status than deleted so that you can update.  I didn't realize that deleted tickets dont allow updates for people that are not on the project team.  I am able to update deleted tickets obviously
</field>
</message>

<message>
		<field name="adddate">1235250431</field>
		<field name="user_name">mhtierney</field>
		<field name="body">
Hi Matt,

I noticed that you closed the interface bug
https://sourceforge.net/tracker2/?func=detail&#38;atid=727368&#38;aid=2556896&#38;group_id=133517
and tend to solve it through
https://sourceforge.net/tracker2/index.php?func=detail&#38;aid=2624921&#38;group_id=1335
17&#38;atid=727371.

I don't really understand this:
1) Solving the RFC:
https://sourceforge.net/tracker2/index.php?func=detail&#38;aid=2624921&#38;group_id=1335
17&#38;atid=727371 won't solve the interface bug:
https://sourceforge.net/tracker2/?func=detail&#38;atid=727368&#38;aid=2556896&#38;group_id=1
33517, so why did you delete this bug?

2) Yes, if the proxy RFC will be implemented you can solve the interface bug
more easy, so there is a dependency. But that doesn't mean that the interface
bug is solved when the proxy RFC is implemented :(....

I would leave the interface bug open en make e dependency to the RFC.

-- Ed</field>
</message>

<message>
		<field name="adddate">1235243994</field>
		<field name="user_name">mhtierney</field>
		<field name="body">The patch broke existing tests and feature request added for custom proxy resolver support

https://sourceforge.net/tracker/index.php?func=detail&#38;aid=2624921&#38;group_id=133517&#38;atid=727371</field>
</message>

<message>
		<field name="adddate">1235243973</field>
		<field name="user_name">mhtierney</field>
		<field name="body">The patch broke existing tests and feature request added for custom proxy resolver support

https://sourceforge.net/tracker/index.php?func=detail&#38;aid=2624921&#38;group_id=133517&#38;atid=727371</field>
</message>

<message>
		<field name="adddate">1234949467</field>
		<field name="user_name">edbras</field>
		<field name="body">Yep,

I did. Looked at:
-- testPrimitiveArrayToList_UsingHint
The test class fails because you use both the old fashion proxy and new proxy functionality in dozer, which isn't working very nice of course. Like mentioned below you should remove the method getRealClassName and use the new proxy functionality.

What happens now:
When entering the map method, the correct class map is found, but never used as the same mapping is already done in the method processSuperTypeMapping. Just comment out the following line and you will see that this test will run correctly:
  mappedParentFields = processSuperTypeMapping(superClasses, srcObj, destObj, mapId);

The super class mapping found is however a general mapping as it doesn't find the mapping that is identified through the map-Id, such that the int values are mapped to Integers and not to String values as indicated by the hint....

What goes wrong? No unproxy takes place such that the first super class of the source object is the class PrimitiveArrayObj.
Because this unproxy doesn't take place the method checkForSuperTypeMapping will find a mapping between the super class  PrimitiveArrayObj and PrimitiveArrayObjPrime. 
If the unproxy takes place correctly the first super class would be BaseTestObject such that only real super class mappings (and interfaces) will be found as it should. As such that the mapping PrimitiveArrayObj will not be found.

So the solution: correctly implement the unproxy method (and remove the realClass and getRealSuperclass in MappingUtils as they are useless anyway).

Have a look a the proxy bug, it contains al the details why the current proxy functionality doesn't work.


-- Ed





</field>
</message>

<message>
		<field name="adddate">1234926350</field>
		<field name="user_name">mhtierney</field>
		<field name="body">btw, in the meantime I added this test case to our collection of identified failing use cases.</field>
</message>

<message>
		<field name="adddate">1234926299</field>
		<field name="user_name">mhtierney</field>
		<field name="body">btw, in the meantime I added this test case to our collection of identified failing use cases.</field>
</message>

<message>
		<field name="adddate">1234926269</field>
		<field name="user_name">mhtierney</field>
		<field name="body">btw, in the meantime I added this test case to our collection of identified failing use cases.</field>
</message>

<message>
		<field name="adddate">1234925978</field>
		<field name="user_name">mhtierney</field>
		<field name="body">I tried to apply the patch and it resulted in 4 unit test failures of existing regression tests.  All of the failing tests are proxied object tests which runs mapping use cases for cglib proxied data objects.  Any idea which code in the patch broke existing functionality?

ProxiedGranularDozerBeanMapperTest
ProxiedInheritanceAbstractClassMappingTest
ProxiedInheritanceMappingTest</field>
</message>

<message>
		<field name="adddate">1234859399</field>
		<field name="user_name">edbras</field>
		<field name="body">Hi,

Yep, forgot to attach it, sorry.

I just attached the mapping file. Just put it in the test/resource folder of dozer and it will work.

(I did put all my bug test cases in the mapping.bug package)

-- Ed</field>
</message>

<message>
		<field name="adddate">1234847311</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Ed,

Can you attach the superInterfaceMapping.xml file that is required by the unit test...or if it's somewhere I am not seeing, just let me know?  Thanks</field>
</message>

<message>
		<field name="adddate">1233879236</field>
		<field name="user_name">edbras</field>
		<field name="body">I was really getting completely nuts, crazy, frustrated of this bug.
Why?... everytime I changed something on the right side, something on the left side didn't work anymore...
I didn't want to solve this bug and tried to work around it in my configuration.... but ... no luck....
 
Like mentioned before, The configuration was very fragil because of this bug, so I had to solve it, as it really is a showstopper.
It seems to work fine for now and I hope that dozer will keep working fine for some time now as one week of 12 hours a day bug fixing Dozer is a bit enough for now. I already have such a delay :(
Some of the dozer test fail (with the latest update of the Calendar funcationality just fixed by Dimitri), but I think they were already failing as mentioned in the bug tracker.
My configuration seems much more robust and the performance is fine.

The code changes are added as attachment. I have added one file that contains new versions of the changed methods in the MappingProcessor.
Also an improved test case is added.
I think it also solves some other reported interface bugs.

Anyway, in words: like mentioned below, I mixed the calculation super class/interface mapping together. That's the only way to retrieve any mixed interface &#60;-&#62; concrete class mapping. Which I don't think is a very uncommon situation.
I replaced the method MappingProcessor.checkForSuperTypeMapping (see attachment) by a new one and that it's the only method that is called in the map(classMap, ...) method, so the other method call ClassMappings.findInterfaceMappings has been removed. In fact, I think this whole method could be removed as it buggy as explained below.

This new method will call a new method called MappingProcessor.determineSuperClassMappings to determine the collection of mappings and will cache this collection of mapping (like already toke place). The method determineSuperClassMappings will call some helper (recursive) methods to determine any possible mapping between any of the source and target class/interface. Have a look at the testcase it contains a source object with a complext graph of super classes and interfaces.
The idea: on one side you have a source graph that exists of a one source class with his associated super classes and all his interfaces and on the other side the target class as you mapping target with his super classes and interfaces. You visit all source classes/interfaces and all belonging target classes/intefaces (outer join/permutations) and wil look if there is any mapping between the encoutnered combination. The encountered mappings are put in a list in such an order that the super classes/interfaces are mapped first. Even with quite a lot of interfaces and super classes, it seems to perform well (and believe me, I have some complex/necessary class graphs).

I am looking forward to the reaction of the Dozer team and how they will integrate this/solve this bug for the comming release?
BTW: I have put the functionality in just a few recursive methods now, such that the change is rather isolated and the performance high  which is a priority for Dozer ofcourse. But you when integrating this you might want to consider delegating this functionality in some special classes that do the job. I think you just should be carefull not to create too many temporarily objects during the iteration. That is the reason that recursive is very fast in this case, it just consists of simple method calls. I am sorry Dimitry I know you don't like them ;).. and I am currious how you will implement this without recursion ;)...

-- Ed


 
</field>
</message>

<message>
		<field name="adddate">1233761433</field>
		<field name="user_name">edbras</field>
		<field name="body">Hi,

I have added a test case to reproduce the bug.
I thought that I could change the code a bit such that it work. But it seems a bit more complicated.
Why? Dozer has  method for determining the mappings between super classes and a method to determine mappings between interfaces. Apart from that this latter method contains a bug as it doesn't check the interfaces recursively, there doesn't exists a method that determine a mixture, that is the mapping between an interface and class.
I don't think this is very uncommon.
Example: My domain objects must have an interface to hide functionality but that can be used by tools as dozer and hibernate. It makes them so called proxy safe in this way.
My dot's are just simple pojo's that don't need an interface.
But ofcourse I need to define a mapping between my domain object and dto object. 
This is easier and more robust when using the domain interface. Example: mapping from Member to MemberDto and Taxer to TaxerDto.
Why more robust: I know need to use the implementation class to define the mapping, which means I have to use a lotttt of hints to tell dozer that it should MemberDef when it encounters a field with type Member :(... This is very fragil and easy forgotten. 
Always when I change something, one or more mapping tests fail which is often unnessary. That's what I mean by robust.

I think the method MappingProcessor.checkForSuperTypeMapping and ClassMappings.findInterfaceMappings should be mixed. 
Implementation idea: make one Class array for all source super classes and interfaces and one for all destination super classes and interfaces. Then just iterate over all combinations, and you will find all possible mappings..
I also noticed that this latter method: findInterfaceMappings, doesn't use caching like the former method checkForSuper does.

Please let me know how the Dozer team things about supporting this? and when?

Cheers,
Ed

Please let me k</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1245958820</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1245958820</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1245958820</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1236069</field>
		<field name="entrydate">1245958820</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245958820</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245958820</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245958820</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1235243973</field>
		<field name="entrydate">1245957561</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">3</field>
		<field name="entrydate">1245957561</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">0</field>
		<field name="entrydate">1245957561</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1235243973</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1235243973</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1235243973</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1235243973</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">313886: superInterfaceMapping.xml</field>
		<field name="entrydate">1234859276</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">312030: </field>
		<field name="entrydate">1233879346</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">312249: superInterfaceTestCase.txt</field>
		<field name="entrydate">1233879338</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">312248: superInterfaceBugCodeChanges.txt</field>
		<field name="entrydate">1233879274</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">312030: superInterfaceTestCase.txt</field>
		<field name="entrydate">1233761483</field>
		<field name="mod_by">edbras</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2691510</field>
	<field user_id="2443863" name="submitted_by">sgodau</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">SuperInterfaces were not detected for ClassMappings</field>
	<field name="open_date">1237373264</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">I'm using a proxy class that implements some interfaces. That interfaces extend other interfaces.

Example:
- proxy implements interface A
- interface A extends interface B
- interface B extends interface C

I defined several mappings for interface A, B and C. But when I try to map a proxy that implements interface A, the mappings for interface B and C are not being used. 

When debugging your code, I found the method &#34;findInterfaceMappings&#34; (Class &#34;ClassMappings&#34;). I added a new method...

  // collect all super interfaces
  private static List&#60;Class&#60;?&#62;&#62; getAllSuperInterfaces(Class aClass) {
    List&#60;Class&#60;?&#62;&#62; result = new ArrayList&#60;Class&#60;?&#62;&#62;();
    Class&#60;?&#62;[] interfaces = aClass.getInterfaces();
    for (int i=0; i&#60;interfaces.length; i++) {
      result.add(interfaces[i]);
      result.addAll(getAllSuperInterfaces(interfaces[i]));
    }
    return result;
  }

...and used this method instead of &#34;getInterfaces()&#34; (line 109-110). Now all definded mappings are used for this case.

Can you fix that bug in the next release? Only in the case that you consider it as a bug, too.

Best regards!</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1245959099</field>
		<field name="user_name">buzdin</field>
		<field name="body">Yes, this is a bug and it is fixed in the trunk. Version 5.1 will contain the fix.
Thanks for the bug report!</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1245959099</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245959099</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1245959099</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245959099</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1245959099</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1245959099</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2828583</field>
	<field user_id="2582385" name="submitted_by">markbrew</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">9</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Stack Overflow Error</field>
	<field name="open_date">1248812510</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">I have a self referencing class that maps to another self referencing class. That is each class has an attribute object of the same type as itself (hierarchic relationship). The attribute names between the classes match so I can do a simple class to class mapping. However it's causing an endless loop in dozer with an eventual stack overflow. Here's a snippet of the error output:

	at org.dozer.MappingProcessor.map(MappingProcessor.java:215)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:442)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:406)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:300)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:246)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:215)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:442)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:406)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:300)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:246)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262472574</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk.</field>
</message>

<message>
		<field name="adddate">1262469153</field>
		<field name="user_name">buzdin</field>
		<field name="body">relates to 2887595</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262472574</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262472574</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262472574</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1262472574</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262469153</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1262469153</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1248812579</field>
		<field name="mod_by">markbrew</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1661389</field>
	<field user_id="1618505" name="submitted_by">beemsoft</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">JAXBBeanFactory cannot create bean for nested type</field>
	<field name="open_date">1171621484</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Hi,

When I'm mapping with JAXBBeanFactory, it works fine with mappings like this: 
&#60;field&#62;
&#60;a&#62;field-a&#60;/a&#62;
&#60;b&#62;Body.field-a&#60;/b&#62;
&#60;/field&#62;

But it fails with mappings like this:
&#60;field&#62;
&#60;a&#62;field-a&#60;/a&#62;
&#60;b&#62;Body.Nested.field-a&#60;/b&#62;
&#60;/field&#62;

In the logging, I noticed that the factory incorrectly tries to create the bean (notice the misplaced $ in the method call):

Caused by: net.sf.dozer.util.mapping.MappingException: java.lang.NoSuchMethodException: ObjectFactory.createSelecterenSchadegevallenRequest10TypeBodyType$AlgemeneGegevensType()
	at net.sf.dozer.util.mapping.factory.JAXBBeanFactory.createBean(JAXBBeanFactory.java:85)

As a workaround, I've solved this problem by doing an extra substitute action in the createBean method:

    int indexOf = beanId.indexOf('$');
    if (indexOf &#62; 0) {
      beanId = beanId.substring(0, indexOf) + beanId.substring(indexOf + 1);
      if (log.isDebugEnabled()) {
        log.debug(&#34;createBean(Object, Class, String) - HAS BEEN CHANGED TO  [&#34;+ beanId + &#34;]&#34;);
      }
    }

Greetings,
Hans Beemsterboer</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1246390928</field>
		<field name="user_name">buzdin</field>
		<field name="body">Took a while, but anyway fixed.</field>
</message>

<message>
		<field name="adddate">1225035490</field>
		<field name="user_name">yashwant_joshi</field>
		<field name="body">Hi,

We are facing the same problem while using mapper to populate objects from JAXB to java bean using JAXB bean factory. How can I resolve that. Please suggest.</field>
</message>

<message>
		<field name="adddate">1194922490</field>
		<field name="user_name">user497</field>
		<field name="body">Logged In: YES 
user_id=1315390
Originator: NO

I have noticed the same issue with inner classes in a slightly different scenario.  If you use the JAXBBeanFactory when defining the mapping of the inner class of an inner class, you get the same error.  For example, this mapping:

 &#60;mapping wildcard=&#34;true&#34;&#62;
  &#60;class-a bean-factory=&#34;net.sf.dozer.util.mapping.factory.JAXBBeanFactory&#62;example1.A$B$C&#60;/class-a&#62;
  &#60;class-b bean-factory=&#34;net.sf.dozer.util.mapping.factory.JAXBBeanFactory&#62;example2.A$B$C&#60;/class-b&#62;
	...
 &#60;/mapping&#62;

you get an error that the following method could not be found:

 example2.ObjectFactory.createAB$C()

In order to resolve both of these problems, you probably want to replace the logic that strips the dollar sign in the JAXBBeanFactory from a single &#34;if&#34; statement to a &#34;while&#34;.  That is, replace:

    int indexOf = beanId.indexOf('$');
    if (indexOf &#62; 0) {
      beanId = beanId.substring(0, indexOf) + beanId.substring(indexOf + 1);
      if (log.isDebugEnabled()) {
        log.debug(&#34;createBean(Object, Class, String) - HAS BEEN CHANGED TO  [&#34; + beanId + &#34;]&#34;);
      }
    }

with

    int indexOf = beanId.indexOf('$');
    while (indexOf &#62; 0) {
      beanId = beanId.substring(0, indexOf) + beanId.substring(indexOf + 1);
      indexOf = beanId.indexOf('$');
      if (log.isDebugEnabled()) {
        log.debug(&#34;createBean(Object, Class, String) - HAS BEEN CHANGED TO  [&#34; + beanId + &#34;]&#34;);
      }
    }

At least that's the idea.  You could do a replaceAll() or something else along those lines as well.

Hope that helps,
Josh</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1246390928</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1246390928</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1246390928</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1246390928</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1246390928</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1246390928</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1246390928</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2819255</field>
	<field user_id="2560405" name="submitted_by">jessejose</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Inheritance Mapping with Proxied Objects</field>
	<field name="open_date">1247174644</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Hi All,
The bug that I found with was while mapping Proxied Objects with inheritance mapping. I will try and explain the use case as best as possible 
e.g. Let us suppose that there is a Class A which is the source class and it being mapped to Class X &#38; Class Y, where Class Y extends Class X. 
Dozer will currently  fail to map Class A to Class X if Class A is proxied.
I think this problem may already have been noted because I found Unit tests which had been Ignored to avoid this problem so I have not provided an example
test case.
In essence the fix that I have done is change the ClassMappings-&#62;find(Class srcClass,Class destClass) method to check for Proxied classes as well.
I have attached a patch which fixes the problem and also I commented out the Ignore from the tests which this patch will fix. 
Hope this will solve this problem. 
I also encountered another problem which I think is already know as well, about Deep mapping of Indexed Proxied collections. I worked around the problem for now but if I have chance will look into this as well.
Hope this helps.

Cheers

Jesse
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1248022368</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed based on the patch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1248022368</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1248022368</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1248022368</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1248022368</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1248022368</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1248022368</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1247174750</field>
		<field name="mod_by">jessejose</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">334333: SVNPatch.ProxiedInheritance.txt</field>
		<field name="entrydate">1247174644</field>
		<field name="mod_by">jessejose</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2849676</field>
	<field user_id="1425825" name="submitted_by">mark_v_torres</field>
	<field user_id="2418250" name="assigned_to">vadeg</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">custom-converter-param is not used when mapping Maps</field>
	<field name="open_date">1251949052</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">custom-converter-param is lost when mapping Maps. The copy constructor of MapFieldMap does not copy getCustomConverterParam.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1274036414</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in 5.2.1</field>
</message>

<message>
		<field name="adddate">1255937350</field>
		<field name="user_name">buzdin</field>
		<field name="body">This should be related to 2877098</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1274036414</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1274036414</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1274036414</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1274036414</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262472896</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2901184</field>
	<field user_id="2533010" name="submitted_by">chrisnappin</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">9</field>
	<field name="status">Closed</field>
	<field name="resolution">Invalid</field>
	<field name="summary">Schema validation fails with timeout if no internet access</field>
	<field name="open_date">1258728682</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Dozer 5.1 appears to be using the JAXP default behaviour for a validating schema parser, which is to go over the internet to download XSD files. This results in a timeout failure when using Dozer on any machine that does not have direct internet access. I suggest at a mimimum the Dozer API is extended to allow XSD validation to be configurable, with a default of false. The following is the stack trace produced:

java.net.ConnectException: Connection timed out: connect

org.dozer.MappingException: java.net.ConnectException: Connection timed out: connect
at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:92)
at org.dozer.loader.xml.MappingFileReader.read(MappingFileReader.java:64)
at org.dozer.loader.CustomMappingsLoader.load(CustomMappingsLoader.java:67)
at org.dozer.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:151)
at org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:134)
at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:90)
at org.limaloa.mapping.object.Dozer5ObjectMapper.mapObject(Dozer5ObjectMapper.java:50)
...

Caused by: java.net.ConnectException: Connection timed out: connect
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
at java.net.Socket.connect(Socket.java:524)
at java.net.Socket.connect(Socket.java:474)
at sun.net.NetworkClient.doConnect(NetworkClient.java:157)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:388)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:523)
at sun.net.www.http.HttpClient.(HttpClient.java:231)
at sun.net.www.http.HttpClient.New(HttpClient.java:304)
at sun.net.www.http.HttpClient.New(HttpClient.java:321)
at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:839)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:791)
at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:716)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:960)
at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:973)
at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(XMLEntityManager.java:905)
at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startDTDEntity(XMLEntityManager.java:872)
at com.sun.org.apache.xerces.internal.impl.XMLDTDScannerImpl.setInputSource(XMLDTDScannerImpl.java:282)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(XMLDocumentScannerImpl.java:1021)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:368)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:834)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:148)
at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:250)
at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:292)
at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:98)
at org.dozer.loader.xml.MappingFileReader.read(MappingFileReader.java:58)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1264426108</field>
		<field name="user_name">chrisnappin</field>
		<field name="body">Yes, I am switching between v5 and v4 regularly, so am using v4 mapping files with a DTD reference, as I was under the impression this was still supported. Replacing this with an XSD reference resolves the issue. Thanks for getting back to me.</field>
</message>

<message>
		<field name="adddate">1264194634</field>
		<field name="user_name">buzdin</field>
		<field name="body">Could it be that you are using version 5.1 with old-style mapping files with DTD header? If so, DTD is not included in latest releases and that is why direct fetch is happening.</field>
</message>

<message>
		<field name="adddate">1264194521</field>
		<field name="user_name">buzdin</field>
		<field name="body">This is not a dozer bug. XSD loading process occures in several steps. Before going over the wire to the sf.net classloader.getResource() is triggered. This issue means that you have problems with classpath or your project has unusual set-up.

Version 5.1 was tested on production systems with no direct internet connection.</field>
</message>

<message>
		<field name="adddate">1258728747</field>
		<field name="user_name">chrisnappin</field>
		<field name="body">Increased priority since this is a fatal error that prevent Dozer 5.1 from being used at all.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1264426109</field>
		<field name="mod_by">chrisnappin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1264426109</field>
		<field name="mod_by">chrisnappin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1264426109</field>
		<field name="mod_by">chrisnappin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1264426109</field>
		<field name="mod_by">chrisnappin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1258728747</field>
		<field name="mod_by">chrisnappin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2826468</field>
	<field user_id="2577766" name="submitted_by">mstetter</field>
	<field user_id="2418250" name="assigned_to">vadeg</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">MappingException for XMLGregorianCalendar </field>
	<field name="open_date">1248426133</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">The Field &#34;auftragskundenwunschtermin&#34; is defined as javax.xml.datatype.XMLGregorianCalendar in both classes. Why do I get the mapping exception and how can I fix it?

  Source parent class: xxx.TechnischesDeltaType
  Source field name: auftragskundenwunschtermin
  Source field type: class org.apache.xerces.jaxp.datatype.XMLGregorianCalendarImpl
  Source field value: 2009-07-21
  Dest parent class: yyy.TechnischesDeltaType
  Dest field name: auftragskundenwunschtermin
  Dest field type: javax.xml.datatype.XMLGregorianCalendar 
org.dozer.MappingException: java.lang.InstantiationException
	at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:88)
	at org.dozer.factory.DestBeanCreator.newInstance(DestBeanCreator.java:175)
	at org.dozer.factory.DestBeanCreator.create(DestBeanCreator.java:97)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:436)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:406)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:300)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:246)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:215)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:160)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:118)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:113)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:94)
                     ...

Matthias Stetter</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1256196524</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed in 5.2</field>
</message>

<message>
		<field name="adddate">1255768472</field>
		<field name="user_name">vadeg</field>
		<field name="body">Patch added: 2880901

It seems that is not a bug. You must set 
&#60;b-hint&#62;com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl&#60;/b-hint&#62;

for the dest field</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1256196524</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1256196524</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1256196524</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1256196524</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1256196524</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1256196524</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2488735</field>
	<field user_id="2349905" name="submitted_by">sdgarn01</field>
	<field user_id="2418250" name="assigned_to">vadeg</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">more than add or update on arrays</field>
	<field name="open_date">1231188216</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">My source or destination is a generated class with getters and setters.
However the arrays are presized since it is determined by a copybook size.
So I have a source and destination array with 100 elements.
I want dozer to copy or map each index.
Not add or update logic it is doing now.

I've worked with the mappings quite a bit and I get one of the following scenarios:
1) I get an array with 200 elements with the values from my source array starting at the 101 element.
2) I get an array with 102 elements (assuming only 2 of 100 elements in source array has a value) with my values starting at the 101 element
3) I get a null pointer exception because the source element has a null value in the array.

I want my two values copied from my source array to my destination array so that I have 100 element array with the first two positions having my values.

I've attached a couple unit tests to demonstrate a bit and if you can make them pass by only changing the mapping files then that is what I want.

I've struggled with collections in this way in the past without generated classes which leads doing extra work outside of dozer or hacking your beans up.  It would be nice to have some more options/control

Thanks,
Shawn</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1256283681</field>
		<field name="user_name">buzdin</field>
		<field name="body">The use case you have described is not currently supported and by introducing that we will break existing logic and correlation of array mappings and collection mappings. It is recommended to go with custom converters now.
If you feel that this is a critical feature feel free to register feature request.</field>
</message>

<message>
		<field name="adddate">1256240783</field>
		<field name="user_name">vadeg</field>
		<field name="body">NPE bugfixg added. The other thing is default dozer behavior. If you think this behavior is not acceptable, please create a feature request.</field>
</message>

<message>
		<field name="adddate">1256153020</field>
		<field name="user_name">vadeg</field>
		<field name="body">Hello!

For now, there are several ways to do right mapping: 

1. do not create dest array in the class. 
2. set copy-by-reference=&#34;true&#34;. Because String is an immutable object, changes in one array doesn't affect other array.

This problem occurs, because your dest array was already initialized with 100 null's. 
- If you put flag relationship-type=&#34;non-cumulative&#34;, then dozer tries to update objects insdide and throws NPE
- If you put relationship-type=&#34;cumulative&#34; (which is default), the dozer simply adds 2 more elements to your's 100 length array.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888639</field>
		<field name="entrydate">1256283681</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1256283681</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1256283681</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1256283681</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1256283681</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1256283681</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">307908: ArrayMappings.zip</field>
		<field name="entrydate">1231188216</field>
		<field name="mod_by">sdgarn01</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2887597</field>
	<field user_id="1425825" name="submitted_by">mark_v_torres</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Iterate mapping does not check previously mapped objects</field>
	<field name="open_date">1256687212</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">Iterate mapping does not check if the current source object has been previously mapped. This results in multiple objects being created for the same source object. The patch attached to bug 2887595 attempts to fix this issue as well.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262544154</field>
		<field name="user_name">buzdin</field>
		<field name="body">patch has been applied</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262544155</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262544155</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">898417</field>
		<field name="entrydate">1262544155</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262544155</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1262544155</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2887595</field>
	<field user_id="1425825" name="submitted_by">mark_v_torres</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Stackoverflow error during self-mapping with recursive field</field>
	<field name="open_date">1256687040</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">Dozer produces stackoverflow errors during mapping of classes that are recursive and self mapped(&#34;using the this keyword&#34;).</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262472620</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed in trunk. Thanks for the patch!</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">898417</field>
		<field name="entrydate">1262472621</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262472621</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262472621</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1262472621</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262472621</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262472621</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">348467: recursiveErrors.patch</field>
		<field name="entrydate">1256687040</field>
		<field name="mod_by">mark_v_torres</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2883609</field>
	<field user_id="195862" name="submitted_by">jffmrk</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">race condition when statistics are enabled</field>
	<field name="open_date">1256168641</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">We are seeing a race condition in StatisticsManager of Dozer 4.2.1.  Specifically here is the stack trace:

java.lang.IllegalArgumentException: Statistic already exists for type: Field Mapping Success Count
        at net.sf.dozer.util.mapping.stats.StatisticsManager.addStatistic(StatisticsManager.java:144)
        at net.sf.dozer.util.mapping.stats.StatisticsManager.increment(StatisticsManager.java:114)
        at net.sf.dozer.util.mapping.stats.StatisticsManager.increment(StatisticsManager.java:89)
        at net.sf.dozer.util.mapping.stats.StatisticsManager.increment(StatisticsManager.java:85)

and the 4.2.1 code that is in question would do this if multiple threads get to this point at the same time and both try to add the new object to the map you would get the exception.  So either need to synchronize this block or just drop the statistic.

    // Get Statistic object for the specified type. If it doesnt aleady exist, create it
    Statistic statistic = (Statistic) statisticsMap.get(statisticType);
    if (statistic == null) {
      statistic = new Statistic(statisticType);
      addStatistic(statistic);
    }

I checked dozer 4.4.1 and the same code is above.  Also dozer 5.1 still seems to have this issue, see below from StatisticsManagerImpl.java in dozer-5.1:

    // Get Statistic object for the specified type. If it doesnt aleady exist, create it
    Statistic&#60;T&#62; statistic = (Statistic&#60;T&#62;) statisticsMap.get(statisticType);
    if (statistic == null) {
      statistic = new Statistic&#60;T&#62;(statisticType);
      addStatistic(statistic);
    }
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1260294864</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in upcoming 5.2. Thank you for the detailed explanation. Will be using ConcurrentHashMap instead simple Map and ignore tries to overwrite existing statistics object.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1260294864</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1260294864</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">898417</field>
		<field name="entrydate">1260294864</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1260294864</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1260294864</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1260294864</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2688529</field>
	<field user_id="699962" name="submitted_by">elecnis</field>
	<field user_id="2418250" name="assigned_to">vadeg</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Array expansion on null mapping</field>
	<field name="open_date">1237205898</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Mapping of null values to an array does not create/expand the array. E.g.

  &#60;mapping map-null=&#34;true&#34;&#62;
    &#60;class-a&#62;Src&#60;/class-a&#62;
    &#60;class-b&#62;Dest&#60;/class-b&#62;
    &#60;field&#62;
        &#60;a&#62;value&#60;/a&#62;
        &#60;b&#62;array[0]&#60;/b&#62;
    &#60;/field&#62;
  &#60;/mapping&#62;

where the src's value field is set to null.

The destination's array field is null instead of [ null ] (an array containing one null value). To fix this issue, the setPropertyValue method in class GetterSetterPropertyDescriptor was changed to include checking that not both objects are null:

try {
  Object srcValue = getPropertyValue(bean);
  if (srcValue == value &#38;&#38; srcValue != null) {
    return;
  }
} catch (Exception e) {
  // if we failed to read the value, assume we must write, and continue...
}

The problem results form the getIndexedValue method in the MappingUtils class which returns null if the index specified for an array is larger than the array's size.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1260293121</field>
		<field name="user_name">buzdin</field>
		<field name="body">closed, will be shipped as a part of 5.2 release</field>
</message>

<message>
		<field name="adddate">1258494370</field>
		<field name="user_name">vadeg</field>
		<field name="body">Bug fixed. Test added</field>
</message>

<message>
		<field name="adddate">1237206759</field>
		<field name="user_name">elecnis</field>
		<field name="body">Probably the same problem as in Bug [ 2569088 ] Null values in the destination HashMap.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1260293121</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1260293121</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1260293121</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1260293121</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1258494370</field>
		<field name="mod_by">vadeg</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1256284981</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2890589</field>
	<field user_id="1592658" name="submitted_by">scr85</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Exception message improvement</field>
	<field name="open_date">1257152721</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">org.dozer.DozerConverter Line 51: throw new MappingException(&#34;Destination Type is not accepted by this Custom Converter! &#34; + destinationClass);
It would be nice, when the exception message would also contain the full qualified class name of the DozerConverter instance. At the moment you have to debug, if you want to see which instance of a DozerConverter has thrown this exception.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1262443254</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262443255</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262443255</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262443255</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">898417</field>
		<field name="entrydate">1262443255</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262443255</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1262443255</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1262443255</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2840191</field>
	<field user_id="1991320" name="submitted_by">poutsjr</field>
	<field user_id="2418250" name="assigned_to">vadeg</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Null value in SET cause NPE</field>
	<field name="open_date">1250676781</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">the bug is the same that describe in the tracker item [Null Value in String Array causes NPE - ID: 1373824]

but for a Set&#60;Object&#62; there's a NullPointerException too.
11:45:25.140 [ERROR] org.dozer.MappingProcessor - Field mapping error --&#62;
  MapId: null
  Type: null
  Source parent class: bo.facade.returnAuthorization.FReturnAuthorization
  Source field name: equipmentReturnCauses
  Source field type: class java.util.HashSet
  Source field value: [null, bo.facade.equipment.returnCause.FEquipmentReturnCause@61373f]
  Dest parent class: bo.returnAuthorization.ReturnAuthorization
  Dest field name: equipmentReturnCauses
  Dest field type: java.util.Set
java.lang.NullPointerException
	at org.dozer.MappingProcessor.addToSet(MappingProcessor.java:651)
	at org.dozer.MappingProcessor.mapCollection(MappingProcessor.java:509)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:394)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:300)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:246)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:215)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:160)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:118)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:113)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:94)


This bug was fixed for a List in the function 
org.dozer.MappingProcessor.addOrUpdateToList(FieldMap fieldMap,
Collection sourceCollectionValue, ClassMap classMap, 
Object destObj, Class destEntryType) 

but for a Set, it has to be fixed in the function 
org.dozer.MappingProcessor.addToSet(Object, FieldMap, Collection&#60;?&#62;, Object)
with the same logic

thanks

thierry</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1261330218</field>
		<field name="user_name">buzdin</field>
		<field name="body">will be shipped as part of 5.2</field>
</message>

<message>
		<field name="adddate">1260383121</field>
		<field name="user_name">vadeg</field>
		<field name="body">Bug fixed in trunk</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1261330219</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1261330219</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1261330219</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1260383121</field>
		<field name="mod_by">vadeg</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1260383121</field>
		<field name="mod_by">vadeg</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1256285030</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2932928</field>
	<field user_id="2741734" name="submitted_by">despot-mailbox</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">List mapping failed on top-level</field>
	<field name="open_date">1263569169</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">Dozer failed to transform List object (maybe other collections also - not tested) into another List.
If List is field of other complex object - it processed perfectly, but if &#34;root&#34; object is List (or inherited from ArrayList) by itself - no transformation is performed.
I've tried different mappings, but as consulted with Dmitry Buzdin - it looks like bug in Dozer.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1263893509</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed in trunk.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">898417</field>
		<field name="entrydate">1263893510</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1263893510</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1263893510</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1263893510</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1263893510</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1263893510</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">359064: DozerTest.java</field>
		<field name="entrydate">1263569172</field>
		<field name="mod_by">despot-mailbox</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2877098</field>
	<field user_id="2658726" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">MapFieldMap copy constructor doesn't copy the CustomConverte</field>
	<field name="open_date">1255359645</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.1</field>
	<field name="details">The org.dozer.fieldmap.MapFieldMap.MapFieldMap(FieldMap) constructor should also copy the customConverterParam property of the other org.dozer.fieldmap.FieldMap:
setCustomConverterParam(fieldMap.getCustomConverterParam());
Otherwise the org.dozer.ConfigurableCustomConverter doesn't receive a customConverterParam, if you use a mapping like this:

		&#60;field custom-converter-id=&#34;MyCustomConverter&#34; custom-converter-param=&#34;MyParameter&#34; &#62;
		  &#60;a key=&#34;aKey&#34;&#62;aMap&#60;/a&#62;
		  &#60;b&#62;destinationField&#60;/b&#62;
		&#60;/field&#62;</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1265058688</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk. Will be released in 5.2.1</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">929386</field>
		<field name="entrydate">1265058689</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1265058689</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1265058689</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1265058689</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">2418250</field>
		<field name="entrydate">1265058689</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1265058689</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1262941089</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2940919</field>
	<field user_id="1592658" name="submitted_by">scr85</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">org.dozer.fieldmap.MapFieldMap forgotten bean property </field>
	<field name="open_date">1264592294</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.1</field>
	<field name="details">The constructor of org.dozer.fieldmap.MapFieldMap doesn't take over the customConverterParam property from the other FieldMap.
  public MapFieldMap(FieldMap fieldMap) {
    //Create from existing field map
    super(fieldMap.getClassMap());
    setCopyByReference(fieldMap.isCopyByReference());
    setCustomConverter(fieldMap.getCustomConverter());
    setCustomConverterId(fieldMap.getCustomConverterId());
    setCustomConverterParam(fieldMap.getCustomConverterParam()); // BUGFIX
    setDestField(fieldMap.getDestField());
    setDestHintContainer(fieldMap.getDestHintContainer());
    setDestDeepIndexHintContainer(fieldMap.getDestDeepIndexHintContainer());
    setMapId(fieldMap.getMapId());
    setRelationshipType(fieldMap.getRelationshipType());
    setRemoveOrphans(fieldMap.isRemoveOrphans());
    setSrcField(fieldMap.getSrcField());
    setSrcHintContainer(fieldMap.getSrcHintContainer());
    setSrcDeepIndexHintContainer(fieldMap.getSrcDeepIndexHintContainer());
    setType(fieldMap.getType());
  }
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1265058761</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk. will be shipped as part of 5.2.1</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1265058761</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1265058761</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1265058761</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">929386</field>
		<field name="entrydate">1265058761</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1265058761</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1265058761</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1265058761</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2954264</field>
	<field user_id="609582" name="submitted_by">pnyheim</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">XMLGregorianCalendar not fully supported</field>
	<field name="open_date">1266507357</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.1</field>
	<field name="details">Bug 2826468 says that this should be fixed - however - as the two junit patches I have attached shows, it clearly does not...
I have a working implementation in my project (using a customconverter), so I will submit a new patch later which fixes this issue.

Regards,
Paul Nyheim</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1271191266</field>
		<field name="user_name">buzdin</field>
		<field name="body">thanks for the patch and tests. The issue is fixed in trunk.</field>
</message>

<message>
		<field name="adddate">1266574911</field>
		<field name="user_name">pnyheim</field>
		<field name="body">The last uploaded patch, XMLGregorianCalendar_fix.patch shows how this issue can be fixed, and passes the supplied unit tests.
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1271191266</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1271191266</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1271191266</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1271191266</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1271191266</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1271191266</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">363569: XMLGregorianCalendar_fix.patch</field>
		<field name="entrydate">1266574811</field>
		<field name="mod_by">pnyheim</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">363546: jaxbBeansMapping.xml.patch</field>
		<field name="entrydate">1266565265</field>
		<field name="mod_by">pnyheim</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">363457: JAXBBeansMappingTest.patch</field>
		<field name="entrydate">1266507393</field>
		<field name="mod_by">pnyheim</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">363456: PrimitiveOrWrapperConverterTest.patch</field>
		<field name="entrydate">1266507358</field>
		<field name="mod_by">pnyheim</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2956526</field>
	<field user_id="2816920" name="submitted_by">carlton76fr</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Wont Fix</field>
	<field name="summary">Custom Mapper And StackOverflow</field>
	<field name="open_date">1266836430</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">Hello,

I'm using Dozer 5.2 CustomConverter and MapperAware. In this configuration I've got a StackOverflow Exception on customConverter call.
My context :
     i wan't to copy 2 beans a1 and b1 (and relationships) in two others beans a2 and b2 where mappings are a1&#60;-&#62;a2 and b1&#60;-&#62;b2.
     relationship in class a/b are bidirectional a1&#60;--relationship--&#62;b1 and a2&#60;--relationship--&#62;b2
     i have a CustumConverter on each bean a1 and b1 to ckeck data integrity, so my mapping look like :
          &#60;mapping&#62;                                                       &#60;mapping&#62; 
		&#60;class-a&#62;a1&#60;/class-a&#62;                                        &#60;class-a&#62;b1&#60;/class-a&#62;
		&#60;class-b&#62;a2&#60;/class-b&#62;                                        &#60;class-a&#62;b2&#60;/class-a&#62;
		&#60;field custom-converter-id=&#34;MyConverter&#34;&#62;       &#60;field custom-converter-id=&#34;MyConverter&#34;&#62;
			&#60;a&#62;b1&#60;/a&#62;                                                       &#60;a&#62;a1&#60;/a&#62;
			&#60;b&#62;b2&#60;/b&#62;                                                       &#60;a&#62;a2&#60;/a&#62;
		&#60;/field&#62;                                                              &#60;/field&#62;
	&#60;/mapping&#62;                                                       &#60;/mapping&#62;

MyCustomConverter look like :

public class MyCustomConverter implements ConfigurableCustomConverter, MapperAware {
    private Mapper localMapper;

    public void setParameter(String arg0) {
        // Wait for the moment
    }

    public Object convert(Object destinationFieldValue, Object sourceFieldValue,
        Class&#60;?&#62; destinationClass, Class&#60;?&#62; sourceClass) {
        Object result = null;
        
        if (MyDataCheck.check(sourceFieldValue)) {
              result = localMapper.map(sourceFieldValue, destinationClass);
        }
        return result;
    }

    public void setMapper(Mapper arg0) {
        localMapper = arg0;
    }
}

The issue is a StackOverflow, :
org.dozer.MappingException: java.lang.StackOverflowError
	at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:88)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:165)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:119)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:114)
	at fr.laposte.rgp.ams.sm.service.converters.DozerCustomConverterHibernate.convert(DozerCustomConverterHibernate.java:73)
	at org.dozer.MappingProcessor.mapUsingCustomConverterInstance(MappingProcessor.java:864)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:297)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:249)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:218)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:163)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:119)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:114)
	at fr.laposte.rgp.ams.sm.service.converters.DozerCustomConverterHibernate.convert(DozerCustomConverterHibernate.java:73)
	at org.dozer.MappingProcessor.mapUsingCustomConverterInstance(MappingProcessor.java:864)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:297)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:249)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:218)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:163)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:119)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:114)

Thanks for your help.

Carlton</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1270632138</field>
		<field name="user_name">buzdin</field>
		<field name="body">The problem described here is rather a feature, but not a bug. You have expected that once converter invokes localMapper, than default mappings will be used. But it is not what's happening. You are going recursively into same custom converter over and over again. If you call embedded mapper it will look at the same Xml configuration and go into the same custom converter. To solve this problem you could create custom converter on some Container level object and then map items using local converter.

The rule is not to pass same objects as passed as custom converter arguments.

The best we can do is to return null in case of stack overflow situation, but it will be quite confusing. </field>
</message>

<message>
		<field name="adddate">1266852637</field>
		<field name="user_name">carlton76fr</field>
		<field name="body">Hello,

There is a problem with mapping file...
Mapping class a1&#60;-&#62;a2 :
&#60;mapping&#62;
&#60;class-a&#62;a1&#60;/class-a&#62;
&#60;class-b&#62;a2&#60;/class-b&#62;
&#60;field custom-converter-id=&#34;MyConverter&#34;&#62;
&#60;a&#62;b1&#60;/a&#62;
&#60;b&#62;b2&#60;/b&#62;
&#60;/field&#62;
&#60;/mapping&#62;

Mapping class b1&#60;-&#62;b2 :
&#60;mapping&#62;
&#60;class-a&#62;b1&#60;/class-a&#62;
&#60;class-b&#62;b2&#60;/class-b&#62;
&#60;field custom-converter-id=&#34;MyConverter&#34;&#62;
&#60;a&#62;a1&#60;/a&#62;
&#60;b&#62;a2&#60;/b&#62;
&#60;/field&#62;
&#60;/mapping&#62;

Best regards.
Carlton</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1270632183</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1270632183</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1270632138</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1270632138</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2968415</field>
	<field user_id="2812146" name="submitted_by">rajthakur</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Illegal Argument Exception</field>
	<field name="open_date">1268280470</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.1</field>
	<field name="details">I am try to use dozer for bean copying but getting exception while trying to copy java.util.TreeMap. The treemap contains String values. Both objects are of same bean class so all the properties are same. There is no field mapping as i am copying all the values from one bean to another. Below is the exception trace:

&#60;Error&#62; &#60;org.dozer.MappingProcessor&#62; &#60;BEA-000000&#62; &#60;Field mapping error --&#62;
  MapId: null
  Type: null
  Source parent class: com.xxx.xxx.xxx.vo.XXXVO
  Source field name: someMap
  Source field type: class java.util.TreeMap
  Source field value: {someString=someString someString, someString1=someString1 someString1, someString2=someString2 someString2}
  Dest parent class: com.xxx.xxx.xxx.vo.XXXVO
  Dest field name: someMap
  Dest field type: java.util.TreeMap
java.lang.IllegalArgumentException: argument type mismatch
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.dozer.util.ReflectionUtils.invoke(ReflectionUtils.java:254)
        Truncated. see log file for complete stacktrace

Caused by: java.lang.IllegalArgumentException: argument type mismatch
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.dozer.util.ReflectionUtils.invoke(ReflectionUtils.java:254)
        at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.invokeWriteMethod(GetterSetterPropertyDescriptor.java:241)
        at org.dozer.propertydescriptor.GetterSetterPropertyDescriptor.setPropertyValue(GetterSetterPropertyDescriptor.java:90)
        at org.dozer.fieldmap.MapFieldMap.writeDestValue(MapFieldMap.java:83)
        at org.dozer.MappingProcessor.writeDestinationValue(MappingProcessor.java:814)
        at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:306)
        at org.dozer.MappingProcessor.mapField(MappingProcessor.java:245)
        at org.dozer.MappingProcessor.map(MappingProcessor.java:214)
        at org.dozer.MappingProcessor.map(MappingProcessor.java:159)
        at org.dozer.MappingProcessor.map(MappingProcessor.java:126)
        at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:82)


XML mapping is :

&#60;mapping wildcard=&#34;true&#34; map-id=&#34;all&#34;&#62;
  &#60;class-a&#62;com.xxx.xxx.xxx.vo.XXXVO&#60;/class-a&#62;
&#60;class-b&#62;com.xxx.xxx.xxx.vo.XXXVO&#60;/class-b&#62;
&#60;/mapping&#62;</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1270641168</field>
		<field name="user_name">buzdin</field>
		<field name="body">bug is fixed. It turned out Map implementation other than HashMap were not supported.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1270641168</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1270641168</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1270641168</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1270641168</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1270641168</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1268300998</field>
		<field name="mod_by">rajthakur</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2828942</field>
	<field user_id="2129102" name="submitted_by">schumnana1</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Rejected</field>
	<field name="summary">Change artifact name for dozer 5</field>
	<field name="open_date">1248869773</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,

I have a problem in my project because I use internally dozer 5 but I have a dependency which use dozer 4.
As maven resolve conflicts when a lib has the same groupId and artifactId, dozer 4 is not in my classpath and so my dependency does not work.
In maven, when you made a lot of refactoring (as you did for dozer 5), you should change your artifactId like dozer5

Alexandre</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273657762</field>
		<field name="user_name">buzdin</field>
		<field name="body">Artifact name will not be changed. Version 5 has many breaking changes, but this dependency conflict should be solved inside build scripts.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273657762</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273657762</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273657762</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1273657762</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2988467</field>
	<field user_id="2138704" name="submitted_by">chonton</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">statistics are not mult-thread safe</field>
	<field name="open_date">1271440396</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">The incorrect use of ConcurrentHashMap in StatisticsManagerImpl and Statistic causes threading issues as demonstrated by attached test</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273697255</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi, 

I applied the patch where you replaced notNull checking with putIfAbsent invocation. 
Thanks for the work done!

Dmitry</field>
</message>

<message>
		<field name="adddate">1271446779</field>
		<field name="user_name">chonton</field>
		<field name="body">I have attached two suggested solutions.  The first uses ConcurrentHashMap properly.  The second solution has StatisticsManagerImpl using an array of Statistic instead of a ConcurrentHashMap.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1273697256</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273697256</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1049123</field>
		<field name="entrydate">1273697256</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273697256</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273697256</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">370840: MultiThreadStatisticsAlternative.patch</field>
		<field name="entrydate">1271446638</field>
		<field name="mod_by">chonton</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">370835: MultiThreadStatistics.patch</field>
		<field name="entrydate">1271441241</field>
		<field name="mod_by">chonton</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">370833: StatisticsMultiThreadTest.patch</field>
		<field name="entrydate">1271440396</field>
		<field name="mod_by">chonton</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2954790</field>
	<field user_id="609582" name="submitted_by">pnyheim</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Sources and javadoc not uploaded to maven central</field>
	<field name="open_date">1266565843</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">Sources and javadoc artifacts are missing from maven central for versions 5.1 and 5.2.0
Please upload them as well. 

Regards,
Paul Nyheim</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1272394359</field>
		<field name="user_name">buzdin</field>
		<field name="body">Done for 5.2.0 and new 5.2.1 releases. Older releases are not supported anymore.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1272394359</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1272394359</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1272394359</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1272394359</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1272394359</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1272394359</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1272394359</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2988471</field>
	<field user_id="2138704" name="submitted_by">chonton</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">T extends Enum&#60;StatisticType&#62;</field>
	<field name="open_date">1271440854</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">Since an enum is final, it does not make sense to use generics which allow for extending StatisticType</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273697982</field>
		<field name="user_name">buzdin</field>
		<field name="body">I think you have removed that in your Statistics patch.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273697982</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273697982</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1049123</field>
		<field name="entrydate">1273697982</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273697982</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1273697982</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">370834: RemoveUselessExtends.patch</field>
		<field name="entrydate">1271440940</field>
		<field name="mod_by">chonton</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2841766</field>
	<field user_id="2417162" name="submitted_by">mortenag</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Exlude test classes and resources from dozer.jar</field>
	<field name="open_date">1250844863</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Integration Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">We are getting unexpected log behavior because dozer includes a log4j.properties file in the classpath root. As a log4j.properties file is included in dozer.jar and read first by the classloader, our log4j settings is effectively ignored and all we are getting is the console logging with warn threshold specified in the rootLogger defined by dozer.

Had a quick look at the dozer-repo and log4j.properties is actually located under src/test/java, which makes sense. However it seems that src/test/resources and src/test/java is included in the dozer.jar build, which seems very strange. In addition to causing unexpected logging behavior, it will also increase the size of the jar, albeit not significantly.

Seems that a similar bug has been reported for 5.0 (https://sourceforge.net/tracker/index.php?func=detail&#38;aid=2587665&#38;group_id=133517&#38;atid=727368)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273669665</field>
		<field name="user_name">buzdin</field>
		<field name="body">
</field>
</message>

<message>
		<field name="adddate">1264152761</field>
		<field name="user_name">buzdin</field>
		<field name="body">This has been fixed and all new Dozer releases will be free of test sources.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273669666</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273669666</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1273669666</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1264152761</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">897300</field>
		<field name="entrydate">1264152761</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1264152761</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2990408</field>
	<field user_id="2888391" name="submitted_by">ryaneberly</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">DozerConverter fails on primitive to primitive map</field>
	<field name="open_date">1271855466</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">In latest release (5.2), DozerConverter cannot perform a mapping involving a primitive value.

Bug 2919389 - resulted in a change that allows primitive to Object mapping to work, but primitive to primitive mapping still fails.

This is because int.class is not treated the same as Integer.class in org.dozer.DozerConverter.convert(Object, Object, Class&#60;?&#62;, Class&#60;?&#62;)

I'm attaching a patch to the test case demonstrating the problem. and a possible solution (if both destination and source classes are primitive, replace one of them with it's associated wrapper class before decided whether this is a covertFrom() or a convertTo())


</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273693145</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed by calling ClassUtils.primitiveToWrapper at start of each convertation</field>
</message>

<message>
		<field name="adddate">1273692158</field>
		<field name="user_name">buzdin</field>
		<field name="body">I think the files attached are from the original bugfix, not from your proposal</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273693145</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273693145</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1049123</field>
		<field name="entrydate">1273693145</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1273693145</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">371337: DozerConverterTest.patch</field>
		<field name="entrydate">1271855549</field>
		<field name="mod_by">ryaneberly</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">371336: DozerConverter.patch</field>
		<field name="entrydate">1271855467</field>
		<field name="mod_by">ryaneberly</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2999293</field>
	<field user_id="2912415" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">7</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">NPE in SimpleElementReader</field>
	<field name="open_date">1273486052</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">SimpleElementReader causes an NPE in 5.2.1 for a configuration.xml simple as that:

&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;mappings xmlns=&#34;http://dozer.sourceforge.net&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
	xsi:schemaLocation=&#34;http://dozer.sourceforge.net
          http://dozer.sourceforge.net/schema/beanmapping.xsd&#34;&#62;

	&#60;configuration&#62;
		&#60;stop-on-errors&#62;false&#60;/stop-on-errors&#62;
		&#60;date-format&#62;MM/dd/yyyy HH:mm&#60;/date-format&#62;
		&#60;wildcard&#62;true&#60;/wildcard&#62;
		&#60;custom-converters&#62;
			&#60;converter type=&#34;com.mypackage.MyConverter&#34;&#62;
				&#60;class-a&#62;com.mypackage.ClassA&#60;/class-a&#62;
				&#60;class-b&#62;com.mypackage.ClassB&#60;/class-b&#62;
			&#60;/converter&#62;
			&#60;converter type=&#34;com.mypackage.OtherConverter&#34;&#62;
				&#60;class-a&#62;com.mypackage.ClassC&#60;/class-a&#62;
				&#60;class-b&#62;com.mypackage.ClassD&#60;/class-b&#62;
			&#60;/converter&#62;
		&#60;/custom-converters&#62;
	&#60;/configuration&#62;
&#60;/mappings&#62;

element.getFirstChild().getNodeValue() is called on custom-converters/converter tag, where value is null naturally. (See Node JavaDoc for which node types a value is actually available.)
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273695503</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk</field>
</message>

<message>
		<field name="adddate">1273486123</field>
		<field name="user_name"></field>
		<field name="body">Sorry, didn't see that. Duplicate of #2997252.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1273695503</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273695503</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1049123</field>
		<field name="entrydate">1273695503</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273695503</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273695503</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1273561252</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273561252</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273561252</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2997252</field>
	<field user_id="562259" name="submitted_by">cbourque1</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Error while loading dozer mapping file</field>
	<field name="open_date">1273086229</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">I've just tested the new release with our application and Dozer seems to have some problems parsing the XML mapping file:

ERROR org.dozer.loader.xml.MappingFileReader - Error while loading dozer mapping file url: [file:/home/cbourque/beanMapping.xml]
java.lang.NullPointerException
        at org.dozer.loader.xml.SimpleElementReader.getNodeValue(SimpleElementReader.java:15)
        at org.dozer.loader.xml.XMLParser.getNodeValue(XMLParser.java:114)
        at org.dozer.loader.xml.XMLParser.parseConfiguration(XMLParser.java:407)
        at org.dozer.loader.xml.XMLParser.load(XMLParser.java:142)
        at org.dozer.loader.xml.MappingFileReader.read(MappingFileReader.java:62)
        at org.dozer.loader.CustomMappingsLoader.loadFromFiles(CustomMappingsLoader.java:103)
        at org.dozer.loader.CustomMappingsLoader.load(CustomMappingsLoader.java:57)
        at org.dozer.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:153)
        at org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:136)
        at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:92)

It works without any problem with 5.2.0!

Thanks

Christian

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1273695521</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed</field>
</message>

<message>
		<field name="adddate">1273259521</field>
		<field name="user_name">cbourque1</field>
		<field name="body">After further investigation it seems to be related with &#34;custom-converters&#34; declaration in the global configuration:

DEBUG org.dozer.loader.xml.XMLParser - config name: custom-converters
DEBUG org.dozer.loader.xml.XMLParser -   value: null
ERROR org.dozer.loader.xml.MappingFileReader - Error while loading dozer mapping file url: [file:/...]
java.lang.NullPointerException
        at org.dozer.loader.xml.SimpleElementReader.getNodeValue(SimpleElementReader.java:15)

If I remove the declaration the problem goes away...

Hope this helps!

Christian
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273695521</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1273695521</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1049123</field>
		<field name="entrydate">1273695521</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1273695521</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1273695521</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2858845</field>
	<field user_id="2471457" name="submitted_by">stephenttodd</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Invalid</field>
	<field name="summary">map-id on mapping makes it non-default</field>
	<field name="open_date">1252962764</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2</field>
	<field name="details">I have the below mapping:

&#60;mappings&#62;

	&#60;mapping map-id=&#34;RemoteFoo&#34;&#62;
		&#60;class-a&#62;com.example.Foo&#60;/class-a&#62;
		&#60;class-b&#62;com.example.RemoteFoo&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;bar&#60;/a&#62;
			&#60;b&#62;barPrime&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;

	&#60;mapping map-id=&#34;RemoteSearchResults-RemoteFoo&#34;&#62;
		&#60;class-a&#62;com.example.SearchResults&#60;/class-a&#62;
		&#60;class-b&#62;com.example.RemoteSearchResults&#60;/class-b&#62;
		&#60;field map-id=&#34;RemoteFoo&#34;&#62;
			&#60;a&#62;results&#60;/a&#62;
			&#60;b&#62;results&#60;/b&#62;
			&#60;a-hint&#62;com.example.Foo&#60;/a-hint&#62;
			&#60;b-hint&#62;com.example.RemoteFoo&#60;/b-hint&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;

&#60;/mappings&#62;

When I use a mapper with the above configuration to map Foo&#60;--&#62;RemoteFoo without specifying the map-id, the mapping above (&#34;RemoteFoo&#34;) isn't used. Instead the object is mapped as if &#34;RemoteFoo&#34; didn't exist.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1274044160</field>
		<field name="user_name">buzdin</field>
		<field name="body">feature not a bug. Not too well documented though.
http://dozer.sourceforge.net/documentation/contextmapping.html</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1274044177</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1274044177</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1274044177</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1274044177</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1274044177</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">map-id on mapping make it non-default</field>
		<field name="entrydate">1252962798</field>
		<field name="mod_by">stephenttodd</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2967290</field>
	<field user_id="739226" name="submitted_by">cibes</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">copy-by-reference ignored when class in a Set</field>
	<field name="open_date">1268215139</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.2.2</field>
	<field name="details">When I configure a certain class to be copied by reference, this configuration is ignored (Dozer tries to init a new Instance (fails because of private Constructor)) when this class exists in a Set.
If this class exists in a &#34;normal&#34; property, the configuration works.

Attached you find a small demo that shows the problem.

The demo at a glance (all Sources can be found in the attachment):

...
  &#60;configuration&#62;
        &#60;copy-by-references&#62;
            &#60;copy-by-reference&#62;dozerTest.SimpleTypesaveEnum&#60;/copy-by-reference&#62;
        &#60;/copy-by-references&#62;
  &#60;/configuration&#62;
...

TestDozer.java:

...
        // Simple property
        ClassA classA = new ClassA();
        classA.setSimpleTypesaveEnum(SimpleTypesaveEnum.TWO);
        ClassB classB = new ClassB();

        tempMapper.map(classA, classB);
        System.out.println(classB.getSimpleTypesaveEnum().toString());

        // Property within Set
        Set&#60;SimpleTypesaveEnum&#62; tempSet = new HashSet&#60;SimpleTypesaveEnum&#62;();
        tempSet.add(SimpleTypesaveEnum.TWO);

        ClassC classC = new ClassC();
        classC.setSimpleTypesaveEnumSet(tempSet);
        ClassD classD = new ClassD();
        tempMapper.map(classC, classD);
        System.out.println(classD.getSimpleTypesaveEnumSet().iterator().next().toString());
...


Output:

...
INFO: Successfully loaded custom xml mappings from URL: [file:/C:/path/to/dozerTest/mapping-configuration.xml]
TWO
10.03.2010 10:39:13 org.dozer.factory.DestBeanCreator create
SCHWERWIEGEND: Error trying to use XMLBeanFactory.
org.dozer.MappingException: Factory class of Bean of type dozerTest.SimpleTypesaveEnum not found.
	at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:93)
	at org.dozer.factory.XMLBeanFactory.createBean(XMLBeanFactory.java:54)
	at org.dozer.factory.DestBeanCreator.createFromFactory(DestBeanCreator.java:147)
	at org.dozer.factory.DestBeanCreator.create(DestBeanCreator.java:100)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:436)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:406)
	at org.dozer.MappingProcessor.addToSet(MappingProcessor.java:666)
	at org.dozer.MappingProcessor.mapCollection(MappingProcessor.java:511)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:394)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:303)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:249)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:218)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:163)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:128)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:123)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:96)
	at dozerTest.TestDozer.main(TestDozer.java:44)
10.03.2010 10:39:13 org.dozer.MappingProcessor mapField
SCHWERWIEGEND: Field mapping error --&#62;
  MapId: null
  Type: null
  Source parent class: dozerTest.ClassC
  Source field name: simpleTypesaveEnumSet
  Source field type: class java.util.HashSet
  Source field value: [TWO]
  Dest parent class: dozerTest.ClassD
  Dest field name: simpleTypesaveEnumSet
  Dest field type: java.util.Set
org.dozer.MappingException: java.lang.NoSuchMethodException: dozerTest.SimpleTypesaveEnum.&#60;init&#62;()
	at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:88)
	at org.dozer.factory.DestBeanCreator.newInstance(DestBeanCreator.java:164)
	at org.dozer.factory.DestBeanCreator.create(DestBeanCreator.java:95)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:436)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:406)
	at org.dozer.MappingProcessor.addToSet(MappingProcessor.java:666)
	at org.dozer.MappingProcessor.mapCollection(MappingProcessor.java:511)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:394)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:303)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:249)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:218)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:163)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:128)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:123)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:96)
	at dozerTest.TestDozer.main(TestDozer.java:44)
Caused by: java.lang.NoSuchMethodException: dozerTest.SimpleTypesaveEnum.&#60;init&#62;()
	at java.lang.Class.getConstructor0(Class.java:2706)
	at java.lang.Class.getDeclaredConstructor(Class.java:1985)
	at org.dozer.factory.DestBeanCreator.newInstance(DestBeanCreator.java:160)
	... 14 more
Exception in thread &#34;main&#34; org.dozer.MappingException: java.lang.NoSuchMethodException: dozerTest.SimpleTypesaveEnum.&#60;init&#62;()
	at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:88)
	at org.dozer.factory.DestBeanCreator.newInstance(DestBeanCreator.java:164)
	at org.dozer.factory.DestBeanCreator.create(DestBeanCreator.java:95)
	at org.dozer.MappingProcessor.mapCustomObject(MappingProcessor.java:436)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:406)
	at org.dozer.MappingProcessor.addToSet(MappingProcessor.java:666)
	at org.dozer.MappingProcessor.mapCollection(MappingProcessor.java:511)
	at org.dozer.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:394)
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:303)
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:249)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:218)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:163)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:128)
	at org.dozer.MappingProcessor.map(MappingProcessor.java:123)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:96)
	at dozerTest.TestDozer.main(TestDozer.java:44)
Caused by: java.lang.NoSuchMethodException: dozerTest.SimpleTypesaveEnum.&#60;init&#62;()
	at java.lang.Class.getConstructor0(Class.java:2706)
	at java.lang.Class.getDeclaredConstructor(Class.java:1985)
	at org.dozer.factory.DestBeanCreator.newInstance(DestBeanCreator.java:160)
	... 14 more
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1274035688</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk. Thanks for the proper test case. This feature was not implemented, but it is now. </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">929386</field>
		<field name="entrydate">1274035688</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1274035688</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1274035688</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1274035688</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1274035688</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1274035688</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">366094: dozerTest.jar</field>
		<field name="entrydate">1268215140</field>
		<field name="mod_by">cibes</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1709116</field>
	<field user_id="1772460" name="submitted_by">pupsmaster</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Invalid</field>
	<field name="summary">Map+copy by reference</field>
	<field name="open_date">1177742761</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Assume, that I have class A and class B.
class a have a field composite type B

class A{
 B field1;
}

I need that type B will be copied only by reference

&#60;configuration&#62;
  &#60;copy-by-references&#62;
    &#60;copy-by-reference&#62;com.my.B&#60;/copy-by-reference&#62;
  &#60;/copy-by-references&#62;
&#60;/configuration&#62;

all works good, but not when I try to get class A from Map.
i.e. I map class com.my.A to present it as java.util.Map.
But when I try to map backward, from java.util.Map to A, I get the class cast exception. Because in MappingProcessor 
in method
private Object mapOrRecurseObject(...) line 387: check on copy class by reference is putting before mapClassLevelMap() method calling. And when mapping object as Map, every &#34;sourceFieldValue&#34; is this Map themself. So class cast exception thrown when I tryed to set to field type B value, which is the Map of class A.

Resume: Map-&#62;A crushed when I try to put value from Map, which have type, marked as copy by ref in class A.
P.S.
And why U doesn't use the automatic grammar to mapping?</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1274711728</field>
		<field name="user_name">buzdin</field>
		<field name="body">test case was not provided</field>
</message>

<message>
		<field name="adddate">1224150747</field>
		<field name="user_name">buzdin</field>
		<field name="body">I have tried the following mapping but could not reproduce the problem:

  &#60;configuration&#62;
    &#60;copy-by-references&#62;
      &#60;copy-by-reference&#62;net.sf.dozer.util.mapping.vo.B&#60;/copy-by-reference&#62;
    &#60;/copy-by-references&#62;
  &#60;/configuration&#62;

  &#60;mapping&#62;
    &#60;class-a&#62;java.util.Map&#60;/class-a&#62;
    &#60;class-b&#62;net.sf.dozer.util.mapping.vo.ValueObject&#60;/class-b&#62;
    &#60;field&#62;
      &#60;a key=&#34;1&#34;&#62;this&#60;/a&#62;
      &#60;b&#62;value&#60;/b&#62;
    &#60;/field&#62;    
  &#60;/mapping&#62;

VluaeObject contains field of type B.</field>
</message>

<message>
		<field name="adddate">1178087107</field>
		<field name="user_name">pupsmaster</field>
		<field name="body">Logged In: YES 
user_id=1772460
Originator: YES

I change the order of the &#34;if&#34; conditions in MappingProcessor class. In the method on the 387 line
private Object mapOrRecurseObject(Object srcObj, Object sourceFieldValue, Class destFieldType, ClassMap classMap,
      FieldMap fieldMap, Object destObj, boolean ignoreClassMap) throws ....

now 
condition &#34;if (fieldMap.getCopyByReference())&#34; is follow after then the
&#34;if (fieldMap instanceof MapFieldMap &#38;&#38; !ignoreClassMap)&#34;. it works, but it's only the stub. I'm not sure, that this edit will not produce another bug, and I haven't enough time to understand and/or test this</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1274711728</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1274711728</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1274711728</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1274711728</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1129554</field>
		<field name="entrydate">1274711728</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1274364809</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1223845238</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3524638</field>
	<field user_id="3837187" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">Duplicate</field>
	<field name="summary">org.dozer.MappingException: org.xml.sax.SAXException: Parsin</field>
	<field name="open_date">1336465562</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Line:    51
URI:     null
Message: cvc-complex-type.2.3: Element 'mappings' cannot have character [children], because the type's content type is element-only.
	at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:88)
	at org.dozer.loader.xml.MappingFileReader.read(MappingFileReader.java:64)
	at org.dozer.loader.CustomMappingsLoader.load(CustomMappingsLoader.java:67)
	at org.dozer.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:149)
	at org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:132)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:94)
	at com.formsdirect.common.utility.ApplicationTransformerImpl.transformApplicationData(ApplicationTransformerImpl.java:141)
	at com.formsdirect.common.utility.DataPortingUtility.main(DataPortingUtility.java:197)
Caused by: org.xml.sax.SAXException: Parsing Error
Line:    51
URI:     null
Message: cvc-complex-type.2.3: Element 'mappings' cannot have character [children], because the type's content type is element-only.
	at org.dozer.loader.xml.XMLParserFactory$DozerDefaultHandler.error(XMLParserFactory.java:94)
	at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:175)
	at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:382)
	at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:316)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:429)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3185)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.elementLocallyValidComplexType(XMLSchemaValidator.java:3161)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.elementLocallyValidType(XMLSchemaValidator.java:3121)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processElementContent(XMLSchemaValidator.java:3025)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleEndElement(XMLSchemaValidator.java:2178)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.endElement(XMLSchemaValidator.java:814)
	at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanEndElement(XMLNSDocumentScannerImpl.java:719)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XMLDocumentFragmentScannerImpl.java:1685)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:368)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:834)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
	at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:148)
	at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:250)
	at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:292)
	at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:98)
	at org.dozer.loader.xml.MappingFileReader.read(MappingFileReader.java:58)
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1336465628</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1336465628</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1336465628</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1336465628</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3524633</field>
	<field user_id="3837187" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">Invalid</field>
	<field name="summary">org.dozer.MappingException: org.xml.sax.SAXException: Parsin</field>
	<field name="open_date">1336464130</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Line:    51
URI:     null
Message: cvc-complex-type.2.3: Element 'mappings' cannot have character [children], because the type's content type is element-only.
	at org.dozer.util.MappingUtils.throwMappingException(MappingUtils.java:88)
	at org.dozer.loader.xml.MappingFileReader.read(MappingFileReader.java:64)
	at org.dozer.loader.CustomMappingsLoader.load(CustomMappingsLoader.java:67)
	at org.dozer.DozerBeanMapper.loadCustomMappings(DozerBeanMapper.java:149)
	at org.dozer.DozerBeanMapper.getMappingProcessor(DozerBeanMapper.java:132)
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:94)
	at com.formsdirect.common.utility.ApplicationTransformerImpl.transformApplicationData(ApplicationTransformerImpl.java:141)
	at com.formsdirect.common.utility.DataPortingUtility.main(DataPortingUtility.java:197)
Caused by: org.xml.sax.SAXException: Parsing Error
Line:    51
URI:     null
Message: cvc-complex-type.2.3: Element 'mappings' cannot have character [children], because the type's content type is element-only.
	at org.dozer.loader.xml.XMLParserFactory$DozerDefaultHandler.error(XMLParserFactory.java:94)
	at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:175)
	at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:382)
	at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:316)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:429)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3185)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.elementLocallyValidComplexType(XMLSchemaValidator.java:3161)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.elementLocallyValidType(XMLSchemaValidator.java:3121)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processElementContent(XMLSchemaValidator.java:3025)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleEndElement(XMLSchemaValidator.java:2178)
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.endElement(XMLSchemaValidator.java:814)
	at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanEndElement(XMLNSDocumentScannerImpl.java:719)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XMLDocumentFragmentScannerImpl.java:1685)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:368)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:834)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
	at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:148)
	at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:250)
	at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:292)
	at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:98)
	at org.dozer.loader.xml.MappingFileReader.read(MappingFileReader.java:58)
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1336465526</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1336465526</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1336465526</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1336465526</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2539500</field>
	<field user_id="550746" name="submitted_by">gnl</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Configuration file path should be trimmed</field>
	<field name="open_date">1233033780</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v4.4</field>
	<field name="details">When setting up dozer as a spring bean, it is very to easy to create an entry like:

  &#60;bean id=&#34;Mapper&#34; class=&#34;net.sf.dozer.util.mapping.DozerBeanMapper&#34;&#62;
    &#60;property name=&#34;mappingFiles&#34;&#62;
      &#60;list&#62;
        &#60;value&#62;dozer-global-configuration.xml
        &#60;/value&#62;

The problem with this is that dozer now tries to open the file:

&#34;/local/src/workspace/ks-core/core-impl/target/classes/dozer-global-configuration.xml\n        &#34;

which of course does not exist. 

dozer should trim() the path it tries to use for configuration files.

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234924628</field>
		<field name="user_name">mhtierney</field>
		<field name="body">This was fixed in the 4.3 or 4.4 release.  The ResourceLoaderTest has the unit test for this use case.  Thanks</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234924628</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234924628</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234924628</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1234924628</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1384902</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Bug theSetMethod=mySetMethod(java.lang.Integer [ ])</field>
	<field name="open_date">1134969501</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I was trying to use the &#34;theSetMethod&#34; tag whose
parameter was an 
array.
Example is
theSetMethod=&#34;mySetMethod(java.lang.Integer[])&#34;

Dozer didnt like it. Modified the condition to below
and it seems to 
like it.
theSetMethod=&#34;mySetMethod([Ljava.lang.Integer;)&#34;.

But dont you feel that being a user i should be able to
give the syntax 
as in
the first example?</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1163380926</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

This ticket has been open for a long time and I dont see this functionality being implemented in the near 
future.  We can reopen this bug if a patch and/or unit test is submitted
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1163380926</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163380926</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163380926</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1137021281</field>
		<field name="entrydate">1137021440</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1137021440</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1137021281</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1137021281</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1719174</field>
	<field user_id="1363735" name="submitted_by">subf</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">3.3.1 recurstion not working</field>
	<field name="open_date">1179223944</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Just to let you know that the recursion mapping don't work on the lastest release. I had to roll back to 3.2.1

ta 
Charlie</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1183949224</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Not enough info to diagnose anything.  All unit tests are passing in 3.4 and most are recursive.</field>
</message>

<message>
		<field name="adddate">1179281164</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

We need more information. Failing unit test...stack trace...</field>
</message>

<message>
		<field name="adddate">1179225438</field>
		<field name="user_name">pluimpje</field>
		<field name="body">Logged In: YES 
user_id=1792692
Originator: NO

take a look at bugs 1717318 and 1664984, this might help you.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1183949224</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1183949224</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1183949224</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1692596</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Global is-accessible attribute not being applied to children</field>
	<field name="open_date">1175468878</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">The global configuration supports is-accessible, but it's never copied into the child class maps</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175469744</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

I am going to remove the global is-accessible attribute from the DTD.  It has never been supported.  I will keep it at the field level</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175469744</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175469744</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1175468886</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1233788</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer does not work with Hibernate Vo's</field>
	<field name="open_date">1120686329</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When using a VO generated by hibernate 3.0.5 and the 
VO is associated with a hibernate session some bean 
attributes are not copied by Dozer (1.3.3) to domain 
object bean.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1120687855</field>
		<field name="user_name">bgsesr</field>
		<field name="body">Logged In: YES 
user_id=1232046

We cannot reproduce this.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1120687855</field>
		<field name="mod_by">bgsesr</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1120687855</field>
		<field name="mod_by">bgsesr</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1413337</field>
	<field user_id="1434435" name="submitted_by">nicolas-elineau</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">NullPointerException and DEEP-FIELD</field>
	<field name="open_date">1138062074</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I work in a &#34;SOA&#34; architecture, with Spring, JDO and of
course DOZER !

I'm quiet newbeebie in Dozer, but it is an important
piece of our project's architecture.

We have trouble with &#60;field-deep&#62; TAG/FEATURE WHEN THE
SOURCE RESULT IS NULL.

We had make a lot of test, and when our source Bean
(eg: &#60;A&#62;, inside a &#60;field-deep&#62;) is Null, Dozer send a
NullPointerException.

=&#62;One thing very importante, our database (Oracle 9i on
Linux Red-Hat Entreprise OS) is not &#34;well-structured&#34;,
&#34;with a quiet bad data's integrity&#34;. 

So, sometimes, you can find the Id of an object that
refers to a Reference's Table for the Object's Libelle
(in database, after JDO) with NO existing Id !

In this case, the source's bean mapping, using a
&#60;fiel-deep&#62; (eg : client.numcli) with Null Value SEND A
NullPointerException. =&#62; How can i use Dozer to avoid
this ?

Our Architecture :

(MVC) --&#62; ServicesLayer, IF and DOZER for the
implementation (between Public and Private model) --&#62;
DAO/JDO.
With Spring around (Dozer + Spring are very very good)

Help use, please
Thanks a lot



nicolas.elineau@free.fr

AND/OR

nicolas.elineau@bnpparibas.com</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1138081116</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Nicolas -

I can not reproduce the error. I can map a null deep value
or a populated null value.

Here is my mapping:

    &#60;field&#62; &#60;!-- testing null source deep field object --&#62;
      &#60;a&#62;insideTestObject.label&#60;/a&#62;
      &#60;b&#62;onePrime&#60;/b&#62;
    &#60;/field&#62;    

and my test. Notice I do not set the attribute label on
InsideTestObject.

  public void testNullSourceDeepField() throws Exception {
    MapperIF mapper = getNewMapper(new String[] {
&#34;fieldAttributeMapping.xml&#34; });
    TestObject to = new TestObject();
    InsideTestObject ito = new InsideTestObject();
    to.setInsideTestObject(ito);    
    TestObjectPrime top = (TestObjectPrime) mapper.map(to,
TestObjectPrime.class);
    assertNull(top.getOnePrime());    
  } 

From your code sample I notice your Dozer version is pretty
old. We no longer use &#60;field-deep&#62; but just plain old &#60;field&#62;.

You should either upgrade to 1.5.8.1 or 2.0 and see if this
fixes your problem.

I will close the ticket. If you upgrade and still see the
problem we can dive deeper.

Thanks

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1138081116</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1138081116</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1138075638</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1441312</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Mixed deep-mapping and custom set method</field>
	<field name="open_date">1141249763</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">1/ I think there's a problem with mixed deep-mapping
and custom set method. 
Look at this :
http://img376.imageshack.us/img376/8497/mapping3iu.jpg 
My mapping file looks like this (still in 1.5.8 ... :D ) : 
 
&#60;mapping&#62; 
&#60;classA&#62;oa.Fermier&#60;/classA&#62; 
&#60;classB&#62;otd.FermierOTD&#60;/classB&#62; 
&#60;field&#62; 
&#60;A&#62;nom&#60;/A&#62; 
&#60;B&#62;nom&#60;/B&#62; 
&#60;/field&#62; 
&#60;field&#62; 
&#60;A&#62;adresses&#60;/A&#62; 
&#60;B theSetMethod=&#34;addAdresse&#34;
type=&#34;iterate&#34;&#62;societe.adresses&#60;/B&#62; 
&#60;sourceTypeHint&#62;oa.Adresse&#60;/sourceTypeHint&#62; 
&#60;destinationTypeHint&#62;otd.AdresseOTD&#60;/destinationTypeHint&#62; 
&#60;/field&#62; 
 
&#60;/mapping&#62; 
 
The mapping between Adresse and AdresseOTD is quite
simple, so don't needed here :) 
As you can see, i'm using a custom set method for
SocieteOTD class : 
 
public class SocieteOTD { 
... 
public void addAdresse(AdresseOTD adresse) { 
this.adresses.add(adresse); 
} 
... 
} 
 
Everything else is JavaBean compliant, with standard
getter and setter. 
So, I tried so map Fermier on FermierOTD, and got the
following error : 
 
2006-03-01 11:11:10 ERROR [MappingProcessor] Field
mapping error --&#62; 
Source parent class: oa.Fermier 
Source field name: adresses 
Source field type: class java.util.ArrayList 
Source field value: [oa.Adresse@20be79,
oa.Adresse@1b9240e] 
Dest parent class: otd.FermierOTD 
Dest field name: societe.adresses 
Dest field type: java.util.List 
java.lang.NullPointerException 
at
net.sf.dozer.util.mapping.fieldmap.FieldMap.writeDeepDestinationValue(FieldMap.java:224)

at
net.sf.dozer.util.mapping.fieldmap.FieldMap.writeDestinationValue(FieldMap.java:173)

at
net.sf.dozer.util.mapping.MappingProcessor.writeDestinationValue(MappingProcessor.java:978)

at
net.sf.dozer.util.mapping.MappingProcessor.mapFromIterateMethodFieldMap(MappingProcessor.java:351)

at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:281)

at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:92)

at
net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:70)

at Test.test4(Test.java:40) 
at Test.main(Test.java:21) 
 
Sorry, line number are for 1.5.8, not for 2.x :/ 
 
I think it's nowadays impossible to mix deep-maping and
custom set method. 
Don't know if it can help, but if I don't use iterate
type mapping, i get this error : 
 
2006-03-01 11:13:21 ERROR [MappingProcessor] Field
mapping error --&#62; 
Source parent class: oa.Fermier 
Source field name: adresses 
Source field type: class java.util.ArrayList 
Source field value: [oa.Adresse@7b6889, oa.Adresse@c2ff5] 
Dest parent class: otd.FermierOTD 
Dest field name: societe.adresses 
Dest field type: java.util.List 
java.lang.NullPointerException 
at
net.sf.dozer.util.mapping.fieldmap.DozerMethodMember.getParameterTypes(DozerMethodMember.java:83)

at
net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:304)

at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:284)

at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:92)

at
net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:70)

at Test.test4(Test.java:40) 
at Test.main(Test.java:21) </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1142407595</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I am going to close this bug. After discussing with the
other developers it would be next to impossible to handle
custom method names with deep mappings. If you had multiple
levels of custom method names how would you correlate these
to the field levels? I just think this will open a can of
worms. It is a very tough problem.</field>
</message>

<message>
		<field name="adddate">1141333255</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I have verified this is a problem. Need to figure out how to
override the method name in deep mappings.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1142407595</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1142407595</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1462067</field>
	<field user_id="1491031" name="submitted_by">flannelfoot</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Deep mapping with CustomMaps</field>
	<field name="open_date">1143808812</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When i tru to deep map an object to an hashmap it 
won't work.

The fields of the object directly to the hashmap 
getmapped but the nested fields won't get mapped and 
throw an exception 

Here is what i try
&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;!DOCTYPE mappings PUBLIC &#34;-//DOZER//DTD MAPPINGS//EN&#34;
   &#34;http://dozer.sourceforge.net/dtd/dozerbeanmapping.
dtd&#34;&#62;
&#60;mappings&#62;
	&#60;configuration&#62;
		&#60;stop-on-errors&#62;false&#60;/stop-on-errors&#62;
		&#60;date-format&#62;dd-MM-yyyy&#60;/date-format&#62;
		&#60;wildcard&#62;false&#60;/wildcard&#62;
	&#60;/configuration&#62;
	&#60;mapping type=&#34;one-way&#34;  map-null=&#34;false&#34;&#62;
		&#60;class-a&#62;test.ClassA&#60;/class-a&#62;
		&#60;class-b &#62;test.SuperMap&#60;/class-b&#62;
		&#60;field map-id=&#34;map&#34;&#62;
			&#60;a&#62;test&#60;/a&#62;
			&#60;b&#62;this&#60;/b&#62;
			&#60;b-hint&#62;test.SuperMap&#60;/b-hint&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;
	&#60;mapping type=&#34;one-way&#34; map-id=&#34;map&#34; map-
null=&#34;false&#34; &#62;
		&#60;class-a&#62;test.ClassB&#60;/class-a&#62;
		&#60;class-b map-set-method=&#34;addData&#34; map-
get-method=&#34;getValue&#34;&#62;test.SuperMap&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;property&#60;/a&#62;
			&#60;b key=&#34;String&#34;&#62;this&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;
&#60;/mappings&#62;

with the following classes 

public class ClassA {
	private String stringProperty;
	
	private ClassB test;
	
    public String getStringProperty() {
        return stringProperty;
    }

    public void setStringProperty(String string) {
        stringProperty = string;
    }

    public ClassB getTest() {
        return test;
    }

    public void setTest(ClassB classB) {
        test = classB;
    }

}


public class ClassB {
    private String property;

    public String getProperty() {
        return property;
    }

    public void setProperty(String string) {
        property = string;
    }
}


public class SuperMap{
	
	private HashMap superMap = new HashMap();
	
	
	public void addData(Object key, Object value){
		superMap.put(key, value);
	}
	
	
	public Object getValue(Object key){
		return superMap.get(key);
	}
}


Exception thrown:
14:36:52,599 ERROR 
net.sf.dozer.util.mapping.MappingProcessor:1169 - 
Field mapping error --&#62;
  Source parent class: test.ClassB
  Source field name: property
  Source field type: class java.lang.String
  Source field value: 2
  Dest parent class: java.lang.Class
  Dest field name: this
  Dest field type: java.lang.Object
java.lang.NullPointerException
	at 
net.sf.dozer.util.mapping.fieldmap.DozerMethodMember.g
etParameterTypes(DozerMethodMember.java:83)
	at 
net.sf.dozer.util.mapping.fieldmap.MapFieldMap.writeDe
stinationValue(MapFieldMap.java:34)
	at 
net.sf.dozer.util.mapping.MappingProcessor.writeDestin
ationValue(MappingProcessor.java:945)
	at 
net.sf.dozer.util.mapping.MappingProcessor.mapFromFiel
dMap(MappingProcessor.java:308)
	at 
net.sf.dozer.util.mapping.MappingProcessor.map
(MappingProcessor.java:281)
	at 
net.sf.dozer.util.mapping.MappingProcessor.mapCustomOb
ject(MappingProcessor.java:527)
	at 
net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurs
eObject(MappingProcessor.java:473)
	at 
net.sf.dozer.util.mapping.MappingProcessor.mapFromFiel
dMap(MappingProcessor.java:306)
	at 
net.sf.dozer.util.mapping.MappingProcessor.map
(MappingProcessor.java:281)
	at 
net.sf.dozer.util.mapping.MappingProcessor.map
(MappingProcessor.java:136)
	at 
net.sf.dozer.util.mapping.MappingProcessor.map
(MappingProcessor.java:123)
	at 
net.sf.dozer.util.mapping.DozerBeanMapper.map
(DozerBeanMapper.java:82)
	at test.TryIt.main(TryIt.java:46)
14:36:52,614 ERROR 
net.sf.dozer.util.mapping.MappingProcessor:1169 - 
Field mapping error --&#62;
  Source parent class: test.ClassA
  Source field name: test
  Source field type: class test.ClassB
  Source field value: test.ClassB@2ea7d49d
  Dest parent class: test.SuperMap
  Dest field name: this
  Dest field type: java.lang.Class
java.lang.NullPointerException
	at 
net.sf.dozer.util.mapping.fieldmap.DozerMethodMember.i
nvokeWrite(DozerMethodMember.java:56)
	at 
net.sf.dozer.util.mapping.fieldmap.FieldMap.writeDesti
nationValue(FieldMap.java:153)
	at 
net.sf.dozer.util.mapping.MappingProcessor.writeDestin
ationValue(MappingProcessor.java:945)
	at 
net.sf.dozer.util.mapping.MappingProcessor.mapFromFiel
dMap(MappingProcessor.java:308)
	at 
net.sf.dozer.util.mapping.MappingProcessor.map
(MappingProcessor.java:281)
	at 
net.sf.dozer.util.mapping.MappingProcessor.map
(MappingProcessor.java:136)
	at 
net.sf.dozer.util.mapping.MappingProcessor.map
(MappingProcessor.java:123)
	at 
net.sf.dozer.util.mapping.DozerBeanMapper.map
(DozerBeanMapper.java:82)
	at test.TryIt.main(TryIt.java:46)


=====================================================
I found a work-around for the problem as follows:

Change superMap to:
public class SuperMap{
	
	private HashMap superMap = new HashMap();

	public void addData(Object key, Object value){
		superMap.put(key, value);
	}

	public Object getValue(Object key){
		return superMap.get(key);
	}
	
	public SuperMap getMe(){
		return this;
	}
	
	public void setMe(SuperMap superMap){
				
	}
}


and change mapping:

&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62;
&#60;!DOCTYPE mappings PUBLIC &#34;-//DOZER//DTD MAPPINGS//EN&#34;
   &#34;http://dozer.sourceforge.net/dtd/dozerbeanmapping.
dtd&#34;&#62;
&#60;mappings&#62;
	&#60;configuration&#62;
		&#60;stop-on-errors&#62;false&#60;/stop-on-errors&#62;
		&#60;date-format&#62;dd-MM-yyyy&#60;/date-format&#62;
		&#60;wildcard&#62;false&#60;/wildcard&#62;
	&#60;/configuration&#62;
	&#60;mapping type=&#34;one-way&#34;  map-null=&#34;false&#34;&#62;
		&#60;class-a&#62;test.ClassA&#60;/class-a&#62;
		&#60;class-b &#62;test.SuperMap&#60;/class-b&#62;
		&#60;field map-id=&#34;map&#34;&#62;
			&#60;a&#62;test&#60;/a&#62;
			&#60;b&#62;me&#60;/b&#62;
			&#60;b-hint&#62;test.SuperMap&#60;/b-hint&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;
	&#60;mapping type=&#34;one-way&#34; map-id=&#34;map&#34; map-
null=&#34;false&#34; &#62;
		&#60;class-a&#62;test.ClassB&#60;/class-a&#62;
		&#60;class-b map-set-method=&#34;addData&#34; map-
get-method=&#34;getValue&#34;&#62;test.SuperMap&#60;/class-b&#62;
		&#60;field&#62;
			&#60;a&#62;property&#60;/a&#62;
			&#60;b key=&#34;String&#34;&#62;this&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;
&#60;/mappings&#62;


this works but ofcourse it not verry neat.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1163381131</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

I dont see this functionality being implemented in the near future.  We can reopen this ticket if a patch/unit 
test is submitted or this feature is added to the long term roadmap
</field>
</message>

<message>
		<field name="adddate">1150356069</field>
		<field name="user_name">skoessler</field>
		<field name="body">Logged In: YES 
user_id=1326867

Any (good) news about this bug ?

See u
Seb</field>
</message>

<message>
		<field name="adddate">1143912886</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I didn't think we currently support this. Apparently we
don't :). I am almost done integrating OGNL
(http://www.ognl.org/) into dozer. This will hopefully solve
this problem. I will test a usecase and let you know.

Thanks,

franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1163381131</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1163381131</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1163381131</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1143912886</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1431216</field>
	<field user_id="429966" name="submitted_by">elangomca</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping Between Interfaces </field>
	<field name="open_date">1139888563</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,
  I am mapping the generated classes using XMLBeans 
to VO . The Generated classes/VO are given below 
Dozer doesnt map the top level fields.
----------------------------------------------------
public interface VehicleNetworkAddress extends 
AbstractVehicle
{
	java.lang.String getIPAddress();
	void setIPAddress(java.lang.String ipAddress);
	java.lang.String getPhoneNumber();
	void setPhoneNumber(java.lang.String 
phoneNumber);
	java.lang.String getSIMNumber();
	void setSIMNumber(java.lang.String simNumber);
	java.lang.String getIPAddress();
	void setIPAddress(java.lang.String ipAddress);
}
--------------------------------------

public interface AbstractVehicle extends AbstractOwner
{
	java.math.BigInteger getVehicleID();
	void setVehicleID(java.math.BigInteger 
vehicleID);
}
--------------------------------------------
public interface AbstractOwner //extends 
org.apache.xmlbeans.XmlObject
{
	java.math.BigInteger getOwnerID();
	void setOwnerID(java.math.BigInteger ownerID);
}
--------------------------------------------
public class VehicleNetworkAddressVO {
	private BigInteger ownerID;
	private BigInteger vehicleID;
	private String ipAddress=&#34;&#34;;
	private String phoneNumber = &#34;&#34;;
	private String simNumber = &#34;&#34;;

	public BigInteger getOwnerID() {
		return ownerID;
	}
	public void setOwnerID(BigInteger ownerID) {
		this.ownerID = ownerID;
	}
	public BigInteger getVehicleID() {
		return vehicleID;
	}
	public void setVehicleID(BigInteger 
vehicleID) {
		this.vehicleID = vehicleID;
	}
	
	public String getIpAddress() {
		return ipAddress;
	}
	public void setIpAddress(String ipAddress) {
		this.ipAddress = ipAddress;
	}
	public String getPhoneNumber() {
		return phoneNumber;
	}
	public void setPhoneNumber(String 
phoneNumber) {
		this.phoneNumber = phoneNumber;
	}
	public String getSimNumber() {
		return simNumber;
	}
	public void setSimNumber(String simNumber) {
		this.simNumber = simNumber;
	}
}
------------------------------------------------
	&#60;mapping&#62;
		&#60;class-a&#62;VehicleNetworkAddress&#60;/class-
a&#62;
		&#60;class-
b&#62;VehicleNetworkAddressVO&#60;/class-b&#62;
		&#60;field&#62;
     	 	&#60;a&#62;IPAddress&#60;/a&#62;
      		&#60;b&#62;ipAddress&#60;/b&#62;
	   &#60;/field&#62;
	   &#60;field&#62;
     	 	&#60;a&#62;SIMNumber&#60;/a&#62;
      		&#60;b&#62;simNumber&#60;/b&#62;
	   &#60;/field&#62;	   
	&#60;/mapping&#62;
--------------------------------------------------
In the above mapping the vehicleID and OwnerID does 
not get mapped other fields mapped successfully ..

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1144790043</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

This is duplicated in bug 1456517. I am closing this issue.
It is not resolved but I will work with bug 1456517 to
resolve it.</field>
</message>

<message>
		<field name="adddate">1139935794</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

My intial guess is that when you do have a mapping it is an
interface (a) to a concrete class (b). When you don't put a
mapping in we create a default one that is concrete class to
concrete class. This explains why all the fields show up.

At the end of the day...I still need to walk up and down the
interface tree and find the attributes. Let me
investigate...it is a good use case.

Franz</field>
</message>

<message>
		<field name="adddate">1139935432</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Good point. Let me investigate this further...</field>
</message>

<message>
		<field name="adddate">1139899812</field>
		<field name="user_name">elangomca</field>
		<field name="body">Logged In: YES 
user_id=429966

Franz,
Thaks for your immediate response.
The tricky part which i dont understand is when mapping 
was not specified in mappingFile.xml this works fine (Even 
it can map Super Interfaces correctly)..Is your mapping 
code different when you find a mapping defined in 
mappingFile.xml ?

Elango</field>
</message>

<message>
		<field name="adddate">1139899487</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

The workaround for now would be to put the concrete
implementation of VehicleNetworkAddress on class-a until I
can  figure out how much work it will be to provide super
mapping for interfaces...I will look at this tomorrow.

Franz</field>
</message>

<message>
		<field name="adddate">1139899121</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I see the problem. All of our unit tests are around abstract
or concrete super classes. We currently do not handle super
classes in respect to 'interfaces'. Let me look into the
codebase and see what kind of change this is.

Thanks,

franz</field>
</message>

<message>
		<field name="adddate">1139898881</field>
		<field name="user_name">elangomca</field>
		<field name="body">Logged In: YES 
user_id=429966

Hi Franz,
I have Found out that when the mapping was not specified 
for the class it automatically Maps those two fields from 
the super classes (AbstractVehicle &#38; AbstarctOwner) the 
problem occurs only when mapping was defined for a class .
I have another class Vehicle which extends from 
AbstarctVehcile 

---------------------------------
public interface Vehicle extends AbstractVehicle
{
java.lang.String getMake();
void setMake(java.lang.String make);
}
------------------
when mapping this to another VO which has all set/get same 
as above ,without problem all fields get mapped including 
(VehicleID &#38; OwnerID) ...
Let me know if any mapping i specified is wrong ?

Regards
Elango

</field>
</message>

<message>
		<field name="adddate">1139894988</field>
		<field name="user_name">elangomca</field>
		<field name="body">Logged In: YES 
user_id=429966

I have added 
&#60;mapping&#62;
  	  &#60;class-a&#62;AbstractOwner&#60;/class-a&#62;
	  &#60;class-b&#62;VehicleNetworkAddressVO&#60;/class-b&#62;
	&#60;/mapping&#62;
&#60;mapping&#62;
ownerID get mapped but when i put 
-----------------------------------------------------
  	  &#60;class-a&#62;AbstractVehicle&#60;/class-a&#62;
	  &#60;class-b&#62;VehicleNetworkAddressVO&#60;/class-b&#62;
	&#60;/mapping&#62;
---------------------------------------------
VehicleID does not get mapped  is there any way i can 
specify that too ?

Thanks
Elango
</field>
</message>

<message>
		<field name="adddate">1139891174</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I have set up this use case and it does work.

You need to add the parent mapping in the XML (i.e.)

	&#60;mapping&#62;
  	  &#60;class-a&#62;AbstractOwner&#60;/class-a&#62;
	  &#60;class-b&#62;VehicleNetworkAddressVO&#60;/class-b&#62;
	&#60;/mapping&#62;

Thanks for looking.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1144790045</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1144790043</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1139896311</field>
		<field name="mod_by">elangomca</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1139891174</field>
		<field name="entrydate">1139896311</field>
		<field name="mod_by">elangomca</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1139891174</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1139891174</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1139891174</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1770537</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Copy by Ref with Collection Error</field>
	<field name="open_date">1186618899</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">http://sourceforge.net/forum/forum.php?thread_id=1795141&#38;forum_id=452529</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1186727060</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

this is not a valid bug</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1186727060</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1186727060</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1649331</field>
	<field user_id="1236069" name="submitted_by">mhtierney</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Cant specify Array for custom converter in mapping file</field>
	<field name="open_date">1170296516</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Need to be able to specify Array for src or dest in mapping file for custom converters.  SomeCustomObject[] --&#62; String</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1170362530</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: YES

This use case works.  

      &#60;converter type=&#34;net.sf.dozer.util.mapping.converters.StringAppendCustomConverter&#34; &#62;
        &#60;class-a&#62;[Lnet.sf.dozer.util.mapping.vo.SimpleObj;&#60;/class-a&#62;
        &#60;class-b&#62;java.lang.String&#60;/class-b&#62;
      &#60;/converter&#62;
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1170362530</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1170362530</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1781636</field>
	<field user_id="1875368" name="submitted_by">jrpinna</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Primitive conversion with deep mapping</field>
	<field name="open_date">1188032147</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">ObjectA{
  String stringProp;
}

ObjectB{
 ObjectC c;
}

ObjectC{
 Long longProp;
}

------

Mapping.xml

&#60;class-a&#62;ObjectA&#60;/class-a&#62;
&#60;class-b&#62;ObjectB&#60;/class-b&#62;

&#60;field&#62;
  &#60;a&#62;stringProp&#60;/a&#62;
  &#60;b&#62;c.longProp&#60;/b&#62;
  &#60;b-hint&#62;ObjectC&#60;/b&#62;
&#60;field&#62;

------

With not deep mapping it works nice but with a deep mapping I've got the following errors on fields with a conversion 

net.sf.dozer.util.mapping.MappingException: java.lang.IllegalArgumentException: argument type mismatch

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1188181275</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

duplicate bug</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1188181275</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1188181275</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1188181275</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1659867</field>
	<field user_id="1719326" name="submitted_by">gerryquan</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">9</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Array to List Processing with Dozer 1.5.5</field>
	<field name="open_date">1171469611</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">We are experiencing a array to list conversion problem using Dozer 1.5.5. We have a web service that receives a Data Transfer Object (DTO) containing an array of other DTOs. We are using Dozer to convert source DTOs to Value object representations and also convert DTOs in the source object array to a corresponding List of Value objects inside a destination Value object. 

Dozer is able to convert the container DTO to a representative Value Object with a List attribute and convert the array of DTOs to the new List of Value objects on a single JVM. However, when we put the client code on one JVM and the web service on another JVM, we are experiencing the following problem: 

Dozer is inserting into the List (in the destination Value object) the source DTOs instead of the destination Value objects defined in the Hint. This problem happens only in the 2 JVM scenario.

We have unique package/namespace for DTOs and Value objects and we even tried using serialization UIDs with the DTOs but still the same problem.

We thought this bug was fixed with the 2.0 release. However, we tested the same scenario with Dozer 3.0 and still the same problem persists. Can anyone shed some light on what may be the root cause?

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175387798</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

This sounds like it could be an environment issue, but cant say for sure.  It is suspicious that the same mapping would work in a 1VM setup and not in a 2VM setup.  Dozer runs everything within the same VM it is started in and doesnt do any remoting.

If you can submit the actual error and possibly a simple unit test that reproduces the issue, we can reopen the defect.  Until then, there isn't much we can do with this </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175387798</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1175387798</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175387798</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1171469705</field>
		<field name="mod_by">gerryquan</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">215960: DozerMappingFile.doc</field>
		<field name="entrydate">1171469612</field>
		<field name="mod_by">gerryquan</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1688972</field>
	<field user_id="1748100" name="submitted_by">wabash</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping List to String[] in Dozer 3.0</field>
	<field name="open_date">1174985106</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,
this bug report is related to the following Help Forums entry:
http://sourceforge.net/forum/forum.php?thread_id=1696264&#38;forum_id=452530

In the attachment you can find my test resources. There are 4 test cases in the JUnit class &#34;MappingTest&#34;.
Only the 2nd test method &#34;testMappingReverse()&#34; is running successfuly. The test cases consider both POJO to POJO and XMLBean to POJO mappings.

Thanks, 
Wahid Bashirazad</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1183953879</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

We will track this with feature request #1731158</field>
</message>

<message>
		<field name="adddate">1181019529</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I opened a feature request for the 1st unit test that was submitted  --&#62; 1731158 

https://sourceforge.net/tracker/index.php?func=detail&#38;aid=1731158&#38;group_id=133517&#38;atid=727371</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1183953879</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1183953879</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1183953879</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">222436: mappingtest.zip</field>
		<field name="entrydate">1174985108</field>
		<field name="mod_by">wabash</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1685102</field>
	<field user_id="890916" name="submitted_by">sguillory</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">custom-create method ignored</field>
	<field name="open_date">1174477021</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">It seems that specifying a static custom-create method is  ignored. From the following mapping specification:

&#60;mapping&#62;
   &#60;class-a&#62;customcreate.JavaBean1&#60;/class-a&#62;
   &#60;class-b create-method=&#34;create&#34;&#62;
       customcreate.JavaBean2
   &#60;/class-b&#62;
&#60;/mapping&#62;


The JavaBean1 and JavaBean2 classes are basic POJOs:

         JavaBean1            JavaBean2
String     name                 name
int        age                  age
float      rate
String                          id

The static method on JavaBean2, &#34;create&#34;, creates a JavaBean2 object and sets the id to &#34;12345&#34;. The method is never called.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1174495642</field>
		<field name="user_name">sguillory</field>
		<field name="body">Logged In: YES 
user_id=890916
Originator: YES

This was a configuration error with a unit test. Once that was corrected, the create-method feature worked as expected.
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1174495642</field>
		<field name="mod_by">sguillory</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1174495642</field>
		<field name="mod_by">sguillory</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1503667</field>
	<field user_id="302" name="submitted_by">jherico</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">custom getters not supported in inheritance</field>
	<field name="open_date">1149880039</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">See attached patch containing test case and kludge fix...

If a base class has a custom getter/setter pair and you
try to use the mapper with a derived class, the derived
class will fail to discover the field has already been
mapped in the parent class.  If there is a default
getter for the property it will incorrectly be called,
and if there isn't then a mapping error will be
generated with a getter not found error.  

The issue comes about because the functions
processSuperTypeMapping() and mapField() generate keys
from field mappings that use the source and dest method
names.  
 
When working from the derived class properties, it
doesn't find the custom getters and thus throws a
mapping exception when it tries to find the getter
method on the derived class. Even if it didn't throw an
exception there it wouldn't be able to match the key it
generates because key would be using the non-custom
getter method and so it would end up mapping the field
twice, the wrong thing, especially if there's business
logic in the custom getter.  
 
My solution was to stop using the getFieldName in the
key used in these two functions. This is subptimal
since I assume there was a good reason for adding the
getter name to the key (though I can't actually think
of one). Other solutions would be  
 
* make using the getter name in the key a configurable
setting 
* modify the function which finds getters to search
parent classes with fields of the same name but with
custom getters before using the standard mechanism 
* modify the function which finds getters to discover
the is function for methods that return Boolean as well
as methods that return boolean (ideally this would be a
patch to commons-beanutils). This mechanism would only
help people in my specific situation and would not be a
general solution for custom getters vs inheritance.  
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1175467121</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I was unable to reproduce this.  Inheritance w/ custom getter/setter worked when I ran a basic test case.  We can reopen this if a unit test is submitted or more specific details are included.</field>
</message>

<message>
		<field name="adddate">1155445892</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

Brad,

Can you resubmit the patch as I cant seem to find it.  Or 
let me know where I can find it.  cheers</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1175467121</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1175467121</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1175467121</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1505899</field>
	<field user_id="1326867" name="submitted_by">skoessler</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">7</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Incompatibility between multiple hints and iterate</field>
	<field name="open_date">1150277770</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi :D

I'm facing a new bug : i can't use hints for different
class types and iterator.

For example :

&#60;class-a&#62;A&#60;/class-a&#62;
&#60;class-b&#62;B&#60;/class-b&#62;
 &#60;field&#62;
  &#60;a&#62;list&#60;/a&#62;
  &#60;b&#62;list&#60;/b&#62;
  &#60;a-hint&#62;A1,A2&#60;/a-hint&#62;
  &#60;b-hint&#62;B1,B2&#60;/b-hint&#62;
 &#60;/field&#62;
... + mappings between A1 &#38; B1 and A2 &#38; B2

This works ... but, we're using our own API for lists.
Our get() method returns an Iterator, and there's no
set() method. We're using a custom addXXX() method,
which puts only one element in our list : 

&#60;class-a&#62;A&#60;/class-a&#62;
&#60;class-b&#62;B&#60;/class-b&#62;
 &#60;field&#62;
  &#60;a&#62;list&#60;/a&#62;
  &#60;b set-method=&#34;addList&#34; type=&#34;iterate&#34;&#62;list&#60;/b&#62;
  &#60;a-hint&#62;A1,A2&#60;/a-hint&#62;
  &#60;b-hint&#62;B1,B2&#60;/b-hint&#62;
 &#60;/field&#62;

And this does not work !!
Here's the error message :

  Type: bi-directional
  Source parent class: A
  Source field name: list
  Source field type: class java.util.ArrayList
  Source field value: [A1@1430b5c, A2@9ed927]
  Dest parent class: B
  Dest field name: list
  Dest field type: java.util.Iterator
java.lang.ClassNotFoundException: B1,B2
	at java.net.URLClassLoader$1.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native
Method)
	at java.net.URLClassLoader.findClass(Unknown Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at sun.misc.Launcher$AppClassLoader.loadClass(Unknown
Source)
	at java.lang.ClassLoader.loadClass(Unknown Source)
	at
net.sf.dozer.util.mapping.MappingProcessor.mapFromIterateMethodFieldMap(MappingProcessor.java:380)
	at
net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:296)
	at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:242)
	at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:129)
	at
net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:108)
	at
net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:100)
	at test.Main.main(Main.java:43)

Thx
Seb</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1177469856</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1177469856</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1150354068</field>
		<field name="mod_by">skoessler</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1683487</field>
	<field user_id="1739534" name="submitted_by">schumnana</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Problem with CustomConverter and Hibernate Lazy</field>
	<field name="open_date">1174299954</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,

I have a problem to convert my Hibernate Domain Object (DO) to my Data Transfert Object (DTO).

What I want to do :
If a object is lazy object =&#62; put null value, 
else =&#62; map my objects.

I try to use a Custom Converter to do that (see the code below ).

It works well if the object is not a collection.
So I try to use a &#60;b-hint&#62; but it does not work when I use a Custom Converter.

My only solution is to reimplement the mapping when I have a Collection but it is so bad.

If someone has a better solution ... 

Thanks in advance.

Alexandre

Ps : Code of Custom Converter

/*
 * Created on 6 mars 07
 *
 */
package sgcib.ged.testxfire.core.components.converter;

import java.util.Arrays;
import java.util.List;

import net.sf.dozer.util.mapping.DozerBeanMapperSingletonWrapper;
import net.sf.dozer.util.mapping.MapperIF;
import net.sf.dozer.util.mapping.converters.CustomConverter;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.hibernate.collection.AbstractPersistentCollection;
import org.hibernate.proxy.HibernateProxy;


/**
 * Class        : HibernateProxyConverter
 *
 * Description  :
 *
 * @author anavarro122404
 *
 *
 *
 */
public class HibernateProxyConverter
    implements CustomConverter
{
    /**
     * HIBERNATE_PROXY
     */
    private static final Class&#60;HibernateProxy&#62; HIBERNATE_PROXY = HibernateProxy.class;

    /**
     * ABSTRACT_PERSISTENT_COLLECTION
     */
    private static final Class&#60;AbstractPersistentCollection&#62; ABSTRACT_PERSISTENT_COLLECTION = AbstractPersistentCollection.class;

    /**
     * Logger for this class
     */
    private static final Log LOG = LogFactory.getLog(HibernateProxyConverter.class);

    /**
     * convert
     *
     * @param destination
     * @param source
     * @param destClass
     * @param sourceClass
     * @return
     */
    public Object convert(Object destination, Object source, Class destClass, Class sourceClass)
    {
        Object result = null;
        if (LOG.isDebugEnabled())
        {
            LOG.debug(&#34;begin HibernateProxyConverter.convert&#34;);
            LOG.debug(&#34;destination=&#34; + destination);
            LOG.debug(&#34;destClass=&#34; + destClass);
            LOG.debug(&#34;sourceClass=&#34; + sourceClass);
        }

        final MapperIF mapper =  DozerBeanMapperSingletonWrapper.getInstance();

        final List&#60;Class&#62; interfaceList = Arrays.asList(sourceClass.getInterfaces());
        boolean hibernateProxy = interfaceList.contains(HIBERNATE_PROXY);

        boolean abstractPersistentCollectionNotInitialized = true;
        if (ABSTRACT_PERSISTENT_COLLECTION.equals(sourceClass.getSuperclass()))
        {
            final AbstractPersistentCollection apc = (AbstractPersistentCollection) source;
            if (apc.wasInitialized())
            {
                abstractPersistentCollectionNotInitialized = false;
            }
        }

        if (LOG.isDebugEnabled())
        {
            LOG.debug(&#34;hibernateProxy=&#34; + hibernateProxy);
            LOG.debug(&#34;abstractPersistentCollectionNotInitialized=&#34; + abstractPersistentCollectionNotInitialized);
        }

        // si ce n'est pas un proxy hibernate et ce n'est pas une Collection Hibernate non initialise, on transforme DO -&#62; DTO
        if (!hibernateProxy &#38;&#38; !abstractPersistentCollectionNotInitialized)
        {
            destination = mapper.map(source, destClass);
            mapper.map(source, destination);
            result = destination;
        }
        // sinon on laisse a null

        if (LOG.isDebugEnabled())
        {
            LOG.debug(&#34;end HibernateProxyConverter.convert&#34;);
        }
        return result;
    }
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1183954243</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

If I understand this correctly I am not sure dozer will be able to support this without coupling it to hibernate.  Please let us know if you have any ideas on how dozer could help with this </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1183954243</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1183954243</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1183954243</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1712733</field>
	<field user_id="1777524" name="submitted_by">jimtough</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Defect in ClassMapFinder.findInterfaceOrAbstractMapping()</field>
	<field name="open_date">1178285191</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I am having serious problems with the following method:
  DozerBeanMapper.map(Object, Object)
and yet, I am having no trouble with the overloaded version:
  DozerBeanMapper.map(Object, Class)

I am attempting the same operation, on the same file, using the same mappings.  I have reached the point where I have testing all my individual mappings with the working &#34;map&#34; method, and I now need to start using Dozer as an assembler using the other &#34;map&#34; variant.  Everything seems to fall apart at the GetterSetterPropertyDescriptor.getPropertyValue() method.  In the stack trace below, the &#34;GDateValue&#34; just happens to be the first base class attribute from the XMLBeans XmlObjectBase class that Dozer chokes on.  If I try to get around this by writing a mapping for XmlObjectBase and exclude GDateValue, it will just choke on the next attribute.  I can't understand why Dozer is suddenly having issues with practically every base class attribute when I use &#34;map(Object,Object)&#34; but this never happens with &#34;map(Object,Class)&#34;.  Does Dozer do something different internally?

Here is my exception output:

May 4, 2007 8:57:11 AM net.sf.dozer.util.mapping.MappingProcessor mapField
SEVERE: Field mapping error --&#62;
  MapId: null
  Type: null
  Source parent class: XXXX.impl.CalypsoTradeDetailImpl
  Source field name: GDateValue
  Source field type: null
  Source field value: null
  Dest parent class: XXXX.impl.TradeDetailImpl
  Dest field name: GDateValue
  Dest field type: org.apache.xmlbeans.GDate
net.sf.dozer.util.mapping.MappingException: java.lang.reflect.InvocationTargetException
	at net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor.getPropertyValue(GetterSetterPropertyDescriptor.java:80)
	at net.sf.dozer.util.mapping.fieldmap.FieldMap.getSrcFieldValue(FieldMap.java:103)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:272)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:255)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:185)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:159)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:103)
	at XXXX.translation.Translator.translate(Translator.java:65)
	at XXXX.translation.TranslatorTest.testCalypsoToRds(TranslatorTest.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.junit.internal.runners.TestMethodRunner.executeMethodBody(TestMethodRunner.java:99)
	at org.junit.internal.runners.TestMethodRunner.runUnprotected(TestMethodRunner.java:81)
	at org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterRunner.java:34)
	at org.junit.internal.runners.TestMethodRunner.runMethod(TestMethodRunner.java:75)
	at org.junit.internal.runners.TestMethodRunner.run(TestMethodRunner.java:45)
	at org.junit.internal.runners.TestClassMethodsRunner.invokeTestMethod(TestClassMethodsRunner.java:71)
	at org.junit.internal.runners.TestClassMethodsRunner.run(TestClassMethodsRunner.java:35)
	at org.junit.internal.runners.TestClassRunner$1.runUnprotected(TestClassRunner.java:42)
	at org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterRunner.java:34)
	at org.junit.internal.runners.TestClassRunner.run(TestClassRunner.java:52)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:38)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor.getPropertyValue(GetterSetterPropertyDescriptor.java:70)
	... 28 more
Caused by: org.apache.xmlbeans.impl.values.XmlValueNotSupportedException: Could not get a Java Date type from a Schema complex type
	at org.apache.xmlbeans.impl.values.XmlObjectBase.gDateValue(XmlObjectBase.java:1578)
	at org.apache.xmlbeans.impl.values.XmlObjectBase.getGDateValue(XmlObjectBase.java:1520)
	... 33 more
XXXX.translation.exception.TranslationException
	at XXXX.translation.Translator.translate(Translator.java:68)
	at XXXX.translation.TranslatorTest.testCalypsoToRds(TranslatorTest.java:286)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at org.junit.internal.runners.TestMethodRunner.executeMethodBody(TestMethodRunner.java:99)
	at org.junit.internal.runners.TestMethodRunner.runUnprotected(TestMethodRunner.java:81)
	at org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterRunner.java:34)
	at org.junit.internal.runners.TestMethodRunner.runMethod(TestMethodRunner.java:75)
	at org.junit.internal.runners.TestMethodRunner.run(TestMethodRunner.java:45)
	at org.junit.internal.runners.TestClassMethodsRunner.invokeTestMethod(TestClassMethodsRunner.java:71)
	at org.junit.internal.runners.TestClassMethodsRunner.run(TestClassMethodsRunner.java:35)
	at org.junit.internal.runners.TestClassRunner$1.runUnprotected(TestClassRunner.java:42)
	at org.junit.internal.runners.BeforeAndAfterRunner.runProtected(BeforeAndAfterRunner.java:34)
	at org.junit.internal.runners.TestClassRunner.run(TestClassRunner.java:52)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:38)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)
Caused by: net.sf.dozer.util.mapping.MappingException: java.lang.reflect.InvocationTargetException
	at net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor.getPropertyValue(GetterSetterPropertyDescriptor.java:80)
	at net.sf.dozer.util.mapping.fieldmap.FieldMap.getSrcFieldValue(FieldMap.java:103)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:272)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:255)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:185)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:159)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:103)
	at XXXX.translation.Translator.translate(Translator.java:65)
	... 21 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at net.sf.dozer.util.mapping.propertydescriptor.GetterSetterPropertyDescriptor.getPropertyValue(GetterSetterPropertyDescriptor.java:70)
	... 28 more
Caused by: org.apache.xmlbeans.impl.values.XmlValueNotSupportedException: Could not get a Java Date type from a Schema complex type
	at org.apache.xmlbeans.impl.values.XmlObjectBase.gDateValue(XmlObjectBase.java:1578)
	at org.apache.xmlbeans.impl.values.XmlObjectBase.getGDateValue(XmlObjectBase.java:1520)
	... 33 more</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1179284529</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Moving to feature request for interface - interface mapping support.</field>
</message>

<message>
		<field name="adddate">1178300820</field>
		<field name="user_name">jimtough</field>
		<field name="body">Logged In: YES 
user_id=1777524
Originator: YES

I have narrowed down the issue causing this.  I traced through the source and found that when mapping two interface implementors, the method ClassMapFinder.findInterfaceOrAbstractMapping() was always returning a 'null' instead of a ClassMap reference.  It appears to be having trouble identifying interfaces that the destintation object implements, and this failure causes the whole mapping run to fail.  I suspect the problem lies in this complex 'if' statement expression:

      if (destClass.isAssignableFrom(dest)
          &#38;&#38; (map.getSourceClass().getClassToMap().isAssignableFrom(sourceObj.getClass()) || map.getSourceClass()
              .getClassToMap().isInstance(sourceObj))
          // look for most specific mapping
          &#38;&#38; (newClass == null || newClass.isAssignableFrom(dest))
          &#38;&#38; (mapId == null || ((String) keys[i]).endsWith(mapId))) {
        newClassMap = map;
        newClass = dest;
      }

I have provided a workaround and some more details in this forums post:
http://sourceforge.net/forum/forum.php?thread_id=1728794&#38;forum_id=452530
</field>
</message>

<message>
		<field name="adddate">1178300765</field>
		<field name="user_name">jimtough</field>
		<field name="body">Logged In: YES 
user_id=1777524
Originator: YES

I have narrowed down the issue causing this.  I traced through the source and found that when mapping two interface implementors, the method ClassMapFinder.findInterfaceOrAbstractMapping() was always returning a 'null' instead of a ClassMap reference.  It appears to be having trouble identifying interfaces that the destintation object implements, and this failure causes the whole mapping run to fail.  I suspect the problem lies in this complex 'if' statement expression:

      if (destClass.isAssignableFrom(dest)
          &#38;&#38; (map.getSourceClass().getClassToMap().isAssignableFrom(sourceObj.getClass()) || map.getSourceClass()
              .getClassToMap().isInstance(sourceObj))
          // look for most specific mapping
          &#38;&#38; (newClass == null || newClass.isAssignableFrom(dest))
          &#38;&#38; (mapId == null || ((String) keys[i]).endsWith(mapId))) {
        newClassMap = map;
        newClass = dest;
      }

I have provided a workaround and some more details in this forums post:
http://sourceforge.net/forum/forum.php?thread_id=1728794&#38;forum_id=452530
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1179284529</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1179284529</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1179282839</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">map(Object,Class) vs map(Object,Object)</field>
		<field name="entrydate">1178300765</field>
		<field name="mod_by">jimtough</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1723592</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Does dozer.debug do anything?</field>
	<field name="open_date">1179850034</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">'m having the same issue. I have tried setting dozer.debug=false everywhere, and it never seems to have any effect. I did get the dozer.properties file to work, but the dozer.debug property is not being recognized. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1179857081</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: YES

Works as designed.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1179857081</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1179857081</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1737653</field>
	<field user_id="1791307" name="submitted_by">artur_zabronski</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Enum's directly map not working</field>
	<field name="open_date">1181894741</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I can't map Enum's directly, for example:
---
public class Test {
    
    public static enum TestEnum {
        FOO, BAR;
    }
    
    public static enum TestPrimeEnum {
        FOO, BAR;
    }

    public static void main(String[] args) {
        MapperIF mapper = new DozerBeanMapper();
        try {
            TestPrimeEnum prime =
                    (TestPrimeEnum) mapper.map(TestEnum.FOO, TestPrimeEnum.class);
            System.out.println(prime);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
    
}
---
this code causes:
---
Jun 15, 2007 9:00:32 AM net.sf.dozer.util.mapping.util.InitLogger log
INFO: Trying to find Dozer configuration file: dozer.properties
Jun 15, 2007 9:00:32 AM net.sf.dozer.util.mapping.util.InitLogger log
INFO: Dozer configuration file not found: dozer.properties.  Using defaults for all Dozer global properties.
Jun 15, 2007 9:00:32 AM net.sf.dozer.util.mapping.util.InitLogger log
INFO: Initializing Dozer.  Version: 3.3.1, Thread Name:main, Is this JDK 1.5.x?:true
Jun 15, 2007 9:00:32 AM net.sf.dozer.util.mapping.util.InitLogger log
INFO: Dozer JMX MBean [net.sf.dozer.util.mapping.jmx:type=DozerStatisticsController] auto registered with the Platform MBean Server
Jun 15, 2007 9:00:32 AM net.sf.dozer.util.mapping.util.InitLogger log
INFO: Dozer JMX MBean [net.sf.dozer.util.mapping.jmx:type=DozerAdminController] auto registered with the Platform MBean Server
Jun 15, 2007 9:00:32 AM net.sf.dozer.util.mapping.util.InitLogger log
INFO: Initializing a new instance of the dozer bean mapper.
net.sf.dozer.util.mapping.MappingException: java.lang.InstantiationException: dozertest.Main$TestPrimeEnum
        at net.sf.dozer.util.mapping.util.MappingUtils.throwMappingException(MappingUtils.java:87)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:139)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:112)
        at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:95)
        at dozertest.Main.main(Main.java:56)
Caused by: java.lang.InstantiationException: dozertest.Main$TestPrimeEnum
        at java.lang.Class.newInstance0(Class.java:340)
        at java.lang.Class.newInstance(Class.java:308)
        at net.sf.dozer.util.mapping.util.DestBeanCreator.createNewInstance(DestBeanCreator.java:128)
        at net.sf.dozer.util.mapping.util.DestBeanCreator.create(DestBeanCreator.java:76)
        at net.sf.dozer.util.mapping.util.DestBeanCreator.create(DestBeanCreator.java:50)
        at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:134)
        ... 3 more
---
I'm using JDK1.6.0.01.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1183939795</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

We don't currently support raw types at the top level.  Dozer is aimed at mapping custom data objects at the top most level.  But if your ENUM was a field within the top level objects being mapped, the enums would be mapped w/o any issue</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1183939795</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1183939795</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1183939795</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Enum's diretcly map not working</field>
		<field name="entrydate">1181894765</field>
		<field name="mod_by">artur_zabronski</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1723361</field>
	<field user_id="1618505" name="submitted_by">beemsoft</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Dozer 3.4 breaks on WebSphere 5.1 JRE</field>
	<field name="open_date">1179833054</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,

I get the following stacktrace with Dozer 3.4, running with WebSphere 5.1 JRE. I don't get this stacktrace when using Dozer 3.3.1 or running with the Sun JRE 1.5.

Regards,
Hans Beemsterboer.


net.sf.dozer.util.mapping.MappingException: java.lang.InstantiationException: nl.achmea.integratie.common.achmea_headers.ResponseHeaderType
	at net.sf.dozer.util.mapping.util.MappingUtils.throwMappingException(MappingUtils.java:87)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:311)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:237)
	at net.sf.dozer.util.mapping.MappingProcessor.processSuperTypeMapping(MappingProcessor.java:1090)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:227)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:137)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:112)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:95)
	at nl.achmea.olv.internal.dao.impl.ClientDaoImpl.savePremie(ClientDaoImpl.java:119)
	at nl.achmea.olv.services.internal.TestClientDao.testSavePremie(TestClientDao.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)
	at java.lang.reflect.Method.invoke(Method.java:391)
	at junit.framework.TestCase.runTest(TestCase.java:154)
	at junit.framework.TestCase.runBare(TestCase.java:127)
	at junit.framework.TestResult$1.protect(TestResult.java:106)
	at junit.framework.TestResult.runProtected(TestResult.java:124)
	at junit.framework.TestResult.run(TestResult.java:109)
	at junit.framework.TestCase.run(TestCase.java:118)
	at junit.framework.TestSuite.runTest(TestSuite.java:208)
	at junit.framework.TestSuite.run(TestSuite.java:203)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:436)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:311)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)
Caused by: java.lang.InstantiationException: nl.achmea.integratie.common.achmea_headers.ResponseHeaderType
	at java.lang.Class.newInstance3(Class.java:346)
	at java.lang.Class.newInstance(Class.java:305)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.createNewInstance(DestBeanCreator.java:128)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.create(DestBeanCreator.java:73)
	at net.sf.dozer.util.mapping.MappingProcessor.mapCustomObject(MappingProcessor.java:504)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:455)
	at net.sf.dozer.util.mapping.MappingProcessor.mapOrRecurseObject(MappingProcessor.java:366)
	at net.sf.dozer.util.mapping.MappingProcessor.mapFromFieldMap(MappingProcessor.java:344)
	at net.sf.dozer.util.mapping.MappingProcessor.mapField(MappingProcessor.java:299)
	... 24 more</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1180022637</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Been doing this too long to panic :) Thanks for the update!</field>
</message>

<message>
		<field name="adddate">1180003207</field>
		<field name="user_name">beemsoft</field>
		<field name="body">Logged In: YES 
user_id=1618505
Originator: YES

The problem has disappeared after some code changes.
I have changed the dozerBeanMapping.xml and the way Java objects are mapped to
JAXB beans. I'm now using Dozer 3.4 without problems.

Sorry to have caused any panic.
Hans.</field>
</message>

<message>
		<field name="adddate">1179935771</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Could you provide a simple test case so I can step through this on 3.3 and 3.4?

If so, we can fix this issue.

Thanks for looking.

Franz</field>
</message>

<message>
		<field name="adddate">1179863294</field>
		<field name="user_name">beemsoft</field>
		<field name="body">Logged In: YES 
user_id=1618505
Originator: YES

I don't think it's the same problem. We have been using Dozer on WebSphere 5.1 since version 3.0.
Only after an upgrade to 3.4, the stacktrace occurred. Maybe it has something to do with the use of
JAXB beans or a change in DestBeanCreator.</field>
</message>

<message>
		<field name="adddate">1179849818</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Could this be the same problem?

https://sourceforge.net/forum/message.php?msg_id=4291093</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1180022637</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1180022637</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1179849818</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1781665</field>
	<field user_id="1875368" name="submitted_by">jrpinna</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Primitive conversion with deep mapping</field>
	<field name="open_date">1188036770</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">ObjectA{
  String stringProp;
}

ObjectB{
 ObjectC c;
}

ObjectC{
 Long longProp;
}

------

Mapping.xml

&#60;class-a&#62;ObjectA&#60;/class-a&#62;
&#60;class-b&#62;ObjectB&#60;/class-b&#62;

&#60;field&#62;
  &#60;a&#62;stringProp&#60;/a&#62;
  &#60;b&#62;c.longProp&#60;/b&#62;
  &#60;b-hint&#62;ObjectC&#60;/b&#62;
&#60;field&#62;

------

With not deep mapping it works nice but with a deep mapping I've got the following errors on fields with a conversion 

net.sf.dozer.util.mapping.MappingException: java.lang.IllegalArgumentException: argument type mismatch

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1188965280</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Moving this to deleted pending additional info.  We can reopen if needed</field>
</message>

<message>
		<field name="adddate">1188181391</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

jrpinna,

I think the issue may be that you are specifying a hint.  You do not need to specify a hint for your deep mapping use case and I would expect it to cause isssues if you did.  Can you try without the hint and let me know?</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1188965280</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1188965280</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1779477</field>
	<field user_id="127475" name="submitted_by">geraldloeffler</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">mapping generic classes</field>
	<field name="open_date">1187793430</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">There are serious issues surrounding the mapping of generic classes (and I mean generic classes in general, not just collection classes) with Dozer:

1. It is not possible to map properties of a class/interface when the getters and setters work with type parameters. e.g. type IntEntity below:

---------------
public abstract class Entity&#60;I&#62; {
    private I id ;
    public I getId() {return id;}
    public void setId(final I id) {this.id = id;}
}

public class IntEntity extends Entity&#60;Integer&#62; {}
---------------

It should be possible to map IntEntity with Dozer because the type parameter I is statically bound to Integer. Doing reflection (in a clever way) on IntEntity should reveal that the type of property &#34;i&#34; is in fact Integer. Dozer does not do that because it relies on jakarta commons beanutil which works on the erasure of a generic type and thus just reports type Object for property &#34;i&#34;.

2. I thought to resolve the above issue by re-defining the getters and setters as follows:

---------------
public class IntEntity extends Entity&#60;Integer&#62; {
    public Integer getId() {return super.getId();}
    public void setId(Integer id) {super.setId(id);}
}
---------------

However, the behaviour I see seems to suggest that this sometimes works and sometimes doesn't. I think I can trace this to ReflectionUtils.findPropertyDescriptor() which takes *the first* PropertyDescriptor that matches the name of a field. Thus, depending on the order of methods in the byte code Dozer will think that property &#34;i&#34; has type Integer or Object (Object being the result of erasure on IntEntity).

Thus I think that ReflectionUtils.findPropertyDescriptor() (and all similar code in Dozer) should be urgently changed to select the PropertyDescriptor for the property with the correct name *and the most specific type* (Integer, rather than Object, in the above example). This should solve issue 2 pending a full solution to the broader issue 1.

(As an aside, using equalsIgnoreCase() in eflectionUtils.findPropertyDescriptor() is strictly speaking not correct.)

  thanks,
  gerald

http://www.gerald-loeffler.net
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1188965416</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Moving to deleted based on latest comments from geraldloeffler.  Gerald, Thanks for the thorough research on this one and providing the details.</field>
</message>

<message>
		<field name="adddate">1187848683</field>
		<field name="user_name">geraldloeffler</field>
		<field name="body">Logged In: YES 
user_id=127475
Originator: YES

I've dug a bit deeper: it's true that ReflectionUtils.findPropertyDescriptor() uses the first PropertyDescriptor that matches the field name, but as I said before it uses Commons Beanutils to find the PropertyDescriptors for a class. It turns out that Commons Beanutils delegates this to java.beans.BeanInfo.getPropertyDescriptors() - and there is a bug in this method:

http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6528714

That bug means that - unbelievably - BeanInfo.getPropertyDescriptors() will return a random PropertyDescriptor for any property whose type is a generic. So for my example above the type of the &#34;id&#34; property would fluctuate between Object and Integer. Unbelievable. Also, my &#34;work-around&#34; under item 2. above does not improve things at all.

So the only solution I can see is not to use generic types for properties :-(

  thanks,
  gerald

http://www.gerald-loeffler.net
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1188965416</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1188965416</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1790621</field>
	<field user_id="1885834" name="submitted_by">sguillory6</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Custom converter called on null source field</field>
	<field name="open_date">1189249478</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I am not sure if this is a bug or not, but it bit me and I had to modify my custom converter to work around it. Here is the issue:

1) I have a field in the source class that has a custom converter

2) The field may be null, so I set map-null to false

3) My mapping would fail because the custom converter was called with a null source object reference

My expectation was that if map-null was false and the source reference was null, the mapping was bypassed, including not calling the custom converter.

I can see where this might not be a bug, since the custom converter could map a default value when the source is null.

I worked around it by modifying my custom converter to return null when the source reference was null. Things worked as expected then, with the setter on the destination object not being called when the source field was null.

Thought I'd bring it to your attention and let you guys decide.

Stan
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1189484897</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

duplicate</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1189484897</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1189484897</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1189484897</field>
		<field name="mod_by">mhtierney</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1803761</field>
	<field user_id="550744" name="submitted_by">fgarsombke</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Use package name as part of classmap key</field>
	<field name="open_date">1190917416</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">See below for my configuration. Dozer thinks it is a duplicate class mapping because it is only looking to the class name and not taking into account the package name. Can I do something about this to avoid this? 
 
 
 
 
&#60;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&#62; 
&#60;!DOCTYPE mappings PUBLIC &#34;-//DOZER//DTD MAPPINGS//EN&#34; 
&#34;http://dozer.sourceforge.net/dtd/dozerbeanmapping.dtd&#34;&#62; 
&#60;mappings&#62; 
&#60;mapping&#62; 
&#60;class-a&#62;org.fao.fenix.domain.perspective.Project&#60;/class-a&#62; 
&#60;class-b&#62; 
org.fao.fenix.domain4.client.perspective.Project 
&#60;/class-b&#62; 
&#60;field&#62; 
&#60;a&#62;mapViewList&#60;/a&#62; 
&#60;b&#62;mapViewList&#60;/b&#62; 
&#60;b-hint&#62; 
org.fao.fenix.domain4.client.perspective.MapView 
&#60;/b-hint&#62; 
&#60;/field&#62; 
&#60;field&#62; 
&#60;a&#62;tableViewList&#60;/a&#62; 
&#60;b&#62;tableViewList&#60;/b&#62; 
&#60;b-hint&#62; 
org.fao.fenix.domain4.client.perspective.TableView 
&#60;/b-hint&#62; 
&#60;/field&#62; 
&#60;field&#62; 
&#60;a&#62;chartViewList&#60;/a&#62; 
&#60;b&#62;chartViewList&#60;/b&#62; 
&#60;b-hint&#62; 
org.fao.fenix.domain4.client.perspective.ChartView 
&#60;/b-hint&#62; 
&#60;/field&#62; 
&#60;field-exclude&#62; 
&#60;a&#62;class&#60;/a&#62; 
&#60;b&#62;class&#60;/b&#62; 
&#60;/field-exclude&#62; 
&#60;/mapping&#62; 
&#60;mapping&#62; 
&#60;class-a&#62; 
org.fao.fenix.domain4.client.perspective.Project 
&#60;/class-a&#62; 
&#60;class-b&#62; 
org.fao.fenix.domain.perspective.Project 
&#60;/class-b&#62; 
&#60;field&#62; 
&#60;a&#62;mapViewList&#60;/a&#62; 
&#60;b&#62;mapViewList&#60;/b&#62; 
&#60;b-hint&#62;org.fao.fenix.domain.perspective.MapView&#60;/b-hint&#62; 
&#60;/field&#62; 
&#60;field&#62; 
&#60;a&#62;tableViewList&#60;/a&#62; 
&#60;b&#62;tableViewList&#60;/b&#62; 
&#60;b-hint&#62;org.fao.fenix.domain.perspective.TableView&#60;/b-hint&#62; 
&#60;/field&#62; 
&#60;field&#62; 
&#60;a&#62;chartViewList&#60;/a&#62; 
&#60;b&#62;chartViewList&#60;/b&#62; 
&#60;b-hint&#62;org.fao.fenix.domain.perspective.ChartView&#60;/b-hint&#62; 
&#60;/field&#62; 
&#60;field-exclude&#62; 
&#60;a&#62;class&#60;/a&#62; 
&#60;b&#62;class&#60;/b&#62; 
&#60;/field-exclude&#62; 
&#60;/mapping&#62; 
&#60;/mappings&#62; 

This is the code that needs to change:


  public static String createKey(Class srcClass, Class destClass, String mapId) {
    StringBuffer result = new StringBuffer(150);
    result.append(&#34;SOURCE CLASS--&#62;&#34;);
    result.append(srcClass.getName());
    result.append(&#34; DEST CLASS--&#62;&#34;);
    result.append(destClass.getName());
    if (StringUtils.isNotEmpty(mapId)) {
      result.append(&#34; MAP ID--&#62;&#34;);
      result.append(mapId);
    }
    return result.toString();
  }</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1190948975</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1190948975</field>
		<field name="mod_by">fgarsombke</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2588116</field>
	<field user_id="2397030" name="submitted_by">madhusmita_guru</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Mapping Issue</field>
	<field name="open_date">1234336812</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">Dozer throws mapping exception, when the destination class is initialized using the constructor with field names and the destination class does not contain the Default constructor.
See the attached code for more details.

Ex: SrcA srca = new SrcA(&#34;IBM&#34;, &#34;DozerHelper&#34;, 100);
			DozerUtil myUtil = new DozerUtil();
			Object destObj = myUtil.transform(srca, SrcABO.class);

Here Class SrcABO does not have a default constructor declared.
rather a constructor with field names is declared.

when we execute the tarnsformation. It throws exception as this
INFO: Using the following xml files to load custom mappings for the bean mapper instance: [SampleDozerMapping.xml]
Feb 11, 2009 12:43:06 PM net.sf.dozer.util.mapping.util.InitLogger log
INFO: Trying to find xml mapping file: SampleDozerMapping.xml
Feb 11, 2009 12:43:06 PM net.sf.dozer.util.mapping.util.InitLogger log
INFO: Using URL [file:/C:/RCMWS/TestDozer/SampleDozerMapping.xml] to load custom xml mappings
Feb 11, 2009 12:43:06 PM net.sf.dozer.util.mapping.util.InitLogger log
INFO: Successfully loaded custom xml mappings from URL: [file:/C:/RCMWS/TestDozer/SampleDozerMapping.xml]
Feb 11, 2009 12:43:06 PM net.sf.dozer.util.mapping.util.DestBeanCreator create
SEVERE: Error trying to use XMLBeanFactory.
net.sf.dozer.util.mapping.MappingException: Factory class of Bean of type src.com.ibm.sample.bo.SrcABO not found.
	at net.sf.dozer.util.mapping.util.MappingUtils.throwMappingException(MappingUtils.java:96)
	at net.sf.dozer.util.mapping.factory.XMLBeanFactory.createBean(XMLBeanFactory.java:54)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.createFromFactory(DestBeanCreator.java:127)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.create(DestBeanCreator.java:90)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:131)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:110)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:94)
	at src.com.ibm.utils.DozerUtil.transform(DozerUtil.java:44)
	at src.com.ibm.impl.BiDirnTransform.main(BiDirnTransform.java:18)
net.sf.dozer.util.mapping.MappingException: java.lang.NoSuchMethodException: src.com.ibm.sample.bo.SrcABO.&#60;init&#62;()
	at net.sf.dozer.util.mapping.util.MappingUtils.throwMappingException(MappingUtils.java:91)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.newInstance(DestBeanCreator.java:142)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.create(DestBeanCreator.java:85)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:131)
	at net.sf.dozer.util.mapping.MappingProcessor.map(MappingProcessor.java:110)
	at net.sf.dozer.util.mapping.DozerBeanMapper.map(DozerBeanMapper.java:94)
	at src.com.ibm.utils.DozerUtil.transform(DozerUtil.java:44)
	at src.com.ibm.impl.BiDirnTransform.main(BiDirnTransform.java:18)
Caused by: java.lang.NoSuchMethodException: src.com.ibm.sample.bo.SrcABO.&#60;init&#62;()
	at java.lang.Class.throwNoSuchMethodException(Class.java:274)
	at java.lang.Class.getDeclaredConstructor(Class.java:415)
	at net.sf.dozer.util.mapping.util.DestBeanCreator.newInstance(DestBeanCreator.java:138)
	... 6 more

The same code works absolutely fine if the destination class contains a default constructor.
			

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234926176</field>
		<field name="user_name">mhtierney</field>
		<field name="body">The destination class needs to contain a default constructor or you may be able to use a custom bean factory which could construct with params. Otherwise dozer wouldnt know which fields to use when constructing.  Let us know if this works for you.  Thanks.

http://dozer.sourceforge.net/documentation/custombeanfactories.html</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234926176</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234926176</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234926176</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1234926176</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">312979: TestDozerPI.zip</field>
		<field name="entrydate">1234336813</field>
		<field name="mod_by">madhusmita_guru</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2793210</field>
	<field user_id="2500198" name="submitted_by">titan44</field>
	<field user_id="2308193" name="assigned_to">cchou</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">out of memory error</field>
	<field name="open_date">1242631021</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">hi,
   Since i created one custom converter, i didnt add any mapping for this set to vector conversion in my mapping file .Is it necessary that we have to have mapping for this?
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1242631359</field>
		<field name="mod_by">titan44</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1242631359</field>
		<field name="mod_by">titan44</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1242631359</field>
		<field name="mod_by">titan44</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1242631254</field>
		<field name="mod_by">titan44</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2546276</field>
	<field user_id="531357" name="submitted_by">edbras</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">1</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Enhancement of the Custom converter</field>
	<field name="open_date">1233254948</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Please enchance the customer convert with:
- Conditional usage indication. 
Add an accept method that indicates if the converter is applicable, such that runtime conditions can be used to indicate his usage instead of only configuration indication through for example a field tag. So if the accept method returns false, dozer should just pretend if the customer doesn't exists and perform a normal mapping without the converter.

- Specify the dozer mapper or mapper processor as argument to the custom converter such that it can be used to perform recursive mapping of nested properties/objects.

Regards,
Ed Bras</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1233261606</field>
		<field name="user_name">edbras</field>
		<field name="body">SOrry for the mistake, I accidently posted this as a bug :(... but noticed that I had to post it in the feature request tracker...

Looks that I am a bit sleep today :(...
Anyway: could you please remove this issue. I already posted a duplicate in the feature request tracker but can't seem to remove this issue.

Sorry for the mess,
Ed </field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234926388</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234926388</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234926388</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1234926388</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">888640</field>
		<field name="entrydate">1233261607</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1233261607</field>
		<field name="mod_by">edbras</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">1155338</field>
		<field name="entrydate">1233261607</field>
		<field name="mod_by">edbras</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2605693</field>
	<field user_id="2378311" name="submitted_by">amichalec</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">3</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Test artifacts packaged to dist JAR</field>
	<field name="open_date">1234793437</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.0</field>
	<field name="details">Dozer distribution JAR contains junit classes, dependant value object classes etc. -- w/o them JAR would be 3 times smaller.

cheers, andy.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234924279</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Yep, this has been fixed in 5.0(soon to be released).  Thanks.</field>
</message>

<message>
		<field name="adddate">1234793523</field>
		<field name="user_name">amichalec</field>
		<field name="body">Haven't noticed it's already reported as 2587665</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234793523</field>
		<field name="mod_by">amichalec</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234793523</field>
		<field name="mod_by">amichalec</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1234793523</field>
		<field name="mod_by">amichalec</field>
</history>

<history>
		<field name="field_name">priority</field>
		<field name="old_value">5</field>
		<field name="entrydate">1234793454</field>
		<field name="mod_by">amichalec</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2889669</field>
	<field user_id="2682666" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">Invalid</field>
	<field name="summary">Wildcard false mixed with inheritance</field>
	<field name="open_date">1256932532</field>
	<field name="artifact_type">Bugs</field>
	<field name="category">Mapping Issue</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Wildcard false fails working with hierarchy. See JUnit for Example</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1256934037</field>
		<field name="user_name"></field>
		<field name="body">Dozer does't match the pair of classes in the config file. Adding 

&#60;mapping wildcard=&#34;false&#34;&#62;
		&#60;class-a&#62;ar.com.test.GranCuenta&#60;/class-a&#62;
		&#60;class-b&#62;ar.com.test.CuentaDto&#60;/class-b&#62;
		&#60;field&#62;
		&#60;a&#62;code&#60;/a&#62;
		&#60;b&#62;code&#60;/b&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;

works fine.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1256934038</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1256934038</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1256934038</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1256934038</field>
		<field name="mod_by"></field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">348901: DozerTestHierarchy-Exclude.jar</field>
		<field name="entrydate">1256932532</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3579124</field>
	<field user_id="2641264" name="submitted_by">lilianvalero06</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Support of unmodifiable collection</field>
	<field name="open_date">1350911472</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">Today, if your destination getter returns unmodifiable collections (like emptyList; ...) you cannot use dozer to map them...

I propose to change MappingProcessor.java in addOrUpdateToList method this little piece of code to solve the problem.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">455276: MappingProcessor.java</field>
		<field name="entrydate">1350911481</field>
		<field name="mod_by">lilianvalero06</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3415759</field>
	<field user_id="2595901" name="submitted_by">adobjanschi</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Support for top-level Collections</field>
	<field name="open_date">1317370970</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">This small patch addresses the need for top-level Collection mapping. Right now, org.dozer.Mapper cannot map a Collection&#60;?&#62;. I have created a new interface (in order not to change org.dozer.Mapper) called CollectionMapper. The default implementation for this is based on DozerBeanMapper, and the additional method just iterates through the source collection and maps each object</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">424904: dozer-collection-patch.tar.gz</field>
		<field name="entrydate">1317370972</field>
		<field name="mod_by">adobjanschi</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3414674</field>
	<field user_id="1159558" name="submitted_by">sliverc</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Patch: Invalid resolving of type with map-set-method</field>
	<field name="open_date">1317153767</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">When only a map-set-method is configured resolving of the destination type is invalid. The sample below will have a destination of of String but it should be number. This leads to an exception.

Added a patch against trunk with a unit test reproducing the issue + the fix itself.

Sample:
&#60;pre&#62;
public void putNumber(String key, BigDecimal number) {

&#60;field&#62;
  &#60;a map-set-method=&#34;putNumber&#34; key=&#34;numberA&#34;&#62;this&#60;/a&#62;
  &#60;b&#62;field1&#60;/b&#62;
&#60;/field&#62;
&#60;/pre&#62;</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">424646: resolve-property-type-with-map-set-method.patch</field>
		<field name="entrydate">1317153769</field>
		<field name="mod_by">sliverc</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3147827</field>
	<field user_id="3180561" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Enhance support for collection properties without setter</field>
	<field name="open_date">1293659315</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v.5.3.0</field>
	<field name="details">The fix for 2812002 is not complete. If you have a JavaBean such as:

public class MyBean {
  private List&#60;String&#62; list = new ArrayList&#60;String&#62;();

  public List&#60;String&#62; getList() {
    return list;
  }
}

The mapping for the list property won't work unless you explicitly add the field name &#34;list&#34; to the mappings file. It also produces a warning complaining that the write method is missing. The attached patch fixes the problem.
https://sourceforge.net/tracker/index.php?func=detail&#38;aid=2812002&#38;group_id=133517&#38;atid=727371</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1300990607</field>
		<field name="user_name">camrdale</field>
		<field name="body">What is the progress on this issue? I recently encountered the problem with dozer 5.3.1. I would really like to see it fixed.

By the way, the workaround is to add a &#60;field&#62; entry for your collection fields, even if they have the same name. You also have to add hints for the collection types, as it seems dozer can't determine the collection type without the setter, and will otherwise add objects of the same type as in the source class to the destination collection. (Resulting in a JAXBException: SourceClass nor any of its super class is known to this context, if you are mapping to a JAXB object.)</field>
</message>

<message>
		<field name="adddate">1294044789</field>
		<field name="user_name">buzdin</field>
		<field name="body">thanks for the patch. I will take a look at it and if everything is ok it will make it in 5.3.2 in January.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1294044789</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">397149: dozer.patch</field>
		<field name="entrydate">1293659316</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3058022</field>
	<field user_id="3023961" name="submitted_by">jegese</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Unit test for bug:3008059 (iterate mapping multiple hint)</field>
	<field name="open_date">1283412831</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">None</field>
	<field name="details">This is a unit test for combining &#34;iterate&#34; feature with other features (cumulative, remove orphan, multiple hints-polymorphism).</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283413020</field>
		<field name="mod_by">jegese</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283413020</field>
		<field name="mod_by">jegese</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">385338: collection-mapping-iterate-test.zip</field>
		<field name="entrydate">1283412832</field>
		<field name="mod_by">jegese</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2992285</field>
	<field user_id="1526261" name="submitted_by">jeham</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Support for making fields accessible</field>
	<field name="open_date">1272282864</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v.5.3.0</field>
	<field name="details">Reducing the need for excplicit XML configuration (is-accessible) for field mapping in immutable classes by allowing a mapping mode to be set on a global level.

If the attribute 'mode' is set to 'field' for a mapping definition, all fields in the specified classes will be treated as 'accessible' thus using filed based- instead of a setter-based property mapping.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1277815961</field>
		<field name="user_name">buzdin</field>
		<field name="body">That is very interesting. Will take a look for the next release. 
Thanks!</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1277815961</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">942315</field>
		<field name="entrydate">1277815961</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">371857: configurable-mapping-mode.patch</field>
		<field name="entrydate">1272282865</field>
		<field name="mod_by">jeham</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1898029</field>
	<field user_id="2014393" name="submitted_by">pmagli</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">XmlBeans and List/Set &#60;-&#62; primitive array mapping</field>
	<field name="open_date">1203526583</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">This patch fixes the issues described in RequestID #1897962 (see http://sourceforge.net/tracker/index.php?func=detail&#38;aid=1897962&#38;group_id=133517&#38;atid=727368), opened by me today, and consists in two small changes in class net.sf.dozer.mapping.MappingProcessor (Dozer version is 4.2)

*** ISSUE #1 (DTO -&#62; XmlBeans)
The issue was solved with a very small fix in method addOrUpdateToList (line 721):

private List addOrUpdateToList(Object srcObj, FieldMap fieldMap, Collection srcCollectionValue, Object destObj, Class destEntryType) {
    
    ...

    if (field == null) {
      result = new ArrayList(srcCollectionValue.size());
    } else {
      if (CollectionUtils.isList(field.getClass())) {
        result = (List) field;
        // START Bug-fixing, Bug Request #1897962
      } else if (CollectionUtils.isArray(field.getClass()) &#38;&#38; !CollectionUtils.isPrimitiveArray(field.getClass())) {// must be array
    	// END Bug-fixing, Bug Request #1897962
        result = new ArrayList(Arrays.asList((Object[]) field));
      } else { // assume it is neither - safest way is to create new
        // List
        result = new ArrayList(srcCollectionValue.size());
      }
    }

    ...
}

By adding the check !!CollectionUtils.isPrimitiveArray(field.getClass()), initialization of &#34;result&#34; falls back to the last &#34;else&#34; branch, avoiding the ClassCastException (caused by Arrays.asList((Object[]) field)).


*** ISSUE #2 (XmlBeans -&#62; DTO)
The issue was solved with a small change in method mapCollection (line 510 and following):

private Object mapCollection(Object srcObj, Object srcCollectionValue, FieldMap fieldMap, Object destObj) {

    ...

    // Array to Set
    else if (CollectionUtils.isArray(srcFieldType) &#38;&#38; CollectionUtils.isSet(destCollectionType)) {
      // START Bug-fixing, Bug Request #1897962
      Collection srcCollection = null;
      if (CollectionUtils.isPrimitiveArray(srcCollectionValue.getClass())) {
    	  srcCollection = CollectionUtils.convertPrimitiveArrayToList(srcCollectionValue);
      } else {
    	  srcCollection = Arrays.asList((Object[]) srcCollectionValue);
      }
      result = addToSet(srcObj, fieldMap, srcCollection, destObj);
      // END Bug-fixing, Bug Request #1897962
    }

    ...
}

The fix is really simple: if the source array is a primitive array, I initialize srcCollection using CollectionUtils.convertPrimitiveArrayToList, otherwise I use Arrays.asList. Finally, I call addToSet to initialize result.

The attached zip file DozerPatch.zip contains an Eclipse project with the JUnit tests for this issues/patch. 
Tests will fail
By default, tests will fail (because the project uses MappingProcessor from dozer-4.2.jar, included in test/lib). To make them pass, simply refactor class net.sf.dozer.util.mapping.MappingProcessorPatched (under src) to net.sf.dozer.util.mapping.MappingProcessor and re-run the tests.

Hope this helps,

Pierangelo Magli
HP Italy Innovation Center</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1203530716</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO


thanks for the patch. we like patches :). i will apply this for the next release.</field>
</message>

<message>
		<field name="adddate">1203527238</field>
		<field name="user_name">pmagli</field>
		<field name="body">Logged In: YES 
user_id=2014393
Originator: YES

Ok, it seems I finally managed to upload the DozerPatch.zip file. It seems that the file was too big, so I removed all the external libraries from test/lib.
In order to make the project work, you will have to provide by yourself the following dependencies, required at runtime:

- XmlBeans 2.2.0
- Commons Beanutils
- Commons Collections
- Commons Logging
- Commons Lang
- Dozer 4.2</field>
</message>

<message>
		<field name="adddate">1203527068</field>
		<field name="user_name">pmagli</field>
		<field name="body">Logged In: YES 
user_id=2014393
Originator: YES

File Added: DozerPatch.zip</field>
</message>

<message>
		<field name="adddate">1203526989</field>
		<field name="user_name">pmagli</field>
		<field name="body">Logged In: YES 
user_id=2014393
Originator: YES

Sorry, I forgot to attach the DozerPatch.zip file before submitting the patch.
Now I'm trying to attach it, but I get a &#34;Error - Choose a Group&#34; error message. What's the problem?</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1228673972</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1203530716</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">267231: DozerPatch.zip</field>
		<field name="entrydate">1203527068</field>
		<field name="mod_by">pmagli</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1964363</field>
	<field user_id="1607595" name="submitted_by">haschibaschi</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">inheritance problems with custom-converters on fields</field>
	<field name="open_date">1210838964</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">This patch fixes bug [ 1953410 ] inheritance problems with custom-converters on fields.

This patch relies on version 3.4

All the documentation should be in the sourcecode. If there are obscurities contact me.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1229397858</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Added test case to the codebase.  The patch resolved the test case, but broke other regression tests.  Needs more investigation</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">277865: MappingProcessor.patch</field>
		<field name="entrydate">1210838965</field>
		<field name="mod_by">haschibaschi</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1797776</field>
	<field user_id="1893277" name="submitted_by">yonizad</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">update initialised array from index 0</field>
	<field name="open_date">1190200015</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Currently Dozer supports two types of mapping between collections: cumulative and non-cumulative.
If you are mapping to a Class which has already been initialized, dozer will either 'add' or 'update' objects to your List. If your List or Set already has objects in it dozer checks the mapped List, Set, or Array and calls the contains() method to determine if it needs to 'add' or 'update'. This is determined using the relationship-type attribute on the field tag. The default is 'cumulative'.
We sometimes initialize the target object to hold an array of size 10 (for example). The object array is filled with default values (not nulls). When mapping the source array which has only 5 (for example)elements (not nulls) to the target array we expect to have in the target array 10 elements; 5 from the original array and the last 5 are the last five elements of the original, filled with default values (in this specific order).
We need a third option for list mapping &#34;by-index&#34; which will update according to order of elements (according to List definition). Meaning, position 0 will map to position 0, etc (perform mapping between the elements of the same index).

Included in the attached file are:
1)dozer files:
 a)the dozerbeanmapping.dtd (added &#34;by-index&#34;)
 b)2 source files (MappingProcessor.java ; MapperConstants.java). Lines which are suffixed with &#34;//yoni&#34; were added by myself
2)test files:
 a)indexedMapper.xml - the mapping file
 b)Indexed.java - the main class. In general it maps between types of objects (ArrayList to array. array to array etc.). The sub-objects residing in the main-objects can be a String or a complicated object. It is possible to determine what the source and targets are by setting the variable &#34;SOURCE_DESTINATION_TYPE&#34; accordingly.
 c)other java sources for the test

The dozer version we are using is 3.3.1
Thanks
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1229402993</field>
		<field name="user_name">mhtierney</field>
		<field name="body">The indexed_new.jar appeared to be missing files.  i.e)  MappingProcessor, etc</field>
</message>

<message>
		<field name="adddate">1217557202</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 14 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1216284563</field>
		<field name="user_name">yonizad</field>
		<field name="body">Logged In: YES 
user_id=1893277
Originator: YES

Please see followup from 2008-04-02. Thanks</field>
</message>

<message>
		<field name="adddate">1208398832</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 14 days (the time period specified by
the administrator of this Tracker).</field>
</message>

<message>
		<field name="adddate">1207144973</field>
		<field name="user_name">yonizad</field>
		<field name="body">Logged In: YES 
user_id=1893277
Originator: YES

The files are now compatible with version 4.2.
Because I see that the dozerbeanmapping.dtd does not have the hard-coded values for 'relationship-type', the file was not modified.
As before, lines which have the comment //yoni were added/modified.
Thanks
File Added: indexed_new.zip</field>
</message>

<message>
		<field name="adddate">1197760440</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

I was not able to apply this patch because it was applied to an old code base.  A lot has changed since 3.3.1, so I was not able to translate it to the current code base.  If you wanted to apply it to the 4.1 code base, we could take a look.  Thanks.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1217837367</field>
		<field name="entrydate">1218107918</field>
		<field name="mod_by">yonizad</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1218107918</field>
		<field name="mod_by">yonizad</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1217557202</field>
		<field name="entrydate">1217837367</field>
		<field name="mod_by">yonizad</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1217837367</field>
		<field name="mod_by">yonizad</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1217557202</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1216284563</field>
		<field name="entrydate">1217557202</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1216284563</field>
		<field name="mod_by">yonizad</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1216284563</field>
		<field name="mod_by">yonizad</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">2</field>
		<field name="entrydate">1208408297</field>
		<field name="mod_by">yonizad</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1208398832</field>
		<field name="entrydate">1208408297</field>
		<field name="mod_by">yonizad</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1207145079</field>
		<field name="entrydate">1208398832</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1208398832</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1197760440</field>
		<field name="entrydate">1207145079</field>
		<field name="mod_by">yonizad</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">3</field>
		<field name="entrydate">1207145079</field>
		<field name="mod_by">yonizad</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">272888: indexed_new.zip</field>
		<field name="entrydate">1207144973</field>
		<field name="mod_by">yonizad</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1197760440</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1197760440</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1197760440</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">246282: indexed.zip</field>
		<field name="entrydate">1190200016</field>
		<field name="mod_by">yonizad</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2064346</field>
	<field user_id="2176658" name="submitted_by">mickaelmorier</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Index mapping in destination field</field>
	<field name="open_date">1219311314</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">When you have a mapping like 
&#60;mapping&#62;
  &#60;class-a&#62;vo.SourceObject&#60;/class-a&#62;
  &#60;class-b&#62;vo.DestObject&#60;/class-b&#62;
    &#60;field&#62;
      &#60;a&#62;value&#60;/a&#62;
      &#60;b&#62;list[0].value&#60;/b&#62;
    &#60;/field&#62;
&#60;/mapping&#62;

A NullPointerException is generated because list[0] is not instantiate by dozer.

The problem is GetterSetterPropertyDescriptor class verify if the value of the current object is null before creating it.

When object is an array or a collection element, object tested is a collection so it does not null and element is not created.

The patch I created, modify test condition in GetterSetterPropertyDescriptor class. It verify if object is null or if element specified it is null in case of an array or a collection.

The patch is based on version 4.2.1.

Regards,
Mickael</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1228597104</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Mickael,

Thanks for submitting the patch.  I am going to try and get this in the 4.4 release.  Can you submit a simple as possible unit test that reproduces the issue.  That way we can add it to our regression test suite and be able to confirm that the patch resolves your issue?  Thanks</field>
</message>

<message>
		<field name="adddate">1219330789</field>
		<field name="user_name">mickaelmorier</field>
		<field name="body">Logged In: YES 
user_id=2176658
Originator: YES

I forgot to precise that this problem appears for JAXB objects where in all getters of list, list are instantiated if it is null.</field>
</message>

<message>
		<field name="adddate">1219312459</field>
		<field name="user_name">mickaelmorier</field>
		<field name="body">Logged In: YES 
user_id=2176658
Originator: YES

File Added: dozer-patch-index-destination.patch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1222782610</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">289713: dozer-patch-index-destination.patch</field>
		<field name="entrydate">1219312459</field>
		<field name="mod_by">mickaelmorier</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">289708: </field>
		<field name="entrydate">1219312459</field>
		<field name="mod_by">mickaelmorier</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">289708: dozer-patch-index-destination.patch</field>
		<field name="entrydate">1219311315</field>
		<field name="mod_by">mickaelmorier</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2794873</field>
	<field user_id="2514352" name="submitted_by">adonia</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">list with a hierarchy - hint problem</field>
	<field name="open_date">1242919525</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I tied to map a list with a hierarchy and I find 2 problems.

	&#60;mapping&#62;
		&#60;class-a&#62;CLASSA&#60;/class-a&#62;
		&#60;class-b&#62;CLASSB&#60;/class-b&#62;
		&#60;field relationship-type=&#34;non-cumulative&#34;&#62;
			&#60;a&#62;listA&#60;/a&#62;
			&#60;b set-method= &#34;addInListB&#34; type=&#34;iterate&#34;&#62;listB &#60;/b&#62;
			&#60;a-hint&#62; classX, classY, classZ &#60;/a-hind&#62;
			&#60;b-hint&#62; classS, classT, classU &#60;/b-hint&#62;
		&#60;/field&#62;
	&#60;/mapping&#62;

First problem was that if I tried to add more than 1 hint, dozer threw a NullPointerException because fieldMapping.getDestHintContainer().getHint() returns null in case of more hints than 1. Instead of this I introduced in mapFromIterateMethodFieldMap method:  fieldMapping.getDestHintType(value.getClass())


The second problem when I tried to map a hierarchy with a base object, dozer tried to map everything to the base object even in the xml there was the list of hints of destination.
The problem was in mapCollection method because in case of a generic type dozer update the DestHintContainer even it is set with the custom mapping xml.
Before update this hint list, I tested it if it is needed or not.

			if (fieldMap.getDestHintContainer() == null) {
				fieldMap.setDestHintContainer(destHintContainer);
			}




</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1284099165</field>
		<field name="user_name">jegese</field>
		<field name="body">Actually there are several other calls to getDestHintContainer().getHint(). All should be eliminated.

Check this bug report:
http://sourceforge.net/tracker/?func=detail&#38;aid=3008059&#38;group_id=133517&#38;atid=727368

It is about the same problem, I have created a unit test for this, but there is no answer to it yet. It might be that the problem is more complex than we think.</field>
</message>

<message>
		<field name="adddate">1284063517</field>
		<field name="user_name"></field>
		<field name="body">Same &#34;bug&#34;. I'm using version 5.2.2

Don't you need a remove-method param?</field>
</message>

<message>
		<field name="adddate">1256333962</field>
		<field name="user_name">lzaugg</field>
		<field name="body">Same &#34;bug&#34; and solution found:

line 588 in  MappingProcessor (@958), change from
value = map(value, fieldMapping.getDestHintContainer().getHint());
to
value = map(value, fieldMapping.getDestHintType(value.getClass()));

Would be nice to have this in trunk.
Thanks in advance.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">327920: MappingProcessor.java</field>
		<field name="entrydate">1242919525</field>
		<field name="mod_by">adonia</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2891929</field>
	<field user_id="2592367" name="submitted_by">hoomb</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Patch for Bug 2828946 (Using Plugin in Eclipse 3.5.x)</field>
	<field name="open_date">1257342694</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hello,

this is a quick fix to getting eclipse plugin into work on version 3.5.x

Regards</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">349513: dozer-eclipse-plugin-8-1.zip</field>
		<field name="entrydate">1257342695</field>
		<field name="mod_by">hoomb</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2906612</field>
	<field user_id="2719741" name="submitted_by"></field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">Patch for bug 2905896</field>
	<field name="open_date">1259656063</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Patch for bug specified.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">353336: GetterSetterPropertyDescriptor.java</field>
		<field name="entrydate">1259656063</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2946005</field>
	<field user_id="2795586" name="submitted_by">wguzgg</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Open</field>
	<field name="resolution">None</field>
	<field name="summary">support annotation</field>
	<field name="open_date">1265298120</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Widget (example)</field>
	<field name="artifact_group_id">Dozer v.5.2</field>
	<field name="details">I post a messag https://sourceforge.net/projects/dozer/forums/forum/452531/topic/3542693, and upload the source codes here.
I use freemarker to generate those codegen files, so please including these jars:
commons-beanutils-1.8.2
commons-collections-3.2.1
commons-lang-2.4
commons-logging-1.1.1
dozer-5.2.0
freemarker-2.3.15

I write a demo under test folder, define 2 PO (Order, OrderItem) and 2 VO (OrderVO, OrderItemVO) and define the mapping relationship in the class OrderInfosMap, OrderInfoMap and OrderItemMap.

to generate the codegen files:
1. execute org.dozer.task.AutoBoundTask, it would codegen xxxProperty.java
2. execute org.dozer.task.DozerMapGenerateTask, it would codegen dozer-mapping.xml

those codegen files would be put in the [project]\gen folder.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">File Added</field>
		<field name="old_value">361636: dozer-annotation.zip</field>
		<field name="entrydate">1265298121</field>
		<field name="mod_by">wguzgg</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3393991</field>
	<field user_id="2998273" name="submitted_by">throbert</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">patch for #3385226</field>
	<field name="open_date">1313680400</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">please find a patch for #3385226. Not test case is supplied as the same problem is already spotted in an existing test case in the trunk (knownfailure.testInheritanceBug)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1318189703</field>
		<field name="user_name">buzdin</field>
		<field name="body">applied to trunk</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1318189704</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318189704</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318189704</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318189704</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318189704</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">421467: multiple-superclass-mappings-patch</field>
		<field name="entrydate">1313680402</field>
		<field name="mod_by">throbert</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3412938</field>
	<field user_id="3555557" name="submitted_by">fjelloeper</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Patch for bug  </field>
	<field name="open_date">1316705919</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">Hi devs, 

This is a patch to solve the problem, when multiple hints are given in the mapping file to receive a NullPointerException. With fixing this, it is now possible to map a list of subclasses correctly.

I've also attached a JUnit test to expose the problem.

Link to bug: https://sourceforge.net/tracker/?func=detail&#38;aid=3008059&#38;group_id=133517&#38;atid=727368

Regards
Nate</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1318187633</field>
		<field name="user_name">buzdin</field>
		<field name="body">integrated to trunk</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1318187633</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318187633</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Patch for bug 3008059</field>
		<field name="entrydate">1318187633</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318187633</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1600552</field>
		<field name="entrydate">1318187633</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318187633</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318187633</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">424255: dozer-5.3.2-patch.zip</field>
		<field name="entrydate">1316705924</field>
		<field name="mod_by">fjelloeper</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3409579</field>
	<field user_id="3544727" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Patch for 3409577</field>
	<field name="open_date">1316025473</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.3.3</field>
	<field name="details">Fixes NPE when mapping null values between List&#60;&#62;List.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1318179862</field>
		<field name="user_name">buzdin</field>
		<field name="body">applied to trunk. Both Sets and Lists should be fine now.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1318179862</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318179862</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318179862</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">1600552</field>
		<field name="entrydate">1318179862</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318179862</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318179862</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">423567: patch.txt</field>
		<field name="entrydate">1316025475</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3200806</field>
	<field user_id="3274293" name="submitted_by"></field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">patch and test case for bug 3200805</field>
	<field name="open_date">1299365977</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">attaching patch correcting issue as described in bug #3200805.  Test case &#38; required files also included.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1318172650</field>
		<field name="user_name">buzdin</field>
		<field name="body">merged to trunk</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1318172650</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318172650</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318172650</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1318172650</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1318172650</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">403486: dozer-untyped-list-deep-index-patch.zip</field>
		<field name="entrydate">1299365977</field>
		<field name="mod_by"></field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3164916</field>
	<field user_id="3044409" name="submitted_by">pganga</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Duplicate</field>
	<field name="summary">Patch for fixing bug - 3157966</field>
	<field name="open_date">1295896633</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I have detected and patched the bug. Find the rar file with the patch and unit test, also the supporting classes.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1297539547</field>
		<field name="user_name">buzdin</field>
		<field name="body">duplicate, but is applied</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1297539547</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1297539547</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1297539547</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1297539547</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">399676: 3157966.rar</field>
		<field name="entrydate">1295896634</field>
		<field name="mod_by">pganga</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">3164891</field>
	<field user_id="3044409" name="submitted_by">pganga</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Patch for fixing bug - 3157966</field>
	<field name="open_date">1295893053</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.3.2</field>
	<field name="details">I have detected and patched the bug. Find the rar file with the patch and unit test, also the supporting classes.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1297539468</field>
		<field name="user_name">buzdin</field>
		<field name="body">applied, thanks.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1297539468</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1297539468</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1297539468</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1297539468</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1297539468</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">399671: 3157966.rar</field>
		<field name="entrydate">1295893053</field>
		<field name="mod_by">pganga</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1707987</field>
	<field user_id="961230" name="submitted_by">dnlcy</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Out of Date</field>
	<field name="summary">Implement inner classes</field>
	<field name="open_date">1177586027</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">This attach source is based in Dozer 3.1

The alterations are made so that dozer can use inner classes.

Added:
package net.sf.dozer.util.mapping.classLoader
with class: LoadClass.java

This class has a method setNameForInnerClasses() that is a substitute for the code:
Thread.currentThread().getContextClassLoader().loadClass( &#34;some string name&#34;)
that search in the string for the correct class.

This substitution has been made at the following files:
net.sf.dozer.util.mapping.fieldmap.DozerClass.java
net.sf.dozer.util.mapping.fieldmap.Hint.java
net.sf.dozer.util.mapping.util.MappingUtils.java
net.sf.dozer.util.mapping.util.XMLParser.java
net.sf.dozer.util.mapping.MappingProcessor.java

This method has been made by my boss calmeida [calmeida@indra.pt]
And adapted for all dozer by me, dnlcy [dchang@indra.pt]



Another modification as been made in class JAXBBeanFactory.java to get the correct method 


</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283341919</field>
		<field name="user_name">buzdin</field>
		<field name="body">Inner classes are already supported</field>
</message>

<message>
		<field name="adddate">1202734425</field>
		<field name="user_name">dnlcy</field>
		<field name="body">Logged In: YES 
user_id=961230
Originator: YES

maxxyme, 
This patch will work for your case.

See may previous comment and use the file LoadClass.java. That's everything you need.

cumps
DnlCY</field>
</message>

<message>
		<field name="adddate">1202726898</field>
		<field name="user_name">maxxyme</field>
		<field name="body">Logged In: YES 
user_id=731522
Originator: NO

I found out that using something like
  com.yourcompany.some.package.MainClass$InnerClass
works while
  com.yourcompany.some.package.MainClass.InnerClass
does not.

Do you think your patch is gonna fix this...?!</field>
</message>

<message>
		<field name="adddate">1195037750</field>
		<field name="user_name">dnlcy</field>
		<field name="body">Logged In: YES 
user_id=961230
Originator: YES

Franz,
I notice that you did not implemented this feature yet.
I upgrade my application to 4.1, and in this new version the changes are less since you guys concentrate the call of Thread.currentThread().getContextClassLoader().loadClass(String) in one place.
So what it's needed to change to use inner classes is just switch
Your method loadClass() in MappingUtils for this method:

public static Class loadClass(String name) throws ClassNotFoundException {
        Class clazz = null;
        String[] names = name.split(&#34;\\.&#34;);
        StringBuffer className = new StringBuffer();
        Class[] classes = null;
        for(String sname : names) {
            if(sname.substring(0,1).matches(&#34;[A-Z]&#34;)) {
                if(clazz == null) {
                    className.append(sname);
                    clazz = Thread.currentThread()
                    .getContextClassLoader().loadClass(className.toString());
                } else {
                    classes = clazz.getClasses();
                    for(Class innerClass : classes) {
                        if(innerClass.getName().endsWith(sname)) {
                            clazz = innerClass;
                        }
                    }
                }
            } else {
                className.append(sname);
            }
            className.append(&#34;.&#34;);
        }
        return clazz;
    }

or instead used my class LoadClass.java that renames the referred method to setNameForInnerClasses() and change your method loadClass() for:

  public static Class loadClass(String name) {
    Class result = null;
    try {
      result = LoadClass.setNameForInnerClasses(name);
    } catch (ClassNotFoundException e) {
      MappingUtils.throwMappingException(e);
    }
    return result;
  }

I'm apply this last solution 

One last thought about JAXBBeanFactory. This doesn't have to do with inner classes and I still don't know if it is a feature of my application but the change in JAXBBeanFactory.java is this:
 - switch:

try {
      method = ReflectionUtils.getMethod(objectFactory, &#34;create&#34; + beanId.substring(beanId.lastIndexOf(&#34;.&#34;) + 1), new Class[] {});
    } catch (NoSuchMethodException e) {
      MappingUtils.throwMappingException(e);
    }

 - for:

for(Method methodz : objectFactory.getMethods()) {
        if(methodz.getReturnType().equals(srcObjClass)) {
            method = methodz;
        }
    }

File Added: LoadClass.java</field>
</message>

<message>
		<field name="adddate">1178727067</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Thanks. I will let you know when this is implemented.</field>
</message>

<message>
		<field name="adddate">1178614962</field>
		<field name="user_name">dnlcy</field>
		<field name="body">Logged In: YES 
user_id=961230
Originator: YES

Try to use this simple junit test

Tell me if this is what you need.
File Added: junit-test.zip</field>
</message>

<message>
		<field name="adddate">1178353162</field>
		<field name="user_name">dnlcy</field>
		<field name="body">Logged In: YES 
user_id=961230
Originator: YES

No, but Monday I can create one and put it in.</field>
</message>

<message>
		<field name="adddate">1178345655</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Is there a unit test attached with this? I need that so I can implement the patch.

Thanks,

Franz</field>
</message>

<message>
		<field name="adddate">1177586215</field>
		<field name="user_name">dnlcy</field>
		<field name="body">Logged In: YES 
user_id=961230
Originator: YES

File Added: dozer-3.1-src.zip</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1283341919</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1283341919</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283341919</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">254248: LoadClass.java</field>
		<field name="entrydate">1195037750</field>
		<field name="mod_by">dnlcy</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">228306: junit-test.zip</field>
		<field name="entrydate">1178614962</field>
		<field name="mod_by">dnlcy</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">226712: dozer-3.1-src.zip</field>
		<field name="entrydate">1177586215</field>
		<field name="mod_by">dnlcy</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">226711: </field>
		<field name="entrydate">1177586215</field>
		<field name="mod_by">dnlcy</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">226711: dozer-3.1.jar</field>
		<field name="entrydate">1177586028</field>
		<field name="mod_by">dnlcy</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2993122</field>
	<field user_id="1846937" name="submitted_by">timnee</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">getting the real type of hibernate proxies</field>
	<field name="open_date">1272391018</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v.5.3.0</field>
	<field name="details">Added code to always deproxy (assuming HibernateProxy for now) the source object (top level and fields)

The current implementation of DefaultProxyResolver.getRealClass and getRealSuperClass is insufficient for hibernate proxies.  This relies on the Class.getSuperclass() to get the real class.  When this is call on hibernate proxy, it returns the type of the field but not the true type of the value.  

For example: 
you have the following classes

class A {...}

class B extends A {...}

class C {
  private A a
  public A getA() {..}
  public void setA(A a){...}
}

if C.a is a hibernate proxy, calling C.getA().getSuperclass() will always return A, even if its value is really of type B.

By always deproxying the source object, please consider deprecating the rest of ProxyResolver and refactoring the proxied tests.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1283341838</field>
		<field name="user_name">buzdin</field>
		<field name="body">Abstract type problems are fixed as well.</field>
</message>

<message>
		<field name="adddate">1283341721</field>
		<field name="user_name">buzdin</field>
		<field name="body">I have applied your patch to trunk. Will be released in 5.3.0. Hibernate comes as an optional implementation and should be enabled in config file. </field>
</message>

<message>
		<field name="adddate">1280933146</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi,
Thanks for the patch! I looked through it and will apply your fix soon. One remark is that Hibernate should have its own proxy resolver type, which is configurable. Otherwise this will result in unnecessary performance overhead on non-proxy environments and non-hibernate proxies. I will also introduce NoneProxyResolver for use-cases we are sure there is nothing to unproxy.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1283341722</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1283341722</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1280933163</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">942315</field>
		<field name="entrydate">1280933163</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1280933163</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">372018: HibernateDeProxyer.patch</field>
		<field name="entrydate">1272391019</field>
		<field name="mod_by">timnee</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2218433</field>
	<field user_id="2270665" name="submitted_by">tomrigole</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Bug fix not indexed properties (List - Vector)</field>
	<field name="open_date">1225700778</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.4</field>
	<field name="details">Whenever a List type is used as the destination of an indexed property, Dozer instantiates a new ArrayList as the implementation type to be used. Now, some (legacy or badly programmed) systems do not declare instance variables with the basic interface types, but use implementation types such as 'java.util.Vector', which causes mapping failures.

We've fixed the bug by 
1) determining if the declared type is an interface type, if so, instantiate an ArrayList (for List) or HashSet (for Set)
2) if the declared type is an implementation type, use reflection to create a new Collection instance</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1228592846</field>
		<field name="user_name">mhtierney</field>
		<field name="body">This patch has been applied and will be in the 4.4 release</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1228592846</field>
		<field name="entrydate">1229493022</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1229493022</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228593536</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1228592846</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1228592846</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228592846</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">299926: IndexedCollectionInstantiation.patch</field>
		<field name="entrydate">1225700778</field>
		<field name="mod_by">tomrigole</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2874702</field>
	<field user_id="2418250" name="submitted_by">vadeg</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Patch for bug 2855016</field>
	<field name="open_date">1255008002</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v.5.2</field>
	<field name="details">bug 2855016 fix</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1255555958</field>
		<field name="user_name">buzdin</field>
		<field name="body">merged in trunk</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1255555960</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1255555960</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1255555960</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1255555960</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1255555960</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1255555960</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">345742: Bug_2855016.patch</field>
		<field name="entrydate">1255008004</field>
		<field name="mod_by">vadeg</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2819258</field>
	<field user_id="2560405" name="submitted_by">jessejose</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Patch for #2819255 - Inheritance Mapping with Proxied Object</field>
	<field name="open_date">1247174975</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Hi,

Sorry, I actually posted the patch in the Bug as well, I did not realize that there was a seperate Patch process. Anyway I am attaching the Patch file here as well.
Please read #2819255 for a detailed explaination. 

Sorry for the duplicate and hope this helps.

Cheers

Jesse</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1248022464</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fix has been applied. Many thanks for the patch!</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">893796</field>
		<field name="entrydate">1248022464</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1248022464</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1248022464</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1248022464</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1248022464</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1248022464</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">334334: SVNPatch.ProxiedInheritance.txt</field>
		<field name="entrydate">1247174975</field>
		<field name="mod_by">jessejose</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1333634</field>
	<field user_id="774102" name="submitted_by">dr_dee</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">mapping processor exception reorg</field>
	<field name="open_date">1129848865</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Tiring of MappingException discarding my meaningful
exceptions (with help from InvocationTargetException)
the following patch centralises exception handling and
attempts to re-throw unchecked exceptions before wrapping.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1130099814</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

After thoroughly reviewing the exception handling I see your
point about centralization. I have changed the exception
handling extensively and am pretty sure it will meet your
requirements. I basically took the concepts of centralizing
everything but at the end of the day wrap in a
MappingException...verifying that I haven't done any
re-wrapping. Everything is checked into CVS if you want to
take a look. Mostly changes in the MappingProcessor.

Thanks

Franz</field>
</message>

<message>
		<field name="adddate">1130058751</field>
		<field name="user_name">nobody</field>
		<field name="body">Logged In: NO 

Yes, that would be sufficient.

It might be nice not to wrap MappingException itself.

cheers
Rohan
</field>
</message>

<message>
		<field name="adddate">1130022234</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Adding this to the MappingException generates a much more
detailed stacktrace. Is this sufficient?

public class MappingException extends RuntimeException {

  private Throwable cause;

  public MappingException(String arg0) {
    super(arg0);
  }

  public MappingException(Throwable cause) {
    // For JDK 1.3 RuntimeException - it does not support a
Throwable in the constructor
    super(cause.toString());
    this.cause = cause;
  }

  public Throwable getCause() {
    return cause;
  }
}</field>
</message>

<message>
		<field name="adddate">1129997864</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

We will definitely put in the true exception wrapping...we
did have that in the codebase until we backported to 1.3. I
will put this in for the 1.5.6 release for next week.

thanks,

franz</field>
</message>

<message>
		<field name="adddate">1129973447</field>
		<field name="user_name">dr_dee</field>
		<field name="body">Logged In: YES 
user_id=774102

The problem is that MappingException's idea of wrapping is
to stringify the original exception (in order to support pre
1.4 jdk).  Unfortunately InvocationTargetException provides
no details in that string as to what actually happened so
validation errors or simple coding bugs all come back as a
mapping exception caused by an exception during the
reflective call.

If you could support true exception wrapping in the 1.4+
style I'd be just, or even more, happy.

cheers
Rohan </field>
</message>

<message>
		<field name="adddate">1129915577</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Rohan -

Not entirely sold on not wrapping unchecked exceptions.
Frameworks like Spring do a similar thing in that they have
one coarse grained runtime exception that developers can
rely on if they care to catch a runtime exception, without
having to catch the all-mighty Throwable. What information
are you losing, besides not knowing that the runtime is a
certain instance of something?

Thoughts?

Thanks,

Franz</field>
</message>

<message>
		<field name="adddate">1129876364</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Wow...thanks for the contribution. I will check this over
and put it in our 1.5.6 release.

Thanks again.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1130740100</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1129997867</field>
		<field name="entrydate">1130740100</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1129997867</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1129997863</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1129876254</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">153278: MappingProcessor.java.diff</field>
		<field name="entrydate">1129848865</field>
		<field name="mod_by">dr_dee</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1325524</field>
	<field user_id="100" name="submitted_by">nobody</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">find most specific mapping</field>
	<field name="open_date">1129191972</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I've patched MappingProcessor to correctly determine
the most specific mapping.  It worked previously only
when mappings were returned from the (unordered) map
such that the last candidate mapping happened to be the
most specific.

Rohan
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1129876144</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

I have patched the mappingprocessor. Great work by the
way...very thorough...I have attached the new
mappingprocessor to the rfe.</field>
</message>

<message>
		<field name="adddate">1129672987</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Funny...I never even saw this. Thanks and I will get this
into the 1.5.6 release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1130740101</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1129876144</field>
		<field name="entrydate">1130740101</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">153296: MappingProcessor.java</field>
		<field name="entrydate">1129876145</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1129876144</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1129876144</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1129672987</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">152329: MappingProcessor.java.diff</field>
		<field name="entrydate">1129191973</field>
		<field name="mod_by">nobody</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1445545</field>
	<field user_id="1451181" name="submitted_by">emanuel34</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Branch20Index jar</field>
	<field name="open_date">1141814205</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Following the chat:
https://sourceforge.net/forum/message.php?
msg_id=3617443

I attached the precompiled jar of the index branch</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1145235563</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1145235563</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1145235563</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">170186: dozer-index-support-2.0.1_0.2.jar</field>
		<field name="entrydate">1141814208</field>
		<field name="mod_by">emanuel34</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1432849</field>
	<field user_id="1451181" name="submitted_by">emanuel34</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">map element at specific index</field>
	<field name="open_date">1140094473</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,

Following our chat:
(http://sourceforge.net/forum/forum.php?thread_id=1402251&#38;forum_id=452530)
we did some changes in the project. Please find them
attached.

We also created unit tests to test new functions. We
run existings tests and they passed expect the test:
testCustomConverer on the MapperTest class:

net.sf.dozer.util.mapping.MappingException:
java.lang.InstantiationException: java.lang.Double at
net.sf.dozer.util.mapping.util.MappingUtils.throwMappingException(MappingUtils.java:608)

There is a piecec of code that needs to be refactor:
writeIndexedValue in the FieldMap class - we were
running out of time to finish it.

Please let me know what did you decied to do with our
changes.

Regards
w.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1145235581</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1145235581</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1140109677</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">167685: dozer-map_element_at_specific_index.zip</field>
		<field name="entrydate">1140094474</field>
		<field name="mod_by">emanuel34</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1349799</field>
	<field user_id="774102" name="submitted_by">dr_dee</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Spring bean factory injection</field>
	<field name="open_date">1131321618</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">I've made some modifications to allow factories to be
injected via Spring (or similar).  It's currently only
available via the DozerBeanMapper and assumes a 1-1
relationship between mapper and factory instance. 
Unlike the existing factories, which are recreated each
time, the injected factory instance is reused though
it's possible that Spring might reset them if it felt
like it.

Non-injected factories are still available with their
current behaviour.

Here's how to use it...

&#60;bean id=&#34;mapper&#34;
class=&#34;net.sf.dozer.util.mapping.DozerBeanMapper&#34;
singleton=&#34;true&#34;&#62;
  &#60;property name=&#34;mappingFiles&#34;&#62;
    ...
  &#60;/property&#62;
  &#60;property name=&#34;factories&#34;&#62;
    &#60;map&#62;
      &#60;!-- the key matches the name of the factory in the
            dozerBeanMapping.xml file --&#62;
      &#60;entry key=&#34;org.foo.DozerBeanFactory&#34;&#62;
        &#60;ref bean=&#34;mapperBeanFactory&#34;/&#62;
      &#60;/entry&#62;
      &#60;!-- more factories can be supplied with
additional &#60;entry&#62;'s
    &#60;/map&#62;
  &#60;/property&#62;
&#60;/bean&#62;
    
&#60;bean id=&#34;mapperBeanFactory&#34; class=&#34;org.foo.MyFactory&#34;
singleton=&#34;true&#34;&#62;
  &#60;property name=&#34;whatever&#34;&#62;example required data
  ...
&#60;/bean&#62;


Rohan</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1131332177</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744

Thanks for the patch Rohan. Let me review this and we can
get it in for the 1.5.7 release.

Great work around the IOC stuff. Without 'real' world
requirements it's hard to think of all possibilites. Nice Job.

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1132111216</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1131400735</field>
		<field name="entrydate">1132111216</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1131400735</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1131400734</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1131332177</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">155242: inject-factories-patch.tar.gz</field>
		<field name="entrydate">1131321619</field>
		<field name="mod_by">dr_dee</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2800989</field>
	<field user_id="2520297" name="submitted_by">mariusz-pala</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Patch for bug 2724920: Map&#60;?, List&#60;?&#62;&#62; is mapped incorrectly</field>
	<field name="open_date">1244109416</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">add these lines at the end of method MappingProcessor.mapCollection(Object
srcObj, Object srcCollectionValue, FieldMap fieldMap, Object destObj);

// List to Map value
else if (CollectionUtils.isCollection(srcFieldType) &#38;&#38;
MappingUtils.isSupportedMap(destCollectionType)) {
result = mapListToList(srcObj, (List&#60;?&#62;) srcCollectionValue, fieldMap,
destObj);
}

Tested on file attached to the bug and on other mapping. For custom list elements, a hint is required.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1244494886</field>
		<field name="user_name">buzdin</field>
		<field name="body">Tested and merged into trunk.
Thank you for the patch!
Dmitry</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244494974</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244494974</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1244494974</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244494886</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244494886</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244494886</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1515341</field>
	<field user_id="1105251" name="submitted_by">shailusharma79</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Patch for feature request: 1480798</field>
	<field name="open_date">1151703935</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi,

The attached zip file contains the patch file and unit 
test cases for feature request 1480798. Please take a 
look and let me know if there are any questions.

Thanks
Shalandra
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1155616665</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069

See comments on feature request.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1155616665</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1155616665</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1155616665</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">183494: feature_request_1480798_patch.zip</field>
		<field name="entrydate">1151703935</field>
		<field name="mod_by">shailusharma79</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1664865</field>
	<field user_id="1565762" name="submitted_by">lukerobinson</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Bi-direction is-accessible</field>
	<field name="open_date">1172035894</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">The is-accessible property was not being copied into the destination's source during the reverseFields(FieldMap source, FieldMap destination) method causing it to only be used one way.

Patch to copy the is-accessible property to both source and dest for conversion in the opposite direction.</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1174882747</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1174447923</field>
		<field name="entrydate">1174882747</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1174447923</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1174447923</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1174447923</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">216963: mappingUtils.patch</field>
		<field name="entrydate">1172035895</field>
		<field name="mod_by">lukerobinson</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2020543</field>
	<field user_id="1678471" name="submitted_by">xnejp03</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Support for Javassist proxy objects</field>
	<field name="open_date">1216296207</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">Dozer already includes CG LIB proxy support, this small patch will all Javassist proxies.

Updated:

1) MapperConstants.java .. addede JAVASSIST_ID constant
2) MappingUtils.java .. updated methods: isProxy() and getRealSuperclass()

Based on source code 4.2.1
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1227262257</field>
		<field name="user_name">buzdin</field>
		<field name="body">Patch incorporated. Thank you!</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1227262239</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227262239</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227262239</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227262239</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1227262239</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">285053: dozer.patch.zip</field>
		<field name="entrydate">1216296207</field>
		<field name="mod_by">xnejp03</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1604803</field>
	<field user_id="220012" name="submitted_by">chiraz</field>
	<field user_id="550744" name="assigned_to">fgarsombke</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Conditional mapper interface</field>
	<field name="open_date">1164746977</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hi guys,

This is a patch that I made when experimenting with Dozer to conditionally transfer values. That means either copy the value from source to dest or not. I could not use the event interface (it is only notification) and a custom converter seems way overkill and does not help with productivity if this is to be implemented for each class map.

I came up with a new interface which is used for a custom implementation with policies/profiles and is called through an interface of Dozer. Configuration can be done through the regular Spring configuration similar to the eventListeners.

The scenario is as follows:
- User fills in information in a web 2.0 interface
- User submits info to web layer.
- The web layer framework converts XML into a representable UI object
- The web layer retrieves an object from persistence (if it exists).
- The information from the UI object is copied into the persisted object, field by field. If the conditional mapper is configured, it is called. If it returns false, the field is mapped. otherwise the field is skipped.

In the last step is where I have to deal with policies and profiles. That is, one profile may not change the dates of a certain object, but another profile is allowed to do this. Their user interface is exactly the same, but has these fields disabled.

I can rely on the UI to disable those fields, but we need to have either a check on the server, or simply enforce that the fields are not even copied (better!).

The interface can be implemented by any custom implementation. This allows the application to get data from any persistent format and apply it at mapping time so that certain fields can be skipped in the mapping.

See the patch for more details. Please consider integration into the next version of Dozer.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1170910352</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

This patch has been applied to the code base and will be included in the upcoming 3.0 release.  Thanks for code submission.</field>
</message>

<message>
		<field name="adddate">1170784696</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

We are doing a release this week. Let us review the patch and see if it fits in our plan. Thanks for taking the time and submitting!

Franz</field>
</message>

<message>
		<field name="adddate">1170756174</field>
		<field name="user_name">tgke</field>
		<field name="body">Logged In: YES 
user_id=239724
Originator: NO

I was looking for this functionality and considering to write a similar patch. Any estimation when this can be included in the official release? I quickly browsed through the code, and would reverse the &#34;skipField()&#34; method from the conditional interface into &#34;mapField()&#34;, but aside from that minor change, it looks fine.

Many thanks!
</field>
</message>

<message>
		<field name="adddate">1164903264</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Thank you for the submission. We will review this patch and let you know if we can apply it or not.

Thanks for contributing!

Franz</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1170991650</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1170910352</field>
		<field name="entrydate">1170991650</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1170910352</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1170910352</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1164903277</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">204825: patch.txt</field>
		<field name="entrydate">1164746977</field>
		<field name="mod_by">chiraz</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1678440</field>
	<field user_id="220012" name="submitted_by">chiraz</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Patch for trimming strings</field>
	<field name="open_date">1173640273</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Unstable (example)</field>
	<field name="details">Hi there,

I am using Dozer in a GWT project to copy the DTO UI classes to business objects. In this process, I have the need to trim all incoming strings to remove all whitespace on both sides. Rather than invoking trim() on every string within the business layer, which is prone ot error, I thought to modify Dozer to do this for me.

Attached is a patch that examplifies this. I basically tried to add &#34;map-trim-string&#34; to the global configuration, so that by default I can have it set. Probably this setting should actually be just &#34;trim-strings&#34; or something, since it does not evaluate if it should be mapped.

The patch was done against 2.4.

Rgds,

G&#62;
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1184468221</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

This feature was implemented but the patch was not applied because the code base changed so much since the patch was originally submitted.  Thanks for suggesting this feature!</field>
</message>

<message>
		<field name="adddate">1174448332</field>
		<field name="user_name">fgarsombke</field>
		<field name="body">Logged In: YES 
user_id=550744
Originator: NO

Can you please provide a unit test? You can extend the DozerTestBase. Plenty of examples under the test folder.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1184541084</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1184468221</field>
		<field name="entrydate">1184541084</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1184468221</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">550744</field>
		<field name="entrydate">1184468221</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1184468221</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1174448332</field>
		<field name="mod_by">fgarsombke</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">219881: dozer-2.4.patch</field>
		<field name="entrydate">1173640277</field>
		<field name="mod_by">chiraz</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1776911</field>
	<field user_id="1512737" name="submitted_by">vguna</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Fixes cglib bug with map-id</field>
	<field name="open_date">1187451144</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Please take a look at the long description posted here:

http://sourceforge.net/forum/forum.php?thread_id=1803021&#38;forum_id=452530
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1190993824</field>
		<field name="user_name">sf-robot</field>
		<field name="body">Logged In: YES 
user_id=1312539
Originator: NO

This Tracker item was closed automatically by the system. It was
previously set to a Pending status, and the original submitter
did not respond within 14 days (the time period specified by
the administrator of this Tracker).</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1190993824</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1189740160</field>
		<field name="entrydate">1190993824</field>
		<field name="mod_by">sf-robot</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1189740160</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1189740160</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">241807: dozer-cglib.patch</field>
		<field name="entrydate">1187451145</field>
		<field name="mod_by">vguna</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1823435</field>
	<field user_id="1914163" name="submitted_by">johknu</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Determining source field type</field>
	<field name="open_date">1193832031</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">determineActualPropertyType does not distinguish between mapping the source or the destination object. It always checks isDestFieldAccessible, even though it's finding the propertyType of the source object. This patch uses isSrcFieldAccessible only when checking the source object. determineActualPropertyType is a private method in the class and is used on two places, once for the source object and once for the destination object. A simple boolean value to distinguish is sufficient.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1197760227</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Thanks for submitting this and your patience with us applying it.  I applied the patch and all unit tests ran green, so this will be in the next release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1197797728</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1197760227</field>
		<field name="entrydate">1197797728</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1197760227</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1197760227</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1197760227</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">252167: MapFieldMap.diff</field>
		<field name="entrydate">1193832031</field>
		<field name="mod_by">johknu</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2592484</field>
	<field user_id="2270665" name="submitted_by">tomrigole</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Bug using MapIds: Unit test &#38; Patch (for version 4.4.1)</field>
	<field name="open_date">1234433154</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.5.0</field>
	<field name="details">When using a map-id to do a mapping from one field to another, the mapping is not found using the Hash-Key in the 'ClassMapFinder' when the types mapped are sub-types from the types denoted in the actual mapping with the given map-id. This is because the key is formed by (src-class-type, dst-class-type,map-id) and the names of subclasses don't match those of the actual super-class mapped.

Apparently, this error was found before, because after the failure of the hash-map lookup, all mappings are iterated and the first with matching map-id is used. Sadly, each mapping has two entries in the ClassMap-Map (-&#62; bi-directional mappings) and only if the correct direction is found (accidentily) first, the mapping succeeds. So in half the cases it will fail, because the wrong direction is selected.

To remedy this, I have added an extra test when iterating the HashMap to see if the mapped source and destination type correspond. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234928652</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Tom,

I applied the patch to the 5.0 codebase and it worked great.  All regression tests passed after applying your patch.  Thanks for taking the time to submit this patch.  5.0 should be released to prod soon.

Thanks,
Matt</field>
</message>

<message>
		<field name="adddate">1234928637</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Tom,

I applied the patch to the 5.0 codebase and it worked great.  All regression tests passed after applying your patch.  Thanks for taking the time to submit this patch.  5.0 should be released to prod soon.

Thanks,
Matt</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">893795</field>
		<field name="entrydate">1234928637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234928637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1234928637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234928637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234928637</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234439637</field>
		<field name="mod_by">tomrigole</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">313203: Tests4.4.1_MapIdBug.patch</field>
		<field name="entrydate">1234433154</field>
		<field name="mod_by">tomrigole</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2526109</field>
	<field user_id="1759155" name="submitted_by">grzegorzoledzki</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">[PATCH] [DOC] wildcard attribute explained</field>
	<field name="open_date">1232540475</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.5.0</field>
	<field name="details">I saw a description of &#34;wildcard&#34; attribute at: http://dozer.sourceforge.net/documentation/mappings.html, but that doesn't seem enough, it's hard to miss it.

I've added a paragraph about it under &#34;excluding fields&#34;.
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234930370</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi,

I applied this documentation patch to the 5.0.  Good catch as I think the additional documentation clarifies the wildcard setting.  Thanks for taking the time to submit this patch.

Thanks,
Matt</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234930370</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234930370</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234930370</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234930370</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1234930370</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">310037: patchDozerDocWildcard.patch</field>
		<field name="entrydate">1232540475</field>
		<field name="mod_by">grzegorzoledzki</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2674609</field>
	<field user_id="2375569" name="submitted_by">andor72</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Dozer 5: Added generics support , bridge method recognition</field>
	<field name="open_date">1236591706</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Hi,
i wrote a little improvement for Dozer to resolve Java5 parameterized type information. Fixed the resoltuion of Java 5 bridge methods.

Example:
with these changes Dozer5 can handle the following types

public class AbstractDto&#60;T extends Serializable&#62;
implements Dto&#60;T&#62; {

private T id;

public T getId() {
return id;
}

public void setId(final T id) {
this.id = id;
}
}

The code as well as the tests are included in the zip file.

Would be glad if someone could add this to the dozer trunk.

Best regards,
Andor Grei&#195;&#376;l</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1240964902</field>
		<field name="user_name">andor72</field>
		<field name="body">Hi Dmitry,
yes, you are right. The Dozer 4 patch just followed the way Dozer 4 dealed with Java 5 specific code.
(It the end it was a backport of the java 5 code).

Thank you for adding the patch !

Best regards,
Andor
</field>
</message>

<message>
		<field name="adddate">1240945432</field>
		<field name="user_name">buzdin</field>
		<field name="body">Merged in trunk</field>
</message>

<message>
		<field name="adddate">1240944156</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hi,

Patch is accepted. Currently working on slight improvements and unit test coverage.

One question, do I get it right that this patch is a complete replacement for the previous one targeted for Dozer 4?

Regards,
Dmitry</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">0</field>
		<field name="entrydate">1240945443</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240945432</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">1236069</field>
		<field name="entrydate">1240945432</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1240945432</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1240945432</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1240945432</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">893796</field>
		<field name="entrydate">1240944157</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1237286683</field>
		<field name="mod_by">andor72</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">316940: dozer5-generics.zip</field>
		<field name="entrydate">1236591706</field>
		<field name="mod_by">andor72</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2038701</field>
	<field user_id="359991" name="submitted_by">coreylohman</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">missing destination field readMethod throws NPE</field>
	<field name="open_date">1217930933</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">     When Introspector cannot find a read method for a destination property, an NPE is thrown when an attempt is made to set it.  This happens even if the field is configured one-way &#38; the inverse mapping is one-way excluded.
     This is because GetterSetterPropertyDescriptor.writeDeepDestinationValue uses PropertyDescriptor.getReadMethod().getReturnType() to determine the value type to set.  If no readMethod exists (as may be true for a one-way mapping), this call will throw an NPE.  This value should probably be obtained from PropertyDescriptor.getWriteMethod().getParameterTypes()[0] instead.  The attached patch works for me to fix this problem via this technique.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1222896949</field>
		<field name="user_name">coreylohman</field>
		<field name="body">Yes, that sounds like a safer fix.  Thanks for getting this one in!</field>
</message>

<message>
		<field name="adddate">1222865808</field>
		<field name="user_name">buzdin</field>
		<field name="body">Reproduced and fixed.
Thank you for the patch. Fixed that in less intrusive manner by checking for getter method for null first and only then taking write method.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1225360608</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1222865809</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1222865809</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1222865809</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1222762193</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">287121: dozer.patch</field>
		<field name="entrydate">1217930933</field>
		<field name="mod_by">coreylohman</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2218445</field>
	<field user_id="2270665" name="submitted_by">tomrigole</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Test cases patch 2218433  and 2218439</field>
	<field name="open_date">1225701192</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.4</field>
	<field name="details">Test cases for patches (I've included them also as an SVN patch)

2218433  and 2218439

Kind regards,
Tom</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1228592805</field>
		<field name="user_name">mhtierney</field>
		<field name="body">I added these test cases and applied the patch that made them run green</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">1228592805</field>
		<field name="entrydate">1229493022</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">4</field>
		<field name="entrydate">1229493022</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228593522</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1228592805</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1228592805</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228592805</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">299928: testClassForBotchFixes.patch</field>
		<field name="entrydate">1225701193</field>
		<field name="mod_by">tomrigole</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2225885</field>
	<field user_id="1871615" name="submitted_by">benthedean</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Change ClassLoader.getResource() to getResourceAsStream()</field>
	<field name="open_date">1225904090</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">In the net.sf.dozer.util.mapping.util.ResourceLoader class, resources are loaded as URL objects using ClassLoader.getResource(String). These URL objects are used in a couple classes in dozer to read data from .properties or .xml files. In every case, the method URL.getStream() is called to create an InputStream.

This caused a problem with our deployment when we had a dozer.properties file in our jar. There is no way to &#34;close&#34; a URL and JBoss keeps it open. Even adding a InputStream.close() to the stream returned by URL.getStream() does not solve the problem. The problem is that URL.getStream() is the same as URL.getConnection().getStream(). In the case of a dozer.properties file inside a jar, this creates a JarURLConnection instance. There is no way to manually close a URLConnection. Calling close() on the InputStreams created is supposed to free up the network resources, but this isn't guaranteed.

So, rather than use a URL to create an InputStream, I used ClassLoader.getResourceAsStream(String) to get the InputStream directly. This still works for all the cases that ClassLoader.getResource(String) worked, including loading files outside of the classpath.

I've included SVN patches for the source code and one adding tests for the new ResourceLoader.getResourceAsStream(String) method.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1226695320</field>
		<field name="user_name">benthedean</field>
		<field name="body">The problem isn't whether or not to use getResource or to use getResourceAsStream. The problem is that the URL class caches URLConnections by default. if we change the lines that previously said

URL someURL = ResourceLoader.getResource(filename);
InputStream stream = someURL.openStream();

to 

URL someURL = ResourceLoader.getResource(filename);
URLConnection connection = someURL.openConnection();
connection.setUsesCaches(false);
InputStream stream = someURL.getInputStream();

and when we're done, calling stream.close() will make it so the URLConnection closes. When URLConnections are cached they can stay open which is what causes jars to get &#34;stuck&#34; and they don't delete when undeloyed.</field>
</message>

<message>
		<field name="adddate">1225904181</field>
		<field name="user_name">benthedean</field>
		<field name="body">File Added: GetResourceAsStream.patch</field>
</message>

<message>
		<field name="adddate">1225904128</field>
		<field name="user_name">benthedean</field>
		<field name="body">File Added: GetResourceAsStream-tests.patch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1226695320</field>
		<field name="mod_by">benthedean</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1226695320</field>
		<field name="mod_by">benthedean</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">300288: GetResourceAsStream.patch</field>
		<field name="entrydate">1225904181</field>
		<field name="mod_by">benthedean</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">300286: </field>
		<field name="entrydate">1225904164</field>
		<field name="mod_by">benthedean</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">300287: GetResourceAsStream-tests.patch</field>
		<field name="entrydate">1225904128</field>
		<field name="mod_by">benthedean</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">300286: GetResourceAsStream.patch</field>
		<field name="entrydate">1225904090</field>
		<field name="mod_by">benthedean</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2061942</field>
	<field user_id="2176658" name="submitted_by">mickaelmorier</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Fixed</field>
	<field name="summary">Deep index patch</field>
	<field name="open_date">1219224763</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.4</field>
	<field name="details">XMLParser patch for Deep index

Attached is the patch for bug #1845706 (http://sourceforge.net/tracker/index.php?func=detail&#38;aid=1845706&#38;group_id=133517&#38;atid=727368).

The problem is in the method getFieldNameOfIndexedField. All list indexes are replaced by empty string instead of only last.

Field name are not correct when we have more than one index like &#60;a&#62;secondArray[0].thirdArray[7]&#60;/a&#62;.
- Without patch, fieldName = secondArray.thirdArray
- With patch, fieldName = secondArray[0].thirdArray

The patch is based on version 4.2.1.

Regards,
Mickael</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1229014749</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixed, thank you for the patch.</field>
</message>

<message>
		<field name="adddate">1228597093</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Mickael,

Thanks for submitting the patch.  I am going to try and get this in the 4.4 release.  Can you submit a simple as possible unit test that reproduces the issue.  That way we can add it to our regression test suite and be able to confirm that the patch resolves your issue?  Thanks
</field>
</message>

<message>
		<field name="adddate">1219312499</field>
		<field name="user_name">mickaelmorier</field>
		<field name="body">Logged In: YES 
user_id=2176658
Originator: YES

File Added: dozer-patch-deepindex.patch</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1229014715</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1229014715</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1229014715</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1229014714</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1222782566</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">289512: </field>
		<field name="entrydate">1219312499</field>
		<field name="mod_by">mickaelmorier</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">289714: dozer-patch-deepindex.patch</field>
		<field name="entrydate">1219312499</field>
		<field name="mod_by">mickaelmorier</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">289512: dozer-patch-deepindex.patch</field>
		<field name="entrydate">1219224763</field>
		<field name="mod_by">mickaelmorier</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1939196</field>
	<field user_id="1759155" name="submitted_by">grzegorzoledzki</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">MappingProcessor to use multiple hints from DestHintContaine</field>
	<field name="open_date">1207814638</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.4.3</field>
	<field name="details">A single-line patch to make MappingProcessor use multiple  hints for destination classes during mapping of fields. It changes the behaviour of MappingProcessor only if both source and dest. hints are specified AND both are comma-separated lists (as described in the HintContainer).

This was needed when we wanted to map between a hierarchy of classes occurring as field types.
In short words:

Imagine a class A (will be mapped to APrime) with field &#34;x&#34; of type &#34;X&#34; (mapped to &#34;x&#34; of type &#34;XPrime&#34;). And now X type is abstract having several concrete subclasses (X1,X2,X3). The same hierarchy on the &#34;right-hand-side&#34; (XPrime having subclasses: X1Prime, X2Prime, X3Prime).
Let's say we want to map an instance of class A to APrime without knowing the very detail runtime type of x field value.

The solution is to have the mapping as follows:
&#60;mapping&#62;
 &#60;class-a&#62;package.A&#60;/class-a&#62;
 &#60;class-b&#62;package.APrime&#60;/class-b&#62;
 &#60;field&#62;
  &#60;a&#62;x&#60;/a&#62;
  &#60;b&#62;x&#60;/b&#62;
  &#60;a-hint&#62;package.X1,package.X2,package.X3&#60;/a-hint&#62;
  &#60;b-hint&#62;package.X1Prime,package.X2Prime,package.X3Prime&#60;/b-hint&#62;
 &#60;/field&#62;
&#60;/mapping&#62;

and run it like this:
mapper.map(new A(new X2(5L)), APrime.class);

Without this patch it doesn't work. Patching fixes the problem.

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1227648308</field>
		<field name="user_name">edbras</field>
		<field name="body">Go Dimitri ... go Dimitri .... :)</field>
</message>

<message>
		<field name="adddate">1227646630</field>
		<field name="user_name">buzdin</field>
		<field name="body">Fixes the following bug https://sourceforge.net/tracker2/?func=detail&#38;aid=1865945&#38;group_id=133517&#38;atid=727368
I have submitted a test case to be sure (RuntimeSubclassMappingTest).

I wish all of Dozer problems would be fixed so easily :)

Thanks for the patch. Will be included in 4.3 release.

Dmitry</field>
</message>

<message>
		<field name="adddate">1227645428</field>
		<field name="user_name">edbras</field>
		<field name="body">Yep (wrote it wrong).</field>
</message>

<message>
		<field name="adddate">1227644733</field>
		<field name="user_name">grzegorzoledzki</field>
		<field name="body">Not quite sure if I understand you.
You think it was a undocumented feature (with a bug within), right?

(If so, I can nothing but agree)</field>
</message>

<message>
		<field name="adddate">1227620286</field>
		<field name="user_name">edbras</field>
		<field name="body">Used it and it works well.
I get more the feeling that itsn't a undocumented feature that wasn't unsed correctly.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1227646812</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227646812</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227646812</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1227646812</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1227646812</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">273975: patchDestHintContainer</field>
		<field name="entrydate">1207814639</field>
		<field name="mod_by">grzegorzoledzki</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2592492</field>
	<field user_id="2270665" name="submitted_by">tomrigole</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Bug using MapIds: bug fix Patch (for version 4.4.1)</field>
	<field name="open_date">1234433282</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.5.0</field>
	<field name="details">(see previous artifact with unit test revealing the bug)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234928617</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Tom,

I applied the patch to the 5.0 codebase and it worked great.  All regression tests passed after applying your patch.  Thanks for taking the time to submit this patch.  5.0 should be released to prod soon.

Thanks,
Matt</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">893795</field>
		<field name="entrydate">1234928617</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234928617</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1234928617</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234928617</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234928617</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234439608</field>
		<field name="mod_by">tomrigole</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">313204: Patch4.4.1_MapIdBug.patch</field>
		<field name="entrydate">1234433283</field>
		<field name="mod_by">tomrigole</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2592780</field>
	<field user_id="2270665" name="submitted_by">tomrigole</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Test for bug on Hints and mapId (for version 4.4.1)</field>
	<field name="open_date">1234439475</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.5.0</field>
	<field name="details">When mapping an entry of a list using a mapId and an index hint, the mapping is not found because Dozer searches for type 'List' instead of hint-type in custom mappings.

This test fails because of that reason. I also created a patch which fixes this problem. 

PS: There is a chance that this test does not fail if my previous bug on finding mappings based on map-id is not fixed, because of non-defined order of iteration over hash-maps. The fix I did there, simply reveals this bug with a 100% certainty. </field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234929596</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Tom,

I applied the patch to the 5.0 codebase and it worked great.  All
regression tests passed after applying your patch.  Thanks for taking the
time to submit this patch.  5.0 should be released to prod soon.

Thanks,
Matt
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1234929596</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">893795</field>
		<field name="entrydate">1234929596</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234929596</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234929596</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234929596</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">summary</field>
		<field name="old_value">Test for bug on Hints and mapId</field>
		<field name="entrydate">1234439653</field>
		<field name="mod_by">tomrigole</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234439586</field>
		<field name="mod_by">tomrigole</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">313215: Test_4.4.1_bugHintAndMapID.patch</field>
		<field name="entrydate">1234439475</field>
		<field name="mod_by">tomrigole</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2592785</field>
	<field user_id="2270665" name="submitted_by">tomrigole</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">None</field>
	<field name="summary">Bug-fix for bug on Hints and mapId (for version 4.4.1)</field>
	<field name="open_date">1234439565</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">Dozer v.5.0</field>
	<field name="details">failure to use deep-index hint when mapping using a map-id (see my previously posted test)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1234929614</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Hi Tom,

I applied the patch to the 5.0 codebase and it worked great.  All
regression tests passed after applying your patch.  Thanks for taking the
time to submit this patch.  5.0 should be released to prod soon.

Thanks,
Matt
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234929614</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1234929614</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1234929614</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">893795</field>
		<field name="entrydate">1234929614</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1234929614</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">313216: BugFix_4.4.1_bugHintAndMapID.patch</field>
		<field name="entrydate">1234439565</field>
		<field name="mod_by">tomrigole</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2836434</field>
	<field user_id="449266" name="submitted_by">hboutemy</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">remove unused imports</field>
	<field name="open_date">1250106332</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v.5.2</field>
	<field name="details">import sun.reflect.Reflection; is particularly annoying since my IDE complains
whule at it, I took a pass at other unused imports...</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1254588440</field>
		<field name="user_name">buzdin</field>
		<field name="body">Thanks, did imports optimization on the source code.
Turned out there was a lot of unused ones.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1254588442</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1254588442</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1254588442</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1254588442</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1251272079</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">338943: dozer_unused_imports.diff</field>
		<field name="entrydate">1250106332</field>
		<field name="mod_by">hboutemy</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2812014</field>
	<field user_id="7566" name="submitted_by">collin_g</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Support for multiple inner classes in JAXBBeanFactory</field>
	<field name="open_date">1245919191</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">JAXBBeanFactory for 5.0 does not support multiple innerclasses generated by jaxb.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1246390987</field>
		<field name="user_name">buzdin</field>
		<field name="body">Integrated into trunk. Will be part of 5.1 release. Thank you!</field>
</message>

<message>
		<field name="adddate">1245958249</field>
		<field name="user_name">buzdin</field>
		<field name="body">Hello,
May I kindly ask you to provide a test case reproducing the bug along with patch. This would help greatly in incorporating the changes.</field>
</message>

<message>
		<field name="adddate">1245919367</field>
		<field name="user_name">collin_g</field>
		<field name="body">That is, you get an error when jaxb generates an inner class inside an inner class.
This happens when JAXb encounters anonymous complex type inside anonymous complex type in the xsd used for generation.

The attached modified source file solves the issue.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">893796</field>
		<field name="entrydate">1246390987</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1246390987</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1246390987</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1246390987</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1246390987</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245958249</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">332311: JAXBBeanFactory.java</field>
		<field name="entrydate">1245919195</field>
		<field name="mod_by">collin_g</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2655658</field>
	<field user_id="2375569" name="submitted_by">andor72</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Out of Date</field>
	<field name="summary">Added support for generic fields</field>
	<field name="open_date">1236032435</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Widget (example)</field>
	<field name="artifact_group_id">Dozer v.4.4</field>
	<field name="details">Hi,
recently I've been adding support for generic fields to Dozer. The changed source files (FieldMap and Jdk5Methods) are appended as well as some testcases.

With this changes, Dozer is able to handle parameterized types, like the following, correct:

public class AbstractDto&#60;T extends Serializable&#62;
  implements Dto&#60;T&#62; {

  private T id;

  public T getId() {
    return id;
  }

  public void setId(final T id) {
    this.id = id;
  }

}

Cause of type erasure, there has always to be a true implementation like

public class A
  extends AbstractDto&#60;Long&#62; {
}



At runtime it detects the actual type of &#60;T&#62; correctly and applies the appropriate type conversion. At the moment it is possible to handle the   usecases documented by the tests.

Test cases are included.

Maybe you like it,
Regards Andor


</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1240945513</field>
		<field name="user_name">buzdin</field>
		<field name="body">This patch targets Dozer 4.4 and is out of date. According patch for v 5 has been accepted and merged.</field>
</message>

<message>
		<field name="adddate">1236160664</field>
		<field name="user_name">andor72</field>
		<field name="body">Uploaded the next and final version

Changes made:
Added fix for bridge methods 
Refactored code and added documentation

Best regards
Andor Greissl


P.S. It would be nice if the changes could make it into release 4.4.2

File Added: dozergenerics.zip</field>
</message>

<message>
		<field name="adddate">1236103722</field>
		<field name="user_name">andor72</field>
		<field name="body">Just refactored the implementation to cache the resolved property type and to inspect bot read and write method.
File Added: dozergenerics.zip</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1240945513</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1240945513</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240945513</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1240945513</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1240945513</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">316027: </field>
		<field name="entrydate">1236160684</field>
		<field name="mod_by">andor72</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">315892: </field>
		<field name="entrydate">1236160684</field>
		<field name="mod_by">andor72</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">316124: dozergenerics.zip</field>
		<field name="entrydate">1236160664</field>
		<field name="mod_by">andor72</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">316027: dozergenerics.zip</field>
		<field name="entrydate">1236103722</field>
		<field name="mod_by">andor72</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">315892: dozergenerics.zip</field>
		<field name="entrydate">1236032435</field>
		<field name="mod_by">andor72</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2800951</field>
	<field user_id="2520297" name="submitted_by">mariusz-pala</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Patch for map mapping with null values</field>
	<field name="open_date">1244104409</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">Hi, I have a simple class with just one field: HashMap.
Mapping works when there is no null values. But when there is one, all
other values are missing.

I found the cause of this issue (return statement):
Class MappingProcessor (revision 924) line 528 (method mapMap)

There is:

if (srcEntryValue == null) { // overwrites with null in any case
result.put(srcEntry.getKey(), null);
return result;
}

Should be:

if (srcEntryValue == null) { // overwrites with null in any case
result.put(srcEntry.getKey(), null);
continue;
}

So &#34;continue&#34; instead of &#34;return result&#34;.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1244492277</field>
		<field name="user_name">buzdin</field>
		<field name="body">Bug is reproduced and fixed as you have suggested. 

Thank you!
Dmitry
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244492278</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244492278</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1244492278</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1244492278</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1244492278</field>
		<field name="mod_by">buzdin</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2644350</field>
	<field user_id="1152152" name="submitted_by">peterox</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Patch to fix mapping to Map backed with inheritance</field>
	<field name="open_date">1235715129</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.1</field>
	<field name="details">This patch fixes two things

1)  If there is a mapping from a sub-class to an interface and also a mapping for a super class to the same interface the superclass mapping is never processed as currently the superclass hierarchy and the interface hierarchy are searched separately. 

2) The there is a mapping from a sub-class to the java.util.Map interface and also a mapping for a super class to the same interface the sub class fields were not being mapped because of a bug in mappedParentFields key generation.

The patch consistes of two fixes and unit tests.

1) Changed the super class mapping search code to process all combinations of both the super classes and interfaces between the source and destination classes.

2) Change the key generation in MappingUtils.getMappedParentFieldKey() to also use the key field if it is set.



</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1245958072</field>
		<field name="user_name">buzdin</field>
		<field name="body">Thanks a lot for the patch!
It has been incorporated with slight changes into 5.1 release.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1245958072</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1245958072</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245958072</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">category_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245958072</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245958072</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1245958072</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1245958072</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">315363: patch.txt</field>
		<field name="entrydate">1235715129</field>
		<field name="mod_by">peterox</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2906090</field>
	<field user_id="1846937" name="submitted_by">timnee</field>
	<field user_id="1287959" name="assigned_to">buzdin</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Allow mapping of Abstract classes</field>
	<field name="open_date">1259600718</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v.5.2</field>
	<field name="details">Reverted code removed from 4.0 that allowed for mapping of abstract classes.</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1261338531</field>
		<field name="user_name">buzdin</field>
		<field name="body">patch applied in trunk</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1261338531</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">898996</field>
		<field name="entrydate">1261338531</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1261338531</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1261338531</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1261338531</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1261338531</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">353154: abstract class mapping with testcase.patch</field>
		<field name="entrydate">1259602736</field>
		<field name="mod_by">timnee</field>
</history>

<history>
		<field name="field_name">File Deleted</field>
		<field name="old_value">353153: </field>
		<field name="entrydate">1259602736</field>
		<field name="mod_by">timnee</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">353153: abstract class mapping.patch</field>
		<field name="entrydate">1259600722</field>
		<field name="mod_by">timnee</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2880901</field>
	<field user_id="2418250" name="submitted_by">vadeg</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Patch for bug 2826468</field>
	<field name="open_date">1255768380</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v.5.2</field>
	<field name="details">Patch  contains:
- test for the bug
- failure test with indexed read property</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1261338676</field>
		<field name="user_name">buzdin</field>
		<field name="body">fixed in trunk</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1261338676</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1261338676</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1261338676</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1261338676</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">347005: 2826468.patch</field>
		<field name="entrydate">1255768389</field>
		<field name="mod_by">vadeg</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2940487</field>
	<field user_id="2784924" name="submitted_by">jonanstey</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Closed</field>
	<field name="resolution">Accepted</field>
	<field name="summary">Enable OSGi deployment for Dozer</field>
	<field name="open_date">1264540302</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v5.2.1</field>
	<field name="details">I needed to deploy Dozer as an OSGi bundle in another project recently... figured you guys might want a patch for that so here you go :)</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1272393964</field>
		<field name="user_name">buzdin</field>
		<field name="body">Since 5.2.1 release Dozer is available as osgi bundle as well.</field>
</message>

<message>
		<field name="adddate">1266318452</field>
		<field name="user_name">buzdin</field>
		<field name="body">Thanks, I will release it to maven repo this week.</field>
</message>

<message>
		<field name="adddate">1265640751</field>
		<field name="user_name">jonanstey</field>
		<field name="body">Sorry for the delay here - I received no notifications on this issue in my email... I updated to trunk rev 999 and tested out the new dozer-osgi artifact in my environment. Works great!</field>
</message>

<message>
		<field name="adddate">1265043085</field>
		<field name="user_name">buzdin</field>
		<field name="body">Thanks, 

As we do not want to change our packaging type from jar to bundle I have created a separate maven module for OSGi. 

Could you please check bundle uploaded to SF download site if everything works fine. If it is, I will publish dozer.osgi artifact to Maven repo,
</field>
</message>

<message>
		<field name="adddate">1264627562</field>
		<field name="user_name">jonanstey</field>
		<field name="body">Shouldn't need to do that manually since the maven-bundle-plugin figures out this for you (see http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html#ApacheFelixMavenBundlePlugin(BND)-DefaultBehavior). 

Take a look at the maifest file in the generated jar for an example.</field>
</message>

<message>
		<field name="adddate">1264576561</field>
		<field name="user_name">vadeg</field>
		<field name="body">Is bundle works fine after deploying? I think, you need to define dependencies with commons-**, cglib, asm and other libraries in the Manifest file. 

For example:
                &#60;groupId&#62;org.apache.felix&#60;/groupId&#62;
                &#60;artifactId&#62;maven-bundle-plugin&#60;/artifactId&#62;
                &#60;configuration&#62;
                    &#60;instructions&#62;
                        &#60;Import-Package&#62;
                            org.apache.commons.*, org.asm.*
                        &#60;/Import-Package&#62;
                    &#60;/instructions&#62;
                &#60;/configuration&#62;
            &#60;/plugin&#62;
</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1272393964</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1272393964</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">artifact_group_id</field>
		<field name="old_value">942315</field>
		<field name="entrydate">1272393964</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1272393964</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1272393964</field>
		<field name="mod_by">buzdin</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">360403: dozer-osgi.patch</field>
		<field name="entrydate">1264540303</field>
		<field name="mod_by">jonanstey</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2218439</field>
	<field user_id="2270665" name="submitted_by">tomrigole</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Bug fix indexed collections</field>
	<field name="open_date">1225701084</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Appartently, the deep-index-hint is not always used in an optimal way to determine the ClassMap instance. I have an  example where an object (e.g. type 'FooSrc') is mapped to a (non-generic with index-hint) Vector containing 'FooDest' and Dozer uses the couple FooSrc-Vector to determine the ClassMap instead of FooSrc-FooDest.

I've created test (which also includes the other patch I commited) which shows the case (based on 4.2.1).</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1228592975</field>
		<field name="user_name">mhtierney</field>
		<field name="body">I didn't apply this patch because the unit tests you submitted ran green after applying the other patch.  If you can submit a test case that runs red that this patch fixes, i can apply it.  Thanks</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1228592975</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228592975</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1228592975</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">299927: DeepIndexHint.patch</field>
		<field name="entrydate">1225701084</field>
		<field name="mod_by">tomrigole</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1936487</field>
	<field user_id="137420" name="submitted_by">igeorg</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">Inheritance mapping &#38; base class properties</field>
	<field name="open_date">1207552273</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Dozer seems not handling inheritance mapping automatically when copying a derived class instance to a base class property. E.g. for the following hierarchy, mapping Container to CopyContainer fails when Container.base is an Extended instance:

class Container {
  Base base;
}
abstract class Base {
}
abstract class Extended extends Base {
}

class CopyContainer {
  CopyBase base;
}
abstract class CopyBase {
}
abstract class CopyExtended extends CopyBase {
}

The patch is below. If the ClassMapFinder fails to find an exact match, and before trying interface matching, it looks up all mappings where the source &#38; destination classes are equal or one is in the hierarchy of the other and collects them into a list which is sorted by the source &#38; destination classes highest in the class hierarchy (i.e. subclasses have a higher weight in the sort order). Then it picks the ClassMap with highest weight.

The patch has not been extensively tested but seems to work for us.

Thanks
 John
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1228593028</field>
		<field name="user_name">mhtierney</field>
		<field name="body">I applied this patch and it broke some of our other regression tests, so not able to apply it as-is.  </field>
</message>

<message>
		<field name="adddate">1207552528</field>
		<field name="user_name">igeorg</field>
		<field name="body">Logged In: YES 
user_id=137420
Originator: YES

Please ignore the 'abstract' keyword in front of the Extended &#38; Copy Extended classes in the above example.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1228593028</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228593028</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1228593028</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">273549: ClassMapFinder.patch</field>
		<field name="entrydate">1207552277</field>
		<field name="mod_by">igeorg</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2033478</field>
	<field user_id="195862" name="submitted_by">jffmrk</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">global configuration overwritten patch</field>
	<field name="open_date">1217479297</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Attached is the patch for bug #1982256.  I originally included the patch in the comment of the bug report:
https://sourceforge.net/tracker/index.php?func=detail&#38;aid=1982256&#38;group_id=133517&#38;atid=727368

but I thought this might be a better place for it.  The patch is based off version 4.2.1.  Feel free to modify as needed.  Hope this helps.

Thanks,
-Jeff

</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1228593105</field>
		<field name="user_name">mhtierney</field>
		<field name="body">The global configuration is going to be reworked in the near future which should eliminate the need for this patch.  See tickets 1806689 and 1982256</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1228593105</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1228593105</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1228593105</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">286579: dozer-4.2.1_global-configuration.patch</field>
		<field name="entrydate">1217479298</field>
		<field name="mod_by">jffmrk</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">1653306</field>
	<field user_id="57504" name="submitted_by">svanpo</field>
	<field user_id="1236069" name="assigned_to">mhtierney</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">None</field>
	<field name="summary">To copy and array of objects</field>
	<field name="open_date">1170770040</field>
	<field name="artifact_type">Patches</field>
	<field name="category">None</field>
	<field name="artifact_group_id">None</field>
	<field name="details">Hello,

I realized a little patch to copy an array. I don't know if it works with Spring because i don't use it, but maybe it will be able to help you a little.

The function to test:
public static void main(String[] args) {
Actor[] actors = new Actor[3];
actors[0] = new Actor();
actors[0].setName(&#34;Leonardo DiCaprio&#34;);
actors[1] = new Actor();
actors[1].setName(&#34;Matt Damon&#34;);
actors[2] = new Actor();
actors[2].setName(&#34;Jack Nicholson&#34;);

// Recopie automatique des beans
MapperIF mapper = DozerBeanMapperSingletonWrapper.getInstance();
NewActor[] newActors = (NewActor[])mapper.map(actors, NewActor[].class);

// Affichage du r&#195;&#169;sultat
for (int i=0; i&#60;newActors.length; i++) {
System.out.println(&#34;newActors.name: &#34;+newActors[i].getName());
}
}

Best regards,
St&#195;&#169;phane VANPOPERYNGHE</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1178249179</field>
		<field name="user_name">mhtierney</field>
		<field name="body">Logged In: YES 
user_id=1236069
Originator: NO

Thanks for submitting this patch.  Deferred for now until it could be made more generic to handle all Collection use cases.</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1178249179</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">assigned_to</field>
		<field name="old_value">100</field>
		<field name="entrydate">1178249179</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1178249179</field>
		<field name="mod_by">mhtierney</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">214731: dozer-2.4.patch</field>
		<field name="entrydate">1170770040</field>
		<field name="mod_by">svanpo</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2992432</field>
	<field user_id="1846937" name="submitted_by">timnee</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">Duplicate</field>
	<field name="summary">More Abstract Mapping fixes</field>
	<field name="open_date">1272301769</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v.5.2</field>
	<field name="details">This patch fixes two bugs I discovered

1) Level two mapping of abstract class with custom mapping fails when a proxy is used.  See InheritanceAbstractClassMappingTest.testCustomMappingForAbstractDestClassLevelTwo()

2) Mapping of a generic collection of an abstract class with custom mapping fails.  See InheritanceAbstractClassMappingTest.testCustomMappingForAbstractDestClassCollection()
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1272302089</field>
		<field name="mod_by">timnee</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1272302089</field>
		<field name="mod_by">timnee</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1272302089</field>
		<field name="mod_by">timnee</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1272302089</field>
		<field name="mod_by">timnee</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">371905: AbstractMappingFixes.txt</field>
		<field name="entrydate">1272301769</field>
		<field name="mod_by">timnee</field>
</history>
</field>
</artifact>
<artifact>
	<field name="artifact_id">2992404</field>
	<field user_id="1846937" name="submitted_by">timnee</field>
	<field user_id="100" name="assigned_to">nobody</field>
	<field name="priority">5</field>
	<field name="status">Deleted</field>
	<field name="resolution">Duplicate</field>
	<field name="summary">More Abstract Mapping fixes</field>
	<field name="open_date">1272299681</field>
	<field name="artifact_type">Patches</field>
	<field name="category">Source Code Patch</field>
	<field name="artifact_group_id">Dozer v.5.2</field>
	<field name="details">This patch fixes two bugs I discovered

1) Level two mapping of abstract class with custom mapping fails when a proxy is used.  See InheritanceAbstractClassMappingTest.testCustomMappingForAbstractDestClassLevelTwo()

2) Mapping of a generic collection of an abstract class with custom mapping fails.  See InheritanceAbstractClassMappingTest.testCustomMappingForAbstractDestClassCollection()
</field>
	<field name="artifact_messages">
<message>
		<field name="adddate">1272391129</field>
		<field name="user_name">timnee</field>
		<field name="body">This is superseded by patch 2993122</field>
</message>
</field>
	<field name="artifact_history">
<history>
		<field name="field_name">status_id</field>
		<field name="old_value">1</field>
		<field name="entrydate">1272391130</field>
		<field name="mod_by">timnee</field>
</history>

<history>
		<field name="field_name">resolution_id</field>
		<field name="old_value">100</field>
		<field name="entrydate">1272391130</field>
		<field name="mod_by">timnee</field>
</history>

<history>
		<field name="field_name">allow_comments</field>
		<field name="old_value">1</field>
		<field name="entrydate">1272391130</field>
		<field name="mod_by">timnee</field>
</history>

<history>
		<field name="field_name">close_date</field>
		<field name="old_value">0</field>
		<field name="entrydate">1272391130</field>
		<field name="mod_by">timnee</field>
</history>

<history>
		<field name="field_name">File Added</field>
		<field name="old_value">371893: AbstractMappingFixes.txt</field>
		<field name="entrydate">1272299681</field>
		<field name="mod_by">timnee</field>
</history>
</field>
</artifact>
</artifacts>

<tasks>
	<project>	<field group_project_id="42102" name="group_project_id">remove TODOs</field>
	<field name="is_public">true</field>
	<field name="description"></field>

	</project>	<project>	<field group_project_id="42106" name="group_project_id">add tests for wildcard = false</field>
	<field name="is_public">true</field>
	<field name="description"></field>

	</project>	<project>	<field group_project_id="42119" name="group_project_id">String to Date Formatting</field>
	<field name="is_public">true</field>
	<field name="description"></field>

	</project>	<project>	<field group_project_id="42118" name="group_project_id">Rewrite Parsing/Assembler Code</field>
	<field name="is_public">true</field>
	<field name="description"></field>

		<task>	<field name="project_task_id">113861</field>
	<field group_project_id="42118" name="group_project_id">Rewrite Parsing/Assembler Code</field>
	<field name="summary">rewrite parsing...assembler</field>
	<field name="details">use xml parser, and create functionality for multiple classes into one and vice versa.</field>
	<field name="percent_complete">0</field>
	<field name="priority">5</field>
	<field name="hours">0</field>
	<field name="start_date">1111968000</field>
	<field name="end_date">1111968000</field>
	<field user_id="550744" name="created_by">fgarsombke</field>
	<field name="status_id">1</field>

		</task>
	</project>	<project>	<field group_project_id="42117" name="group_project_id">Fix infinite loop</field>
	<field name="is_public">true</field>
	<field name="description"></field>

	</project>	<project>	<field group_project_id="42104" name="group_project_id">Add Constants</field>
	<field name="is_public">true</field>
	<field name="description"></field>

	</project>	<project>	<field group_project_id="42101" name="group_project_id">use spring for bean creation</field>
	<field name="is_public">true</field>
	<field name="description">Allow the ability to add in a spring context file for creating destination beans</field>

		<task>	<field name="project_task_id">113848</field>
	<field group_project_id="42101" name="group_project_id">use spring for bean creation</field>
	<field name="summary">Add XML line to location springcontext file</field>
	<field name="details">   </field>
	<field name="percent_complete">0</field>
	<field name="priority">5</field>
	<field name="hours">0</field>
	<field name="start_date">1111993200</field>
	<field name="end_date">1111993200</field>
	<field user_id="1232046" name="created_by">bgsesr</field>
	<field name="status_id">1</field>

		</task>
		<task>	<field name="project_task_id">113849</field>
	<field group_project_id="42101" name="group_project_id">use spring for bean creation</field>
	<field name="summary">check for bean in spring context or not</field>
	<field name="details">  </field>
	<field name="percent_complete">0</field>
	<field name="priority">5</field>
	<field name="hours">0</field>
	<field name="start_date">1111993200</field>
	<field name="end_date">1111993200</field>
	<field user_id="1232046" name="created_by">bgsesr</field>
	<field name="status_id">1</field>

		</task>
	</project>	<project>	<field group_project_id="42105" name="group_project_id">Pass ClassMap around to method</field>
	<field name="is_public">false</field>
	<field name="description"></field>

		<task>	<field name="project_task_id">113846</field>
	<field group_project_id="42105" name="group_project_id">Pass ClassMap around to method</field>
	<field name="summary">mapFromXXXX()</field>
	<field name="details">should we pass in the classmap instead of just the fields?</field>
	<field name="percent_complete">0</field>
	<field name="priority">5</field>
	<field name="hours">0</field>
	<field name="start_date">1111993200</field>
	<field name="end_date">1111993200</field>
	<field user_id="1232046" name="created_by">bgsesr</field>
	<field name="status_id">1</field>

		</task>
		<task>	<field name="project_task_id">113847</field>
	<field group_project_id="42105" name="group_project_id">Pass ClassMap around to method</field>
	<field name="summary">classmap to addFieldMap()?</field>
	<field name="details">details</field>
	<field name="percent_complete">0</field>
	<field name="priority">5</field>
	<field name="hours">0</field>
	<field name="start_date">1111993200</field>
	<field name="end_date">1111993200</field>
	<field user_id="1232046" name="created_by">bgsesr</field>
	<field name="status_id">1</field>

		</task>
	</project>	<project>	<field group_project_id="42120" name="group_project_id">Reg Exp Mappings</field>
	<field name="is_public">false</field>
	<field name="description"></field>

	</project>	<project>	<field group_project_id="42121" name="group_project_id">Failures</field>
	<field name="is_public">false</field>
	<field name="description"></field>

		<task>	<field name="project_task_id">113860</field>
	<field group_project_id="42121" name="group_project_id">Failures</field>
	<field name="summary">Class Level/Field Level</field>
	<field name="details">...</field>
	<field name="percent_complete">0</field>
	<field name="priority">5</field>
	<field name="hours">5</field>
	<field name="start_date">1111968000</field>
	<field name="end_date">1111968000</field>
	<field user_id="550744" name="created_by">fgarsombke</field>
	<field name="status_id">1</field>

		</task>
	</project>	<project>	<field group_project_id="42103" name="group_project_id">addFieldMap taking a classMap?</field>
	<field name="is_public">true</field>
	<field name="description"></field>

	</project>
</tasks>

<documents>
	<field name="groupname">Uncategorized Submissions</field>
	<field name="docid"></field>
	noresult: stateid
	<field name="title"></field>
	<field name="data"></field>
	<field name="updatedate"></field>
	<field name="createdate"></field>
	noresult: created_by
	noresult: doc_group
	<field name="description"></field>
	noresult: language_id

</documents>

<news>

</news>

</project_export>
